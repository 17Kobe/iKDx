import{d as Q,t as F,m as oe,n as re,c as Z,r as C,a as ke,u as at,b as B,w as N,e as ot,o as ee,f as je,g as st,h as Ve,i as it,j as Se,k as y,l as te,p as Pe,q as J,s as Ne,v as se,x as ie,y as ce,z as q,A as ct,B as rt,C as Ie,D as Be,E as lt,F as ut,G as dt,H as He,T as ft,I as Fe,J as he,K as vt,L as ht,M as gt,N as mt,O as $e,P as pt,Q as yt,R as Xe,S as wt,U as bt,V as W,W as L,X as S,Y,Z as j,_ as xt,$ as ge,a0 as me,a1 as kt,a2 as E,a3 as St,a4 as _t,a5 as G,a6 as Me}from"./index-BgFCYhhr.js";import{u as _e,a as Ce,s as Ct,p as Tt,P as Dt,b as Pt,S as It,B as Ee,c as ne}from"./index-BaMudLns.js";function Ae(e,t){return e.reduce((a,o)=>Math.abs(a-t)<Math.abs(o-t)?a:o)}const[qe,ae]=Z("swipe"),Bt={loop:F,width:re,height:re,vertical:Boolean,autoplay:oe(0),duration:oe(500),touchable:F,lazyRender:Boolean,initialSwipe:oe(0),indicatorColor:String,showIndicators:F,stopPropagation:F},Ue=Symbol(qe);var $t=Q({name:qe,props:Bt,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:a}){const o=C(),i=C(),n=ke({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let d=!1;const f=_e(),{children:r,linkChildren:m}=at(Ue),c=B(()=>r.length),b=B(()=>n[e.vertical?"height":"width"]),l=B(()=>e.vertical?f.deltaY.value:f.deltaX.value),s=B(()=>n.rect?(e.vertical?n.rect.height:n.rect.width)-b.value*c.value:0),x=B(()=>b.value?Math.ceil(Math.abs(s.value)/b.value):c.value),k=B(()=>c.value*b.value),I=B(()=>(n.active+c.value)%c.value),z=B(()=>{const v=e.vertical?"vertical":"horizontal";return f.direction.value===v}),V=B(()=>{const v={transitionDuration:`${n.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+n.offset.toFixed(2)}px)`};if(b.value){const P=e.vertical?"height":"width",D=e.vertical?"width":"height";v[P]=`${k.value}px`,v[D]=e[D]?`${e[D]}px`:""}return v}),H=v=>{const{active:P}=n;return v?e.loop?se(P+v,-1,c.value):se(P+v,0,x.value):P},A=(v,P=0)=>{let D=v*b.value;e.loop||(D=Math.min(D,-s.value));let O=P-D;return e.loop||(O=se(O,s.value,0)),O},h=({pace:v=0,offset:P=0,emitChange:D})=>{if(c.value<=1)return;const{active:O}=n,M=H(v),U=A(M,P);if(e.loop){if(r[0]&&U!==s.value){const ue=U<s.value;r[0].setOffset(ue?k.value:0)}if(r[c.value-1]&&U!==0){const ue=U>0;r[c.value-1].setOffset(ue?-k.value:0)}}n.active=M,n.offset=U,D&&M!==O&&t("change",I.value)},$=()=>{n.swiping=!0,n.active<=-1?h({pace:c.value}):n.active>=c.value&&h({pace:-c.value})},_=()=>{$(),f.reset(),te(()=>{n.swiping=!1,h({pace:-1,emitChange:!0})})},g=()=>{$(),f.reset(),te(()=>{n.swiping=!1,h({pace:1,emitChange:!0})})};let u;const w=()=>clearTimeout(u),p=()=>{w(),+e.autoplay>0&&c.value>1&&(u=setTimeout(()=>{g(),p()},+e.autoplay))},T=(v=+e.initialSwipe)=>{if(!o.value)return;const P=()=>{var D,O;if(!Pe(o)){const M={width:o.value.offsetWidth,height:o.value.offsetHeight};n.rect=M,n.width=+((D=e.width)!=null?D:M.width),n.height=+((O=e.height)!=null?O:M.height)}c.value&&(v=Math.min(c.value-1,v),v===-1&&(v=c.value-1)),n.active=v,n.swiping=!0,n.offset=A(v),r.forEach(M=>{M.setOffset(0)}),p()};Pe(o)?J().then(P):P()},K=()=>T(n.active);let Te;const Qe=v=>{!e.touchable||v.touches.length>1||(f.start(v),d=!1,Te=Date.now(),w(),$())},Ze=v=>{e.touchable&&n.swiping&&(f.move(v),z.value&&(!e.loop&&(n.active===0&&l.value>0||n.active===c.value-1&&l.value<0)||(Ne(v,e.stopPropagation),h({offset:l.value}),d||(t("dragStart",{index:I.value}),d=!0))))},De=()=>{if(!e.touchable||!n.swiping)return;const v=Date.now()-Te,P=l.value/v;if((Math.abs(P)>.25||Math.abs(l.value)>b.value/2)&&z.value){const O=e.vertical?f.offsetY.value:f.offsetX.value;let M=0;e.loop?M=O>0?l.value>0?-1:1:0:M=-Math[l.value>0?"ceil":"floor"](l.value/b.value),h({pace:M,emitChange:!0})}else l.value&&h({pace:0});d=!1,n.swiping=!1,t("dragEnd",{index:I.value}),p()},et=(v,P={})=>{$(),f.reset(),te(()=>{let D;e.loop&&v===c.value?D=n.active===0?0:v:D=v%c.value,P.immediate?te(()=>{n.swiping=!1}):n.swiping=!1,h({pace:D-n.active,emitChange:!0})})},tt=(v,P)=>{const D=P===I.value,O=D?{backgroundColor:e.indicatorColor}:void 0;return y("i",{style:O,class:ae("indicator",{active:D})},null)},nt=()=>{if(a.indicator)return a.indicator({active:I.value,total:c.value});if(e.showIndicators&&c.value>1)return y("div",{class:ae("indicators",{vertical:e.vertical})},[Array(c.value).fill("").map(tt)])};return Ce({prev:_,next:g,state:n,resize:K,swipeTo:et}),m({size:b,props:e,count:c,activeIndicator:I}),N(()=>e.initialSwipe,v=>T(+v)),N(c,()=>T(n.active)),N(()=>e.autoplay,p),N([ie,ce,()=>e.width,()=>e.height],K),N(ot(),v=>{v==="visible"?p():w()}),ee(T),je(()=>T(n.active)),st(()=>T(n.active)),Ve(w),it(w),Se("touchmove",Ze,{target:i}),()=>{var v;return y("div",{ref:o,class:ae()},[y("div",{ref:i,style:V.value,class:ae("track",{vertical:e.vertical}),onTouchstartPassive:Qe,onTouchend:De,onTouchcancel:De},[(v=a.default)==null?void 0:v.call(a)]),nt()])}}});const Mt=q($t),[Et,At]=Z("swipe-item");var Ot=Q({name:Et,setup(e,{slots:t}){let a;const o=ke({offset:0,inited:!1,mounted:!1}),{parent:i,index:n}=ct(Ue);if(!i)return;const d=B(()=>{const m={},{vertical:c}=i.props;return i.size.value&&(m[c?"height":"width"]=`${i.size.value}px`),o.offset&&(m.transform=`translate${c?"Y":"X"}(${o.offset}px)`),m}),f=B(()=>{const{loop:m,lazyRender:c}=i.props;if(!c||a)return!0;if(!o.mounted)return!1;const b=i.activeIndicator.value,l=i.count.value-1,s=b===0&&m?l:b-1,x=b===l&&m?0:b+1;return a=n.value===b||n.value===s||n.value===x,a}),r=m=>{o.offset=m};return ee(()=>{J(()=>{o.mounted=!0})}),Ce({setOffset:r}),()=>{var m;return y("div",{class:At(),style:d.value},[f.value?(m=t.default)==null?void 0:m.call(t):null])}}});const Oe=q(Ot);q(Ct);const Rt={gap:{type:[Number,Object],default:24},icon:String,axis:rt("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[zt,Re]=Z("floating-bubble");var Kt=Q({name:zt,inheritAttrs:!1,props:Rt,emits:["click","update:offset","offsetChange"],setup(e,{slots:t,emit:a,attrs:o}){const i=C(),n=C({x:0,y:0,width:0,height:0}),d=B(()=>Ie(e.gap)?e.gap.x:e.gap),f=B(()=>Ie(e.gap)?e.gap.y:e.gap),r=B(()=>({top:f.value,right:ie.value-n.value.width-d.value,bottom:ce.value-n.value.height-f.value,left:d.value})),m=C(!1);let c=!1;const b=B(()=>{const h={},$=Be(n.value.x),_=Be(n.value.y);return h.transform=`translate3d(${$}, ${_}, 0)`,(m.value||!c)&&(h.transition="none"),h}),l=()=>{if(!A.value)return;const{width:h,height:$}=Fe(i.value),{offset:_}=e;n.value={x:_?_.x:ie.value-h-d.value,y:_?_.y:ce.value-$-f.value,width:h,height:$}},s=_e();let x=0,k=0;const I=h=>{s.start(h),m.value=!0,x=n.value.x,k=n.value.y};Se("touchmove",h=>{if(h.preventDefault(),s.move(h),e.axis!=="lock"&&!s.isTap.value){if(e.axis==="x"||e.axis==="xy"){let _=x+s.deltaX.value;_<r.value.left&&(_=r.value.left),_>r.value.right&&(_=r.value.right),n.value.x=_}if(e.axis==="y"||e.axis==="xy"){let _=k+s.deltaY.value;_<r.value.top&&(_=r.value.top),_>r.value.bottom&&(_=r.value.bottom),n.value.y=_}const $=he(n.value,["x","y"]);a("update:offset",$)}},{target:i});const V=()=>{m.value=!1,J(()=>{if(e.magnetic==="x"){const h=Ae([r.value.left,r.value.right],n.value.x);n.value.x=h}if(e.magnetic==="y"){const h=Ae([r.value.top,r.value.bottom],n.value.y);n.value.y=h}if(!s.isTap.value){const h=he(n.value,["x","y"]);a("update:offset",h),(x!==h.x||k!==h.y)&&a("offsetChange",h)}})},H=h=>{s.isTap.value?a("click",h):h.stopPropagation()};ee(()=>{l(),J(()=>{c=!0})}),N([ie,ce,d,f,()=>e.offset],l,{deep:!0});const A=C(!0);return je(()=>{A.value=!0}),Ve(()=>{e.teleport&&(A.value=!1)}),()=>{const h=lt(y("div",He({class:Re(),ref:i,onTouchstartPassive:I,onTouchend:V,onTouchcancel:V,onClickCapture:H,style:b.value},o),[t.default?t.default():y(dt,{name:e.icon,class:Re("icon")},null)]),[[ut,A.value]]);return e.teleport?y(ft,{to:e.teleport},{default:()=>[h]}):h}}});const Lt=q(Kt),Wt=e=>e?.includes("/"),Yt=[...Tt,"round","closeOnPopstate","safeAreaInsetBottom"],jt={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[Vt,R,Nt]=Z("share-sheet"),Ht=vt({},Pt,{title:String,round:F,options:ht(),cancelText:String,description:String,closeOnPopstate:F,safeAreaInsetBottom:F});var Ft=Q({name:Vt,props:Ht,emits:["cancel","select","update:show"],setup(e,{emit:t,slots:a}){const o=l=>t("update:show",l),i=()=>{o(!1),t("cancel")},n=(l,s)=>t("select",l,s),d=()=>{const l=a.title?a.title():e.title,s=a.description?a.description():e.description;if(l||s)return y("div",{class:R("header")},[l&&y("h2",{class:R("title")},[l]),s&&y("span",{class:R("description")},[s])])},f=l=>Wt(l)?y("img",{src:l,class:R("image-icon")},null):y("div",{class:R("icon",[l])},[y(mt,{name:jt[l]||l},null)]),r=(l,s)=>{const{name:x,icon:k,className:I,description:z}=l;return y("div",{role:"button",tabindex:0,class:[R("option"),I,gt],onClick:()=>n(l,s)},[f(k),x&&y("span",{class:R("name")},[x]),z&&y("span",{class:R("option-description")},[z])])},m=(l,s)=>y("div",{class:R("options",{border:s})},[l.map(r)]),c=()=>{const{options:l}=e;return Array.isArray(l[0])?l.map((s,x)=>m(s,x!==0)):m(l)},b=()=>{var l;const s=(l=e.cancelText)!=null?l:Nt("cancel");if(a.cancel||s)return y("button",{type:"button",class:R("cancel"),onClick:i},[a.cancel?a.cancel():s])};return()=>y(Dt,He({class:R(),position:"bottom","onUpdate:show":o},he(e,Yt)),{default:()=>[d(),c(),b()]})}});const Xt=q(Ft),[qt,de]=Z("swipe-cell"),Ut={name:oe(""),disabled:Boolean,leftWidth:re,rightWidth:re,beforeClose:Function,stopPropagation:Boolean};var Gt=Q({name:qt,props:Ut,emits:["open","close","click"],setup(e,{emit:t,slots:a}){let o,i,n,d;const f=C(),r=C(),m=C(),c=ke({offset:0,dragging:!1}),b=_e(),l=g=>g.value?Fe(g).width:0,s=B(()=>$e(e.leftWidth)?+e.leftWidth:l(r)),x=B(()=>$e(e.rightWidth)?+e.rightWidth:l(m)),k=g=>{c.offset=g==="left"?s.value:-x.value,o||(o=!0,t("open",{name:e.name,position:g}))},I=g=>{c.offset=0,o&&(o=!1,t("close",{name:e.name,position:g}))},z=g=>{const u=Math.abs(c.offset),w=.15,p=o?1-w:w,T=g==="left"?s.value:x.value;T&&u>T*p?k(g):I(g)},V=g=>{e.disabled||(n=c.offset,b.start(g))},H=g=>{if(e.disabled)return;const{deltaX:u}=b;b.move(g),b.isHorizontal()&&(i=!0,c.dragging=!0,(!o||u.value*n<0)&&Ne(g,e.stopPropagation),c.offset=se(u.value+n,-x.value,s.value))},A=()=>{c.dragging&&(c.dragging=!1,z(c.offset>0?"left":"right"),setTimeout(()=>{i=!1},0))},h=(g="outside",u)=>{d||(t("click",g),o&&!i&&(d=!0,yt(e.beforeClose,{args:[{event:u,name:e.name,position:g}],done:()=>{d=!1,I(g)},canceled:()=>d=!1,error:()=>d=!1})))},$=g=>u=>{(i||o)&&u.stopPropagation(),!i&&h(g,u)},_=(g,u)=>{const w=a[g];if(w)return y("div",{ref:u,class:de(g),onClick:$(g)},[w()])};return Ce({open:k,close:I}),pt(f,g=>h("outside",g),{eventName:"touchstart"}),Se("touchmove",H,{target:f}),()=>{var g;const u={transform:`translate3d(${c.offset}px, 0, 0)`,transitionDuration:c.dragging?"0s":".6s"};return y("div",{ref:f,class:de(),onClick:$("cell"),onTouchstartPassive:V,onTouchend:A,onTouchcancel:A},[y("div",{class:de("wrapper"),style:u},[_("left",r),(g=a.default)==null?void 0:g.call(a),_("right",m)])])}}});const Jt=q(Gt),pe=(e,t)=>t.some(a=>e instanceof a);let ze,Ke;function Qt(){return ze||(ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zt(){return Ke||(Ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ye=new WeakMap,fe=new WeakMap,le=new WeakMap;function en(e){const t=new Promise((a,o)=>{const i=()=>{e.removeEventListener("success",n),e.removeEventListener("error",d)},n=()=>{a(X(e.result)),i()},d=()=>{o(e.error),i()};e.addEventListener("success",n),e.addEventListener("error",d)});return le.set(t,e),t}function tn(e){if(ye.has(e))return;const t=new Promise((a,o)=>{const i=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",d),e.removeEventListener("abort",d)},n=()=>{a(),i()},d=()=>{o(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",n),e.addEventListener("error",d),e.addEventListener("abort",d)});ye.set(e,t)}let we={get(e,t,a){if(e instanceof IDBTransaction){if(t==="done")return ye.get(e);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return X(e[t])},set(e,t,a){return e[t]=a,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ge(e){we=e(we)}function nn(e){return Zt().includes(e)?function(...t){return e.apply(be(this),t),X(this.request)}:function(...t){return X(e.apply(be(this),t))}}function an(e){return typeof e=="function"?nn(e):(e instanceof IDBTransaction&&tn(e),pe(e,Qt())?new Proxy(e,we):e)}function X(e){if(e instanceof IDBRequest)return en(e);if(fe.has(e))return fe.get(e);const t=an(e);return t!==e&&(fe.set(e,t),le.set(t,e)),t}const be=e=>le.get(e);function on(e,t,{blocked:a,upgrade:o,blocking:i,terminated:n}={}){const d=indexedDB.open(e,t),f=X(d);return o&&d.addEventListener("upgradeneeded",r=>{o(X(d.result),r.oldVersion,r.newVersion,X(d.transaction),r)}),a&&d.addEventListener("blocked",r=>a(r.oldVersion,r.newVersion,r)),f.then(r=>{n&&r.addEventListener("close",()=>n()),i&&r.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const sn=["get","getKey","getAll","getAllKeys","count"],cn=["put","add","delete","clear"],ve=new Map;function Le(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ve.get(t))return ve.get(t);const a=t.replace(/FromIndex$/,""),o=t!==a,i=cn.includes(a);if(!(a in(o?IDBIndex:IDBObjectStore).prototype)||!(i||sn.includes(a)))return;const n=async function(d,...f){const r=this.transaction(d,i?"readwrite":"readonly");let m=r.store;return o&&(m=m.index(f.shift())),(await Promise.all([m[a](...f),i&&r.done]))[0]};return ve.set(t,n),n}Ge(e=>({...e,get:(t,a,o)=>Le(t,a)||e.get(t,a,o),has:(t,a)=>!!Le(t,a)||e.has(t,a)}));const rn=["continue","continuePrimaryKey","advance"],We={},xe=new WeakMap,Je=new WeakMap,ln={get(e,t){if(!rn.includes(t))return e[t];let a=We[t];return a||(a=We[t]=function(...o){xe.set(this,Je.get(this)[t](...o))}),a}};async function*un(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const a=new Proxy(t,ln);for(Je.set(a,t),le.set(a,be(t));t;)yield a,t=await(xe.get(a)||t.continue()),xe.delete(a)}function Ye(e,t){return t===Symbol.asyncIterator&&pe(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&pe(e,[IDBIndex,IDBObjectStore])}Ge(e=>({...e,get(t,a,o){return Ye(t,a)?un:e.get(t,a,o)},has(t,a){return Ye(t,a)||e.has(t,a)}}));const dn=on("stock-db",1,{upgrade(e){e.objectStoreNames.contains("stocks")||e.createObjectStore("stocks",{keyPath:"id"})}});async function fn(){const e=await dn;if(await e.count("stocks")>0)return await e.getAll("stocks");{const i=await(await fetch("/iKDx/"+"stocks/stocks.json")).json(),n=e.transaction("stocks","readwrite"),d=n.objectStore("stocks");for(const f of i)await d.put(f);return await n.done,i}}const vn={style:{display:"flex","flex-direction":"column",height:"100%","min-height":"60vh"}},hn={style:{flex:"1 1 auto"}},gn={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},mn=["onClick"],pn={key:0,style:{"margin-top":"12px"}},yn={key:0},wn={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},bn={style:{"font-size":"16px",color:"#333",flex:"1"}},xn={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},kn={__name:"StockSearch",setup(e){const t=Xe("stock-search"),a=C(!1);ee(()=>{t.on(s=>{a.value=s})}),wt(()=>{t.reset()});const o=C(),i=C(""),n=C([]),d=["台積電","鴻海","聯發科","長榮","中鋼"],f={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},r={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function m(s){return i.value===s?{...f,...r}:f}function c(){J(()=>{const s=o.value?.$el?.querySelector("input");s&&s.focus()})}N(()=>a.value,s=>{s&&setTimeout(()=>{c()},300)}),N(()=>i.value,async s=>{if(!s||s.length<1){n.value=[];return}const x=await fn();n.value=x.filter(k=>k.name.includes(s)||k.id.includes(s))});function b(s){}function l(s){i.value=s}return(s,x)=>(W(),bt(Y(Xt),{show:a.value,"onUpdate:show":x[1]||(x[1]=k=>Y(t).emit(!1)),"cancel-text":"離開",options:[],style:{"--van-share-sheet-header-padding":"24px 24px 0 24px"}},{title:L(()=>x[2]||(x[2]=[S("div",{style:{"font-size":"18px","font-weight":"bold","letter-spacing":"1px","text-align":"center","margin-top":"0","margin-bottom":"0",color:"#222","line-height":"1.2"}}," 股票搜尋 ",-1)])),description:L(()=>[S("div",vn,[S("div",hn,[S("div",null,[y(Y(It),{ref_key:"searchInputRef",ref:o,modelValue:i.value,"onUpdate:modelValue":x[0]||(x[0]=k=>i.value=k),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:b},null,8,["modelValue"])]),S("div",null,[x[3]||(x[3]=S("div",{style:{display:"flex","align-items":"center",margin:"0 0 10px 0"}},[S("div",{style:{"margin-left":"16px","font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px"}}," | 熱門股票 ")],-1)),S("div",gn,[(W(),j(ge,null,me(d,k=>S("span",{key:k,onClick:I=>l(k),style:kt(m(k))},E(k),13,mn)),64))]),i.value&&i.value.length>=1?(W(),j("div",pn,[n.value.length?(W(),j("div",yn,[(W(!0),j(ge,null,me(n.value,k=>(W(),j("div",{key:k.id,style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"16px 20px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px"}},[S("div",wn,E(k.id),1),S("div",bn,E(k.name),1)]))),128))])):(W(),j("div",xn," 查無資料 "))])):xt("",!0)])])])]),_:1},8,["show"]))}},Sn={class:"stock-page"},_n=["onTouchstart"],Cn={class:"action-buttons"},Tn={class:"stock-content"},Dn={class:"stock-name"},Pn={class:"name"},In={class:"code"},Bn={class:"stock-indicator"},$n={class:"kd-indicator"},Mn={class:"kd-value"},En={class:"rsi-indicator"},An={class:"rsi-value"},On={__name:"Stock",setup(e){const t=Xe("stock-search"),a=C(null);C(null),C(0);const o=C(-1),i=C(0),n=C(0),d=C(!1),f=C(null),r=C([{id:"2330",name:"台積電",code:"2330",price:1140,change:-1.72,changePercent:-.15,weeklyKD:22.6,rsi:45.2},{id:"2317",name:"鴻海",code:"2317",price:135,change:1.45,changePercent:1.08,weeklyKD:68.5,rsi:62.1},{id:"2454",name:"聯發科",code:"2454",price:1350,change:-18.5,changePercent:-1.35,weeklyKD:20.8,rsi:38.9},{id:"2881",name:"富邦金",code:"2881",price:31.55,change:.35,changePercent:1.12,weeklyKD:72.3,rsi:58.7},{id:"0056",name:"元大高股息",code:"0056",price:34.81,change:.02,changePercent:.06,weeklyKD:55.4,rsi:52.1},{id:"1215",name:"卜蜂",code:"1215",price:115.5,change:-.5,changePercent:-.43,weeklyKD:56.87,rsi:71.63},{id:"2885",name:"元大金",code:"2885",price:34.81,change:.06,changePercent:.17,weeklyKD:73.16,rsi:80.46},{id:"2646",name:"星宇航空",code:"2646",price:47.7,change:.5,changePercent:1.06,weeklyKD:54.87,rsi:58.55},{id:"2646",name:"華泰",code:"2646",price:47.7,change:.5,changePercent:1.06,weeklyKD:54.87,rsi:58.55}]);function m(){t.emit(!0)}function c(u,w){console.log(`Stock ${w} indicator changed to ${u}`)}function b(u){return u>0?"price-up":u<0?"price-down":"price-flat"}function l(u){return u>80?"kd-overbought":u<20?"kd-oversold":"kd-normal"}function s(u){return u>80?"超買":u<20?"超賣":"正常"}function x(u){return u>70?"rsi-overbought":u<30?"rsi-oversold":"rsi-normal"}function k(u){return u>70?"超買":u<30?"超賣":"正常"}function I(){}function z(u){ne(`買賣 ${u.name}`)}function V(u){ne(`${u.name} 策略設定`)}function H(u,w){const p=u.touches[0];i.value=p.clientY,n.value=p.clientY,f.value=setTimeout(()=>{d.value||$(w)},500)}function A(u){if(f.value){const w=u.touches[0];Math.abs(w.clientY-i.value)>10&&(clearTimeout(f.value),f.value=null)}if(d.value){u.preventDefault();const w=u.touches[0];n.value=w.clientY;const p=n.value-i.value,T=g(o.value,p);if(T!==o.value&&T>=0&&T<r.value.length){const K=r.value.splice(o.value,1)[0];r.value.splice(T,0,K),o.value=T,i.value=n.value}}}function h(){f.value&&(clearTimeout(f.value),f.value=null),d.value&&_()}function $(u){d.value=!0,o.value=u,ne("長按拖拽模式")}function _(){d.value=!1,o.value=-1,ne("拖拽結束")}function g(u,w){const T=Math.round(w/80);return Math.max(0,Math.min(r.value.length-1,u+T))}return ee(()=>{}),(u,w)=>(W(),j("div",Sn,[S("div",{class:"stock-list",ref_key:"stockListRef",ref:a},[(W(!0),j(ge,null,me(r.value,(p,T)=>(W(),j("div",{key:p.id,class:G(["stock-row",{"is-dragging":o.value===T}]),onTouchstart:K=>H(K,T),onTouchmove:A,onTouchend:h,onContextmenu:w[0]||(w[0]=_t(()=>{},["prevent"]))},[y(Y(Jt),{"left-width":120,onClickLeft:I},{left:L(()=>[S("div",Cn,[y(Y(Ee),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:K=>z(p)},{default:L(()=>w[1]||(w[1]=[Me(" 交 易 ",-1)])),_:2,__:[1]},1032,["onClick"]),y(Y(Ee),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:K=>V(p)},{default:L(()=>w[2]||(w[2]=[Me(" 策 略 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),default:L(()=>[S("div",Tn,[S("div",Dn,[S("div",Pn,E(p.name),1),S("div",In,E(p.code),1),S("div",{class:G(["price",b(p.change)])},E(p.price),3),S("div",{class:G(["change",b(p.change)])},E(p.change>0?"+":"")+E(p.change)+" ("+E(p.changePercent)+"%) ",3)]),S("div",Bn,[y(Y(Mt),{"show-indicators":!1,loop:!1,autoplay:0,onChange:K=>c(K,T)},{default:L(()=>[y(Y(Oe),{class:"indicator-content"},{default:L(()=>[S("div",$n,[S("div",Mn,E(p.weeklyKD),1),S("div",{class:G(["kd-trend",l(p.weeklyKD)])},E(s(p.weeklyKD)),3)])]),_:2},1024),y(Y(Oe),{class:"indicator-content"},{default:L(()=>[S("div",En,[S("div",An,E(p.rsi),1),S("div",{class:G(["rsi-trend",x(p.rsi)])},E(k(p.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],42,_n))),128))],512),y(Y(Lt),{axis:"xy",magnetic:"x",gap:{x:20,y:80},icon:"plus",style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"#ffe066","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:m},{default:L(()=>w[3]||(w[3]=[S("div",{class:"bubble-content"},[S("span",{class:"bubble-label",style:{color:"#322b0d"}},"新增")],-1)])),_:1,__:[3]}),y(kn)]))}},Kn=St(On,[["__scopeId","data-v-67f40109"]]);export{Kn as default};
