import{d as Q,t as F,m as ae,n as re,c as Z,r as S,a as ke,u as at,b as _,w as N,e as ot,o as ce,f as je,g as st,h as Ve,i as it,j as Se,k as x,l as ee,p as _e,q as J,s as Ne,v as oe,x as se,y as ie,z as q,A as rt,B as ct,C as Ie,D as Be,E as lt,F as ut,G as dt,H as He,T as ft,I as Fe,J as he,K as vt,L as ht,M as gt,N as mt,O as $e,P as pt,Q as wt,R as Xe,S as yt,U as K,V as Y,W as b,X as W,Y as j,Z as xt,_ as ge,$ as me,a0 as bt,a1 as E,a2 as kt,a3 as St,a4 as G,a5 as Me}from"./index-C68JxU5d.js";import{u as Ce,a as Te,s as Ct,p as Tt,P as Dt,b as Pt,S as _t,B as Ee,c as te}from"./index-q84oEB9I.js";function Ae(e,t){return e.reduce((a,i)=>Math.abs(a-t)<Math.abs(i-t)?a:i)}const[qe,ne]=Z("swipe"),It={loop:F,width:re,height:re,vertical:Boolean,autoplay:ae(0),duration:ae(500),touchable:F,lazyRender:Boolean,initialSwipe:ae(0),indicatorColor:String,showIndicators:F,stopPropagation:F},Ue=Symbol(qe);var Bt=Q({name:qe,props:It,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:a}){const i=S(),r=S(),n=ke({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let u=!1;const d=Ce(),{children:c,linkChildren:w}=at(Ue),o=_(()=>c.length),g=_(()=>n[e.vertical?"height":"width"]),s=_(()=>e.vertical?d.deltaY.value:d.deltaX.value),m=_(()=>n.rect?(e.vertical?n.rect.height:n.rect.width)-g.value*o.value:0),P=_(()=>g.value?Math.ceil(Math.abs(m.value)/g.value):o.value),$=_(()=>o.value*g.value),I=_(()=>(n.active+o.value)%o.value),L=_(()=>{const v=e.vertical?"vertical":"horizontal";return d.direction.value===v}),V=_(()=>{const v={transitionDuration:`${n.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+n.offset.toFixed(2)}px)`};if(g.value){const D=e.vertical?"height":"width",T=e.vertical?"width":"height";v[D]=`${$.value}px`,v[T]=e[T]?`${e[T]}px`:""}return v}),H=v=>{const{active:D}=n;return v?e.loop?oe(D+v,-1,o.value):oe(D+v,0,P.value):D},A=(v,D=0)=>{let T=v*g.value;e.loop||(T=Math.min(T,-m.value));let O=D-T;return e.loop||(O=oe(O,m.value,0)),O},h=({pace:v=0,offset:D=0,emitChange:T})=>{if(o.value<=1)return;const{active:O}=n,M=H(v),U=A(M,D);if(e.loop){if(c[0]&&U!==m.value){const ue=U<m.value;c[0].setOffset(ue?$.value:0)}if(c[o.value-1]&&U!==0){const ue=U>0;c[o.value-1].setOffset(ue?-$.value:0)}}n.active=M,n.offset=U,T&&M!==O&&t("change",I.value)},B=()=>{n.swiping=!0,n.active<=-1?h({pace:o.value}):n.active>=o.value&&h({pace:-o.value})},k=()=>{B(),d.reset(),ee(()=>{n.swiping=!1,h({pace:-1,emitChange:!0})})},p=()=>{B(),d.reset(),ee(()=>{n.swiping=!1,h({pace:1,emitChange:!0})})};let l;const f=()=>clearTimeout(l),y=()=>{f(),+e.autoplay>0&&o.value>1&&(l=setTimeout(()=>{p(),y()},+e.autoplay))},C=(v=+e.initialSwipe)=>{if(!i.value)return;const D=()=>{var T,O;if(!_e(i)){const M={width:i.value.offsetWidth,height:i.value.offsetHeight};n.rect=M,n.width=+((T=e.width)!=null?T:M.width),n.height=+((O=e.height)!=null?O:M.height)}o.value&&(v=Math.min(o.value-1,v),v===-1&&(v=o.value-1)),n.active=v,n.swiping=!0,n.offset=A(v),c.forEach(M=>{M.setOffset(0)}),y()};_e(i)?J().then(D):D()},z=()=>C(n.active);let De;const Qe=v=>{!e.touchable||v.touches.length>1||(d.start(v),u=!1,De=Date.now(),f(),B())},Ze=v=>{e.touchable&&n.swiping&&(d.move(v),L.value&&(!e.loop&&(n.active===0&&s.value>0||n.active===o.value-1&&s.value<0)||(Ne(v,e.stopPropagation),h({offset:s.value}),u||(t("dragStart",{index:I.value}),u=!0))))},Pe=()=>{if(!e.touchable||!n.swiping)return;const v=Date.now()-De,D=s.value/v;if((Math.abs(D)>.25||Math.abs(s.value)>g.value/2)&&L.value){const O=e.vertical?d.offsetY.value:d.offsetX.value;let M=0;e.loop?M=O>0?s.value>0?-1:1:0:M=-Math[s.value>0?"ceil":"floor"](s.value/g.value),h({pace:M,emitChange:!0})}else s.value&&h({pace:0});u=!1,n.swiping=!1,t("dragEnd",{index:I.value}),y()},et=(v,D={})=>{B(),d.reset(),ee(()=>{let T;e.loop&&v===o.value?T=n.active===0?0:v:T=v%o.value,D.immediate?ee(()=>{n.swiping=!1}):n.swiping=!1,h({pace:T-n.active,emitChange:!0})})},tt=(v,D)=>{const T=D===I.value,O=T?{backgroundColor:e.indicatorColor}:void 0;return x("i",{style:O,class:ne("indicator",{active:T})},null)},nt=()=>{if(a.indicator)return a.indicator({active:I.value,total:o.value});if(e.showIndicators&&o.value>1)return x("div",{class:ne("indicators",{vertical:e.vertical})},[Array(o.value).fill("").map(tt)])};return Te({prev:k,next:p,state:n,resize:z,swipeTo:et}),w({size:g,props:e,count:o,activeIndicator:I}),N(()=>e.initialSwipe,v=>C(+v)),N(o,()=>C(n.active)),N(()=>e.autoplay,y),N([se,ie,()=>e.width,()=>e.height],z),N(ot(),v=>{v==="visible"?y():f()}),ce(C),je(()=>C(n.active)),st(()=>C(n.active)),Ve(f),it(f),Se("touchmove",Ze,{target:r}),()=>{var v;return x("div",{ref:i,class:ne()},[x("div",{ref:r,style:V.value,class:ne("track",{vertical:e.vertical}),onTouchstartPassive:Qe,onTouchend:Pe,onTouchcancel:Pe},[(v=a.default)==null?void 0:v.call(a)]),nt()])}}});const $t=q(Bt),[Mt,Et]=Z("swipe-item");var At=Q({name:Mt,setup(e,{slots:t}){let a;const i=ke({offset:0,inited:!1,mounted:!1}),{parent:r,index:n}=rt(Ue);if(!r)return;const u=_(()=>{const w={},{vertical:o}=r.props;return r.size.value&&(w[o?"height":"width"]=`${r.size.value}px`),i.offset&&(w.transform=`translate${o?"Y":"X"}(${i.offset}px)`),w}),d=_(()=>{const{loop:w,lazyRender:o}=r.props;if(!o||a)return!0;if(!i.mounted)return!1;const g=r.activeIndicator.value,s=r.count.value-1,m=g===0&&w?s:g-1,P=g===s&&w?0:g+1;return a=n.value===g||n.value===m||n.value===P,a}),c=w=>{i.offset=w};return ce(()=>{J(()=>{i.mounted=!0})}),Te({setOffset:c}),()=>{var w;return x("div",{class:Et(),style:u.value},[d.value?(w=t.default)==null?void 0:w.call(t):null])}}});const Oe=q(At);q(Ct);const Ot={gap:{type:[Number,Object],default:24},icon:String,axis:ct("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[Rt,Re]=Z("floating-bubble");var Lt=Q({name:Rt,inheritAttrs:!1,props:Ot,emits:["click","update:offset","offsetChange"],setup(e,{slots:t,emit:a,attrs:i}){const r=S(),n=S({x:0,y:0,width:0,height:0}),u=_(()=>Ie(e.gap)?e.gap.x:e.gap),d=_(()=>Ie(e.gap)?e.gap.y:e.gap),c=_(()=>({top:d.value,right:se.value-n.value.width-u.value,bottom:ie.value-n.value.height-d.value,left:u.value})),w=S(!1);let o=!1;const g=_(()=>{const h={},B=Be(n.value.x),k=Be(n.value.y);return h.transform=`translate3d(${B}, ${k}, 0)`,(w.value||!o)&&(h.transition="none"),h}),s=()=>{if(!A.value)return;const{width:h,height:B}=Fe(r.value),{offset:k}=e;n.value={x:k?k.x:se.value-h-u.value,y:k?k.y:ie.value-B-d.value,width:h,height:B}},m=Ce();let P=0,$=0;const I=h=>{m.start(h),w.value=!0,P=n.value.x,$=n.value.y};Se("touchmove",h=>{if(h.preventDefault(),m.move(h),e.axis!=="lock"&&!m.isTap.value){if(e.axis==="x"||e.axis==="xy"){let k=P+m.deltaX.value;k<c.value.left&&(k=c.value.left),k>c.value.right&&(k=c.value.right),n.value.x=k}if(e.axis==="y"||e.axis==="xy"){let k=$+m.deltaY.value;k<c.value.top&&(k=c.value.top),k>c.value.bottom&&(k=c.value.bottom),n.value.y=k}const B=he(n.value,["x","y"]);a("update:offset",B)}},{target:r});const V=()=>{w.value=!1,J(()=>{if(e.magnetic==="x"){const h=Ae([c.value.left,c.value.right],n.value.x);n.value.x=h}if(e.magnetic==="y"){const h=Ae([c.value.top,c.value.bottom],n.value.y);n.value.y=h}if(!m.isTap.value){const h=he(n.value,["x","y"]);a("update:offset",h),(P!==h.x||$!==h.y)&&a("offsetChange",h)}})},H=h=>{m.isTap.value?a("click",h):h.stopPropagation()};ce(()=>{s(),J(()=>{o=!0})}),N([se,ie,u,d,()=>e.offset],s,{deep:!0});const A=S(!0);return je(()=>{A.value=!0}),Ve(()=>{e.teleport&&(A.value=!1)}),()=>{const h=lt(x("div",He({class:Re(),ref:r,onTouchstartPassive:I,onTouchend:V,onTouchcancel:V,onClickCapture:H,style:g.value},i),[t.default?t.default():x(dt,{name:e.icon,class:Re("icon")},null)]),[[ut,A.value]]);return e.teleport?x(ft,{to:e.teleport},{default:()=>[h]}):h}}});const zt=q(Lt),Kt=e=>e?.includes("/"),Wt=[...Tt,"round","closeOnPopstate","safeAreaInsetBottom"],Yt={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[jt,R,Vt]=Z("share-sheet"),Nt=vt({},Pt,{title:String,round:F,options:ht(),cancelText:String,description:String,closeOnPopstate:F,safeAreaInsetBottom:F});var Ht=Q({name:jt,props:Nt,emits:["cancel","select","update:show"],setup(e,{emit:t,slots:a}){const i=s=>t("update:show",s),r=()=>{i(!1),t("cancel")},n=(s,m)=>t("select",s,m),u=()=>{const s=a.title?a.title():e.title,m=a.description?a.description():e.description;if(s||m)return x("div",{class:R("header")},[s&&x("h2",{class:R("title")},[s]),m&&x("span",{class:R("description")},[m])])},d=s=>Kt(s)?x("img",{src:s,class:R("image-icon")},null):x("div",{class:R("icon",[s])},[x(mt,{name:Yt[s]||s},null)]),c=(s,m)=>{const{name:P,icon:$,className:I,description:L}=s;return x("div",{role:"button",tabindex:0,class:[R("option"),I,gt],onClick:()=>n(s,m)},[d($),P&&x("span",{class:R("name")},[P]),L&&x("span",{class:R("option-description")},[L])])},w=(s,m)=>x("div",{class:R("options",{border:m})},[s.map(c)]),o=()=>{const{options:s}=e;return Array.isArray(s[0])?s.map((m,P)=>w(m,P!==0)):w(s)},g=()=>{var s;const m=(s=e.cancelText)!=null?s:Vt("cancel");if(a.cancel||m)return x("button",{type:"button",class:R("cancel"),onClick:r},[a.cancel?a.cancel():m])};return()=>x(Dt,He({class:R(),position:"bottom","onUpdate:show":i},he(e,Wt)),{default:()=>[u(),o(),g()]})}});const Ft=q(Ht),[Xt,de]=Z("swipe-cell"),qt={name:ae(""),disabled:Boolean,leftWidth:re,rightWidth:re,beforeClose:Function,stopPropagation:Boolean};var Ut=Q({name:Xt,props:qt,emits:["open","close","click"],setup(e,{emit:t,slots:a}){let i,r,n,u;const d=S(),c=S(),w=S(),o=ke({offset:0,dragging:!1}),g=Ce(),s=p=>p.value?Fe(p).width:0,m=_(()=>$e(e.leftWidth)?+e.leftWidth:s(c)),P=_(()=>$e(e.rightWidth)?+e.rightWidth:s(w)),$=p=>{o.offset=p==="left"?m.value:-P.value,i||(i=!0,t("open",{name:e.name,position:p}))},I=p=>{o.offset=0,i&&(i=!1,t("close",{name:e.name,position:p}))},L=p=>{const l=Math.abs(o.offset),f=.15,y=i?1-f:f,C=p==="left"?m.value:P.value;C&&l>C*y?$(p):I(p)},V=p=>{e.disabled||(n=o.offset,g.start(p))},H=p=>{if(e.disabled)return;const{deltaX:l}=g;g.move(p),g.isHorizontal()&&(r=!0,o.dragging=!0,(!i||l.value*n<0)&&Ne(p,e.stopPropagation),o.offset=oe(l.value+n,-P.value,m.value))},A=()=>{o.dragging&&(o.dragging=!1,L(o.offset>0?"left":"right"),setTimeout(()=>{r=!1},0))},h=(p="outside",l)=>{u||(t("click",p),i&&!r&&(u=!0,wt(e.beforeClose,{args:[{event:l,name:e.name,position:p}],done:()=>{u=!1,I(p)},canceled:()=>u=!1,error:()=>u=!1})))},B=p=>l=>{(r||i)&&l.stopPropagation(),!r&&h(p,l)},k=(p,l)=>{const f=a[p];if(f)return x("div",{ref:l,class:de(p),onClick:B(p)},[f()])};return Te({open:$,close:I}),pt(d,p=>h("outside",p),{eventName:"touchstart"}),Se("touchmove",H,{target:d}),()=>{var p;const l={transform:`translate3d(${o.offset}px, 0, 0)`,transitionDuration:o.dragging?"0s":".6s"};return x("div",{ref:d,class:de(),onClick:B("cell"),onTouchstartPassive:V,onTouchend:A,onTouchcancel:A},[x("div",{class:de("wrapper"),style:l},[k("left",c),(p=a.default)==null?void 0:p.call(a),k("right",w)])])}}});const Gt=q(Ut),pe=(e,t)=>t.some(a=>e instanceof a);let Le,ze;function Jt(){return Le||(Le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qt(){return ze||(ze=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const we=new WeakMap,fe=new WeakMap,le=new WeakMap;function Zt(e){const t=new Promise((a,i)=>{const r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",u)},n=()=>{a(X(e.result)),r()},u=()=>{i(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",u)});return le.set(t,e),t}function en(e){if(we.has(e))return;const t=new Promise((a,i)=>{const r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",u),e.removeEventListener("abort",u)},n=()=>{a(),r()},u=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",u),e.addEventListener("abort",u)});we.set(e,t)}let ye={get(e,t,a){if(e instanceof IDBTransaction){if(t==="done")return we.get(e);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return X(e[t])},set(e,t,a){return e[t]=a,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ge(e){ye=e(ye)}function tn(e){return Qt().includes(e)?function(...t){return e.apply(xe(this),t),X(this.request)}:function(...t){return X(e.apply(xe(this),t))}}function nn(e){return typeof e=="function"?tn(e):(e instanceof IDBTransaction&&en(e),pe(e,Jt())?new Proxy(e,ye):e)}function X(e){if(e instanceof IDBRequest)return Zt(e);if(fe.has(e))return fe.get(e);const t=nn(e);return t!==e&&(fe.set(e,t),le.set(t,e)),t}const xe=e=>le.get(e);function an(e,t,{blocked:a,upgrade:i,blocking:r,terminated:n}={}){const u=indexedDB.open(e,t),d=X(u);return i&&u.addEventListener("upgradeneeded",c=>{i(X(u.result),c.oldVersion,c.newVersion,X(u.transaction),c)}),a&&u.addEventListener("blocked",c=>a(c.oldVersion,c.newVersion,c)),d.then(c=>{n&&c.addEventListener("close",()=>n()),r&&c.addEventListener("versionchange",w=>r(w.oldVersion,w.newVersion,w))}).catch(()=>{}),d}const on=["get","getKey","getAll","getAllKeys","count"],sn=["put","add","delete","clear"],ve=new Map;function Ke(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ve.get(t))return ve.get(t);const a=t.replace(/FromIndex$/,""),i=t!==a,r=sn.includes(a);if(!(a in(i?IDBIndex:IDBObjectStore).prototype)||!(r||on.includes(a)))return;const n=async function(u,...d){const c=this.transaction(u,r?"readwrite":"readonly");let w=c.store;return i&&(w=w.index(d.shift())),(await Promise.all([w[a](...d),r&&c.done]))[0]};return ve.set(t,n),n}Ge(e=>({...e,get:(t,a,i)=>Ke(t,a)||e.get(t,a,i),has:(t,a)=>!!Ke(t,a)||e.has(t,a)}));const rn=["continue","continuePrimaryKey","advance"],We={},be=new WeakMap,Je=new WeakMap,cn={get(e,t){if(!rn.includes(t))return e[t];let a=We[t];return a||(a=We[t]=function(...i){be.set(this,Je.get(this)[t](...i))}),a}};async function*ln(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const a=new Proxy(t,cn);for(Je.set(a,t),le.set(a,xe(t));t;)yield a,t=await(be.get(a)||t.continue()),be.delete(a)}function Ye(e,t){return t===Symbol.asyncIterator&&pe(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&pe(e,[IDBIndex,IDBObjectStore])}Ge(e=>({...e,get(t,a,i){return Ye(t,a)?ln:e.get(t,a,i)},has(t,a){return Ye(t,a)||e.has(t,a)}}));const un=an("stock-db",1,{upgrade(e){e.objectStoreNames.contains("stocks")||e.createObjectStore("stocks",{keyPath:"id"})}});async function dn(){const e=await un;if(await e.count("stocks")>0)return await e.getAll("stocks");{const r=await(await fetch("/iKDx/"+"stocks/stocks.json")).json(),n=e.transaction("stocks","readwrite"),u=n.objectStore("stocks");for(const d of r)await u.put(d);return await n.done,r}}const fn={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},vn=["onClick"],hn={key:0,style:{"margin-top":"12px"}},gn={key:0},mn={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},pn={style:{"font-size":"16px",color:"#333",flex:"1"}},wn={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},yn={__name:"StockSearch",setup(e){const t=Xe("stock-search"),a=S(!1);t.on(o=>{a.value=o});const i=S(),r=S(""),n=S([]),u=["台積電","鴻海","聯發科","長榮","中鋼"];function d(){J(()=>{const o=i.value?.$el?.querySelector("input");o&&o.focus()})}N(()=>a.value,o=>{o&&setTimeout(()=>{d()},300)}),N(()=>r.value,async o=>{if(!o||o.length<1){n.value=[];return}const g=await dn();n.value=g.filter(s=>s.name.includes(o)||s.id.includes(o))});function c(o){}function w(o){r.value=o,d()}return(o,g)=>(K(),yt(W(Ft),{show:a.value,"onUpdate:show":g[1]||(g[1]=s=>W(t).emit(!1)),options:[],"cancel-text":"",style:{"--van-share-sheet-header-padding":"24px 24px 0 24px","min-height":"80vh",height:"80vh"}},{title:Y(()=>g[2]||(g[2]=[b("div",{style:{"font-size":"18px","font-weight":"bold","letter-spacing":"1px","text-align":"center","margin-top":"0","margin-bottom":"0",color:"#222","line-height":"1.2"}}," 股票搜尋 ",-1)])),description:Y(()=>[b("div",null,[x(W(_t),{ref_key:"searchInputRef",ref:i,modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=s=>r.value=s),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:c},null,8,["modelValue"])]),b("div",null,[g[3]||(g[3]=b("div",{style:{display:"flex","align-items":"center",margin:"0 0 10px 0"}},[b("div",{style:{"margin-left":"16px","font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px"}}," | 熱門股票 ")],-1)),b("div",fn,[(K(),j(ge,null,me(u,s=>b("span",{key:s,onClick:m=>w(s),style:bt({background:r.value===s?"#1976d2":"#e3eafc",color:r.value===s?"#fff":"#1976d2",borderRadius:"16px",padding:"4px 12px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:r.value===s?"bold":"normal",boxShadow:r.value===s?"0 0 0 2px #1976d233":"none",transition:"background 0.2s, color 0.2s"})},E(s),13,vn)),64))]),r.value&&r.value.length>=1?(K(),j("div",hn,[n.value.length?(K(),j("div",gn,[(K(!0),j(ge,null,me(n.value,s=>(K(),j("div",{key:s.id,style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"16px 20px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px"}},[b("div",mn,E(s.id),1),b("div",pn,E(s.name),1)]))),128))])):(K(),j("div",wn," 查無資料 "))])):xt("",!0)])]),_:1},8,["show"]))}},xn={class:"stock-page"},bn=["onTouchstart"],kn={class:"action-buttons"},Sn={class:"stock-content"},Cn={class:"stock-name"},Tn={class:"name"},Dn={class:"code"},Pn={class:"stock-indicator"},_n={class:"kd-indicator"},In={class:"kd-value"},Bn={class:"rsi-indicator"},$n={class:"rsi-value"},Mn={__name:"Stock",setup(e){const t=Xe("stock-search"),a=S(null);S(null),S(0);const i=S(-1),r=S(0),n=S(0),u=S(!1),d=S(null),c=S([{id:"2330",name:"台積電",code:"2330",price:1140,change:-1.72,changePercent:-.15,weeklyKD:22.6,rsi:45.2},{id:"2317",name:"鴻海",code:"2317",price:135,change:1.45,changePercent:1.08,weeklyKD:68.5,rsi:62.1},{id:"2454",name:"聯發科",code:"2454",price:1350,change:-18.5,changePercent:-1.35,weeklyKD:20.8,rsi:38.9},{id:"2881",name:"富邦金",code:"2881",price:31.55,change:.35,changePercent:1.12,weeklyKD:72.3,rsi:58.7},{id:"0056",name:"元大高股息",code:"0056",price:34.81,change:.02,changePercent:.06,weeklyKD:55.4,rsi:52.1},{id:"1215",name:"卜蜂",code:"1215",price:115.5,change:-.5,changePercent:-.43,weeklyKD:56.87,rsi:71.63},{id:"2885",name:"元大金",code:"2885",price:34.81,change:.06,changePercent:.17,weeklyKD:73.16,rsi:80.46},{id:"2646",name:"星宇航空",code:"2646",price:47.7,change:.5,changePercent:1.06,weeklyKD:54.87,rsi:58.55}]);function w(){t.emit(!0)}function o(l,f){console.log(`Stock ${f} indicator changed to ${l}`)}function g(l){return l>0?"price-up":l<0?"price-down":"price-flat"}function s(l){return l>80?"kd-overbought":l<20?"kd-oversold":"kd-normal"}function m(l){return l>80?"超買":l<20?"超賣":"正常"}function P(l){return l>70?"rsi-overbought":l<30?"rsi-oversold":"rsi-normal"}function $(l){return l>70?"超買":l<30?"超賣":"正常"}function I(){}function L(l){te(`買賣 ${l.name}`)}function V(l){te(`${l.name} 策略設定`)}function H(l,f){const y=l.touches[0];r.value=y.clientY,n.value=y.clientY,d.value=setTimeout(()=>{u.value||B(f)},500)}function A(l){if(d.value){const f=l.touches[0];Math.abs(f.clientY-r.value)>10&&(clearTimeout(d.value),d.value=null)}if(u.value){l.preventDefault();const f=l.touches[0];n.value=f.clientY;const y=n.value-r.value,C=p(i.value,y);if(C!==i.value&&C>=0&&C<c.value.length){const z=c.value.splice(i.value,1)[0];c.value.splice(C,0,z),i.value=C,r.value=n.value}}}function h(){d.value&&(clearTimeout(d.value),d.value=null),u.value&&k()}function B(l){u.value=!0,i.value=l,te("長按拖拽模式")}function k(){u.value=!1,i.value=-1,te("拖拽結束")}function p(l,f){const C=Math.round(f/80);return Math.max(0,Math.min(c.value.length-1,l+C))}return ce(()=>{}),(l,f)=>(K(),j("div",xn,[b("div",{class:"stock-list",ref_key:"stockListRef",ref:a},[(K(!0),j(ge,null,me(c.value,(y,C)=>(K(),j("div",{key:y.id,class:G(["stock-row",{"is-dragging":i.value===C}]),onTouchstart:z=>H(z,C),onTouchmove:A,onTouchend:h,onContextmenu:f[0]||(f[0]=St(()=>{},["prevent"]))},[x(W(Gt),{"left-width":120,onClickLeft:I},{left:Y(()=>[b("div",kn,[x(W(Ee),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:z=>L(y)},{default:Y(()=>f[1]||(f[1]=[Me(" 買賣 ",-1)])),_:2,__:[1]},1032,["onClick"]),x(W(Ee),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:z=>V(y)},{default:Y(()=>f[2]||(f[2]=[Me(" 策略 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),default:Y(()=>[b("div",Sn,[b("div",Cn,[b("div",Tn,E(y.name),1),b("div",Dn,E(y.code),1),b("div",{class:G(["price",g(y.change)])},E(y.price),3),b("div",{class:G(["change",g(y.change)])},E(y.change>0?"+":"")+E(y.change)+" ("+E(y.changePercent)+"%) ",3)]),b("div",Pn,[x(W($t),{"show-indicators":!1,loop:!1,autoplay:0,onChange:z=>o(z,C)},{default:Y(()=>[x(W(Oe),{class:"indicator-content"},{default:Y(()=>[b("div",_n,[b("div",In,E(y.weeklyKD),1),b("div",{class:G(["kd-trend",s(y.weeklyKD)])},E(m(y.weeklyKD)),3)])]),_:2},1024),x(W(Oe),{class:"indicator-content"},{default:Y(()=>[b("div",Bn,[b("div",$n,E(y.rsi),1),b("div",{class:G(["rsi-trend",P(y.rsi)])},E($(y.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],42,bn))),128)),f[3]||(f[3]=b("br",null,null,-1)),f[4]||(f[4]=b("br",null,null,-1)),f[5]||(f[5]=b("br",null,null,-1)),f[6]||(f[6]=b("br",null,null,-1)),f[7]||(f[7]=b("br",null,null,-1)),f[8]||(f[8]=b("br",null,null,-1))],512),x(W(zt),{icon:"plus",axis:"xy",magnetic:"x",gap:{x:24,y:80},style:{"--van-floating-bubble-size":"48px"},onClick:w}),x(yn)]))}},On=kt(Mn,[["__scopeId","data-v-361decce"]]);export{On as default};
