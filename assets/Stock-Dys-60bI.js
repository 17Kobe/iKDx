import{d as O,m as z,c as A,r as g,a as x,i as C,w as p,b as T,e as S,u as D,o as E,n as B,f as R,g as $,h as V,j as q,v as F,k as h,s as H,l as I,T as L,p as U,q as j,t as W,x as G,y as J,z as K,A as Q,B as Z}from"./index-CDtZPptw.js";import{u as ee}from"./use-touch-DLsMWnoZ.js";function M(t,s){return t.reduce((l,f)=>Math.abs(l-s)<Math.abs(f-s)?l:f)}const te={gap:{type:[Number,Object],default:24},icon:String,axis:z("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[ae,P]=A("floating-bubble");var oe=O({name:ae,inheritAttrs:!1,props:te,emits:["click","update:offset","offsetChange"],setup(t,{slots:s,emit:l,attrs:f}){const i=g(),o=g({x:0,y:0,width:0,height:0}),v=x(()=>C(t.gap)?t.gap.x:t.gap),r=x(()=>C(t.gap)?t.gap.y:t.gap),n=x(()=>({top:r.value,right:T.value-o.value.width-v.value,bottom:p.value-o.value.height-r.value,left:v.value})),y=g(!1);let k=!1;const X=x(()=>{const e={},c=S(o.value.x),a=S(o.value.y);return e.transform=`translate3d(${c}, ${a}, 0)`,(y.value||!k)&&(e.transition="none"),e}),w=()=>{if(!d.value)return;const{width:e,height:c}=U(i.value),{offset:a}=t;o.value={x:a?a.x:T.value-e-v.value,y:a?a.y:p.value-c-r.value,width:e,height:c}},u=ee();let b=0,m=0;const Y=e=>{u.start(e),y.value=!0,b=o.value.x,m=o.value.y};D("touchmove",e=>{if(e.preventDefault(),u.move(e),t.axis!=="lock"&&!u.isTap.value){if(t.axis==="x"||t.axis==="xy"){let a=b+u.deltaX.value;a<n.value.left&&(a=n.value.left),a>n.value.right&&(a=n.value.right),o.value.x=a}if(t.axis==="y"||t.axis==="xy"){let a=m+u.deltaY.value;a<n.value.top&&(a=n.value.top),a>n.value.bottom&&(a=n.value.bottom),o.value.y=a}const c=j(o.value,["x","y"]);l("update:offset",c)}},{target:i});const _=()=>{y.value=!1,B(()=>{if(t.magnetic==="x"){const e=M([n.value.left,n.value.right],o.value.x);o.value.x=e}if(t.magnetic==="y"){const e=M([n.value.top,n.value.bottom],o.value.y);o.value.y=e}if(!u.isTap.value){const e=j(o.value,["x","y"]);l("update:offset",e),(b!==e.x||m!==e.y)&&l("offsetChange",e)}})},N=e=>{u.isTap.value?l("click",e):e.stopPropagation()};E(()=>{w(),B(()=>{k=!0})}),R([T,p,v,r,()=>t.offset],w,{deep:!0});const d=g(!0);return $(()=>{d.value=!0}),V(()=>{t.teleport&&(d.value=!1)}),()=>{const e=q(h("div",I({class:P(),ref:i,onTouchstartPassive:Y,onTouchend:_,onTouchcancel:_,onClickCapture:N,style:X.value},f),[s.default?s.default():h(H,{name:t.icon,class:P("icon")},null)]),[[F,d.value]]);return t.teleport?h(L,{to:t.teleport},{default:()=>[e]}):e}}});const ne=W(oe),le={style:{padding:"32px"}},ce={__name:"Stock",setup(t){const s=Q();function l(){s.push("/add")}return(f,i)=>(Z(),G("div",le,[i[0]||(i[0]=J(" 自選股頁面324234234234234234324234234234 ",-1)),h(K(ne),{icon:"plus",axis:"xy",magnetic:"x",gap:{x:24,y:100},style:{"--van-floating-bubble-size":"48px"},onClick:l})]))}};export{ce as default};
