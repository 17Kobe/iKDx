import{d as On,e as br,c as Li,u as ig,B as h1,a as X,r as rg,m as Pe,n as Vn,I as ci,p as ur,L as sg,w as Ri,b as cs,f as us,P as d1,g as g1,t as lr,h as p1,i as m1,H as _1,j as _n,k as Po,l as mn,o as b1,q as ic,s as v1,v as x1,x as y1,y as og,z as ag,A as Ht,C as w1,F as S1,D as ne,E as Xo,G as yc,J as C1,K as fs,M as dr,N as wc,O as wh,Q as k1,R as lg,S as rc,T as D1,U as M1,V as Ol,W as El,X as cg,Y as T1,Z as A1,_ as O1,$ as E1,a0 as I1,a1 as P1,a2 as ug,a3 as L1,a4 as R1,a5 as Sc,a6 as fg,a7 as hg,a8 as go,a9 as F1,aa as Pt,ab as B1,ac as W1,ad as z1,ae as dg,af as gg,ag as pg,ah as Ee,ai as pn,aj as pt,ak as Oe,al as rn,am as N1,an as Il,ao as Sh,ap as mg,aq as Ie,ar as Di,as as _g,at as hs,au as H1,av as sc,aw as bg,ax as xs,ay as Cc,az as oc,aA as $1,aB as Y1,aC as U1,aD as V1}from"./index-DMmx1nbT.js";import{w as kc}from"./worker-pool-Vr2Seoof.js";import{u as vg,S as X1,a as Ch}from"./index-Dg3rYBHl.js";function kh(n,t){return n.reduce((e,i)=>Math.abs(e-t)<Math.abs(i-t)?e:i)}const[K1,er]=Li("button"),q1=br({},rg,{tag:Pe("button"),text:String,icon:String,type:Pe("default"),size:Pe("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Pe("button"),loadingSize:Vn,loadingText:String,loadingType:String,iconPosition:Pe("left")});var j1=On({name:K1,props:q1,emits:["click"],setup(n,{emit:t,slots:e}){const i=ig(),s=()=>e.loading?e.loading():X(sg,{size:n.loadingSize,type:n.loadingType,class:er("loading")},null),a=()=>{if(n.loading)return s();if(e.icon)return X("div",{class:er("icon")},[e.icon()]);if(n.icon)return X(ci,{name:n.icon,class:er("icon"),classPrefix:n.iconPrefix},null)},l=()=>{let h;if(n.loading?h=n.loadingText:h=e.default?e.default():n.text,h)return X("span",{class:er("text")},[h])},u=()=>{const{color:h,plain:g}=n;if(h){const p={color:g?h:"white"};return g||(p.background=h),h.includes("gradient")?p.border=0:p.borderColor=h,p}},f=h=>{n.loading?ur(h):n.disabled||(t("click",h),i())};return()=>{const{tag:h,type:g,size:p,block:m,round:v,plain:S,square:y,loading:w,disabled:k,hairline:O,nativeType:P,iconPosition:E}=n,M=[er([g,p,{plain:S,block:m,round:v,square:y,loading:w,disabled:k,hairline:O}]),{[h1]:O}];return X(h,{type:P,class:M,style:u(),disabled:k,onClick:f},{default:()=>[X("div",{class:er("content")},[E==="left"&&a(),l(),E==="right"&&a()])]})}}});const Pl=Ri(j1),[G1,Qe]=Li("action-sheet"),Z1=br({},g1,{title:String,round:lr,actions:p1(),closeIcon:Pe("cross"),closeable:lr,cancelText:String,description:String,closeOnPopstate:lr,closeOnClickAction:Boolean,safeAreaInsetBottom:lr}),J1=[...m1,"round","closeOnPopstate","safeAreaInsetBottom"];var Q1=On({name:G1,props:Z1,emits:["select","cancel","update:show"],setup(n,{slots:t,emit:e}){const i=p=>e("update:show",p),s=()=>{i(!1),e("cancel")},a=()=>{if(n.title)return X("div",{class:Qe("header")},[n.title,n.closeable&&X(ci,{name:n.closeIcon,class:[Qe("close"),_1],onClick:s},null)])},l=()=>{if(t.cancel||n.cancelText)return[X("div",{class:Qe("gap")},null),X("button",{type:"button",class:Qe("cancel"),onClick:s},[t.cancel?t.cancel():n.cancelText])]},u=p=>{if(p.icon)return X(ci,{class:Qe("item-icon"),name:p.icon},null)},f=(p,m)=>p.loading?X(sg,{class:Qe("loading-icon")},null):t.action?t.action({action:p,index:m}):[X("span",{class:Qe("name")},[p.name]),p.subname&&X("div",{class:Qe("subname")},[p.subname])],h=(p,m)=>{const{color:v,loading:S,callback:y,disabled:w,className:k}=p,O=()=>{w||S||(y&&y(p),n.closeOnClickAction&&i(!1),_n(()=>e("select",p,m)))};return X("button",{type:"button",style:{color:v},class:[Qe("item",{loading:S,disabled:w}),k],onClick:O},[u(p),f(p,m)])},g=()=>{if(n.description||t.description){const p=t.description?t.description():n.description;return X("div",{class:Qe("description")},[p])}};return()=>X(d1,cs({class:Qe(),position:"bottom","onUpdate:show":i},us(n,J1)),{default:()=>{var p;return[a(),g(),X("div",{class:Qe("content")},[n.actions.map(h),(p=t.default)==null?void 0:p.call(t)]),l()]}})}});const xg=Ri(Q1),[tw,nr]=Li("cell"),yg={tag:Pe("div"),icon:String,size:String,title:Vn,value:Vn,label:Vn,center:Boolean,isLink:Boolean,border:lr,iconPrefix:String,valueClass:Po,labelClass:Po,titleClass:Po,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},ew=br({},yg,rg);var nw=On({name:tw,props:ew,setup(n,{slots:t}){const e=ig(),i=()=>{if(t.label||mn(n.label))return X("div",{class:[nr("label"),n.labelClass]},[t.label?t.label():n.label])},s=()=>{var f;if(t.title||mn(n.title)){const h=(f=t.title)==null?void 0:f.call(t);return Array.isArray(h)&&h.length===0?void 0:X("div",{class:[nr("title"),n.titleClass],style:n.titleStyle},[h||X("span",null,[n.title]),i()])}},a=()=>{const f=t.value||t.default;if(f||mn(n.value))return X("div",{class:[nr("value"),n.valueClass]},[f?f():X("span",null,[n.value])])},l=()=>{if(t.icon)return t.icon();if(n.icon)return X(ci,{name:n.icon,class:nr("left-icon"),classPrefix:n.iconPrefix},null)},u=()=>{if(t["right-icon"])return t["right-icon"]();if(n.isLink){const f=n.arrowDirection&&n.arrowDirection!=="right"?`arrow-${n.arrowDirection}`:"arrow";return X(ci,{name:f,class:nr("right-icon")},null)}};return()=>{var f;const{tag:h,size:g,center:p,border:m,isLink:v,required:S}=n,y=(f=n.clickable)!=null?f:v,w={center:p,required:!!S,clickable:y,borderless:!m};return g&&(w[g]=!!g),X(h,{class:nr(w),role:y?"button":void 0,tabindex:y?0:void 0,onClick:e},{default:()=>{var k;return[l(),s(),a(),u(),(k=t.extra)==null?void 0:k.call(t)]}})}}});const iw=Ri(nw);function wg(n){return Array.isArray(n)?!n.length:n===0?!1:!n}function rw(n,t){if(wg(n)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(n)))}function sw(n,t){return new Promise(e=>{const i=t.validator(n,t);if(y1(i)){i.then(e);return}e(i)})}function Dh(n,t){const{message:e}=t;return x1(e)?e(n,t):e||""}function ow({target:n}){n.composing=!0}function Mh({target:n}){n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}function aw(n,t){const e=b1();n.style.height="auto";let i=n.scrollHeight;if(ic(t)){const{maxHeight:s,minHeight:a}=t;s!==void 0&&(i=Math.min(i,s)),a!==void 0&&(i=Math.max(i,a))}i&&(n.style.height=`${i}px`,v1(e))}function lw(n,t){return n==="number"&&(n="text",t??(t="decimal")),n==="digit"&&(n="tel",t??(t="numeric")),{type:n,inputmode:t}}function Nn(n){return[...n].length}function Ll(n,t){return[...n].slice(0,t).join("")}const[cw,tn]=Li("field"),Dc={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:Vn,max:Number,min:Number,formatter:Function,clearIcon:Pe("clear"),modelValue:og(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:Pe("focus"),formatTrigger:Pe("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},uw=br({},yg,Dc,{rows:Vn,type:Pe("text"),rules:Array,autosize:[Boolean,Object],labelWidth:Vn,labelClass:Po,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var fw=On({name:cw,props:uw,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(n,{emit:t,slots:e}){const i=vg(),s=ag({status:"unvalidated",focused:!1,validateMessage:""}),a=Ht(),l=Ht(),u=Ht(),{parent:f}=w1(S1),h=()=>{var N;return String((N=n.modelValue)!=null?N:"")},g=N=>{if(mn(n[N]))return n[N];if(f&&mn(f.props[N]))return f.props[N]},p=ne(()=>{const N=g("readonly");if(n.clearable&&!N){const it=h()!=="",rt=n.clearTrigger==="always"||n.clearTrigger==="focus"&&s.focused;return it&&rt}return!1}),m=ne(()=>u.value&&e.input?u.value():n.modelValue),v=ne(()=>{var N;const it=g("required");return it==="auto"?(N=n.rules)==null?void 0:N.some(rt=>rt.required):it}),S=N=>N.reduce((it,rt)=>it.then(()=>{if(s.status==="failed")return;let{value:Et}=m;if(rt.formatter&&(Et=rt.formatter(Et,rt)),!rw(Et,rt)){s.status="failed",s.validateMessage=Dh(Et,rt);return}if(rt.validator)return wg(Et)&&rt.validateEmpty===!1?void 0:sw(Et,rt).then(Rt=>{Rt&&typeof Rt=="string"?(s.status="failed",s.validateMessage=Rt):Rt===!1&&(s.status="failed",s.validateMessage=Dh(Et,rt))})}),Promise.resolve()),y=()=>{s.status="unvalidated",s.validateMessage=""},w=()=>t("endValidate",{status:s.status,message:s.validateMessage}),k=(N=n.rules)=>new Promise(it=>{y(),N?(t("startValidate"),S(N).then(()=>{s.status==="failed"?(it({name:n.name,message:s.validateMessage}),w()):(s.status="passed",it(),w())})):it()}),O=N=>{if(f&&n.rules){const{validateTrigger:it}=f.props,rt=wh(it).includes(N),Et=n.rules.filter(Rt=>Rt.trigger?wh(Rt.trigger).includes(N):rt);Et.length&&k(Et)}},P=N=>{var it;const{maxlength:rt}=n;if(mn(rt)&&Nn(N)>+rt){const Et=h();if(Et&&Nn(Et)===+rt)return Et;const Rt=(it=a.value)==null?void 0:it.selectionEnd;if(s.focused&&Rt){const fe=[...N],Se=fe.length-+rt;return fe.splice(Rt-Se,Se),fe.join("")}return Ll(N,+rt)}return N},E=(N,it="onChange")=>{var rt,Et;const Rt=N;N=P(N);const fe=Nn(Rt)-Nn(N);if(n.type==="number"||n.type==="digit"){const At=n.type==="number";if(N=k1(N,At,At),it==="onBlur"&&N!==""&&(n.min!==void 0||n.max!==void 0)){const $t=lg(+N,(rt=n.min)!=null?rt:-1/0,(Et=n.max)!=null?Et:1/0);+N!==$t&&(N=$t.toString())}}let Se=0;if(n.formatter&&it===n.formatTrigger){const{formatter:At,maxlength:$t}=n;if(N=At(N),mn($t)&&Nn(N)>+$t&&(N=Ll(N,+$t)),a.value&&s.focused){const{selectionEnd:vn}=a.value,he=Ll(Rt,vn);Se=Nn(At(he))-Nn(he)}}if(a.value&&a.value.value!==N)if(s.focused){let{selectionStart:At,selectionEnd:$t}=a.value;if(a.value.value=N,mn(At)&&mn($t)){const vn=Nn(N);fe?(At-=fe,$t-=fe):Se&&(At+=Se,$t+=Se),a.value.setSelectionRange(Math.min(At,vn),Math.min($t,vn))}}else a.value.value=N;N!==n.modelValue&&t("update:modelValue",N)},M=N=>{N.target.composing||E(N.target.value)},R=()=>{var N;return(N=a.value)==null?void 0:N.blur()},B=()=>{var N;return(N=a.value)==null?void 0:N.focus()},L=()=>{const N=a.value;n.type==="textarea"&&n.autosize&&N&&aw(N,n.autosize)},$=N=>{s.focused=!0,t("focus",N),_n(L),g("readonly")&&R()},j=N=>{s.focused=!1,E(h(),"onBlur"),t("blur",N),!g("readonly")&&(O("onBlur"),_n(L),D1())},K=N=>t("clickInput",N),G=N=>t("clickLeftIcon",N),ct=N=>t("clickRightIcon",N),xt=N=>{ur(N),t("update:modelValue",""),t("clear",N)},at=ne(()=>{if(typeof n.error=="boolean")return n.error;if(f&&f.props.showError&&s.status==="failed")return!0}),ht=ne(()=>{const N=g("labelWidth"),it=g("labelAlign");if(N&&it!=="top")return{width:Xo(N)}}),yt=N=>{N.keyCode===13&&(!(f&&f.props.submitOnEnter)&&n.type!=="textarea"&&ur(N),n.type==="search"&&R()),t("keypress",N)},Dt=()=>n.id||`${i}-input`,te=()=>s.status,Gt=()=>{const N=tn("control",[g("inputAlign"),{error:at.value,custom:!!e.input,"min-height":n.type==="textarea"&&!n.autosize}]);if(e.input)return X("div",{class:N,onClick:K},[e.input()]);const it={id:Dt(),ref:a,name:n.name,rows:n.rows!==void 0?+n.rows:void 0,class:N,disabled:g("disabled"),readonly:g("readonly"),autofocus:n.autofocus,placeholder:n.placeholder,autocomplete:n.autocomplete,autocapitalize:n.autocapitalize,autocorrect:n.autocorrect,enterkeyhint:n.enterkeyhint,spellcheck:n.spellcheck,"aria-labelledby":n.label?`${i}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:j,onFocus:$,onInput:M,onClick:K,onChange:Mh,onKeypress:yt,onCompositionend:Mh,onCompositionstart:ow};return n.type==="textarea"?X("textarea",cs(it,{inputmode:n.inputmode}),null):X("input",cs(lw(n.type,n.inputmode),it),null)},bt=()=>{const N=e["left-icon"];if(n.leftIcon||N)return X("div",{class:tn("left-icon"),onClick:G},[N?N():X(ci,{name:n.leftIcon,classPrefix:n.iconPrefix},null)])},le=()=>{const N=e["right-icon"];if(n.rightIcon||N)return X("div",{class:tn("right-icon"),onClick:ct},[N?N():X(ci,{name:n.rightIcon,classPrefix:n.iconPrefix},null)])},we=()=>{if(n.showWordLimit&&n.maxlength){const N=Nn(h());return X("div",{class:tn("word-limit")},[X("span",{class:tn("word-num")},[N]),rc("/"),n.maxlength])}},Re=()=>{if(f&&f.props.showErrorMessage===!1)return;const N=n.errorMessage||s.validateMessage;if(N){const it=e["error-message"],rt=g("errorMessageAlign");return X("div",{class:tn("error-message",rt)},[it?it({message:N}):N])}},ce=()=>{const N=g("labelWidth"),it=g("labelAlign"),rt=g("colon")?":":"";if(e.label)return[e.label(),rt];if(n.label)return X("label",{id:`${i}-label`,for:e.input?void 0:Dt(),"data-allow-mismatch":"attribute",onClick:Et=>{ur(Et),B()},style:it==="top"&&N?{width:Xo(N)}:void 0},[n.label+rt])},ue=()=>[X("div",{class:tn("body")},[Gt(),p.value&&X(ci,{ref:l,name:n.clearIcon,class:tn("clear")},null),le(),e.button&&X("div",{class:tn("button")},[e.button()])]),we(),Re()];return yc({blur:R,focus:B,validate:k,formValue:m,resetValidation:y,getValidationStatus:te}),C1(M1,{customValue:u,resetValidation:y,validateWithTrigger:O}),fs(()=>n.modelValue,()=>{E(h()),y(),O("onChange"),_n(L)}),dr(()=>{E(h(),n.formatTrigger),_n(L)}),wc("touchstart",xt,{target:ne(()=>{var N;return(N=l.value)==null?void 0:N.$el})}),()=>{const N=g("disabled"),it=g("labelAlign"),rt=bt(),Et=()=>{const Rt=ce();return it==="top"?[rt,Rt].filter(Boolean):Rt||[]};return X(iw,{size:n.size,class:tn({error:at.value,disabled:N,[`label-${it}`]:it}),center:n.center,border:n.border,isLink:n.isLink,clickable:n.clickable,titleStyle:ht.value,valueClass:tn("value"),titleClass:[tn("label",[it,{required:v.value}]),n.labelClass],arrowDirection:n.arrowDirection},{icon:rt&&it!=="top"?()=>rt:null,title:Et,value:ue,extra:e.extra})}}});const hw=Ri(fw),dw={gap:{type:[Number,Object],default:24},icon:String,axis:Pe("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[gw,Th]=Li("floating-bubble");var pw=On({name:gw,inheritAttrs:!1,props:dw,emits:["click","update:offset","offsetChange"],setup(n,{slots:t,emit:e,attrs:i}){const s=Ht(),a=Ht({x:0,y:0,width:0,height:0}),l=ne(()=>ic(n.gap)?n.gap.x:n.gap),u=ne(()=>ic(n.gap)?n.gap.y:n.gap),f=ne(()=>({top:u.value,right:El.value-a.value.width-l.value,bottom:Ol.value-a.value.height-u.value,left:l.value})),h=Ht(!1);let g=!1;const p=ne(()=>{const M={},R=Xo(a.value.x),B=Xo(a.value.y);return M.transform=`translate3d(${R}, ${B}, 0)`,(h.value||!g)&&(M.transition="none"),M}),m=()=>{if(!E.value)return;const{width:M,height:R}=ug(s.value),{offset:B}=n;a.value={x:B?B.x:El.value-M-l.value,y:B?B.y:Ol.value-R-u.value,width:M,height:R}},v=cg();let S=0,y=0;const w=M=>{v.start(M),h.value=!0,S=a.value.x,y=a.value.y};wc("touchmove",M=>{if(M.preventDefault(),v.move(M),n.axis!=="lock"&&!v.isTap.value){if(n.axis==="x"||n.axis==="xy"){let B=S+v.deltaX.value;B<f.value.left&&(B=f.value.left),B>f.value.right&&(B=f.value.right),a.value.x=B}if(n.axis==="y"||n.axis==="xy"){let B=y+v.deltaY.value;B<f.value.top&&(B=f.value.top),B>f.value.bottom&&(B=f.value.bottom),a.value.y=B}const R=us(a.value,["x","y"]);e("update:offset",R)}},{target:s});const O=()=>{h.value=!1,_n(()=>{if(n.magnetic==="x"){const M=kh([f.value.left,f.value.right],a.value.x);a.value.x=M}if(n.magnetic==="y"){const M=kh([f.value.top,f.value.bottom],a.value.y);a.value.y=M}if(!v.isTap.value){const M=us(a.value,["x","y"]);e("update:offset",M),(S!==M.x||y!==M.y)&&e("offsetChange",M)}})},P=M=>{v.isTap.value?e("click",M):M.stopPropagation()};dr(()=>{m(),_n(()=>{g=!0})}),fs([El,Ol,l,u,()=>n.offset],m,{deep:!0});const E=Ht(!0);return T1(()=>{E.value=!0}),A1(()=>{n.teleport&&(E.value=!1)}),()=>{const M=O1(X("div",cs({class:Th(),ref:s,onTouchstartPassive:w,onTouchend:O,onTouchcancel:O,onClickCapture:P,style:p.value},i),[t.default?t.default():X(I1,{name:n.icon,class:Th("icon")},null)]),[[E1,E.value]]);return n.teleport?X(P1,{to:n.teleport},{default:()=>[M]}):M}}});const mw=Ri(pw),[_w,zr,bw]=Li("search"),vw=br({},Dc,{label:String,shape:Pe("square"),leftIcon:Pe("search"),clearable:lr,actionText:String,background:String,showAction:Boolean});var xw=On({name:_w,props:vw,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(n,{emit:t,slots:e,attrs:i}){const s=vg(),a=Ht(),l=()=>{e.action||(t("update:modelValue",""),t("cancel"))},u=M=>{M.keyCode===13&&(ur(M),t("search",n.modelValue))},f=()=>n.id||`${s}-input`,h=()=>{if(e.label||n.label)return X("label",{class:zr("label"),for:f(),"data-allow-mismatch":"attribute"},[e.label?e.label():n.label])},g=()=>{if(n.showAction){const M=n.actionText||bw("cancel");return X("div",{class:zr("action"),role:"button",tabindex:0,onClick:l},[e.action?e.action():M])}},p=()=>{var M;return(M=a.value)==null?void 0:M.blur()},m=()=>{var M;return(M=a.value)==null?void 0:M.focus()},v=M=>t("blur",M),S=M=>t("focus",M),y=M=>t("clear",M),w=M=>t("clickInput",M),k=M=>t("clickLeftIcon",M),O=M=>t("clickRightIcon",M),P=Object.keys(Dc),E=()=>{const M=br({},i,us(n,P),{id:f()}),R=B=>t("update:modelValue",B);return X(hw,cs({ref:a,type:"search",class:zr("field",{"with-message":M.errorMessage}),border:!1,onBlur:v,onFocus:S,onClear:y,onKeypress:u,onClickInput:w,onClickLeftIcon:k,onClickRightIcon:O,"onUpdate:modelValue":R},M),us(e,["left-icon","right-icon"]))};return yc({focus:m,blur:p}),()=>{var M;return X("div",{class:zr({"show-action":n.showAction}),style:{background:n.background}},[(M=e.left)==null?void 0:M.call(e),X("div",{class:zr("content",n.shape)},[h(),E()]),g()])}}});const yw=Ri(xw),[ww,Rl]=Li("swipe-cell"),Sw={name:og(""),disabled:Boolean,leftWidth:Vn,rightWidth:Vn,beforeClose:Function,stopPropagation:Boolean};var Cw=On({name:ww,props:Sw,emits:["open","close","click"],setup(n,{emit:t,slots:e}){let i,s,a,l;const u=Ht(),f=Ht(),h=Ht(),g=ag({offset:0,dragging:!1}),p=cg(),m=L=>L.value?ug(L).width:0,v=ne(()=>mn(n.leftWidth)?+n.leftWidth:m(f)),S=ne(()=>mn(n.rightWidth)?+n.rightWidth:m(h)),y=L=>{g.offset=L==="left"?v.value:-S.value,i||(i=!0,t("open",{name:n.name,position:L}))},w=L=>{g.offset=0,i&&(i=!1,t("close",{name:n.name,position:L}))},k=L=>{const $=Math.abs(g.offset),j=.15,K=i?1-j:j,G=L==="left"?v.value:S.value;G&&$>G*K?y(L):w(L)},O=L=>{n.disabled||(a=g.offset,p.start(L))},P=L=>{if(n.disabled)return;const{deltaX:$}=p;p.move(L),p.isHorizontal()&&(s=!0,g.dragging=!0,(!i||$.value*a<0)&&ur(L,n.stopPropagation),g.offset=lg($.value+a,-S.value,v.value))},E=()=>{g.dragging&&(g.dragging=!1,k(g.offset>0?"left":"right"),setTimeout(()=>{s=!1},0))},M=(L="outside",$)=>{l||(t("click",L),i&&!s&&(l=!0,R1(n.beforeClose,{args:[{event:$,name:n.name,position:L}],done:()=>{l=!1,w(L)},canceled:()=>l=!1,error:()=>l=!1})))},R=L=>$=>{(s||i)&&$.stopPropagation(),!s&&M(L,$)},B=(L,$)=>{const j=e[L];if(j)return X("div",{ref:$,class:Rl(L),onClick:R(L)},[j()])};return yc({open:y,close:w}),L1(u,L=>M("outside",L),{eventName:"touchstart"}),wc("touchmove",P,{target:u}),()=>{var L;const $={transform:`translate3d(${g.offset}px, 0, 0)`,transitionDuration:g.dragging?"0s":".6s"};return X("div",{ref:u,class:Rl(),onClick:R("cell"),onTouchstartPassive:O,onTouchend:E,onTouchcancel:E},[X("div",{class:Rl("wrapper"),style:$},[B("left",f),(L=e.default)==null?void 0:L.call(e),B("right",h)])])}}});const kw=Ri(Cw);async function Dw(){console.log("開始執行 getAllStocks");const n=await fg("all-stocks");if(n&&n.length>0)return console.log("從 IndexedDB 獲取的股票資料:",n),n;{console.log("all-stocks store 無資料，開始從 stock_list.json 獲取");const e=(await hg.get("stocks/stock_list.json")).data;for(const i of e)await Sc("all-stocks",i);return console.log("股票資料已快取到 IndexedDB:",e),e}}async function Mw(n){return await getFromStore("all-stocks",n)}async function Tw(n){return await Sc("all-stocks",n)}var Vr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Aw=Vr.exports,Ah;function Ow(){return Ah||(Ah=1,function(n,t){(function(){var e,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,g="__lodash_placeholder__",p=1,m=2,v=4,S=1,y=2,w=1,k=2,O=4,P=8,E=16,M=32,R=64,B=128,L=256,$=512,j=30,K="...",G=800,ct=16,xt=1,at=2,ht=3,yt=1/0,Dt=9007199254740991,te=17976931348623157e292,Gt=NaN,bt=4294967295,le=bt-1,we=bt>>>1,Re=[["ary",B],["bind",w],["bindKey",k],["curry",P],["curryRight",E],["flip",$],["partial",M],["partialRight",R],["rearg",L]],ce="[object Arguments]",ue="[object Array]",N="[object AsyncFunction]",it="[object Boolean]",rt="[object Date]",Et="[object DOMException]",Rt="[object Error]",fe="[object Function]",Se="[object GeneratorFunction]",At="[object Map]",$t="[object Number]",vn="[object Null]",he="[object Object]",Wi="[object Promise]",xr="[object Proxy]",zi="[object RegExp]",cn="[object Set]",yr="[object String]",Cs="[object Symbol]",Ep="[object Undefined]",wr="[object WeakMap]",Ip="[object WeakSet]",Sr="[object ArrayBuffer]",Ni="[object DataView]",ca="[object Float32Array]",ua="[object Float64Array]",fa="[object Int8Array]",ha="[object Int16Array]",da="[object Int32Array]",ga="[object Uint8Array]",pa="[object Uint8ClampedArray]",ma="[object Uint16Array]",_a="[object Uint32Array]",Pp=/\b__p \+= '';/g,Lp=/\b(__p \+=) '' \+/g,Rp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xc=/&(?:amp|lt|gt|quot|#39);/g,Kc=/[&<>"']/g,Fp=RegExp(Xc.source),Bp=RegExp(Kc.source),Wp=/<%-([\s\S]+?)%>/g,zp=/<%([\s\S]+?)%>/g,qc=/<%=([\s\S]+?)%>/g,Np=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hp=/^\w*$/,$p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ba=/[\\^$.*+?()[\]{}|]/g,Yp=RegExp(ba.source),va=/^\s+/,Up=/\s/,Vp=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xp=/\{\n\/\* \[wrapped with (.+)\] \*/,Kp=/,? & /,qp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jp=/[()=,{}\[\]\/\s]/,Gp=/\\(\\)?/g,Zp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jc=/\w*$/,Jp=/^[-+]0x[0-9a-f]+$/i,Qp=/^0b[01]+$/i,tm=/^\[object .+?Constructor\]$/,em=/^0o[0-7]+$/i,nm=/^(?:0|[1-9]\d*)$/,im=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ks=/($^)/,rm=/['\n\r\u2028\u2029\\]/g,Ds="\\ud800-\\udfff",sm="\\u0300-\\u036f",om="\\ufe20-\\ufe2f",am="\\u20d0-\\u20ff",Gc=sm+om+am,Zc="\\u2700-\\u27bf",Jc="a-z\\xdf-\\xf6\\xf8-\\xff",lm="\\xac\\xb1\\xd7\\xf7",cm="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",um="\\u2000-\\u206f",fm=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qc="A-Z\\xc0-\\xd6\\xd8-\\xde",tu="\\ufe0e\\ufe0f",eu=lm+cm+um+fm,xa="['’]",hm="["+Ds+"]",nu="["+eu+"]",Ms="["+Gc+"]",iu="\\d+",dm="["+Zc+"]",ru="["+Jc+"]",su="[^"+Ds+eu+iu+Zc+Jc+Qc+"]",ya="\\ud83c[\\udffb-\\udfff]",gm="(?:"+Ms+"|"+ya+")",ou="[^"+Ds+"]",wa="(?:\\ud83c[\\udde6-\\uddff]){2}",Sa="[\\ud800-\\udbff][\\udc00-\\udfff]",Hi="["+Qc+"]",au="\\u200d",lu="(?:"+ru+"|"+su+")",pm="(?:"+Hi+"|"+su+")",cu="(?:"+xa+"(?:d|ll|m|re|s|t|ve))?",uu="(?:"+xa+"(?:D|LL|M|RE|S|T|VE))?",fu=gm+"?",hu="["+tu+"]?",mm="(?:"+au+"(?:"+[ou,wa,Sa].join("|")+")"+hu+fu+")*",_m="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",du=hu+fu+mm,vm="(?:"+[dm,wa,Sa].join("|")+")"+du,xm="(?:"+[ou+Ms+"?",Ms,wa,Sa,hm].join("|")+")",ym=RegExp(xa,"g"),wm=RegExp(Ms,"g"),Ca=RegExp(ya+"(?="+ya+")|"+xm+du,"g"),Sm=RegExp([Hi+"?"+ru+"+"+cu+"(?="+[nu,Hi,"$"].join("|")+")",pm+"+"+uu+"(?="+[nu,Hi+lu,"$"].join("|")+")",Hi+"?"+lu+"+"+cu,Hi+"+"+uu,bm,_m,iu,vm].join("|"),"g"),Cm=RegExp("["+au+Ds+Gc+tu+"]"),km=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mm=-1,Ft={};Ft[ca]=Ft[ua]=Ft[fa]=Ft[ha]=Ft[da]=Ft[ga]=Ft[pa]=Ft[ma]=Ft[_a]=!0,Ft[ce]=Ft[ue]=Ft[Sr]=Ft[it]=Ft[Ni]=Ft[rt]=Ft[Rt]=Ft[fe]=Ft[At]=Ft[$t]=Ft[he]=Ft[zi]=Ft[cn]=Ft[yr]=Ft[wr]=!1;var It={};It[ce]=It[ue]=It[Sr]=It[Ni]=It[it]=It[rt]=It[ca]=It[ua]=It[fa]=It[ha]=It[da]=It[At]=It[$t]=It[he]=It[zi]=It[cn]=It[yr]=It[Cs]=It[ga]=It[pa]=It[ma]=It[_a]=!0,It[Rt]=It[fe]=It[wr]=!1;var Tm={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Am={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Om={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Em={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Im=parseFloat,Pm=parseInt,gu=typeof go=="object"&&go&&go.Object===Object&&go,Lm=typeof self=="object"&&self&&self.Object===Object&&self,se=gu||Lm||Function("return this")(),ka=t&&!t.nodeType&&t,hi=ka&&!0&&n&&!n.nodeType&&n,pu=hi&&hi.exports===ka,Da=pu&&gu.process,Ve=function(){try{var T=hi&&hi.require&&hi.require("util").types;return T||Da&&Da.binding&&Da.binding("util")}catch{}}(),mu=Ve&&Ve.isArrayBuffer,_u=Ve&&Ve.isDate,bu=Ve&&Ve.isMap,vu=Ve&&Ve.isRegExp,xu=Ve&&Ve.isSet,yu=Ve&&Ve.isTypedArray;function Fe(T,F,I){switch(I.length){case 0:return T.call(F);case 1:return T.call(F,I[0]);case 2:return T.call(F,I[0],I[1]);case 3:return T.call(F,I[0],I[1],I[2])}return T.apply(F,I)}function Rm(T,F,I,V){for(var nt=-1,wt=T==null?0:T.length;++nt<wt;){var Zt=T[nt];F(V,Zt,I(Zt),T)}return V}function Xe(T,F){for(var I=-1,V=T==null?0:T.length;++I<V&&F(T[I],I,T)!==!1;);return T}function Fm(T,F){for(var I=T==null?0:T.length;I--&&F(T[I],I,T)!==!1;);return T}function wu(T,F){for(var I=-1,V=T==null?0:T.length;++I<V;)if(!F(T[I],I,T))return!1;return!0}function jn(T,F){for(var I=-1,V=T==null?0:T.length,nt=0,wt=[];++I<V;){var Zt=T[I];F(Zt,I,T)&&(wt[nt++]=Zt)}return wt}function Ts(T,F){var I=T==null?0:T.length;return!!I&&$i(T,F,0)>-1}function Ma(T,F,I){for(var V=-1,nt=T==null?0:T.length;++V<nt;)if(I(F,T[V]))return!0;return!1}function Wt(T,F){for(var I=-1,V=T==null?0:T.length,nt=Array(V);++I<V;)nt[I]=F(T[I],I,T);return nt}function Gn(T,F){for(var I=-1,V=F.length,nt=T.length;++I<V;)T[nt+I]=F[I];return T}function Ta(T,F,I,V){var nt=-1,wt=T==null?0:T.length;for(V&&wt&&(I=T[++nt]);++nt<wt;)I=F(I,T[nt],nt,T);return I}function Bm(T,F,I,V){var nt=T==null?0:T.length;for(V&&nt&&(I=T[--nt]);nt--;)I=F(I,T[nt],nt,T);return I}function Aa(T,F){for(var I=-1,V=T==null?0:T.length;++I<V;)if(F(T[I],I,T))return!0;return!1}var Wm=Oa("length");function zm(T){return T.split("")}function Nm(T){return T.match(qp)||[]}function Su(T,F,I){var V;return I(T,function(nt,wt,Zt){if(F(nt,wt,Zt))return V=wt,!1}),V}function As(T,F,I,V){for(var nt=T.length,wt=I+(V?1:-1);V?wt--:++wt<nt;)if(F(T[wt],wt,T))return wt;return-1}function $i(T,F,I){return F===F?Jm(T,F,I):As(T,Cu,I)}function Hm(T,F,I,V){for(var nt=I-1,wt=T.length;++nt<wt;)if(V(T[nt],F))return nt;return-1}function Cu(T){return T!==T}function ku(T,F){var I=T==null?0:T.length;return I?Ia(T,F)/I:Gt}function Oa(T){return function(F){return F==null?e:F[T]}}function Ea(T){return function(F){return T==null?e:T[F]}}function Du(T,F,I,V,nt){return nt(T,function(wt,Zt,Ot){I=V?(V=!1,wt):F(I,wt,Zt,Ot)}),I}function $m(T,F){var I=T.length;for(T.sort(F);I--;)T[I]=T[I].value;return T}function Ia(T,F){for(var I,V=-1,nt=T.length;++V<nt;){var wt=F(T[V]);wt!==e&&(I=I===e?wt:I+wt)}return I}function Pa(T,F){for(var I=-1,V=Array(T);++I<T;)V[I]=F(I);return V}function Ym(T,F){return Wt(F,function(I){return[I,T[I]]})}function Mu(T){return T&&T.slice(0,Eu(T)+1).replace(va,"")}function Be(T){return function(F){return T(F)}}function La(T,F){return Wt(F,function(I){return T[I]})}function Cr(T,F){return T.has(F)}function Tu(T,F){for(var I=-1,V=T.length;++I<V&&$i(F,T[I],0)>-1;);return I}function Au(T,F){for(var I=T.length;I--&&$i(F,T[I],0)>-1;);return I}function Um(T,F){for(var I=T.length,V=0;I--;)T[I]===F&&++V;return V}var Vm=Ea(Tm),Xm=Ea(Am);function Km(T){return"\\"+Em[T]}function qm(T,F){return T==null?e:T[F]}function Yi(T){return Cm.test(T)}function jm(T){return km.test(T)}function Gm(T){for(var F,I=[];!(F=T.next()).done;)I.push(F.value);return I}function Ra(T){var F=-1,I=Array(T.size);return T.forEach(function(V,nt){I[++F]=[nt,V]}),I}function Ou(T,F){return function(I){return T(F(I))}}function Zn(T,F){for(var I=-1,V=T.length,nt=0,wt=[];++I<V;){var Zt=T[I];(Zt===F||Zt===g)&&(T[I]=g,wt[nt++]=I)}return wt}function Os(T){var F=-1,I=Array(T.size);return T.forEach(function(V){I[++F]=V}),I}function Zm(T){var F=-1,I=Array(T.size);return T.forEach(function(V){I[++F]=[V,V]}),I}function Jm(T,F,I){for(var V=I-1,nt=T.length;++V<nt;)if(T[V]===F)return V;return-1}function Qm(T,F,I){for(var V=I+1;V--;)if(T[V]===F)return V;return V}function Ui(T){return Yi(T)?e_(T):Wm(T)}function un(T){return Yi(T)?n_(T):zm(T)}function Eu(T){for(var F=T.length;F--&&Up.test(T.charAt(F)););return F}var t_=Ea(Om);function e_(T){for(var F=Ca.lastIndex=0;Ca.test(T);)++F;return F}function n_(T){return T.match(Ca)||[]}function i_(T){return T.match(Sm)||[]}var r_=function T(F){F=F==null?se:Vi.defaults(se.Object(),F,Vi.pick(se,Dm));var I=F.Array,V=F.Date,nt=F.Error,wt=F.Function,Zt=F.Math,Ot=F.Object,Fa=F.RegExp,s_=F.String,Ke=F.TypeError,Es=I.prototype,o_=wt.prototype,Xi=Ot.prototype,Is=F["__core-js_shared__"],Ps=o_.toString,Mt=Xi.hasOwnProperty,a_=0,Iu=function(){var r=/[^.]+$/.exec(Is&&Is.keys&&Is.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Ls=Xi.toString,l_=Ps.call(Ot),c_=se._,u_=Fa("^"+Ps.call(Mt).replace(ba,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rs=pu?F.Buffer:e,Jn=F.Symbol,Fs=F.Uint8Array,Pu=Rs?Rs.allocUnsafe:e,Bs=Ou(Ot.getPrototypeOf,Ot),Lu=Ot.create,Ru=Xi.propertyIsEnumerable,Ws=Es.splice,Fu=Jn?Jn.isConcatSpreadable:e,kr=Jn?Jn.iterator:e,di=Jn?Jn.toStringTag:e,zs=function(){try{var r=bi(Ot,"defineProperty");return r({},"",{}),r}catch{}}(),f_=F.clearTimeout!==se.clearTimeout&&F.clearTimeout,h_=V&&V.now!==se.Date.now&&V.now,d_=F.setTimeout!==se.setTimeout&&F.setTimeout,Ns=Zt.ceil,Hs=Zt.floor,Ba=Ot.getOwnPropertySymbols,g_=Rs?Rs.isBuffer:e,Bu=F.isFinite,p_=Es.join,m_=Ou(Ot.keys,Ot),Jt=Zt.max,de=Zt.min,__=V.now,b_=F.parseInt,Wu=Zt.random,v_=Es.reverse,Wa=bi(F,"DataView"),Dr=bi(F,"Map"),za=bi(F,"Promise"),Ki=bi(F,"Set"),Mr=bi(F,"WeakMap"),Tr=bi(Ot,"create"),$s=Mr&&new Mr,qi={},x_=vi(Wa),y_=vi(Dr),w_=vi(za),S_=vi(Ki),C_=vi(Mr),Ys=Jn?Jn.prototype:e,Ar=Ys?Ys.valueOf:e,zu=Ys?Ys.toString:e;function b(r){if(Yt(r)&&!st(r)&&!(r instanceof gt)){if(r instanceof qe)return r;if(Mt.call(r,"__wrapped__"))return Hf(r)}return new qe(r)}var ji=function(){function r(){}return function(o){if(!Nt(o))return{};if(Lu)return Lu(o);r.prototype=o;var c=new r;return r.prototype=e,c}}();function Us(){}function qe(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=e}b.templateSettings={escape:Wp,evaluate:zp,interpolate:qc,variable:"",imports:{_:b}},b.prototype=Us.prototype,b.prototype.constructor=b,qe.prototype=ji(Us.prototype),qe.prototype.constructor=qe;function gt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bt,this.__views__=[]}function k_(){var r=new gt(this.__wrapped__);return r.__actions__=Ce(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ce(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ce(this.__views__),r}function D_(){if(this.__filtered__){var r=new gt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function M_(){var r=this.__wrapped__.value(),o=this.__dir__,c=st(r),d=o<0,_=c?r.length:0,x=zb(0,_,this.__views__),C=x.start,D=x.end,A=D-C,W=d?D:C-1,z=this.__iteratees__,H=z.length,U=0,q=de(A,this.__takeCount__);if(!c||!d&&_==A&&q==A)return uf(r,this.__actions__);var J=[];t:for(;A--&&U<q;){W+=o;for(var ut=-1,Q=r[W];++ut<H;){var dt=z[ut],mt=dt.iteratee,Ne=dt.type,xe=mt(Q);if(Ne==at)Q=xe;else if(!xe){if(Ne==xt)continue t;break t}}J[U++]=Q}return J}gt.prototype=ji(Us.prototype),gt.prototype.constructor=gt;function gi(r){var o=-1,c=r==null?0:r.length;for(this.clear();++o<c;){var d=r[o];this.set(d[0],d[1])}}function T_(){this.__data__=Tr?Tr(null):{},this.size=0}function A_(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function O_(r){var o=this.__data__;if(Tr){var c=o[r];return c===f?e:c}return Mt.call(o,r)?o[r]:e}function E_(r){var o=this.__data__;return Tr?o[r]!==e:Mt.call(o,r)}function I_(r,o){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=Tr&&o===e?f:o,this}gi.prototype.clear=T_,gi.prototype.delete=A_,gi.prototype.get=O_,gi.prototype.has=E_,gi.prototype.set=I_;function En(r){var o=-1,c=r==null?0:r.length;for(this.clear();++o<c;){var d=r[o];this.set(d[0],d[1])}}function P_(){this.__data__=[],this.size=0}function L_(r){var o=this.__data__,c=Vs(o,r);if(c<0)return!1;var d=o.length-1;return c==d?o.pop():Ws.call(o,c,1),--this.size,!0}function R_(r){var o=this.__data__,c=Vs(o,r);return c<0?e:o[c][1]}function F_(r){return Vs(this.__data__,r)>-1}function B_(r,o){var c=this.__data__,d=Vs(c,r);return d<0?(++this.size,c.push([r,o])):c[d][1]=o,this}En.prototype.clear=P_,En.prototype.delete=L_,En.prototype.get=R_,En.prototype.has=F_,En.prototype.set=B_;function In(r){var o=-1,c=r==null?0:r.length;for(this.clear();++o<c;){var d=r[o];this.set(d[0],d[1])}}function W_(){this.size=0,this.__data__={hash:new gi,map:new(Dr||En),string:new gi}}function z_(r){var o=io(this,r).delete(r);return this.size-=o?1:0,o}function N_(r){return io(this,r).get(r)}function H_(r){return io(this,r).has(r)}function $_(r,o){var c=io(this,r),d=c.size;return c.set(r,o),this.size+=c.size==d?0:1,this}In.prototype.clear=W_,In.prototype.delete=z_,In.prototype.get=N_,In.prototype.has=H_,In.prototype.set=$_;function pi(r){var o=-1,c=r==null?0:r.length;for(this.__data__=new In;++o<c;)this.add(r[o])}function Y_(r){return this.__data__.set(r,f),this}function U_(r){return this.__data__.has(r)}pi.prototype.add=pi.prototype.push=Y_,pi.prototype.has=U_;function fn(r){var o=this.__data__=new En(r);this.size=o.size}function V_(){this.__data__=new En,this.size=0}function X_(r){var o=this.__data__,c=o.delete(r);return this.size=o.size,c}function K_(r){return this.__data__.get(r)}function q_(r){return this.__data__.has(r)}function j_(r,o){var c=this.__data__;if(c instanceof En){var d=c.__data__;if(!Dr||d.length<s-1)return d.push([r,o]),this.size=++c.size,this;c=this.__data__=new In(d)}return c.set(r,o),this.size=c.size,this}fn.prototype.clear=V_,fn.prototype.delete=X_,fn.prototype.get=K_,fn.prototype.has=q_,fn.prototype.set=j_;function Nu(r,o){var c=st(r),d=!c&&xi(r),_=!c&&!d&&ii(r),x=!c&&!d&&!_&&Qi(r),C=c||d||_||x,D=C?Pa(r.length,s_):[],A=D.length;for(var W in r)(o||Mt.call(r,W))&&!(C&&(W=="length"||_&&(W=="offset"||W=="parent")||x&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||Fn(W,A)))&&D.push(W);return D}function Hu(r){var o=r.length;return o?r[Ga(0,o-1)]:e}function G_(r,o){return ro(Ce(r),mi(o,0,r.length))}function Z_(r){return ro(Ce(r))}function Na(r,o,c){(c!==e&&!hn(r[o],c)||c===e&&!(o in r))&&Pn(r,o,c)}function Or(r,o,c){var d=r[o];(!(Mt.call(r,o)&&hn(d,c))||c===e&&!(o in r))&&Pn(r,o,c)}function Vs(r,o){for(var c=r.length;c--;)if(hn(r[c][0],o))return c;return-1}function J_(r,o,c,d){return Qn(r,function(_,x,C){o(d,_,c(_),C)}),d}function $u(r,o){return r&&yn(o,ee(o),r)}function Q_(r,o){return r&&yn(o,De(o),r)}function Pn(r,o,c){o=="__proto__"&&zs?zs(r,o,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[o]=c}function Ha(r,o){for(var c=-1,d=o.length,_=I(d),x=r==null;++c<d;)_[c]=x?e:yl(r,o[c]);return _}function mi(r,o,c){return r===r&&(c!==e&&(r=r<=c?r:c),o!==e&&(r=r>=o?r:o)),r}function je(r,o,c,d,_,x){var C,D=o&p,A=o&m,W=o&v;if(c&&(C=_?c(r,d,_,x):c(r)),C!==e)return C;if(!Nt(r))return r;var z=st(r);if(z){if(C=Hb(r),!D)return Ce(r,C)}else{var H=ge(r),U=H==fe||H==Se;if(ii(r))return df(r,D);if(H==he||H==ce||U&&!_){if(C=A||U?{}:If(r),!D)return A?Ob(r,Q_(C,r)):Ab(r,$u(C,r))}else{if(!It[H])return _?r:{};C=$b(r,H,D)}}x||(x=new fn);var q=x.get(r);if(q)return q;x.set(r,C),ah(r)?r.forEach(function(Q){C.add(je(Q,o,c,Q,r,x))}):sh(r)&&r.forEach(function(Q,dt){C.set(dt,je(Q,o,c,dt,r,x))});var J=W?A?al:ol:A?De:ee,ut=z?e:J(r);return Xe(ut||r,function(Q,dt){ut&&(dt=Q,Q=r[dt]),Or(C,dt,je(Q,o,c,dt,r,x))}),C}function tb(r){var o=ee(r);return function(c){return Yu(c,r,o)}}function Yu(r,o,c){var d=c.length;if(r==null)return!d;for(r=Ot(r);d--;){var _=c[d],x=o[_],C=r[_];if(C===e&&!(_ in r)||!x(C))return!1}return!0}function Uu(r,o,c){if(typeof r!="function")throw new Ke(l);return Br(function(){r.apply(e,c)},o)}function Er(r,o,c,d){var _=-1,x=Ts,C=!0,D=r.length,A=[],W=o.length;if(!D)return A;c&&(o=Wt(o,Be(c))),d?(x=Ma,C=!1):o.length>=s&&(x=Cr,C=!1,o=new pi(o));t:for(;++_<D;){var z=r[_],H=c==null?z:c(z);if(z=d||z!==0?z:0,C&&H===H){for(var U=W;U--;)if(o[U]===H)continue t;A.push(z)}else x(o,H,d)||A.push(z)}return A}var Qn=bf(xn),Vu=bf(Ya,!0);function eb(r,o){var c=!0;return Qn(r,function(d,_,x){return c=!!o(d,_,x),c}),c}function Xs(r,o,c){for(var d=-1,_=r.length;++d<_;){var x=r[d],C=o(x);if(C!=null&&(D===e?C===C&&!ze(C):c(C,D)))var D=C,A=x}return A}function nb(r,o,c,d){var _=r.length;for(c=lt(c),c<0&&(c=-c>_?0:_+c),d=d===e||d>_?_:lt(d),d<0&&(d+=_),d=c>d?0:ch(d);c<d;)r[c++]=o;return r}function Xu(r,o){var c=[];return Qn(r,function(d,_,x){o(d,_,x)&&c.push(d)}),c}function oe(r,o,c,d,_){var x=-1,C=r.length;for(c||(c=Ub),_||(_=[]);++x<C;){var D=r[x];o>0&&c(D)?o>1?oe(D,o-1,c,d,_):Gn(_,D):d||(_[_.length]=D)}return _}var $a=vf(),Ku=vf(!0);function xn(r,o){return r&&$a(r,o,ee)}function Ya(r,o){return r&&Ku(r,o,ee)}function Ks(r,o){return jn(o,function(c){return Bn(r[c])})}function _i(r,o){o=ei(o,r);for(var c=0,d=o.length;r!=null&&c<d;)r=r[wn(o[c++])];return c&&c==d?r:e}function qu(r,o,c){var d=o(r);return st(r)?d:Gn(d,c(r))}function be(r){return r==null?r===e?Ep:vn:di&&di in Ot(r)?Wb(r):Zb(r)}function Ua(r,o){return r>o}function ib(r,o){return r!=null&&Mt.call(r,o)}function rb(r,o){return r!=null&&o in Ot(r)}function sb(r,o,c){return r>=de(o,c)&&r<Jt(o,c)}function Va(r,o,c){for(var d=c?Ma:Ts,_=r[0].length,x=r.length,C=x,D=I(x),A=1/0,W=[];C--;){var z=r[C];C&&o&&(z=Wt(z,Be(o))),A=de(z.length,A),D[C]=!c&&(o||_>=120&&z.length>=120)?new pi(C&&z):e}z=r[0];var H=-1,U=D[0];t:for(;++H<_&&W.length<A;){var q=z[H],J=o?o(q):q;if(q=c||q!==0?q:0,!(U?Cr(U,J):d(W,J,c))){for(C=x;--C;){var ut=D[C];if(!(ut?Cr(ut,J):d(r[C],J,c)))continue t}U&&U.push(J),W.push(q)}}return W}function ob(r,o,c,d){return xn(r,function(_,x,C){o(d,c(_),x,C)}),d}function Ir(r,o,c){o=ei(o,r),r=Ff(r,o);var d=r==null?r:r[wn(Ze(o))];return d==null?e:Fe(d,r,c)}function ju(r){return Yt(r)&&be(r)==ce}function ab(r){return Yt(r)&&be(r)==Sr}function lb(r){return Yt(r)&&be(r)==rt}function Pr(r,o,c,d,_){return r===o?!0:r==null||o==null||!Yt(r)&&!Yt(o)?r!==r&&o!==o:cb(r,o,c,d,Pr,_)}function cb(r,o,c,d,_,x){var C=st(r),D=st(o),A=C?ue:ge(r),W=D?ue:ge(o);A=A==ce?he:A,W=W==ce?he:W;var z=A==he,H=W==he,U=A==W;if(U&&ii(r)){if(!ii(o))return!1;C=!0,z=!1}if(U&&!z)return x||(x=new fn),C||Qi(r)?Af(r,o,c,d,_,x):Fb(r,o,A,c,d,_,x);if(!(c&S)){var q=z&&Mt.call(r,"__wrapped__"),J=H&&Mt.call(o,"__wrapped__");if(q||J){var ut=q?r.value():r,Q=J?o.value():o;return x||(x=new fn),_(ut,Q,c,d,x)}}return U?(x||(x=new fn),Bb(r,o,c,d,_,x)):!1}function ub(r){return Yt(r)&&ge(r)==At}function Xa(r,o,c,d){var _=c.length,x=_,C=!d;if(r==null)return!x;for(r=Ot(r);_--;){var D=c[_];if(C&&D[2]?D[1]!==r[D[0]]:!(D[0]in r))return!1}for(;++_<x;){D=c[_];var A=D[0],W=r[A],z=D[1];if(C&&D[2]){if(W===e&&!(A in r))return!1}else{var H=new fn;if(d)var U=d(W,z,A,r,o,H);if(!(U===e?Pr(z,W,S|y,d,H):U))return!1}}return!0}function Gu(r){if(!Nt(r)||Xb(r))return!1;var o=Bn(r)?u_:tm;return o.test(vi(r))}function fb(r){return Yt(r)&&be(r)==zi}function hb(r){return Yt(r)&&ge(r)==cn}function db(r){return Yt(r)&&uo(r.length)&&!!Ft[be(r)]}function Zu(r){return typeof r=="function"?r:r==null?Me:typeof r=="object"?st(r)?tf(r[0],r[1]):Qu(r):xh(r)}function Ka(r){if(!Fr(r))return m_(r);var o=[];for(var c in Ot(r))Mt.call(r,c)&&c!="constructor"&&o.push(c);return o}function gb(r){if(!Nt(r))return Gb(r);var o=Fr(r),c=[];for(var d in r)d=="constructor"&&(o||!Mt.call(r,d))||c.push(d);return c}function qa(r,o){return r<o}function Ju(r,o){var c=-1,d=ke(r)?I(r.length):[];return Qn(r,function(_,x,C){d[++c]=o(_,x,C)}),d}function Qu(r){var o=cl(r);return o.length==1&&o[0][2]?Lf(o[0][0],o[0][1]):function(c){return c===r||Xa(c,r,o)}}function tf(r,o){return fl(r)&&Pf(o)?Lf(wn(r),o):function(c){var d=yl(c,r);return d===e&&d===o?wl(c,r):Pr(o,d,S|y)}}function qs(r,o,c,d,_){r!==o&&$a(o,function(x,C){if(_||(_=new fn),Nt(x))pb(r,o,C,c,qs,d,_);else{var D=d?d(dl(r,C),x,C+"",r,o,_):e;D===e&&(D=x),Na(r,C,D)}},De)}function pb(r,o,c,d,_,x,C){var D=dl(r,c),A=dl(o,c),W=C.get(A);if(W){Na(r,c,W);return}var z=x?x(D,A,c+"",r,o,C):e,H=z===e;if(H){var U=st(A),q=!U&&ii(A),J=!U&&!q&&Qi(A);z=A,U||q||J?st(D)?z=D:Xt(D)?z=Ce(D):q?(H=!1,z=df(A,!0)):J?(H=!1,z=gf(A,!0)):z=[]:Wr(A)||xi(A)?(z=D,xi(D)?z=uh(D):(!Nt(D)||Bn(D))&&(z=If(A))):H=!1}H&&(C.set(A,z),_(z,A,d,x,C),C.delete(A)),Na(r,c,z)}function ef(r,o){var c=r.length;if(c)return o+=o<0?c:0,Fn(o,c)?r[o]:e}function nf(r,o,c){o.length?o=Wt(o,function(x){return st(x)?function(C){return _i(C,x.length===1?x[0]:x)}:x}):o=[Me];var d=-1;o=Wt(o,Be(Z()));var _=Ju(r,function(x,C,D){var A=Wt(o,function(W){return W(x)});return{criteria:A,index:++d,value:x}});return $m(_,function(x,C){return Tb(x,C,c)})}function mb(r,o){return rf(r,o,function(c,d){return wl(r,d)})}function rf(r,o,c){for(var d=-1,_=o.length,x={};++d<_;){var C=o[d],D=_i(r,C);c(D,C)&&Lr(x,ei(C,r),D)}return x}function _b(r){return function(o){return _i(o,r)}}function ja(r,o,c,d){var _=d?Hm:$i,x=-1,C=o.length,D=r;for(r===o&&(o=Ce(o)),c&&(D=Wt(r,Be(c)));++x<C;)for(var A=0,W=o[x],z=c?c(W):W;(A=_(D,z,A,d))>-1;)D!==r&&Ws.call(D,A,1),Ws.call(r,A,1);return r}function sf(r,o){for(var c=r?o.length:0,d=c-1;c--;){var _=o[c];if(c==d||_!==x){var x=_;Fn(_)?Ws.call(r,_,1):Qa(r,_)}}return r}function Ga(r,o){return r+Hs(Wu()*(o-r+1))}function bb(r,o,c,d){for(var _=-1,x=Jt(Ns((o-r)/(c||1)),0),C=I(x);x--;)C[d?x:++_]=r,r+=c;return C}function Za(r,o){var c="";if(!r||o<1||o>Dt)return c;do o%2&&(c+=r),o=Hs(o/2),o&&(r+=r);while(o);return c}function ft(r,o){return gl(Rf(r,o,Me),r+"")}function vb(r){return Hu(tr(r))}function xb(r,o){var c=tr(r);return ro(c,mi(o,0,c.length))}function Lr(r,o,c,d){if(!Nt(r))return r;o=ei(o,r);for(var _=-1,x=o.length,C=x-1,D=r;D!=null&&++_<x;){var A=wn(o[_]),W=c;if(A==="__proto__"||A==="constructor"||A==="prototype")return r;if(_!=C){var z=D[A];W=d?d(z,A,D):e,W===e&&(W=Nt(z)?z:Fn(o[_+1])?[]:{})}Or(D,A,W),D=D[A]}return r}var of=$s?function(r,o){return $s.set(r,o),r}:Me,yb=zs?function(r,o){return zs(r,"toString",{configurable:!0,enumerable:!1,value:Cl(o),writable:!0})}:Me;function wb(r){return ro(tr(r))}function Ge(r,o,c){var d=-1,_=r.length;o<0&&(o=-o>_?0:_+o),c=c>_?_:c,c<0&&(c+=_),_=o>c?0:c-o>>>0,o>>>=0;for(var x=I(_);++d<_;)x[d]=r[d+o];return x}function Sb(r,o){var c;return Qn(r,function(d,_,x){return c=o(d,_,x),!c}),!!c}function js(r,o,c){var d=0,_=r==null?d:r.length;if(typeof o=="number"&&o===o&&_<=we){for(;d<_;){var x=d+_>>>1,C=r[x];C!==null&&!ze(C)&&(c?C<=o:C<o)?d=x+1:_=x}return _}return Ja(r,o,Me,c)}function Ja(r,o,c,d){var _=0,x=r==null?0:r.length;if(x===0)return 0;o=c(o);for(var C=o!==o,D=o===null,A=ze(o),W=o===e;_<x;){var z=Hs((_+x)/2),H=c(r[z]),U=H!==e,q=H===null,J=H===H,ut=ze(H);if(C)var Q=d||J;else W?Q=J&&(d||U):D?Q=J&&U&&(d||!q):A?Q=J&&U&&!q&&(d||!ut):q||ut?Q=!1:Q=d?H<=o:H<o;Q?_=z+1:x=z}return de(x,le)}function af(r,o){for(var c=-1,d=r.length,_=0,x=[];++c<d;){var C=r[c],D=o?o(C):C;if(!c||!hn(D,A)){var A=D;x[_++]=C===0?0:C}}return x}function lf(r){return typeof r=="number"?r:ze(r)?Gt:+r}function We(r){if(typeof r=="string")return r;if(st(r))return Wt(r,We)+"";if(ze(r))return zu?zu.call(r):"";var o=r+"";return o=="0"&&1/r==-yt?"-0":o}function ti(r,o,c){var d=-1,_=Ts,x=r.length,C=!0,D=[],A=D;if(c)C=!1,_=Ma;else if(x>=s){var W=o?null:Lb(r);if(W)return Os(W);C=!1,_=Cr,A=new pi}else A=o?[]:D;t:for(;++d<x;){var z=r[d],H=o?o(z):z;if(z=c||z!==0?z:0,C&&H===H){for(var U=A.length;U--;)if(A[U]===H)continue t;o&&A.push(H),D.push(z)}else _(A,H,c)||(A!==D&&A.push(H),D.push(z))}return D}function Qa(r,o){return o=ei(o,r),r=Ff(r,o),r==null||delete r[wn(Ze(o))]}function cf(r,o,c,d){return Lr(r,o,c(_i(r,o)),d)}function Gs(r,o,c,d){for(var _=r.length,x=d?_:-1;(d?x--:++x<_)&&o(r[x],x,r););return c?Ge(r,d?0:x,d?x+1:_):Ge(r,d?x+1:0,d?_:x)}function uf(r,o){var c=r;return c instanceof gt&&(c=c.value()),Ta(o,function(d,_){return _.func.apply(_.thisArg,Gn([d],_.args))},c)}function tl(r,o,c){var d=r.length;if(d<2)return d?ti(r[0]):[];for(var _=-1,x=I(d);++_<d;)for(var C=r[_],D=-1;++D<d;)D!=_&&(x[_]=Er(x[_]||C,r[D],o,c));return ti(oe(x,1),o,c)}function ff(r,o,c){for(var d=-1,_=r.length,x=o.length,C={};++d<_;){var D=d<x?o[d]:e;c(C,r[d],D)}return C}function el(r){return Xt(r)?r:[]}function nl(r){return typeof r=="function"?r:Me}function ei(r,o){return st(r)?r:fl(r,o)?[r]:Nf(kt(r))}var Cb=ft;function ni(r,o,c){var d=r.length;return c=c===e?d:c,!o&&c>=d?r:Ge(r,o,c)}var hf=f_||function(r){return se.clearTimeout(r)};function df(r,o){if(o)return r.slice();var c=r.length,d=Pu?Pu(c):new r.constructor(c);return r.copy(d),d}function il(r){var o=new r.constructor(r.byteLength);return new Fs(o).set(new Fs(r)),o}function kb(r,o){var c=o?il(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}function Db(r){var o=new r.constructor(r.source,jc.exec(r));return o.lastIndex=r.lastIndex,o}function Mb(r){return Ar?Ot(Ar.call(r)):{}}function gf(r,o){var c=o?il(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}function pf(r,o){if(r!==o){var c=r!==e,d=r===null,_=r===r,x=ze(r),C=o!==e,D=o===null,A=o===o,W=ze(o);if(!D&&!W&&!x&&r>o||x&&C&&A&&!D&&!W||d&&C&&A||!c&&A||!_)return 1;if(!d&&!x&&!W&&r<o||W&&c&&_&&!d&&!x||D&&c&&_||!C&&_||!A)return-1}return 0}function Tb(r,o,c){for(var d=-1,_=r.criteria,x=o.criteria,C=_.length,D=c.length;++d<C;){var A=pf(_[d],x[d]);if(A){if(d>=D)return A;var W=c[d];return A*(W=="desc"?-1:1)}}return r.index-o.index}function mf(r,o,c,d){for(var _=-1,x=r.length,C=c.length,D=-1,A=o.length,W=Jt(x-C,0),z=I(A+W),H=!d;++D<A;)z[D]=o[D];for(;++_<C;)(H||_<x)&&(z[c[_]]=r[_]);for(;W--;)z[D++]=r[_++];return z}function _f(r,o,c,d){for(var _=-1,x=r.length,C=-1,D=c.length,A=-1,W=o.length,z=Jt(x-D,0),H=I(z+W),U=!d;++_<z;)H[_]=r[_];for(var q=_;++A<W;)H[q+A]=o[A];for(;++C<D;)(U||_<x)&&(H[q+c[C]]=r[_++]);return H}function Ce(r,o){var c=-1,d=r.length;for(o||(o=I(d));++c<d;)o[c]=r[c];return o}function yn(r,o,c,d){var _=!c;c||(c={});for(var x=-1,C=o.length;++x<C;){var D=o[x],A=d?d(c[D],r[D],D,c,r):e;A===e&&(A=r[D]),_?Pn(c,D,A):Or(c,D,A)}return c}function Ab(r,o){return yn(r,ul(r),o)}function Ob(r,o){return yn(r,Of(r),o)}function Zs(r,o){return function(c,d){var _=st(c)?Rm:J_,x=o?o():{};return _(c,r,Z(d,2),x)}}function Gi(r){return ft(function(o,c){var d=-1,_=c.length,x=_>1?c[_-1]:e,C=_>2?c[2]:e;for(x=r.length>3&&typeof x=="function"?(_--,x):e,C&&ve(c[0],c[1],C)&&(x=_<3?e:x,_=1),o=Ot(o);++d<_;){var D=c[d];D&&r(o,D,d,x)}return o})}function bf(r,o){return function(c,d){if(c==null)return c;if(!ke(c))return r(c,d);for(var _=c.length,x=o?_:-1,C=Ot(c);(o?x--:++x<_)&&d(C[x],x,C)!==!1;);return c}}function vf(r){return function(o,c,d){for(var _=-1,x=Ot(o),C=d(o),D=C.length;D--;){var A=C[r?D:++_];if(c(x[A],A,x)===!1)break}return o}}function Eb(r,o,c){var d=o&w,_=Rr(r);function x(){var C=this&&this!==se&&this instanceof x?_:r;return C.apply(d?c:this,arguments)}return x}function xf(r){return function(o){o=kt(o);var c=Yi(o)?un(o):e,d=c?c[0]:o.charAt(0),_=c?ni(c,1).join(""):o.slice(1);return d[r]()+_}}function Zi(r){return function(o){return Ta(bh(_h(o).replace(ym,"")),r,"")}}function Rr(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var c=ji(r.prototype),d=r.apply(c,o);return Nt(d)?d:c}}function Ib(r,o,c){var d=Rr(r);function _(){for(var x=arguments.length,C=I(x),D=x,A=Ji(_);D--;)C[D]=arguments[D];var W=x<3&&C[0]!==A&&C[x-1]!==A?[]:Zn(C,A);if(x-=W.length,x<c)return kf(r,o,Js,_.placeholder,e,C,W,e,e,c-x);var z=this&&this!==se&&this instanceof _?d:r;return Fe(z,this,C)}return _}function yf(r){return function(o,c,d){var _=Ot(o);if(!ke(o)){var x=Z(c,3);o=ee(o),c=function(D){return x(_[D],D,_)}}var C=r(o,c,d);return C>-1?_[x?o[C]:C]:e}}function wf(r){return Rn(function(o){var c=o.length,d=c,_=qe.prototype.thru;for(r&&o.reverse();d--;){var x=o[d];if(typeof x!="function")throw new Ke(l);if(_&&!C&&no(x)=="wrapper")var C=new qe([],!0)}for(d=C?d:c;++d<c;){x=o[d];var D=no(x),A=D=="wrapper"?ll(x):e;A&&hl(A[0])&&A[1]==(B|P|M|L)&&!A[4].length&&A[9]==1?C=C[no(A[0])].apply(C,A[3]):C=x.length==1&&hl(x)?C[D]():C.thru(x)}return function(){var W=arguments,z=W[0];if(C&&W.length==1&&st(z))return C.plant(z).value();for(var H=0,U=c?o[H].apply(this,W):z;++H<c;)U=o[H].call(this,U);return U}})}function Js(r,o,c,d,_,x,C,D,A,W){var z=o&B,H=o&w,U=o&k,q=o&(P|E),J=o&$,ut=U?e:Rr(r);function Q(){for(var dt=arguments.length,mt=I(dt),Ne=dt;Ne--;)mt[Ne]=arguments[Ne];if(q)var xe=Ji(Q),He=Um(mt,xe);if(d&&(mt=mf(mt,d,_,q)),x&&(mt=_f(mt,x,C,q)),dt-=He,q&&dt<W){var Kt=Zn(mt,xe);return kf(r,o,Js,Q.placeholder,c,mt,Kt,D,A,W-dt)}var dn=H?c:this,zn=U?dn[r]:r;return dt=mt.length,D?mt=Jb(mt,D):J&&dt>1&&mt.reverse(),z&&A<dt&&(mt.length=A),this&&this!==se&&this instanceof Q&&(zn=ut||Rr(zn)),zn.apply(dn,mt)}return Q}function Sf(r,o){return function(c,d){return ob(c,r,o(d),{})}}function Qs(r,o){return function(c,d){var _;if(c===e&&d===e)return o;if(c!==e&&(_=c),d!==e){if(_===e)return d;typeof c=="string"||typeof d=="string"?(c=We(c),d=We(d)):(c=lf(c),d=lf(d)),_=r(c,d)}return _}}function rl(r){return Rn(function(o){return o=Wt(o,Be(Z())),ft(function(c){var d=this;return r(o,function(_){return Fe(_,d,c)})})})}function to(r,o){o=o===e?" ":We(o);var c=o.length;if(c<2)return c?Za(o,r):o;var d=Za(o,Ns(r/Ui(o)));return Yi(o)?ni(un(d),0,r).join(""):d.slice(0,r)}function Pb(r,o,c,d){var _=o&w,x=Rr(r);function C(){for(var D=-1,A=arguments.length,W=-1,z=d.length,H=I(z+A),U=this&&this!==se&&this instanceof C?x:r;++W<z;)H[W]=d[W];for(;A--;)H[W++]=arguments[++D];return Fe(U,_?c:this,H)}return C}function Cf(r){return function(o,c,d){return d&&typeof d!="number"&&ve(o,c,d)&&(c=d=e),o=Wn(o),c===e?(c=o,o=0):c=Wn(c),d=d===e?o<c?1:-1:Wn(d),bb(o,c,d,r)}}function eo(r){return function(o,c){return typeof o=="string"&&typeof c=="string"||(o=Je(o),c=Je(c)),r(o,c)}}function kf(r,o,c,d,_,x,C,D,A,W){var z=o&P,H=z?C:e,U=z?e:C,q=z?x:e,J=z?e:x;o|=z?M:R,o&=~(z?R:M),o&O||(o&=-4);var ut=[r,o,_,q,H,J,U,D,A,W],Q=c.apply(e,ut);return hl(r)&&Bf(Q,ut),Q.placeholder=d,Wf(Q,r,o)}function sl(r){var o=Zt[r];return function(c,d){if(c=Je(c),d=d==null?0:de(lt(d),292),d&&Bu(c)){var _=(kt(c)+"e").split("e"),x=o(_[0]+"e"+(+_[1]+d));return _=(kt(x)+"e").split("e"),+(_[0]+"e"+(+_[1]-d))}return o(c)}}var Lb=Ki&&1/Os(new Ki([,-0]))[1]==yt?function(r){return new Ki(r)}:Ml;function Df(r){return function(o){var c=ge(o);return c==At?Ra(o):c==cn?Zm(o):Ym(o,r(o))}}function Ln(r,o,c,d,_,x,C,D){var A=o&k;if(!A&&typeof r!="function")throw new Ke(l);var W=d?d.length:0;if(W||(o&=-97,d=_=e),C=C===e?C:Jt(lt(C),0),D=D===e?D:lt(D),W-=_?_.length:0,o&R){var z=d,H=_;d=_=e}var U=A?e:ll(r),q=[r,o,c,d,_,z,H,x,C,D];if(U&&jb(q,U),r=q[0],o=q[1],c=q[2],d=q[3],_=q[4],D=q[9]=q[9]===e?A?0:r.length:Jt(q[9]-W,0),!D&&o&(P|E)&&(o&=-25),!o||o==w)var J=Eb(r,o,c);else o==P||o==E?J=Ib(r,o,D):(o==M||o==(w|M))&&!_.length?J=Pb(r,o,c,d):J=Js.apply(e,q);var ut=U?of:Bf;return Wf(ut(J,q),r,o)}function Mf(r,o,c,d){return r===e||hn(r,Xi[c])&&!Mt.call(d,c)?o:r}function Tf(r,o,c,d,_,x){return Nt(r)&&Nt(o)&&(x.set(o,r),qs(r,o,e,Tf,x),x.delete(o)),r}function Rb(r){return Wr(r)?e:r}function Af(r,o,c,d,_,x){var C=c&S,D=r.length,A=o.length;if(D!=A&&!(C&&A>D))return!1;var W=x.get(r),z=x.get(o);if(W&&z)return W==o&&z==r;var H=-1,U=!0,q=c&y?new pi:e;for(x.set(r,o),x.set(o,r);++H<D;){var J=r[H],ut=o[H];if(d)var Q=C?d(ut,J,H,o,r,x):d(J,ut,H,r,o,x);if(Q!==e){if(Q)continue;U=!1;break}if(q){if(!Aa(o,function(dt,mt){if(!Cr(q,mt)&&(J===dt||_(J,dt,c,d,x)))return q.push(mt)})){U=!1;break}}else if(!(J===ut||_(J,ut,c,d,x))){U=!1;break}}return x.delete(r),x.delete(o),U}function Fb(r,o,c,d,_,x,C){switch(c){case Ni:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case Sr:return!(r.byteLength!=o.byteLength||!x(new Fs(r),new Fs(o)));case it:case rt:case $t:return hn(+r,+o);case Rt:return r.name==o.name&&r.message==o.message;case zi:case yr:return r==o+"";case At:var D=Ra;case cn:var A=d&S;if(D||(D=Os),r.size!=o.size&&!A)return!1;var W=C.get(r);if(W)return W==o;d|=y,C.set(r,o);var z=Af(D(r),D(o),d,_,x,C);return C.delete(r),z;case Cs:if(Ar)return Ar.call(r)==Ar.call(o)}return!1}function Bb(r,o,c,d,_,x){var C=c&S,D=ol(r),A=D.length,W=ol(o),z=W.length;if(A!=z&&!C)return!1;for(var H=A;H--;){var U=D[H];if(!(C?U in o:Mt.call(o,U)))return!1}var q=x.get(r),J=x.get(o);if(q&&J)return q==o&&J==r;var ut=!0;x.set(r,o),x.set(o,r);for(var Q=C;++H<A;){U=D[H];var dt=r[U],mt=o[U];if(d)var Ne=C?d(mt,dt,U,o,r,x):d(dt,mt,U,r,o,x);if(!(Ne===e?dt===mt||_(dt,mt,c,d,x):Ne)){ut=!1;break}Q||(Q=U=="constructor")}if(ut&&!Q){var xe=r.constructor,He=o.constructor;xe!=He&&"constructor"in r&&"constructor"in o&&!(typeof xe=="function"&&xe instanceof xe&&typeof He=="function"&&He instanceof He)&&(ut=!1)}return x.delete(r),x.delete(o),ut}function Rn(r){return gl(Rf(r,e,Uf),r+"")}function ol(r){return qu(r,ee,ul)}function al(r){return qu(r,De,Of)}var ll=$s?function(r){return $s.get(r)}:Ml;function no(r){for(var o=r.name+"",c=qi[o],d=Mt.call(qi,o)?c.length:0;d--;){var _=c[d],x=_.func;if(x==null||x==r)return _.name}return o}function Ji(r){var o=Mt.call(b,"placeholder")?b:r;return o.placeholder}function Z(){var r=b.iteratee||kl;return r=r===kl?Zu:r,arguments.length?r(arguments[0],arguments[1]):r}function io(r,o){var c=r.__data__;return Vb(o)?c[typeof o=="string"?"string":"hash"]:c.map}function cl(r){for(var o=ee(r),c=o.length;c--;){var d=o[c],_=r[d];o[c]=[d,_,Pf(_)]}return o}function bi(r,o){var c=qm(r,o);return Gu(c)?c:e}function Wb(r){var o=Mt.call(r,di),c=r[di];try{r[di]=e;var d=!0}catch{}var _=Ls.call(r);return d&&(o?r[di]=c:delete r[di]),_}var ul=Ba?function(r){return r==null?[]:(r=Ot(r),jn(Ba(r),function(o){return Ru.call(r,o)}))}:Tl,Of=Ba?function(r){for(var o=[];r;)Gn(o,ul(r)),r=Bs(r);return o}:Tl,ge=be;(Wa&&ge(new Wa(new ArrayBuffer(1)))!=Ni||Dr&&ge(new Dr)!=At||za&&ge(za.resolve())!=Wi||Ki&&ge(new Ki)!=cn||Mr&&ge(new Mr)!=wr)&&(ge=function(r){var o=be(r),c=o==he?r.constructor:e,d=c?vi(c):"";if(d)switch(d){case x_:return Ni;case y_:return At;case w_:return Wi;case S_:return cn;case C_:return wr}return o});function zb(r,o,c){for(var d=-1,_=c.length;++d<_;){var x=c[d],C=x.size;switch(x.type){case"drop":r+=C;break;case"dropRight":o-=C;break;case"take":o=de(o,r+C);break;case"takeRight":r=Jt(r,o-C);break}}return{start:r,end:o}}function Nb(r){var o=r.match(Xp);return o?o[1].split(Kp):[]}function Ef(r,o,c){o=ei(o,r);for(var d=-1,_=o.length,x=!1;++d<_;){var C=wn(o[d]);if(!(x=r!=null&&c(r,C)))break;r=r[C]}return x||++d!=_?x:(_=r==null?0:r.length,!!_&&uo(_)&&Fn(C,_)&&(st(r)||xi(r)))}function Hb(r){var o=r.length,c=new r.constructor(o);return o&&typeof r[0]=="string"&&Mt.call(r,"index")&&(c.index=r.index,c.input=r.input),c}function If(r){return typeof r.constructor=="function"&&!Fr(r)?ji(Bs(r)):{}}function $b(r,o,c){var d=r.constructor;switch(o){case Sr:return il(r);case it:case rt:return new d(+r);case Ni:return kb(r,c);case ca:case ua:case fa:case ha:case da:case ga:case pa:case ma:case _a:return gf(r,c);case At:return new d;case $t:case yr:return new d(r);case zi:return Db(r);case cn:return new d;case Cs:return Mb(r)}}function Yb(r,o){var c=o.length;if(!c)return r;var d=c-1;return o[d]=(c>1?"& ":"")+o[d],o=o.join(c>2?", ":" "),r.replace(Vp,`{
/* [wrapped with `+o+`] */
`)}function Ub(r){return st(r)||xi(r)||!!(Fu&&r&&r[Fu])}function Fn(r,o){var c=typeof r;return o=o??Dt,!!o&&(c=="number"||c!="symbol"&&nm.test(r))&&r>-1&&r%1==0&&r<o}function ve(r,o,c){if(!Nt(c))return!1;var d=typeof o;return(d=="number"?ke(c)&&Fn(o,c.length):d=="string"&&o in c)?hn(c[o],r):!1}function fl(r,o){if(st(r))return!1;var c=typeof r;return c=="number"||c=="symbol"||c=="boolean"||r==null||ze(r)?!0:Hp.test(r)||!Np.test(r)||o!=null&&r in Ot(o)}function Vb(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function hl(r){var o=no(r),c=b[o];if(typeof c!="function"||!(o in gt.prototype))return!1;if(r===c)return!0;var d=ll(c);return!!d&&r===d[0]}function Xb(r){return!!Iu&&Iu in r}var Kb=Is?Bn:Al;function Fr(r){var o=r&&r.constructor,c=typeof o=="function"&&o.prototype||Xi;return r===c}function Pf(r){return r===r&&!Nt(r)}function Lf(r,o){return function(c){return c==null?!1:c[r]===o&&(o!==e||r in Ot(c))}}function qb(r){var o=lo(r,function(d){return c.size===h&&c.clear(),d}),c=o.cache;return o}function jb(r,o){var c=r[1],d=o[1],_=c|d,x=_<(w|k|B),C=d==B&&c==P||d==B&&c==L&&r[7].length<=o[8]||d==(B|L)&&o[7].length<=o[8]&&c==P;if(!(x||C))return r;d&w&&(r[2]=o[2],_|=c&w?0:O);var D=o[3];if(D){var A=r[3];r[3]=A?mf(A,D,o[4]):D,r[4]=A?Zn(r[3],g):o[4]}return D=o[5],D&&(A=r[5],r[5]=A?_f(A,D,o[6]):D,r[6]=A?Zn(r[5],g):o[6]),D=o[7],D&&(r[7]=D),d&B&&(r[8]=r[8]==null?o[8]:de(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=_,r}function Gb(r){var o=[];if(r!=null)for(var c in Ot(r))o.push(c);return o}function Zb(r){return Ls.call(r)}function Rf(r,o,c){return o=Jt(o===e?r.length-1:o,0),function(){for(var d=arguments,_=-1,x=Jt(d.length-o,0),C=I(x);++_<x;)C[_]=d[o+_];_=-1;for(var D=I(o+1);++_<o;)D[_]=d[_];return D[o]=c(C),Fe(r,this,D)}}function Ff(r,o){return o.length<2?r:_i(r,Ge(o,0,-1))}function Jb(r,o){for(var c=r.length,d=de(o.length,c),_=Ce(r);d--;){var x=o[d];r[d]=Fn(x,c)?_[x]:e}return r}function dl(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var Bf=zf(of),Br=d_||function(r,o){return se.setTimeout(r,o)},gl=zf(yb);function Wf(r,o,c){var d=o+"";return gl(r,Yb(d,Qb(Nb(d),c)))}function zf(r){var o=0,c=0;return function(){var d=__(),_=ct-(d-c);if(c=d,_>0){if(++o>=G)return arguments[0]}else o=0;return r.apply(e,arguments)}}function ro(r,o){var c=-1,d=r.length,_=d-1;for(o=o===e?d:o;++c<o;){var x=Ga(c,_),C=r[x];r[x]=r[c],r[c]=C}return r.length=o,r}var Nf=qb(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace($p,function(c,d,_,x){o.push(_?x.replace(Gp,"$1"):d||c)}),o});function wn(r){if(typeof r=="string"||ze(r))return r;var o=r+"";return o=="0"&&1/r==-yt?"-0":o}function vi(r){if(r!=null){try{return Ps.call(r)}catch{}try{return r+""}catch{}}return""}function Qb(r,o){return Xe(Re,function(c){var d="_."+c[0];o&c[1]&&!Ts(r,d)&&r.push(d)}),r.sort()}function Hf(r){if(r instanceof gt)return r.clone();var o=new qe(r.__wrapped__,r.__chain__);return o.__actions__=Ce(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function t0(r,o,c){(c?ve(r,o,c):o===e)?o=1:o=Jt(lt(o),0);var d=r==null?0:r.length;if(!d||o<1)return[];for(var _=0,x=0,C=I(Ns(d/o));_<d;)C[x++]=Ge(r,_,_+=o);return C}function e0(r){for(var o=-1,c=r==null?0:r.length,d=0,_=[];++o<c;){var x=r[o];x&&(_[d++]=x)}return _}function n0(){var r=arguments.length;if(!r)return[];for(var o=I(r-1),c=arguments[0],d=r;d--;)o[d-1]=arguments[d];return Gn(st(c)?Ce(c):[c],oe(o,1))}var i0=ft(function(r,o){return Xt(r)?Er(r,oe(o,1,Xt,!0)):[]}),r0=ft(function(r,o){var c=Ze(o);return Xt(c)&&(c=e),Xt(r)?Er(r,oe(o,1,Xt,!0),Z(c,2)):[]}),s0=ft(function(r,o){var c=Ze(o);return Xt(c)&&(c=e),Xt(r)?Er(r,oe(o,1,Xt,!0),e,c):[]});function o0(r,o,c){var d=r==null?0:r.length;return d?(o=c||o===e?1:lt(o),Ge(r,o<0?0:o,d)):[]}function a0(r,o,c){var d=r==null?0:r.length;return d?(o=c||o===e?1:lt(o),o=d-o,Ge(r,0,o<0?0:o)):[]}function l0(r,o){return r&&r.length?Gs(r,Z(o,3),!0,!0):[]}function c0(r,o){return r&&r.length?Gs(r,Z(o,3),!0):[]}function u0(r,o,c,d){var _=r==null?0:r.length;return _?(c&&typeof c!="number"&&ve(r,o,c)&&(c=0,d=_),nb(r,o,c,d)):[]}function $f(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var _=c==null?0:lt(c);return _<0&&(_=Jt(d+_,0)),As(r,Z(o,3),_)}function Yf(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var _=d-1;return c!==e&&(_=lt(c),_=c<0?Jt(d+_,0):de(_,d-1)),As(r,Z(o,3),_,!0)}function Uf(r){var o=r==null?0:r.length;return o?oe(r,1):[]}function f0(r){var o=r==null?0:r.length;return o?oe(r,yt):[]}function h0(r,o){var c=r==null?0:r.length;return c?(o=o===e?1:lt(o),oe(r,o)):[]}function d0(r){for(var o=-1,c=r==null?0:r.length,d={};++o<c;){var _=r[o];d[_[0]]=_[1]}return d}function Vf(r){return r&&r.length?r[0]:e}function g0(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var _=c==null?0:lt(c);return _<0&&(_=Jt(d+_,0)),$i(r,o,_)}function p0(r){var o=r==null?0:r.length;return o?Ge(r,0,-1):[]}var m0=ft(function(r){var o=Wt(r,el);return o.length&&o[0]===r[0]?Va(o):[]}),_0=ft(function(r){var o=Ze(r),c=Wt(r,el);return o===Ze(c)?o=e:c.pop(),c.length&&c[0]===r[0]?Va(c,Z(o,2)):[]}),b0=ft(function(r){var o=Ze(r),c=Wt(r,el);return o=typeof o=="function"?o:e,o&&c.pop(),c.length&&c[0]===r[0]?Va(c,e,o):[]});function v0(r,o){return r==null?"":p_.call(r,o)}function Ze(r){var o=r==null?0:r.length;return o?r[o-1]:e}function x0(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var _=d;return c!==e&&(_=lt(c),_=_<0?Jt(d+_,0):de(_,d-1)),o===o?Qm(r,o,_):As(r,Cu,_,!0)}function y0(r,o){return r&&r.length?ef(r,lt(o)):e}var w0=ft(Xf);function Xf(r,o){return r&&r.length&&o&&o.length?ja(r,o):r}function S0(r,o,c){return r&&r.length&&o&&o.length?ja(r,o,Z(c,2)):r}function C0(r,o,c){return r&&r.length&&o&&o.length?ja(r,o,e,c):r}var k0=Rn(function(r,o){var c=r==null?0:r.length,d=Ha(r,o);return sf(r,Wt(o,function(_){return Fn(_,c)?+_:_}).sort(pf)),d});function D0(r,o){var c=[];if(!(r&&r.length))return c;var d=-1,_=[],x=r.length;for(o=Z(o,3);++d<x;){var C=r[d];o(C,d,r)&&(c.push(C),_.push(d))}return sf(r,_),c}function pl(r){return r==null?r:v_.call(r)}function M0(r,o,c){var d=r==null?0:r.length;return d?(c&&typeof c!="number"&&ve(r,o,c)?(o=0,c=d):(o=o==null?0:lt(o),c=c===e?d:lt(c)),Ge(r,o,c)):[]}function T0(r,o){return js(r,o)}function A0(r,o,c){return Ja(r,o,Z(c,2))}function O0(r,o){var c=r==null?0:r.length;if(c){var d=js(r,o);if(d<c&&hn(r[d],o))return d}return-1}function E0(r,o){return js(r,o,!0)}function I0(r,o,c){return Ja(r,o,Z(c,2),!0)}function P0(r,o){var c=r==null?0:r.length;if(c){var d=js(r,o,!0)-1;if(hn(r[d],o))return d}return-1}function L0(r){return r&&r.length?af(r):[]}function R0(r,o){return r&&r.length?af(r,Z(o,2)):[]}function F0(r){var o=r==null?0:r.length;return o?Ge(r,1,o):[]}function B0(r,o,c){return r&&r.length?(o=c||o===e?1:lt(o),Ge(r,0,o<0?0:o)):[]}function W0(r,o,c){var d=r==null?0:r.length;return d?(o=c||o===e?1:lt(o),o=d-o,Ge(r,o<0?0:o,d)):[]}function z0(r,o){return r&&r.length?Gs(r,Z(o,3),!1,!0):[]}function N0(r,o){return r&&r.length?Gs(r,Z(o,3)):[]}var H0=ft(function(r){return ti(oe(r,1,Xt,!0))}),$0=ft(function(r){var o=Ze(r);return Xt(o)&&(o=e),ti(oe(r,1,Xt,!0),Z(o,2))}),Y0=ft(function(r){var o=Ze(r);return o=typeof o=="function"?o:e,ti(oe(r,1,Xt,!0),e,o)});function U0(r){return r&&r.length?ti(r):[]}function V0(r,o){return r&&r.length?ti(r,Z(o,2)):[]}function X0(r,o){return o=typeof o=="function"?o:e,r&&r.length?ti(r,e,o):[]}function ml(r){if(!(r&&r.length))return[];var o=0;return r=jn(r,function(c){if(Xt(c))return o=Jt(c.length,o),!0}),Pa(o,function(c){return Wt(r,Oa(c))})}function Kf(r,o){if(!(r&&r.length))return[];var c=ml(r);return o==null?c:Wt(c,function(d){return Fe(o,e,d)})}var K0=ft(function(r,o){return Xt(r)?Er(r,o):[]}),q0=ft(function(r){return tl(jn(r,Xt))}),j0=ft(function(r){var o=Ze(r);return Xt(o)&&(o=e),tl(jn(r,Xt),Z(o,2))}),G0=ft(function(r){var o=Ze(r);return o=typeof o=="function"?o:e,tl(jn(r,Xt),e,o)}),Z0=ft(ml);function J0(r,o){return ff(r||[],o||[],Or)}function Q0(r,o){return ff(r||[],o||[],Lr)}var tv=ft(function(r){var o=r.length,c=o>1?r[o-1]:e;return c=typeof c=="function"?(r.pop(),c):e,Kf(r,c)});function qf(r){var o=b(r);return o.__chain__=!0,o}function ev(r,o){return o(r),r}function so(r,o){return o(r)}var nv=Rn(function(r){var o=r.length,c=o?r[0]:0,d=this.__wrapped__,_=function(x){return Ha(x,r)};return o>1||this.__actions__.length||!(d instanceof gt)||!Fn(c)?this.thru(_):(d=d.slice(c,+c+(o?1:0)),d.__actions__.push({func:so,args:[_],thisArg:e}),new qe(d,this.__chain__).thru(function(x){return o&&!x.length&&x.push(e),x}))});function iv(){return qf(this)}function rv(){return new qe(this.value(),this.__chain__)}function sv(){this.__values__===e&&(this.__values__=lh(this.value()));var r=this.__index__>=this.__values__.length,o=r?e:this.__values__[this.__index__++];return{done:r,value:o}}function ov(){return this}function av(r){for(var o,c=this;c instanceof Us;){var d=Hf(c);d.__index__=0,d.__values__=e,o?_.__wrapped__=d:o=d;var _=d;c=c.__wrapped__}return _.__wrapped__=r,o}function lv(){var r=this.__wrapped__;if(r instanceof gt){var o=r;return this.__actions__.length&&(o=new gt(this)),o=o.reverse(),o.__actions__.push({func:so,args:[pl],thisArg:e}),new qe(o,this.__chain__)}return this.thru(pl)}function cv(){return uf(this.__wrapped__,this.__actions__)}var uv=Zs(function(r,o,c){Mt.call(r,c)?++r[c]:Pn(r,c,1)});function fv(r,o,c){var d=st(r)?wu:eb;return c&&ve(r,o,c)&&(o=e),d(r,Z(o,3))}function hv(r,o){var c=st(r)?jn:Xu;return c(r,Z(o,3))}var dv=yf($f),gv=yf(Yf);function pv(r,o){return oe(oo(r,o),1)}function mv(r,o){return oe(oo(r,o),yt)}function _v(r,o,c){return c=c===e?1:lt(c),oe(oo(r,o),c)}function jf(r,o){var c=st(r)?Xe:Qn;return c(r,Z(o,3))}function Gf(r,o){var c=st(r)?Fm:Vu;return c(r,Z(o,3))}var bv=Zs(function(r,o,c){Mt.call(r,c)?r[c].push(o):Pn(r,c,[o])});function vv(r,o,c,d){r=ke(r)?r:tr(r),c=c&&!d?lt(c):0;var _=r.length;return c<0&&(c=Jt(_+c,0)),fo(r)?c<=_&&r.indexOf(o,c)>-1:!!_&&$i(r,o,c)>-1}var xv=ft(function(r,o,c){var d=-1,_=typeof o=="function",x=ke(r)?I(r.length):[];return Qn(r,function(C){x[++d]=_?Fe(o,C,c):Ir(C,o,c)}),x}),yv=Zs(function(r,o,c){Pn(r,c,o)});function oo(r,o){var c=st(r)?Wt:Ju;return c(r,Z(o,3))}function wv(r,o,c,d){return r==null?[]:(st(o)||(o=o==null?[]:[o]),c=d?e:c,st(c)||(c=c==null?[]:[c]),nf(r,o,c))}var Sv=Zs(function(r,o,c){r[c?0:1].push(o)},function(){return[[],[]]});function Cv(r,o,c){var d=st(r)?Ta:Du,_=arguments.length<3;return d(r,Z(o,4),c,_,Qn)}function kv(r,o,c){var d=st(r)?Bm:Du,_=arguments.length<3;return d(r,Z(o,4),c,_,Vu)}function Dv(r,o){var c=st(r)?jn:Xu;return c(r,co(Z(o,3)))}function Mv(r){var o=st(r)?Hu:vb;return o(r)}function Tv(r,o,c){(c?ve(r,o,c):o===e)?o=1:o=lt(o);var d=st(r)?G_:xb;return d(r,o)}function Av(r){var o=st(r)?Z_:wb;return o(r)}function Ov(r){if(r==null)return 0;if(ke(r))return fo(r)?Ui(r):r.length;var o=ge(r);return o==At||o==cn?r.size:Ka(r).length}function Ev(r,o,c){var d=st(r)?Aa:Sb;return c&&ve(r,o,c)&&(o=e),d(r,Z(o,3))}var Iv=ft(function(r,o){if(r==null)return[];var c=o.length;return c>1&&ve(r,o[0],o[1])?o=[]:c>2&&ve(o[0],o[1],o[2])&&(o=[o[0]]),nf(r,oe(o,1),[])}),ao=h_||function(){return se.Date.now()};function Pv(r,o){if(typeof o!="function")throw new Ke(l);return r=lt(r),function(){if(--r<1)return o.apply(this,arguments)}}function Zf(r,o,c){return o=c?e:o,o=r&&o==null?r.length:o,Ln(r,B,e,e,e,e,o)}function Jf(r,o){var c;if(typeof o!="function")throw new Ke(l);return r=lt(r),function(){return--r>0&&(c=o.apply(this,arguments)),r<=1&&(o=e),c}}var _l=ft(function(r,o,c){var d=w;if(c.length){var _=Zn(c,Ji(_l));d|=M}return Ln(r,d,o,c,_)}),Qf=ft(function(r,o,c){var d=w|k;if(c.length){var _=Zn(c,Ji(Qf));d|=M}return Ln(o,d,r,c,_)});function th(r,o,c){o=c?e:o;var d=Ln(r,P,e,e,e,e,e,o);return d.placeholder=th.placeholder,d}function eh(r,o,c){o=c?e:o;var d=Ln(r,E,e,e,e,e,e,o);return d.placeholder=eh.placeholder,d}function nh(r,o,c){var d,_,x,C,D,A,W=0,z=!1,H=!1,U=!0;if(typeof r!="function")throw new Ke(l);o=Je(o)||0,Nt(c)&&(z=!!c.leading,H="maxWait"in c,x=H?Jt(Je(c.maxWait)||0,o):x,U="trailing"in c?!!c.trailing:U);function q(Kt){var dn=d,zn=_;return d=_=e,W=Kt,C=r.apply(zn,dn),C}function J(Kt){return W=Kt,D=Br(dt,o),z?q(Kt):C}function ut(Kt){var dn=Kt-A,zn=Kt-W,yh=o-dn;return H?de(yh,x-zn):yh}function Q(Kt){var dn=Kt-A,zn=Kt-W;return A===e||dn>=o||dn<0||H&&zn>=x}function dt(){var Kt=ao();if(Q(Kt))return mt(Kt);D=Br(dt,ut(Kt))}function mt(Kt){return D=e,U&&d?q(Kt):(d=_=e,C)}function Ne(){D!==e&&hf(D),W=0,d=A=_=D=e}function xe(){return D===e?C:mt(ao())}function He(){var Kt=ao(),dn=Q(Kt);if(d=arguments,_=this,A=Kt,dn){if(D===e)return J(A);if(H)return hf(D),D=Br(dt,o),q(A)}return D===e&&(D=Br(dt,o)),C}return He.cancel=Ne,He.flush=xe,He}var Lv=ft(function(r,o){return Uu(r,1,o)}),Rv=ft(function(r,o,c){return Uu(r,Je(o)||0,c)});function Fv(r){return Ln(r,$)}function lo(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new Ke(l);var c=function(){var d=arguments,_=o?o.apply(this,d):d[0],x=c.cache;if(x.has(_))return x.get(_);var C=r.apply(this,d);return c.cache=x.set(_,C)||x,C};return c.cache=new(lo.Cache||In),c}lo.Cache=In;function co(r){if(typeof r!="function")throw new Ke(l);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function Bv(r){return Jf(2,r)}var Wv=Cb(function(r,o){o=o.length==1&&st(o[0])?Wt(o[0],Be(Z())):Wt(oe(o,1),Be(Z()));var c=o.length;return ft(function(d){for(var _=-1,x=de(d.length,c);++_<x;)d[_]=o[_].call(this,d[_]);return Fe(r,this,d)})}),bl=ft(function(r,o){var c=Zn(o,Ji(bl));return Ln(r,M,e,o,c)}),ih=ft(function(r,o){var c=Zn(o,Ji(ih));return Ln(r,R,e,o,c)}),zv=Rn(function(r,o){return Ln(r,L,e,e,e,o)});function Nv(r,o){if(typeof r!="function")throw new Ke(l);return o=o===e?o:lt(o),ft(r,o)}function Hv(r,o){if(typeof r!="function")throw new Ke(l);return o=o==null?0:Jt(lt(o),0),ft(function(c){var d=c[o],_=ni(c,0,o);return d&&Gn(_,d),Fe(r,this,_)})}function $v(r,o,c){var d=!0,_=!0;if(typeof r!="function")throw new Ke(l);return Nt(c)&&(d="leading"in c?!!c.leading:d,_="trailing"in c?!!c.trailing:_),nh(r,o,{leading:d,maxWait:o,trailing:_})}function Yv(r){return Zf(r,1)}function Uv(r,o){return bl(nl(o),r)}function Vv(){if(!arguments.length)return[];var r=arguments[0];return st(r)?r:[r]}function Xv(r){return je(r,v)}function Kv(r,o){return o=typeof o=="function"?o:e,je(r,v,o)}function qv(r){return je(r,p|v)}function jv(r,o){return o=typeof o=="function"?o:e,je(r,p|v,o)}function Gv(r,o){return o==null||Yu(r,o,ee(o))}function hn(r,o){return r===o||r!==r&&o!==o}var Zv=eo(Ua),Jv=eo(function(r,o){return r>=o}),xi=ju(function(){return arguments}())?ju:function(r){return Yt(r)&&Mt.call(r,"callee")&&!Ru.call(r,"callee")},st=I.isArray,Qv=mu?Be(mu):ab;function ke(r){return r!=null&&uo(r.length)&&!Bn(r)}function Xt(r){return Yt(r)&&ke(r)}function tx(r){return r===!0||r===!1||Yt(r)&&be(r)==it}var ii=g_||Al,ex=_u?Be(_u):lb;function nx(r){return Yt(r)&&r.nodeType===1&&!Wr(r)}function ix(r){if(r==null)return!0;if(ke(r)&&(st(r)||typeof r=="string"||typeof r.splice=="function"||ii(r)||Qi(r)||xi(r)))return!r.length;var o=ge(r);if(o==At||o==cn)return!r.size;if(Fr(r))return!Ka(r).length;for(var c in r)if(Mt.call(r,c))return!1;return!0}function rx(r,o){return Pr(r,o)}function sx(r,o,c){c=typeof c=="function"?c:e;var d=c?c(r,o):e;return d===e?Pr(r,o,e,c):!!d}function vl(r){if(!Yt(r))return!1;var o=be(r);return o==Rt||o==Et||typeof r.message=="string"&&typeof r.name=="string"&&!Wr(r)}function ox(r){return typeof r=="number"&&Bu(r)}function Bn(r){if(!Nt(r))return!1;var o=be(r);return o==fe||o==Se||o==N||o==xr}function rh(r){return typeof r=="number"&&r==lt(r)}function uo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Dt}function Nt(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function Yt(r){return r!=null&&typeof r=="object"}var sh=bu?Be(bu):ub;function ax(r,o){return r===o||Xa(r,o,cl(o))}function lx(r,o,c){return c=typeof c=="function"?c:e,Xa(r,o,cl(o),c)}function cx(r){return oh(r)&&r!=+r}function ux(r){if(Kb(r))throw new nt(a);return Gu(r)}function fx(r){return r===null}function hx(r){return r==null}function oh(r){return typeof r=="number"||Yt(r)&&be(r)==$t}function Wr(r){if(!Yt(r)||be(r)!=he)return!1;var o=Bs(r);if(o===null)return!0;var c=Mt.call(o,"constructor")&&o.constructor;return typeof c=="function"&&c instanceof c&&Ps.call(c)==l_}var xl=vu?Be(vu):fb;function dx(r){return rh(r)&&r>=-Dt&&r<=Dt}var ah=xu?Be(xu):hb;function fo(r){return typeof r=="string"||!st(r)&&Yt(r)&&be(r)==yr}function ze(r){return typeof r=="symbol"||Yt(r)&&be(r)==Cs}var Qi=yu?Be(yu):db;function gx(r){return r===e}function px(r){return Yt(r)&&ge(r)==wr}function mx(r){return Yt(r)&&be(r)==Ip}var _x=eo(qa),bx=eo(function(r,o){return r<=o});function lh(r){if(!r)return[];if(ke(r))return fo(r)?un(r):Ce(r);if(kr&&r[kr])return Gm(r[kr]());var o=ge(r),c=o==At?Ra:o==cn?Os:tr;return c(r)}function Wn(r){if(!r)return r===0?r:0;if(r=Je(r),r===yt||r===-yt){var o=r<0?-1:1;return o*te}return r===r?r:0}function lt(r){var o=Wn(r),c=o%1;return o===o?c?o-c:o:0}function ch(r){return r?mi(lt(r),0,bt):0}function Je(r){if(typeof r=="number")return r;if(ze(r))return Gt;if(Nt(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=Nt(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=Mu(r);var c=Qp.test(r);return c||em.test(r)?Pm(r.slice(2),c?2:8):Jp.test(r)?Gt:+r}function uh(r){return yn(r,De(r))}function vx(r){return r?mi(lt(r),-Dt,Dt):r===0?r:0}function kt(r){return r==null?"":We(r)}var xx=Gi(function(r,o){if(Fr(o)||ke(o)){yn(o,ee(o),r);return}for(var c in o)Mt.call(o,c)&&Or(r,c,o[c])}),fh=Gi(function(r,o){yn(o,De(o),r)}),ho=Gi(function(r,o,c,d){yn(o,De(o),r,d)}),yx=Gi(function(r,o,c,d){yn(o,ee(o),r,d)}),wx=Rn(Ha);function Sx(r,o){var c=ji(r);return o==null?c:$u(c,o)}var Cx=ft(function(r,o){r=Ot(r);var c=-1,d=o.length,_=d>2?o[2]:e;for(_&&ve(o[0],o[1],_)&&(d=1);++c<d;)for(var x=o[c],C=De(x),D=-1,A=C.length;++D<A;){var W=C[D],z=r[W];(z===e||hn(z,Xi[W])&&!Mt.call(r,W))&&(r[W]=x[W])}return r}),kx=ft(function(r){return r.push(e,Tf),Fe(hh,e,r)});function Dx(r,o){return Su(r,Z(o,3),xn)}function Mx(r,o){return Su(r,Z(o,3),Ya)}function Tx(r,o){return r==null?r:$a(r,Z(o,3),De)}function Ax(r,o){return r==null?r:Ku(r,Z(o,3),De)}function Ox(r,o){return r&&xn(r,Z(o,3))}function Ex(r,o){return r&&Ya(r,Z(o,3))}function Ix(r){return r==null?[]:Ks(r,ee(r))}function Px(r){return r==null?[]:Ks(r,De(r))}function yl(r,o,c){var d=r==null?e:_i(r,o);return d===e?c:d}function Lx(r,o){return r!=null&&Ef(r,o,ib)}function wl(r,o){return r!=null&&Ef(r,o,rb)}var Rx=Sf(function(r,o,c){o!=null&&typeof o.toString!="function"&&(o=Ls.call(o)),r[o]=c},Cl(Me)),Fx=Sf(function(r,o,c){o!=null&&typeof o.toString!="function"&&(o=Ls.call(o)),Mt.call(r,o)?r[o].push(c):r[o]=[c]},Z),Bx=ft(Ir);function ee(r){return ke(r)?Nu(r):Ka(r)}function De(r){return ke(r)?Nu(r,!0):gb(r)}function Wx(r,o){var c={};return o=Z(o,3),xn(r,function(d,_,x){Pn(c,o(d,_,x),d)}),c}function zx(r,o){var c={};return o=Z(o,3),xn(r,function(d,_,x){Pn(c,_,o(d,_,x))}),c}var Nx=Gi(function(r,o,c){qs(r,o,c)}),hh=Gi(function(r,o,c,d){qs(r,o,c,d)}),Hx=Rn(function(r,o){var c={};if(r==null)return c;var d=!1;o=Wt(o,function(x){return x=ei(x,r),d||(d=x.length>1),x}),yn(r,al(r),c),d&&(c=je(c,p|m|v,Rb));for(var _=o.length;_--;)Qa(c,o[_]);return c});function $x(r,o){return dh(r,co(Z(o)))}var Yx=Rn(function(r,o){return r==null?{}:mb(r,o)});function dh(r,o){if(r==null)return{};var c=Wt(al(r),function(d){return[d]});return o=Z(o),rf(r,c,function(d,_){return o(d,_[0])})}function Ux(r,o,c){o=ei(o,r);var d=-1,_=o.length;for(_||(_=1,r=e);++d<_;){var x=r==null?e:r[wn(o[d])];x===e&&(d=_,x=c),r=Bn(x)?x.call(r):x}return r}function Vx(r,o,c){return r==null?r:Lr(r,o,c)}function Xx(r,o,c,d){return d=typeof d=="function"?d:e,r==null?r:Lr(r,o,c,d)}var gh=Df(ee),ph=Df(De);function Kx(r,o,c){var d=st(r),_=d||ii(r)||Qi(r);if(o=Z(o,4),c==null){var x=r&&r.constructor;_?c=d?new x:[]:Nt(r)?c=Bn(x)?ji(Bs(r)):{}:c={}}return(_?Xe:xn)(r,function(C,D,A){return o(c,C,D,A)}),c}function qx(r,o){return r==null?!0:Qa(r,o)}function jx(r,o,c){return r==null?r:cf(r,o,nl(c))}function Gx(r,o,c,d){return d=typeof d=="function"?d:e,r==null?r:cf(r,o,nl(c),d)}function tr(r){return r==null?[]:La(r,ee(r))}function Zx(r){return r==null?[]:La(r,De(r))}function Jx(r,o,c){return c===e&&(c=o,o=e),c!==e&&(c=Je(c),c=c===c?c:0),o!==e&&(o=Je(o),o=o===o?o:0),mi(Je(r),o,c)}function Qx(r,o,c){return o=Wn(o),c===e?(c=o,o=0):c=Wn(c),r=Je(r),sb(r,o,c)}function ty(r,o,c){if(c&&typeof c!="boolean"&&ve(r,o,c)&&(o=c=e),c===e&&(typeof o=="boolean"?(c=o,o=e):typeof r=="boolean"&&(c=r,r=e)),r===e&&o===e?(r=0,o=1):(r=Wn(r),o===e?(o=r,r=0):o=Wn(o)),r>o){var d=r;r=o,o=d}if(c||r%1||o%1){var _=Wu();return de(r+_*(o-r+Im("1e-"+((_+"").length-1))),o)}return Ga(r,o)}var ey=Zi(function(r,o,c){return o=o.toLowerCase(),r+(c?mh(o):o)});function mh(r){return Sl(kt(r).toLowerCase())}function _h(r){return r=kt(r),r&&r.replace(im,Vm).replace(wm,"")}function ny(r,o,c){r=kt(r),o=We(o);var d=r.length;c=c===e?d:mi(lt(c),0,d);var _=c;return c-=o.length,c>=0&&r.slice(c,_)==o}function iy(r){return r=kt(r),r&&Bp.test(r)?r.replace(Kc,Xm):r}function ry(r){return r=kt(r),r&&Yp.test(r)?r.replace(ba,"\\$&"):r}var sy=Zi(function(r,o,c){return r+(c?"-":"")+o.toLowerCase()}),oy=Zi(function(r,o,c){return r+(c?" ":"")+o.toLowerCase()}),ay=xf("toLowerCase");function ly(r,o,c){r=kt(r),o=lt(o);var d=o?Ui(r):0;if(!o||d>=o)return r;var _=(o-d)/2;return to(Hs(_),c)+r+to(Ns(_),c)}function cy(r,o,c){r=kt(r),o=lt(o);var d=o?Ui(r):0;return o&&d<o?r+to(o-d,c):r}function uy(r,o,c){r=kt(r),o=lt(o);var d=o?Ui(r):0;return o&&d<o?to(o-d,c)+r:r}function fy(r,o,c){return c||o==null?o=0:o&&(o=+o),b_(kt(r).replace(va,""),o||0)}function hy(r,o,c){return(c?ve(r,o,c):o===e)?o=1:o=lt(o),Za(kt(r),o)}function dy(){var r=arguments,o=kt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var gy=Zi(function(r,o,c){return r+(c?"_":"")+o.toLowerCase()});function py(r,o,c){return c&&typeof c!="number"&&ve(r,o,c)&&(o=c=e),c=c===e?bt:c>>>0,c?(r=kt(r),r&&(typeof o=="string"||o!=null&&!xl(o))&&(o=We(o),!o&&Yi(r))?ni(un(r),0,c):r.split(o,c)):[]}var my=Zi(function(r,o,c){return r+(c?" ":"")+Sl(o)});function _y(r,o,c){return r=kt(r),c=c==null?0:mi(lt(c),0,r.length),o=We(o),r.slice(c,c+o.length)==o}function by(r,o,c){var d=b.templateSettings;c&&ve(r,o,c)&&(o=e),r=kt(r),o=ho({},o,d,Mf);var _=ho({},o.imports,d.imports,Mf),x=ee(_),C=La(_,x),D,A,W=0,z=o.interpolate||ks,H="__p += '",U=Fa((o.escape||ks).source+"|"+z.source+"|"+(z===qc?Zp:ks).source+"|"+(o.evaluate||ks).source+"|$","g"),q="//# sourceURL="+(Mt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mm+"]")+`
`;r.replace(U,function(Q,dt,mt,Ne,xe,He){return mt||(mt=Ne),H+=r.slice(W,He).replace(rm,Km),dt&&(D=!0,H+=`' +
__e(`+dt+`) +
'`),xe&&(A=!0,H+=`';
`+xe+`;
__p += '`),mt&&(H+=`' +
((__t = (`+mt+`)) == null ? '' : __t) +
'`),W=He+Q.length,Q}),H+=`';
`;var J=Mt.call(o,"variable")&&o.variable;if(!J)H=`with (obj) {
`+H+`
}
`;else if(jp.test(J))throw new nt(u);H=(A?H.replace(Pp,""):H).replace(Lp,"$1").replace(Rp,"$1;"),H="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(D?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+H+`return __p
}`;var ut=vh(function(){return wt(x,q+"return "+H).apply(e,C)});if(ut.source=H,vl(ut))throw ut;return ut}function vy(r){return kt(r).toLowerCase()}function xy(r){return kt(r).toUpperCase()}function yy(r,o,c){if(r=kt(r),r&&(c||o===e))return Mu(r);if(!r||!(o=We(o)))return r;var d=un(r),_=un(o),x=Tu(d,_),C=Au(d,_)+1;return ni(d,x,C).join("")}function wy(r,o,c){if(r=kt(r),r&&(c||o===e))return r.slice(0,Eu(r)+1);if(!r||!(o=We(o)))return r;var d=un(r),_=Au(d,un(o))+1;return ni(d,0,_).join("")}function Sy(r,o,c){if(r=kt(r),r&&(c||o===e))return r.replace(va,"");if(!r||!(o=We(o)))return r;var d=un(r),_=Tu(d,un(o));return ni(d,_).join("")}function Cy(r,o){var c=j,d=K;if(Nt(o)){var _="separator"in o?o.separator:_;c="length"in o?lt(o.length):c,d="omission"in o?We(o.omission):d}r=kt(r);var x=r.length;if(Yi(r)){var C=un(r);x=C.length}if(c>=x)return r;var D=c-Ui(d);if(D<1)return d;var A=C?ni(C,0,D).join(""):r.slice(0,D);if(_===e)return A+d;if(C&&(D+=A.length-D),xl(_)){if(r.slice(D).search(_)){var W,z=A;for(_.global||(_=Fa(_.source,kt(jc.exec(_))+"g")),_.lastIndex=0;W=_.exec(z);)var H=W.index;A=A.slice(0,H===e?D:H)}}else if(r.indexOf(We(_),D)!=D){var U=A.lastIndexOf(_);U>-1&&(A=A.slice(0,U))}return A+d}function ky(r){return r=kt(r),r&&Fp.test(r)?r.replace(Xc,t_):r}var Dy=Zi(function(r,o,c){return r+(c?" ":"")+o.toUpperCase()}),Sl=xf("toUpperCase");function bh(r,o,c){return r=kt(r),o=c?e:o,o===e?jm(r)?i_(r):Nm(r):r.match(o)||[]}var vh=ft(function(r,o){try{return Fe(r,e,o)}catch(c){return vl(c)?c:new nt(c)}}),My=Rn(function(r,o){return Xe(o,function(c){c=wn(c),Pn(r,c,_l(r[c],r))}),r});function Ty(r){var o=r==null?0:r.length,c=Z();return r=o?Wt(r,function(d){if(typeof d[1]!="function")throw new Ke(l);return[c(d[0]),d[1]]}):[],ft(function(d){for(var _=-1;++_<o;){var x=r[_];if(Fe(x[0],this,d))return Fe(x[1],this,d)}})}function Ay(r){return tb(je(r,p))}function Cl(r){return function(){return r}}function Oy(r,o){return r==null||r!==r?o:r}var Ey=wf(),Iy=wf(!0);function Me(r){return r}function kl(r){return Zu(typeof r=="function"?r:je(r,p))}function Py(r){return Qu(je(r,p))}function Ly(r,o){return tf(r,je(o,p))}var Ry=ft(function(r,o){return function(c){return Ir(c,r,o)}}),Fy=ft(function(r,o){return function(c){return Ir(r,c,o)}});function Dl(r,o,c){var d=ee(o),_=Ks(o,d);c==null&&!(Nt(o)&&(_.length||!d.length))&&(c=o,o=r,r=this,_=Ks(o,ee(o)));var x=!(Nt(c)&&"chain"in c)||!!c.chain,C=Bn(r);return Xe(_,function(D){var A=o[D];r[D]=A,C&&(r.prototype[D]=function(){var W=this.__chain__;if(x||W){var z=r(this.__wrapped__),H=z.__actions__=Ce(this.__actions__);return H.push({func:A,args:arguments,thisArg:r}),z.__chain__=W,z}return A.apply(r,Gn([this.value()],arguments))})}),r}function By(){return se._===this&&(se._=c_),this}function Ml(){}function Wy(r){return r=lt(r),ft(function(o){return ef(o,r)})}var zy=rl(Wt),Ny=rl(wu),Hy=rl(Aa);function xh(r){return fl(r)?Oa(wn(r)):_b(r)}function $y(r){return function(o){return r==null?e:_i(r,o)}}var Yy=Cf(),Uy=Cf(!0);function Tl(){return[]}function Al(){return!1}function Vy(){return{}}function Xy(){return""}function Ky(){return!0}function qy(r,o){if(r=lt(r),r<1||r>Dt)return[];var c=bt,d=de(r,bt);o=Z(o),r-=bt;for(var _=Pa(d,o);++c<r;)o(c);return _}function jy(r){return st(r)?Wt(r,wn):ze(r)?[r]:Ce(Nf(kt(r)))}function Gy(r){var o=++a_;return kt(r)+o}var Zy=Qs(function(r,o){return r+o},0),Jy=sl("ceil"),Qy=Qs(function(r,o){return r/o},1),t1=sl("floor");function e1(r){return r&&r.length?Xs(r,Me,Ua):e}function n1(r,o){return r&&r.length?Xs(r,Z(o,2),Ua):e}function i1(r){return ku(r,Me)}function r1(r,o){return ku(r,Z(o,2))}function s1(r){return r&&r.length?Xs(r,Me,qa):e}function o1(r,o){return r&&r.length?Xs(r,Z(o,2),qa):e}var a1=Qs(function(r,o){return r*o},1),l1=sl("round"),c1=Qs(function(r,o){return r-o},0);function u1(r){return r&&r.length?Ia(r,Me):0}function f1(r,o){return r&&r.length?Ia(r,Z(o,2)):0}return b.after=Pv,b.ary=Zf,b.assign=xx,b.assignIn=fh,b.assignInWith=ho,b.assignWith=yx,b.at=wx,b.before=Jf,b.bind=_l,b.bindAll=My,b.bindKey=Qf,b.castArray=Vv,b.chain=qf,b.chunk=t0,b.compact=e0,b.concat=n0,b.cond=Ty,b.conforms=Ay,b.constant=Cl,b.countBy=uv,b.create=Sx,b.curry=th,b.curryRight=eh,b.debounce=nh,b.defaults=Cx,b.defaultsDeep=kx,b.defer=Lv,b.delay=Rv,b.difference=i0,b.differenceBy=r0,b.differenceWith=s0,b.drop=o0,b.dropRight=a0,b.dropRightWhile=l0,b.dropWhile=c0,b.fill=u0,b.filter=hv,b.flatMap=pv,b.flatMapDeep=mv,b.flatMapDepth=_v,b.flatten=Uf,b.flattenDeep=f0,b.flattenDepth=h0,b.flip=Fv,b.flow=Ey,b.flowRight=Iy,b.fromPairs=d0,b.functions=Ix,b.functionsIn=Px,b.groupBy=bv,b.initial=p0,b.intersection=m0,b.intersectionBy=_0,b.intersectionWith=b0,b.invert=Rx,b.invertBy=Fx,b.invokeMap=xv,b.iteratee=kl,b.keyBy=yv,b.keys=ee,b.keysIn=De,b.map=oo,b.mapKeys=Wx,b.mapValues=zx,b.matches=Py,b.matchesProperty=Ly,b.memoize=lo,b.merge=Nx,b.mergeWith=hh,b.method=Ry,b.methodOf=Fy,b.mixin=Dl,b.negate=co,b.nthArg=Wy,b.omit=Hx,b.omitBy=$x,b.once=Bv,b.orderBy=wv,b.over=zy,b.overArgs=Wv,b.overEvery=Ny,b.overSome=Hy,b.partial=bl,b.partialRight=ih,b.partition=Sv,b.pick=Yx,b.pickBy=dh,b.property=xh,b.propertyOf=$y,b.pull=w0,b.pullAll=Xf,b.pullAllBy=S0,b.pullAllWith=C0,b.pullAt=k0,b.range=Yy,b.rangeRight=Uy,b.rearg=zv,b.reject=Dv,b.remove=D0,b.rest=Nv,b.reverse=pl,b.sampleSize=Tv,b.set=Vx,b.setWith=Xx,b.shuffle=Av,b.slice=M0,b.sortBy=Iv,b.sortedUniq=L0,b.sortedUniqBy=R0,b.split=py,b.spread=Hv,b.tail=F0,b.take=B0,b.takeRight=W0,b.takeRightWhile=z0,b.takeWhile=N0,b.tap=ev,b.throttle=$v,b.thru=so,b.toArray=lh,b.toPairs=gh,b.toPairsIn=ph,b.toPath=jy,b.toPlainObject=uh,b.transform=Kx,b.unary=Yv,b.union=H0,b.unionBy=$0,b.unionWith=Y0,b.uniq=U0,b.uniqBy=V0,b.uniqWith=X0,b.unset=qx,b.unzip=ml,b.unzipWith=Kf,b.update=jx,b.updateWith=Gx,b.values=tr,b.valuesIn=Zx,b.without=K0,b.words=bh,b.wrap=Uv,b.xor=q0,b.xorBy=j0,b.xorWith=G0,b.zip=Z0,b.zipObject=J0,b.zipObjectDeep=Q0,b.zipWith=tv,b.entries=gh,b.entriesIn=ph,b.extend=fh,b.extendWith=ho,Dl(b,b),b.add=Zy,b.attempt=vh,b.camelCase=ey,b.capitalize=mh,b.ceil=Jy,b.clamp=Jx,b.clone=Xv,b.cloneDeep=qv,b.cloneDeepWith=jv,b.cloneWith=Kv,b.conformsTo=Gv,b.deburr=_h,b.defaultTo=Oy,b.divide=Qy,b.endsWith=ny,b.eq=hn,b.escape=iy,b.escapeRegExp=ry,b.every=fv,b.find=dv,b.findIndex=$f,b.findKey=Dx,b.findLast=gv,b.findLastIndex=Yf,b.findLastKey=Mx,b.floor=t1,b.forEach=jf,b.forEachRight=Gf,b.forIn=Tx,b.forInRight=Ax,b.forOwn=Ox,b.forOwnRight=Ex,b.get=yl,b.gt=Zv,b.gte=Jv,b.has=Lx,b.hasIn=wl,b.head=Vf,b.identity=Me,b.includes=vv,b.indexOf=g0,b.inRange=Qx,b.invoke=Bx,b.isArguments=xi,b.isArray=st,b.isArrayBuffer=Qv,b.isArrayLike=ke,b.isArrayLikeObject=Xt,b.isBoolean=tx,b.isBuffer=ii,b.isDate=ex,b.isElement=nx,b.isEmpty=ix,b.isEqual=rx,b.isEqualWith=sx,b.isError=vl,b.isFinite=ox,b.isFunction=Bn,b.isInteger=rh,b.isLength=uo,b.isMap=sh,b.isMatch=ax,b.isMatchWith=lx,b.isNaN=cx,b.isNative=ux,b.isNil=hx,b.isNull=fx,b.isNumber=oh,b.isObject=Nt,b.isObjectLike=Yt,b.isPlainObject=Wr,b.isRegExp=xl,b.isSafeInteger=dx,b.isSet=ah,b.isString=fo,b.isSymbol=ze,b.isTypedArray=Qi,b.isUndefined=gx,b.isWeakMap=px,b.isWeakSet=mx,b.join=v0,b.kebabCase=sy,b.last=Ze,b.lastIndexOf=x0,b.lowerCase=oy,b.lowerFirst=ay,b.lt=_x,b.lte=bx,b.max=e1,b.maxBy=n1,b.mean=i1,b.meanBy=r1,b.min=s1,b.minBy=o1,b.stubArray=Tl,b.stubFalse=Al,b.stubObject=Vy,b.stubString=Xy,b.stubTrue=Ky,b.multiply=a1,b.nth=y0,b.noConflict=By,b.noop=Ml,b.now=ao,b.pad=ly,b.padEnd=cy,b.padStart=uy,b.parseInt=fy,b.random=ty,b.reduce=Cv,b.reduceRight=kv,b.repeat=hy,b.replace=dy,b.result=Ux,b.round=l1,b.runInContext=T,b.sample=Mv,b.size=Ov,b.snakeCase=gy,b.some=Ev,b.sortedIndex=T0,b.sortedIndexBy=A0,b.sortedIndexOf=O0,b.sortedLastIndex=E0,b.sortedLastIndexBy=I0,b.sortedLastIndexOf=P0,b.startCase=my,b.startsWith=_y,b.subtract=c1,b.sum=u1,b.sumBy=f1,b.template=by,b.times=qy,b.toFinite=Wn,b.toInteger=lt,b.toLength=ch,b.toLower=vy,b.toNumber=Je,b.toSafeInteger=vx,b.toString=kt,b.toUpper=xy,b.trim=yy,b.trimEnd=wy,b.trimStart=Sy,b.truncate=Cy,b.unescape=ky,b.uniqueId=Gy,b.upperCase=Dy,b.upperFirst=Sl,b.each=jf,b.eachRight=Gf,b.first=Vf,Dl(b,function(){var r={};return xn(b,function(o,c){Mt.call(b.prototype,c)||(r[c]=o)}),r}(),{chain:!1}),b.VERSION=i,Xe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){b[r].placeholder=b}),Xe(["drop","take"],function(r,o){gt.prototype[r]=function(c){c=c===e?1:Jt(lt(c),0);var d=this.__filtered__&&!o?new gt(this):this.clone();return d.__filtered__?d.__takeCount__=de(c,d.__takeCount__):d.__views__.push({size:de(c,bt),type:r+(d.__dir__<0?"Right":"")}),d},gt.prototype[r+"Right"]=function(c){return this.reverse()[r](c).reverse()}}),Xe(["filter","map","takeWhile"],function(r,o){var c=o+1,d=c==xt||c==ht;gt.prototype[r]=function(_){var x=this.clone();return x.__iteratees__.push({iteratee:Z(_,3),type:c}),x.__filtered__=x.__filtered__||d,x}}),Xe(["head","last"],function(r,o){var c="take"+(o?"Right":"");gt.prototype[r]=function(){return this[c](1).value()[0]}}),Xe(["initial","tail"],function(r,o){var c="drop"+(o?"":"Right");gt.prototype[r]=function(){return this.__filtered__?new gt(this):this[c](1)}}),gt.prototype.compact=function(){return this.filter(Me)},gt.prototype.find=function(r){return this.filter(r).head()},gt.prototype.findLast=function(r){return this.reverse().find(r)},gt.prototype.invokeMap=ft(function(r,o){return typeof r=="function"?new gt(this):this.map(function(c){return Ir(c,r,o)})}),gt.prototype.reject=function(r){return this.filter(co(Z(r)))},gt.prototype.slice=function(r,o){r=lt(r);var c=this;return c.__filtered__&&(r>0||o<0)?new gt(c):(r<0?c=c.takeRight(-r):r&&(c=c.drop(r)),o!==e&&(o=lt(o),c=o<0?c.dropRight(-o):c.take(o-r)),c)},gt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},gt.prototype.toArray=function(){return this.take(bt)},xn(gt.prototype,function(r,o){var c=/^(?:filter|find|map|reject)|While$/.test(o),d=/^(?:head|last)$/.test(o),_=b[d?"take"+(o=="last"?"Right":""):o],x=d||/^find/.test(o);_&&(b.prototype[o]=function(){var C=this.__wrapped__,D=d?[1]:arguments,A=C instanceof gt,W=D[0],z=A||st(C),H=function(dt){var mt=_.apply(b,Gn([dt],D));return d&&U?mt[0]:mt};z&&c&&typeof W=="function"&&W.length!=1&&(A=z=!1);var U=this.__chain__,q=!!this.__actions__.length,J=x&&!U,ut=A&&!q;if(!x&&z){C=ut?C:new gt(this);var Q=r.apply(C,D);return Q.__actions__.push({func:so,args:[H],thisArg:e}),new qe(Q,U)}return J&&ut?r.apply(this,D):(Q=this.thru(H),J?d?Q.value()[0]:Q.value():Q)})}),Xe(["pop","push","shift","sort","splice","unshift"],function(r){var o=Es[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",d=/^(?:pop|shift)$/.test(r);b.prototype[r]=function(){var _=arguments;if(d&&!this.__chain__){var x=this.value();return o.apply(st(x)?x:[],_)}return this[c](function(C){return o.apply(st(C)?C:[],_)})}}),xn(gt.prototype,function(r,o){var c=b[o];if(c){var d=c.name+"";Mt.call(qi,d)||(qi[d]=[]),qi[d].push({name:o,func:c})}}),qi[Js(e,k).name]=[{name:"wrapper",func:e}],gt.prototype.clone=k_,gt.prototype.reverse=D_,gt.prototype.value=M_,b.prototype.at=nv,b.prototype.chain=iv,b.prototype.commit=rv,b.prototype.next=sv,b.prototype.plant=av,b.prototype.reverse=lv,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=cv,b.prototype.first=b.prototype.head,kr&&(b.prototype[kr]=ov),b},Vi=r_();hi?((hi.exports=Vi)._=Vi,ka._=Vi):se._=Vi}).call(Aw)}(Vr,Vr.exports)),Vr.exports}Ow();async function Ew(n,t){try{console.log(`開始抓取股票 ${n} 的資料...`);const e=await hg.get(`stocks/${n}/all.json`);if(e.data){let i=e.data;if(t&&(i=e.data.filter(h=>Pt(h.date,"YYYYMMDD").isAfter(Pt(t)))),!i||i.length===0)return console.warn(`股票 ${n} 無新資料`),null;let s=Pt().format("YYYY-MM-DD HH:mm:ss"),a=null,l=null;const u=i[i.length-1];a=Pt(u[0],"YYYYMMDD").format("YYYY-MM-DD"),l=u[4];const f={fetchedAt:s,lastPrice:l,lastPriceDate:a,newDailyData:i};return console.log(`成功抓取股票 ${n} 資料`,f),f}return console.warn(`股票 ${n} 無資料回傳`),null}catch(e){return console.error(`抓取股票 ${n} 失敗:`,e),null}}F1().catch(console.error);async function Iw(){return await fg("user-stock-info")}async function Fl(n){return await Sc("user-stock-info",n)}async function Pw(n){return await B1("user-stock-info",n)}async function Lw(){return await W1("user-stock-info")}const Rw=()=>new Worker(new URL("/iKDx/assets/calc-weekly-policy-worker-Cj4HgE7g.js",import.meta.url),{type:"module"}),Fw=()=>new Worker(new URL("/iKDx/assets/calc-trade-worker-CrgyXrUO.js",import.meta.url),{type:"module"}),Bw=()=>new Worker(new URL("/iKDx/assets/calc-trend-chart-worker-CcvYD_4Q.js",import.meta.url),{type:"module"}),Ww=kc.getPool("policy",Rw,4),zw=kc.getPool("trade",Fw,4),Nw=kc.getPool("trend",Bw,4),Mc=z1("userStockList",()=>{const n=Ht([]);function t(m){const v=n.value.findIndex(S=>S.id===m);return{foundStock:v!==-1?n.value[v]:null,foundStockIndex:v}}async function e(m=null,v={}){const{updateIndexedDB:S=!0}=v;let y=[],w=[];if(m===null)y=n.value,w=n.value.map((O,P)=>P);else if(typeof m=="string"){const{foundStock:O,foundStockIndex:P}=t(m);if(!O){console.warn(`找不到股票 ${m}`);return}y=[O],w=[P]}else if(Array.isArray(m))y=[],w=[],m.forEach(O=>{const{foundStock:P,foundStockIndex:E}=t(O);P&&(y.push(P),w.push(E))});else{console.warn("stockIds 參數格式錯誤");return}if(y.length===0){console.log("無股票需要更新價格");return}console.log(`開始更新 ${y.length} 支股票價格...`);const k=y.map(async(O,P)=>{try{const E=await Ew(O.id,O.lastPriceDate);if(E){const M=w[P],R=await i(O.id,E,({symbol:L,step:$,totalSteps:j,message:K})=>{console.log(`股票 ${L}: ${K} (${$}/${j})`)});let B={...n.value[M],fetchedAt:E.fetchedAt,lastPrice:E.lastPrice,lastPriceDate:E.lastPriceDate};if(R&&(B={...B,data:{weekly:R.policyResult?.weekly||[],weeklyKdj:R.policyResult?.weeklyKdj||[],weeklyRsi:R.policyResult?.weeklyRsi||[]}}),typeof m=="string"&&S){const L=JSON.parse(JSON.stringify(B));Fl(L).catch($=>{console.error(`儲存股票 ${O.id} 到 IndexedDB 失敗:`,$)})}n.value[M]=B}}catch(E){console.error(`股票 ${O.id} 更新失敗:`,E)}});await Promise.all(k),typeof m!="string"&&S&&await h(),console.log(`${y.length} 支股票更新完成`)}async function i(m,v,S=()=>{}){try{S({symbol:m,step:1,totalSteps:3,message:"計算週線與技術指標..."});const[y,w]=await Promise.all([Ww.executeTask("processPolicy",{newDailyData:v.newDailyData||[],stockId:m,type:"priceChange"}),zw.executeTask("calculateTrade",{stockData:v.newDailyData||[],tradeParams:{}})]);console.log("policyResult",y),S({symbol:m,step:2,totalSteps:3,message:"平行計算完成，開始計算訊號..."});const k=await Nw.executeTask("calculateTrend",{stockData:v.newDailyData||[],trendParams:{policyResult:y,tradeResult:w}});return S({symbol:m,step:3,totalSteps:3,message:"計算完成"}),{stockId:m,policyResult:y}}catch(y){return console.error(`股票 ${m} Worker 計算失敗:`,y),null}}async function s(){try{console.log("開始載入使用者股票清單...");const m=await Iw();return console.log("從 IndexedDB 載入的股票:",m),m&&m.length>0&&(n.value=m),n.value}catch(m){return console.error("載入使用者股票清單失敗:",m),n.value}}async function a(m){if(console.log("開始新增股票:",m),n.value.find(y=>y.id===m.id))return console.log("股票已存在，取消新增"),{success:!1,message:"股票已存在於清單中"};const S={...m,industryCategory:Array.from(m.industryCategory||[]),addedAt:Pt().format("YYYY-MM-DD HH:mm:ss")};console.log("新增股票到 Pinia store:",S),n.value.push(S);try{return console.log("準備儲存股票到 user-stock-info:",S),await Fl(S),console.log("股票已成功儲存到 user-stock-info"),e(m.id).catch(y=>{console.error(`背景更新股票 ${m.id} 價格失敗:`,y)}),{success:!0,message:"股票已新增至清單"}}catch(y){return console.error("儲存股票失敗:",y),n.value=n.value.filter(w=>w.id!==m.id),{success:!1,message:"新增失敗，請稍後再試"}}}async function l(m){try{return await Pw(m),n.value=n.value.filter(v=>v.id!==m),{success:!0,message:"股票已從清單中移除"}}catch(v){return console.error("移除股票失敗:",v),{success:!1,message:"移除失敗，請稍後再試"}}}function u(m){return n.value.some(v=>v.id===m)}async function f(m){n.value=m,await h()}async function h(){try{await Lw();for(const m of n.value){const v=JSON.parse(JSON.stringify(m));await Fl(v)}}catch(m){console.error("儲存股票排序失敗:",m)}}async function g(m){const v=await Mw(m);v&&(n.value.find(y=>y.id===v.id)||n.value.push(v))}async function p(m){const v=n.value.find(S=>S.id===m);v&&await Tw(v)}return{userStockList:n,loadUserStockList:s,addStockToList:a,removeStockFromList:l,isStockInList:u,reorderStockList:f,loadStockToList:g,saveStockToList:p,updateStockListPrices:e}}),Hw={style:{display:"flex","flex-direction":"column",gap:"0"}},$w={style:{margin:"16px 0 0 0"}},Yw={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},Uw=["onClick"],Vw={key:0,style:{"margin-top":"12px"}},Xw={key:0},Kw={key:0,style:{background:"#d3d3d3","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",opacity:"0.6"}},qw={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},jw={style:{"font-size":"16px",color:"#333",flex:"1"}},Gw=["onClick"],Zw={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Jw={style:{"font-size":"16px",color:"#333",flex:"1"}},Qw={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},tS={__name:"StockSearch",setup(n){const t=Mc(),e=dg("stock-search"),i=Ht(!1);dr(()=>{e.on(y=>{i.value=y})}),gg(()=>{e.reset()});const s=Ht(),a=Ht(""),l=Ht([]),u=["台積電","鴻海","聯發科","長榮","中鋼"],f={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},h={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function g(y){return a.value===y?{...f,...h}:f}function p(){_n(()=>{const y=s.value?.$el?.querySelector("input");y&&y.focus()})}fs(()=>i.value,y=>{y&&setTimeout(()=>{p()},300)}),fs(()=>a.value,async y=>{if(console.log("localSearch 更新:",y),!y||y.length<1){l.value=[];return}console.log("觸發 getAllStocks");try{const w=await Dw();console.log("getAllStocks 執行成功",w),l.value=w.filter(k=>k.name.includes(y)||k.id.includes(y)),console.log("搜尋結果:",l.value)}catch(w){console.error("getAllStocks 執行失敗:",w)}});function m(y){}function v(y){console.log("點擊熱門標籤:",y),a.value=y}async function S(y){const w=await t.addStockToList(y);Di({message:w.message,type:w.success?"success":"fail"})}return(y,w)=>(Ee(),pg(Oe(xg),{show:i.value,"onUpdate:show":w[3]||(w[3]=k=>i.value=k),"cancel-text":"離開",title:"股票搜尋",onSelect:S,style:{height:"80vh",maxHeight:"80vh"},"body-style":"height:80vh;max-height:80vh;overflow-y:auto;"},{description:pn(()=>[pt("div",Hw,[X(Oe(yw),{ref_key:"searchInputRef",ref:s,modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=k=>a.value=k),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:m},null,8,["modelValue"]),pt("div",$w,[w[5]||(w[5]=pt("div",{style:{"font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px","margin-bottom":"8px","margin-left":"8px","text-align":"left"}}," | 熱門股票 ",-1)),pt("div",Yw,[(Ee(),rn(Il,null,Sh(u,k=>pt("span",{key:k,onClick:O=>v(k),style:mg(g(k))},Ie(k),13,Uw)),64))]),a.value&&a.value.length>=1?(Ee(),rn("div",Vw,[l.value.length?(Ee(),rn("div",Xw,[(Ee(!0),rn(Il,null,Sh(l.value,k=>(Ee(),rn(Il,{key:k.id},[Oe(t).isStockInList(k.id)?(Ee(),rn("div",Kw,[pt("div",qw,Ie(k.id),1),pt("div",jw,Ie(k.name),1),w[4]||(w[4]=pt("div",{style:{"margin-left":"12px","min-width":"60px",height:"40px",background:"#e0e0e0",color:"#666","font-weight":"bold","font-size":"16px","border-radius":"8px",width:"64px",display:"flex","align-items":"center","justify-content":"center"}}," 已新增 ",-1))])):(Ee(),rn("div",{key:1,onClick:O=>S(k),style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",cursor:"pointer",transition:"all 0.2s ease"},onMouseenter:w[1]||(w[1]=O=>O.target.style.background="#eff3f6"),onMouseleave:w[2]||(w[2]=O=>O.target.style.background="#fff")},[pt("div",Zw,Ie(k.id),1),pt("div",Jw,Ie(k.name),1)],40,Gw))],64))),128))])):(Ee(),rn("div",Qw," 查無資料 "))])):N1("",!0)])])]),_:1},8,["show"]))}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ys(n){return n+.5|0}const ai=(n,t,e)=>Math.max(Math.min(n,e),t);function Xr(n){return ai(ys(n*2.55),0,255)}function ui(n){return ai(ys(n*255),0,255)}function Un(n){return ai(ys(n/2.55)/100,0,1)}function Oh(n){return ai(ys(n*100),0,100)}const en={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ac=[..."0123456789ABCDEF"],eS=n=>ac[n&15],nS=n=>ac[(n&240)>>4]+ac[n&15],po=n=>(n&240)>>4===(n&15),iS=n=>po(n.r)&&po(n.g)&&po(n.b)&&po(n.a);function rS(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&en[n[1]]*17,g:255&en[n[2]]*17,b:255&en[n[3]]*17,a:t===5?en[n[4]]*17:255}:(t===7||t===9)&&(e={r:en[n[1]]<<4|en[n[2]],g:en[n[3]]<<4|en[n[4]],b:en[n[5]]<<4|en[n[6]],a:t===9?en[n[7]]<<4|en[n[8]]:255})),e}const sS=(n,t)=>n<255?t(n):"";function oS(n){var t=iS(n)?eS:nS;return n?"#"+t(n.r)+t(n.g)+t(n.b)+sS(n.a,t):void 0}const aS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sg(n,t,e){const i=t*Math.min(e,1-e),s=(a,l=(a+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function lS(n,t,e){const i=(s,a=(s+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function cS(n,t,e){const i=Sg(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function uS(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Tc(n){const e=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(e,i,s),l=Math.min(e,i,s),u=(a+l)/2;let f,h,g;return a!==l&&(g=a-l,h=u>.5?g/(2-a-l):g/(a+l),f=uS(e,i,s,g,a),f=f*60+.5),[f|0,h||0,u]}function Ac(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ui)}function Oc(n,t,e){return Ac(Sg,n,t,e)}function fS(n,t,e){return Ac(cS,n,t,e)}function hS(n,t,e){return Ac(lS,n,t,e)}function Cg(n){return(n%360+360)%360}function dS(n){const t=aS.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Xr(+t[5]):ui(+t[5]));const s=Cg(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=fS(s,a,l):t[1]==="hsv"?i=hS(s,a,l):i=Oc(s,a,l),{r:i[0],g:i[1],b:i[2],a:e}}function gS(n,t){var e=Tc(n);e[0]=Cg(e[0]+t),e=Oc(e),n.r=e[0],n.g=e[1],n.b=e[2]}function pS(n){if(!n)return;const t=Tc(n),e=t[0],i=Oh(t[1]),s=Oh(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${Un(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const Eh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ih={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function mS(){const n={},t=Object.keys(Ih),e=Object.keys(Eh);let i,s,a,l,u;for(i=0;i<t.length;i++){for(l=u=t[i],s=0;s<e.length;s++)a=e[s],u=u.replace(a,Eh[a]);a=parseInt(Ih[l],16),n[u]=[a>>16&255,a>>8&255,a&255]}return n}let mo;function _S(n){mo||(mo=mS(),mo.transparent=[0,0,0,0]);const t=mo[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const bS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vS(n){const t=bS.exec(n);let e=255,i,s,a;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?Xr(l):ai(l*255,0,255)}return i=+t[1],s=+t[3],a=+t[5],i=255&(t[2]?Xr(i):ai(i,0,255)),s=255&(t[4]?Xr(s):ai(s,0,255)),a=255&(t[6]?Xr(a):ai(a,0,255)),{r:i,g:s,b:a,a:e}}}function xS(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Un(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Bl=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ir=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function yS(n,t,e){const i=ir(Un(n.r)),s=ir(Un(n.g)),a=ir(Un(n.b));return{r:ui(Bl(i+e*(ir(Un(t.r))-i))),g:ui(Bl(s+e*(ir(Un(t.g))-s))),b:ui(Bl(a+e*(ir(Un(t.b))-a))),a:n.a+e*(t.a-n.a)}}function _o(n,t,e){if(n){let i=Tc(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Oc(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function kg(n,t){return n&&Object.assign(t||{},n)}function Ph(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ui(n[3]))):(t=kg(n,{r:0,g:0,b:0,a:1}),t.a=ui(t.a)),t}function wS(n){return n.charAt(0)==="r"?vS(n):dS(n)}class ds{constructor(t){if(t instanceof ds)return t;const e=typeof t;let i;e==="object"?i=Ph(t):e==="string"&&(i=rS(t)||_S(t)||wS(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=kg(this._rgb);return t&&(t.a=Un(t.a)),t}set rgb(t){this._rgb=Ph(t)}rgbString(){return this._valid?xS(this._rgb):void 0}hexString(){return this._valid?oS(this._rgb):void 0}hslString(){return this._valid?pS(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let a;const l=e===a?.5:e,u=2*l-1,f=i.a-s.a,h=((u*f===-1?u:(u+f)/(1+u*f))+1)/2;a=1-h,i.r=255&h*i.r+a*s.r+.5,i.g=255&h*i.g+a*s.g+.5,i.b=255&h*i.b+a*s.b+.5,i.a=l*i.a+(1-l)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=yS(this._rgb,t._rgb,e)),this}clone(){return new ds(this.rgb)}alpha(t){return this._rgb.a=ui(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ys(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return _o(this._rgb,2,t),this}darken(t){return _o(this._rgb,2,-t),this}saturate(t){return _o(this._rgb,1,t),this}desaturate(t){return _o(this._rgb,1,-t),this}rotate(t){return gS(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Hn(){}const SS=(()=>{let n=0;return()=>n++})();function Lt(n){return n==null}function ie(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ct(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function an(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Sn(n,t){return an(n)?n:t}function _t(n,t){return typeof n>"u"?t:n}const CS=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Bt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Tt(n,t,e,i){let s,a,l;if(ie(n))for(a=n.length,s=0;s<a;s++)t.call(e,n[s],s);else if(Ct(n))for(l=Object.keys(n),a=l.length,s=0;s<a;s++)t.call(e,n[l[s]],l[s])}function Ko(n,t){let e,i,s,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],a=t[e],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function qo(n){if(ie(n))return n.map(qo);if(Ct(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=qo(n[e[s]]);return t}return n}function Dg(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function kS(n,t,e,i){if(!Dg(n))return;const s=t[n],a=e[n];Ct(s)&&Ct(a)?gs(s,a,i):t[n]=qo(a)}function gs(n,t,e){const i=ie(t)?t:[t],s=i.length;if(!Ct(n))return n;e=e||{};const a=e.merger||kS;let l;for(let u=0;u<s;++u){if(l=i[u],!Ct(l))continue;const f=Object.keys(l);for(let h=0,g=f.length;h<g;++h)a(f[h],n,l,e)}return n}function Qr(n,t){return gs(n,t,{merger:DS})}function DS(n,t,e){if(!Dg(n))return;const i=t[n],s=e[n];Ct(i)&&Ct(s)?Qr(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=qo(s))}const Lh={"":n=>n,x:n=>n.x,y:n=>n.y};function MS(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function TS(n){const t=MS(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function jo(n,t){return(Lh[t]||(Lh[t]=TS(t)))(n)}function Ec(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Go=n=>typeof n<"u",fi=n=>typeof n=="function",Rh=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function AS(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const re=Math.PI,Mn=2*re,OS=Mn+re,Zo=Number.POSITIVE_INFINITY,ES=re/180,bn=re/2,yi=re/4,Fh=re*2/3,Mg=Math.log10,gr=Math.sign;function ts(n,t,e){return Math.abs(n-t)<e}function Bh(n){const t=Math.round(n);n=ts(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Mg(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function IS(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,a)=>s-a).pop(),t}function PS(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ps(n){return!PS(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function LS(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function RS(n,t,e){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][e],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function Oi(n){return n*(re/180)}function FS(n){return n*(180/re)}function Wh(n){if(!an(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function BS(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let a=Math.atan2(i,e);return a<-.5*re&&(a+=Mn),{angle:a,distance:s}}function lc(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function WS(n,t){return(n-t+OS)%Mn-re}function ri(n){return(n%Mn+Mn)%Mn}function Tg(n,t,e,i){const s=ri(n),a=ri(t),l=ri(e),u=ri(a-s),f=ri(l-s),h=ri(s-a),g=ri(s-l);return s===a||s===l||i&&a===l||u>f&&h<g}function sn(n,t,e){return Math.max(t,Math.min(e,n))}function zS(n){return sn(n,-32768,32767)}function Kr(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Ic(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,e(a)?s=a:i=a;return{lo:s,hi:i}}const Ei=(n,t,e,i)=>Ic(n,e,i?s=>{const a=n[s][t];return a<e||a===e&&n[s+1][t]===e}:s=>n[s][t]<e),NS=(n,t,e)=>Ic(n,e,i=>n[i][t]>=e);function HS(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const Ag=["push","pop","shift","splice","unshift"];function $S(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ag.forEach(e=>{const i="_onData"+Ec(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const l=s.apply(this,a);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...a)}),l}})})}function zh(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(Ag.forEach(a=>{delete n[a]}),delete n._chartjs)}function YS(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Og=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Eg(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Og.call(window,()=>{i=!1,n.apply(t,e)}))}}function US(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Pc=n=>n==="start"?"left":n==="end"?"right":"center",me=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,VS=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function XS(n,t,e){const i=t.length;let s=0,a=i;if(n._sorted){const{iScale:l,vScale:u,_parsed:f}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,g=l.axis,{min:p,max:m,minDefined:v,maxDefined:S}=l.getUserBounds();if(v){if(s=Math.min(Ei(f,g,p).lo,e?i:Ei(t,g,l.getPixelForValue(p)).lo),h){const y=f.slice(0,s+1).reverse().findIndex(w=>!Lt(w[u.axis]));s-=Math.max(0,y)}s=sn(s,0,i-1)}if(S){let y=Math.max(Ei(f,l.axis,m,!0).hi+1,e?0:Ei(t,g,l.getPixelForValue(m),!0).hi+1);if(h){const w=f.slice(y-1).findIndex(k=>!Lt(k[u.axis]));y+=Math.max(0,w)}a=sn(y,s,i)-s}else a=i-s}return{start:s,count:a}}function KS(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),a}const bo=n=>n===0||n===1,Nh=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Mn/e)),Hh=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Mn/e)+1,es={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*bn)+1,easeOutSine:n=>Math.sin(n*bn),easeInOutSine:n=>-.5*(Math.cos(re*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>bo(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>bo(n)?n:Nh(n,.075,.3),easeOutElastic:n=>bo(n)?n:Hh(n,.075,.3),easeInOutElastic(n){return bo(n)?n:n<.5?.5*Nh(n*2,.1125,.45):.5+.5*Hh(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-es.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?es.easeInBounce(n*2)*.5:es.easeOutBounce(n*2-1)*.5+.5};function Lc(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function $h(n){return Lc(n)?n:new ds(n)}function Wl(n){return Lc(n)?n:new ds(n).saturate(.5).darken(.1).hexString()}const qS=["x","y","borderWidth","radius","tension"],jS=["color","borderColor","backgroundColor"];function GS(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:jS},numbers:{type:"number",properties:qS}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ZS(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Yh=new Map;function JS(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Yh.get(e);return i||(i=new Intl.NumberFormat(n,t),Yh.set(e,i)),i}function Ig(n,t,e){return JS(t,e).format(n)}const QS={values(n){return ie(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),a=tC(n,e)}const l=Mg(Math.abs(a)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),f={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(f,this.options.ticks.format),Ig(n,i,f)}};function tC(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Pg={formatters:QS};function eC(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Pi=Object.create(null),cc=Object.create(null);function ns(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function zl(n,t,e){return typeof t=="string"?gs(ns(n,t),e):gs(ns(n,""),t)}class nC{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Wl(s.backgroundColor),this.hoverBorderColor=(i,s)=>Wl(s.borderColor),this.hoverColor=(i,s)=>Wl(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return zl(this,t,e)}get(t){return ns(this,t)}describe(t,e){return zl(cc,t,e)}override(t,e){return zl(Pi,t,e)}route(t,e,i,s){const a=ns(this,t),l=ns(this,i),u="_"+e;Object.defineProperties(a,{[u]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[u],h=l[s];return Ct(f)?Object.assign({},h,f):_t(f,h)},set(f){this[u]=f}}})}apply(t){t.forEach(e=>e(this))}}var qt=new nC({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[GS,ZS,eC]);function iC(n){return!n||Lt(n.size)||Lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Uh(n,t,e,i,s){let a=t[s];return a||(a=t[s]=n.measureText(s).width,e.push(s)),a>i&&(i=a),i}function wi(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function Vh(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function uc(n,t,e,i){Lg(n,t,e,i,null)}function Lg(n,t,e,i,s){let a,l,u,f,h,g,p,m;const v=t.pointStyle,S=t.rotation,y=t.radius;let w=(S||0)*ES;if(v&&typeof v=="object"&&(a=v.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(w),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(y)||y<=0)){switch(n.beginPath(),v){default:s?n.ellipse(e,i,s/2,y,0,0,Mn):n.arc(e,i,y,0,Mn),n.closePath();break;case"triangle":g=s?s/2:y,n.moveTo(e+Math.sin(w)*g,i-Math.cos(w)*y),w+=Fh,n.lineTo(e+Math.sin(w)*g,i-Math.cos(w)*y),w+=Fh,n.lineTo(e+Math.sin(w)*g,i-Math.cos(w)*y),n.closePath();break;case"rectRounded":h=y*.516,f=y-h,l=Math.cos(w+yi)*f,p=Math.cos(w+yi)*(s?s/2-h:f),u=Math.sin(w+yi)*f,m=Math.sin(w+yi)*(s?s/2-h:f),n.arc(e-p,i-u,h,w-re,w-bn),n.arc(e+m,i-l,h,w-bn,w),n.arc(e+p,i+u,h,w,w+bn),n.arc(e-m,i+l,h,w+bn,w+re),n.closePath();break;case"rect":if(!S){f=Math.SQRT1_2*y,g=s?s/2:f,n.rect(e-g,i-f,2*g,2*f);break}w+=yi;case"rectRot":p=Math.cos(w)*(s?s/2:y),l=Math.cos(w)*y,u=Math.sin(w)*y,m=Math.sin(w)*(s?s/2:y),n.moveTo(e-p,i-u),n.lineTo(e+m,i-l),n.lineTo(e+p,i+u),n.lineTo(e-m,i+l),n.closePath();break;case"crossRot":w+=yi;case"cross":p=Math.cos(w)*(s?s/2:y),l=Math.cos(w)*y,u=Math.sin(w)*y,m=Math.sin(w)*(s?s/2:y),n.moveTo(e-p,i-u),n.lineTo(e+p,i+u),n.moveTo(e+m,i-l),n.lineTo(e-m,i+l);break;case"star":p=Math.cos(w)*(s?s/2:y),l=Math.cos(w)*y,u=Math.sin(w)*y,m=Math.sin(w)*(s?s/2:y),n.moveTo(e-p,i-u),n.lineTo(e+p,i+u),n.moveTo(e+m,i-l),n.lineTo(e-m,i+l),w+=yi,p=Math.cos(w)*(s?s/2:y),l=Math.cos(w)*y,u=Math.sin(w)*y,m=Math.sin(w)*(s?s/2:y),n.moveTo(e-p,i-u),n.lineTo(e+p,i+u),n.moveTo(e+m,i-l),n.lineTo(e-m,i+l);break;case"line":l=s?s/2:Math.cos(w)*y,u=Math.sin(w)*y,n.moveTo(e-l,i-u),n.lineTo(e+l,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(w)*(s?s/2:y),i+Math.sin(w)*y);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ms(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Rc(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Fc(n){n.restore()}function rC(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const a=(t.x+e.x)/2;n.lineTo(a,t.y),n.lineTo(a,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function sC(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function oC(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Lt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function aC(n,t,e,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),l=t-a.actualBoundingBoxLeft,u=t+a.actualBoundingBoxRight,f=e-a.actualBoundingBoxAscent,h=e+a.actualBoundingBoxDescent,g=s.strikethrough?(f+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,g),n.lineTo(u,g),n.stroke()}}function lC(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function _s(n,t,e,i,s,a={}){const l=ie(t)?t:[t],u=a.strokeWidth>0&&a.strokeColor!=="";let f,h;for(n.save(),n.font=s.string,oC(n,a),f=0;f<l.length;++f)h=l[f],a.backdrop&&lC(n,a.backdrop),u&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),Lt(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(h,e,i,a.maxWidth)),n.fillText(h,e,i,a.maxWidth),aC(n,e,i,h,a),i+=Number(s.lineHeight);n.restore()}function fc(n,t){const{x:e,y:i,w:s,h:a,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*re,re,!0),n.lineTo(e,i+a-l.bottomLeft),n.arc(e+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,re,bn,!0),n.lineTo(e+s-l.bottomRight,i+a),n.arc(e+s-l.bottomRight,i+a-l.bottomRight,l.bottomRight,bn,0,!0),n.lineTo(e+s,i+l.topRight),n.arc(e+s-l.topRight,i+l.topRight,l.topRight,0,-bn,!0),n.lineTo(e+l.topLeft,i)}const cC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uC=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function fC(n,t){const e=(""+n).match(cC);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const hC=n=>+n||0;function Rg(n,t){const e={},i=Ct(t),s=i?Object.keys(t):t,a=Ct(n)?i?l=>_t(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of s)e[l]=hC(a(l));return e}function dC(n){return Rg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function is(n){return Rg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ln(n){const t=dC(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function _e(n,t){n=n||{},t=t||qt.font;let e=_t(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=_t(n.style,t.style);i&&!(""+i).match(uC)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:_t(n.family,t.family),lineHeight:fC(_t(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:_t(n.weight,t.weight),string:""};return s.string=iC(s),s}function vo(n,t,e,i){let s,a,l;for(s=0,a=n.length;s<a;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function gC(n,t,e){const{min:i,max:s}=n,a=CS(t,(s-i)/2),l=(u,f)=>e&&u===0?0:u+f;return{min:l(i,-Math.abs(a)),max:l(s,a)}}function Fi(n,t){return Object.assign(Object.create(n),t)}function Bc(n,t=[""],e,i,s=()=>n[0]){const a=e||n;typeof i>"u"&&(i=zg("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:u=>Bc([u,...n],t,a,i)};return new Proxy(l,{deleteProperty(u,f){return delete u[f],delete u._keys,delete n[0][f],!0},get(u,f){return Bg(u,f,()=>wC(f,t,n,u))},getOwnPropertyDescriptor(u,f){return Reflect.getOwnPropertyDescriptor(u._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,f){return Kh(u).includes(f)},ownKeys(u){return Kh(u)},set(u,f,h){const g=u._storage||(u._storage=s());return u[f]=g[f]=h,delete u._keys,!0}})}function pr(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Fg(n,i),setContext:a=>pr(n,a,e,i),override:a=>pr(n.override(a),t,e,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,u){return Bg(a,l,()=>mC(a,l,u))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,u){return n[l]=u,delete a[l],!0}})}function Fg(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:fi(e)?e:()=>e,isIndexable:fi(i)?i:()=>i}}const pC=(n,t)=>n?n+Ec(t):t,Wc=(n,t)=>Ct(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Bg(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function mC(n,t,e){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;let u=i[t];return fi(u)&&l.isScriptable(t)&&(u=_C(t,u,n,e)),ie(u)&&u.length&&(u=bC(t,u,n,l.isIndexable)),Wc(t,u)&&(u=pr(u,s,a&&a[t],l)),u}function _C(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(a,l||i);return u.delete(n),Wc(n,f)&&(f=zc(s._scopes,s,n,f)),f}function bC(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_descriptors:u}=e;if(typeof a.index<"u"&&i(n))return t[a.index%t.length];if(Ct(t[0])){const f=t,h=s._scopes.filter(g=>g!==f);t=[];for(const g of f){const p=zc(h,s,n,g);t.push(pr(p,a,l&&l[n],u))}}return t}function Wg(n,t,e){return fi(n)?n(t,e):n}const vC=(n,t)=>n===!0?t:typeof n=="string"?jo(t,n):void 0;function xC(n,t,e,i,s){for(const a of t){const l=vC(e,a);if(l){n.add(l);const u=Wg(l._fallback,e,s);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function zc(n,t,e,i){const s=t._rootScopes,a=Wg(t._fallback,e,i),l=[...n,...s],u=new Set;u.add(i);let f=Xh(u,l,e,a||e,i);return f===null||typeof a<"u"&&a!==e&&(f=Xh(u,l,a,f,i),f===null)?!1:Bc(Array.from(u),[""],s,a,()=>yC(t,e,i))}function Xh(n,t,e,i,s){for(;e;)e=xC(n,t,e,i,s);return e}function yC(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return ie(s)&&Ct(e)?e:s||{}}function wC(n,t,e,i){let s;for(const a of t)if(s=zg(pC(a,n),e),typeof s<"u")return Wc(n,s)?zc(e,i,n,s):s}function zg(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Kh(n){let t=n._keys;return t||(t=n._keys=SC(n._scopes)),t}function SC(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const CC=Number.EPSILON||1e-14,mr=(n,t)=>t<n.length&&!n[t].skip&&n[t],Ng=n=>n==="x"?"y":"x";function kC(n,t,e,i){const s=n.skip?t:n,a=t,l=e.skip?t:e,u=lc(a,s),f=lc(l,a);let h=u/(u+f),g=f/(u+f);h=isNaN(h)?0:h,g=isNaN(g)?0:g;const p=i*h,m=i*g;return{previous:{x:a.x-p*(l.x-s.x),y:a.y-p*(l.y-s.y)},next:{x:a.x+m*(l.x-s.x),y:a.y+m*(l.y-s.y)}}}function DC(n,t,e){const i=n.length;let s,a,l,u,f,h=mr(n,0);for(let g=0;g<i-1;++g)if(f=h,h=mr(n,g+1),!(!f||!h)){if(ts(t[g],0,CC)){e[g]=e[g+1]=0;continue}s=e[g]/t[g],a=e[g+1]/t[g],u=Math.pow(s,2)+Math.pow(a,2),!(u<=9)&&(l=3/Math.sqrt(u),e[g]=s*l*t[g],e[g+1]=a*l*t[g])}}function MC(n,t,e="x"){const i=Ng(e),s=n.length;let a,l,u,f=mr(n,0);for(let h=0;h<s;++h){if(l=u,u=f,f=mr(n,h+1),!u)continue;const g=u[e],p=u[i];l&&(a=(g-l[e])/3,u[`cp1${e}`]=g-a,u[`cp1${i}`]=p-a*t[h]),f&&(a=(f[e]-g)/3,u[`cp2${e}`]=g+a,u[`cp2${i}`]=p+a*t[h])}}function TC(n,t="x"){const e=Ng(t),i=n.length,s=Array(i).fill(0),a=Array(i);let l,u,f,h=mr(n,0);for(l=0;l<i;++l)if(u=f,f=h,h=mr(n,l+1),!!f){if(h){const g=h[t]-f[t];s[l]=g!==0?(h[e]-f[e])/g:0}a[l]=u?h?gr(s[l-1])!==gr(s[l])?0:(s[l-1]+s[l])/2:s[l-1]:s[l]}DC(n,s,a),MC(n,a,t)}function xo(n,t,e){return Math.max(Math.min(n,e),t)}function AC(n,t){let e,i,s,a,l,u=ms(n[0],t);for(e=0,i=n.length;e<i;++e)l=a,a=u,u=e<i-1&&ms(n[e+1],t),a&&(s=n[e],l&&(s.cp1x=xo(s.cp1x,t.left,t.right),s.cp1y=xo(s.cp1y,t.top,t.bottom)),u&&(s.cp2x=xo(s.cp2x,t.left,t.right),s.cp2y=xo(s.cp2y,t.top,t.bottom)))}function OC(n,t,e,i,s){let a,l,u,f;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")TC(n,s);else{let h=i?n[n.length-1]:n[0];for(a=0,l=n.length;a<l;++a)u=n[a],f=kC(h,u,n[Math.min(a+1,l-(i?0:1))%l],t.tension),u.cp1x=f.previous.x,u.cp1y=f.previous.y,u.cp2x=f.next.x,u.cp2y=f.next.y,h=u}t.capBezierPoints&&AC(n,e)}function Nc(){return typeof window<"u"&&typeof document<"u"}function Hc(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Jo(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const sa=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function EC(n,t){return sa(n).getPropertyValue(t)}const IC=["top","right","bottom","left"];function Ii(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const a=IC[s];i[a]=parseFloat(n[t+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const PC=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function LC(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:a}=i;let l=!1,u,f;if(PC(s,a,n.target))u=s,f=a;else{const h=t.getBoundingClientRect();u=i.clientX-h.left,f=i.clientY-h.top,l=!0}return{x:u,y:f,box:l}}function Mi(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=sa(e),a=s.boxSizing==="border-box",l=Ii(s,"padding"),u=Ii(s,"border","width"),{x:f,y:h,box:g}=LC(n,e),p=l.left+(g&&u.left),m=l.top+(g&&u.top);let{width:v,height:S}=t;return a&&(v-=l.width+u.width,S-=l.height+u.height),{x:Math.round((f-p)/v*e.width/i),y:Math.round((h-m)/S*e.height/i)}}function RC(n,t,e){let i,s;if(t===void 0||e===void 0){const a=n&&Hc(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{const l=a.getBoundingClientRect(),u=sa(a),f=Ii(u,"border","width"),h=Ii(u,"padding");t=l.width-h.width-f.width,e=l.height-h.height-f.height,i=Jo(u.maxWidth,a,"clientWidth"),s=Jo(u.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:i||Zo,maxHeight:s||Zo}}const yo=n=>Math.round(n*10)/10;function FC(n,t,e,i){const s=sa(n),a=Ii(s,"margin"),l=Jo(s.maxWidth,n,"clientWidth")||Zo,u=Jo(s.maxHeight,n,"clientHeight")||Zo,f=RC(n,t,e);let{width:h,height:g}=f;if(s.boxSizing==="content-box"){const m=Ii(s,"border","width"),v=Ii(s,"padding");h-=v.width+m.width,g-=v.height+m.height}return h=Math.max(0,h-a.width),g=Math.max(0,i?h/i:g-a.height),h=yo(Math.min(h,l,f.maxWidth)),g=yo(Math.min(g,u,f.maxHeight)),h&&!g&&(g=yo(h/2)),(t!==void 0||e!==void 0)&&i&&f.height&&g>f.height&&(g=f.height,h=yo(Math.floor(g*i))),{width:h,height:g}}function qh(n,t,e){const i=t||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==s||l.width!==a?(n.currentDevicePixelRatio=i,l.height=s,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const BC=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Nc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function jh(n,t){const e=EC(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ti(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function WC(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function zC(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},a={x:t.cp1x,y:t.cp1y},l=Ti(n,s,e),u=Ti(s,a,e),f=Ti(a,t,e),h=Ti(l,u,e),g=Ti(u,f,e);return Ti(h,g,e)}const NC=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},HC=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function fr(n,t,e){return n?NC(t,e):HC()}function Hg(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function $g(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Yg(n){return n==="angle"?{between:Tg,compare:WS,normalize:ri}:{between:Kr,compare:(t,e)=>t-e,normalize:t=>t}}function Gh({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function $C(n,t,e){const{property:i,start:s,end:a}=e,{between:l,normalize:u}=Yg(i),f=t.length;let{start:h,end:g,loop:p}=n,m,v;if(p){for(h+=f,g+=f,m=0,v=f;m<v&&l(u(t[h%f][i]),s,a);++m)h--,g--;h%=f,g%=f}return g<h&&(g+=f),{start:h,end:g,loop:p,style:n.style}}function YC(n,t,e){if(!e)return[n];const{property:i,start:s,end:a}=e,l=t.length,{compare:u,between:f,normalize:h}=Yg(i),{start:g,end:p,loop:m,style:v}=$C(n,t,e),S=[];let y=!1,w=null,k,O,P;const E=()=>f(s,P,k)&&u(s,P)!==0,M=()=>u(a,k)===0||f(a,P,k),R=()=>y||E(),B=()=>!y||M();for(let L=g,$=g;L<=p;++L)O=t[L%l],!O.skip&&(k=h(O[i]),k!==P&&(y=f(k,s,a),w===null&&R()&&(w=u(k,s)===0?L:$),w!==null&&B()&&(S.push(Gh({start:w,end:L,loop:m,count:l,style:v})),w=null),$=L,P=k));return w!==null&&S.push(Gh({start:w,end:p,loop:m,count:l,style:v})),S}function UC(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const a=YC(i[s],n.points,t);a.length&&e.push(...a)}return e}function VC(n,t,e,i){let s=0,a=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(a+=s);a>s&&n[a%t].skip;)a--;return a%=t,{start:s,end:a}}function XC(n,t,e,i){const s=n.length,a=[];let l=t,u=n[t],f;for(f=t+1;f<=e;++f){const h=n[f%s];h.skip||h.stop?u.skip||(i=!1,a.push({start:t%s,end:(f-1)%s,loop:i}),t=l=h.stop?f:null):(l=f,u.skip&&(t=f)),u=h}return l!==null&&a.push({start:t%s,end:l%s,loop:i}),a}function KC(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const a=!!n._loop,{start:l,end:u}=VC(e,s,a,i);if(i===!0)return Zh(n,[{start:l,end:u,loop:a}],e,t);const f=u<l?u+s:u,h=!!n._fullLoop&&l===0&&u===s-1;return Zh(n,XC(e,l,f,h),e,t)}function Zh(n,t,e,i){return!i||!i.setContext||!e?t:qC(n,t,e,i)}function qC(n,t,e,i){const s=n._chart.getContext(),a=Jh(n.options),{_datasetIndex:l,options:{spanGaps:u}}=n,f=e.length,h=[];let g=a,p=t[0].start,m=p;function v(S,y,w,k){const O=u?-1:1;if(S!==y){for(S+=f;e[S%f].skip;)S-=O;for(;e[y%f].skip;)y+=O;S%f!==y%f&&(h.push({start:S%f,end:y%f,loop:w,style:k}),g=k,p=y%f)}}for(const S of t){p=u?p:S.start;let y=e[p%f],w;for(m=p+1;m<=S.end;m++){const k=e[m%f];w=Jh(i.setContext(Fi(s,{type:"segment",p0:y,p1:k,p0DataIndex:(m-1)%f,p1DataIndex:m%f,datasetIndex:l}))),jC(w,g)&&v(p,m-1,S.loop,g),y=k,g=w}p<m-1&&v(p,m-1,S.loop,g)}return h}function Jh(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function jC(n,t){if(!t)return!1;const e=[],i=function(s,a){return Lc(a)?(e.includes(a)||e.push(a),e.indexOf(a)):a};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function wo(n,t,e){return n.options.clip?n[e]:t[e]}function GC(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:wo(e,t,"left"),right:wo(e,t,"right"),top:wo(i,t,"top"),bottom:wo(i,t,"bottom")}:t}function ZC(n,t){const e=t._clip;if(e.disabled)return!1;const i=GC(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class JC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const a=e.listeners[s],l=e.duration;a.forEach(u=>u({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=Og.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,u=!1,f;for(;l>=0;--l)f=a[l],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),u=!0):(a[l]=a[a.length-1],a.pop());u&&(s.draw(),this._notify(s,i,t,"progress")),a.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var $n=new JC;const Qh="transparent",QC={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=$h(n||Qh),s=i.valid&&$h(t||Qh);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class tk{constructor(t,e,i,s){const a=e[i];s=vo([t.to,s,a,t.from]);const l=vo([t.from,a,s]);this._active=!0,this._fn=t.fn||QC[t.type||typeof l],this._easing=es[t.easing]||es.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=vo([t.to,e,s,t.from]),this._from=vo([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,a=this._from,l=this._loop,u=this._to;let f;if(this._active=a!==u&&(l||e<i),!this._active){this._target[s]=u,this._notify(!0);return}if(e<0){this._target[s]=a;return}f=e/i%2,f=l&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[s]=this._fn(a,u,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Ug{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ct(t))return;const e=Object.keys(qt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const a=t[s];if(!Ct(a))return;const l={};for(const u of e)l[u]=a[u];(ie(a.properties)&&a.properties||[s]).forEach(u=>{(u===s||!i.has(u))&&i.set(u,l)})})}_animateOptions(t,e){const i=e.options,s=nk(t,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&ek(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,e){const i=this._properties,s=[],a=t.$animations||(t.$animations={}),l=Object.keys(e),u=Date.now();let f;for(f=l.length-1;f>=0;--f){const h=l[f];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(t,e));continue}const g=e[h];let p=a[h];const m=i.get(h);if(p)if(m&&p.active()){p.update(m,g,u);continue}else p.cancel();if(!m||!m.duration){t[h]=g;continue}a[h]=p=new tk(m,t,h,g),s.push(p)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return $n.add(this._chart,i),!0}}function ek(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function nk(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function td(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:i?a:s,end:i?s:a}}function ik(n,t,e){if(e===!1)return!1;const i=td(n,e),s=td(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function rk(n){let t,e,i,s;return Ct(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Vg(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,a;for(s=0,a=i.length;s<a;++s)e.push(i[s].index);return e}function ed(n,t,e,i={}){const s=n.keys,a=i.mode==="single";let l,u,f,h;if(t===null)return;let g=!1;for(l=0,u=s.length;l<u;++l){if(f=+s[l],f===e){if(g=!0,i.all)continue;break}h=n.values[f],an(h)&&(a||t===0||gr(t)===gr(h))&&(t+=h)}return!g&&!i.all?0:t}function sk(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let f,h,g;for(f=0,h=l.length;f<h;++f)g=l[f],u[f]={[s]:g,[a]:n[g]};return u}function Nl(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function ok(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function ak(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function lk(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function nd(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(e&&a>0||!e&&a<0)return s.index}return null}function id(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:a,vScale:l,index:u}=i,f=a.axis,h=l.axis,g=ok(a,l,i),p=t.length;let m;for(let v=0;v<p;++v){const S=t[v],{[f]:y,[h]:w}=S,k=S._stacks||(S._stacks={});m=k[h]=lk(s,g,y),m[u]=w,m._top=nd(m,l,!0,i.type),m._bottom=nd(m,l,!1,i.type);const O=m._visualValues||(m._visualValues={});O[u]=w}}function Hl(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function ck(n,t){return Fi(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function uk(n,t,e){return Fi(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Nr(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const a=s._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}const $l=n=>n==="reset"||n==="none",rd=(n,t)=>t?n:Object.assign({},n),fk=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Vg(e,!0),values:null};class Xg{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Nl(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Nr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(p,m,v,S)=>p==="x"?m:p==="r"?S:v,a=e.xAxisID=_t(i.xAxisID,Hl(t,"x")),l=e.yAxisID=_t(i.yAxisID,Hl(t,"y")),u=e.rAxisID=_t(i.rAxisID,Hl(t,"r")),f=e.indexAxis,h=e.iAxisID=s(f,a,l,u),g=e.vAxisID=s(f,l,a,u);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&zh(this._data,this),t._stacked&&Nr(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ct(e)){const s=this._cachedMeta;this._data=sk(e,s)}else if(i!==e){if(i){zh(i,this);const s=this._cachedMeta;Nr(s),s._parsed=[]}e&&Object.isExtensible(e)&&$S(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=e._stacked;e._stacked=Nl(e.vScale,e),e.stack!==i.stack&&(s=!0,Nr(e),e.stack=i.stack),this._resyncElements(t),(s||a!==e._stacked)&&(id(this,e._parsed),e._stacked=Nl(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,u=a.axis;let f=t===0&&e===s.length?!0:i._sorted,h=t>0&&i._parsed[t-1],g,p,m;if(this._parsing===!1)i._parsed=s,i._sorted=!0,m=s;else{ie(s[t])?m=this.parseArrayData(i,s,t,e):Ct(s[t])?m=this.parseObjectData(i,s,t,e):m=this.parsePrimitiveData(i,s,t,e);const v=()=>p[u]===null||h&&p[u]<h[u];for(g=0;g<e;++g)i._parsed[g+t]=p=m[g],f&&(v()&&(f=!1),h=p);i._sorted=f}l&&id(this,m)}parsePrimitiveData(t,e,i,s){const{iScale:a,vScale:l}=t,u=a.axis,f=l.axis,h=a.getLabels(),g=a===l,p=new Array(s);let m,v,S;for(m=0,v=s;m<v;++m)S=m+i,p[m]={[u]:g||a.parse(h[S],S),[f]:l.parse(e[S],S)};return p}parseArrayData(t,e,i,s){const{xScale:a,yScale:l}=t,u=new Array(s);let f,h,g,p;for(f=0,h=s;f<h;++f)g=f+i,p=e[g],u[f]={x:a.parse(p[0],g),y:l.parse(p[1],g)};return u}parseObjectData(t,e,i,s){const{xScale:a,yScale:l}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,h=new Array(s);let g,p,m,v;for(g=0,p=s;g<p;++g)m=g+i,v=e[m],h[g]={x:a.parse(jo(v,u),m),y:l.parse(jo(v,f),m)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,a=this._cachedMeta,l=e[t.axis],u={keys:Vg(s,!0),values:e._stacks[t.axis]._visualValues};return ed(u,l,a.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const a=i[e.axis];let l=a===null?NaN:a;const u=s&&i._stacks[e.axis];s&&u&&(s.values=u,l=ed(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&t===i.iScale,l=s.length,u=this._getOtherScale(t),f=fk(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:p}=ak(u);let m,v;function S(){v=s[m];const y=v[u.axis];return!an(v[t.axis])||g>y||p<y}for(m=0;m<l&&!(!S()&&(this.updateRangeFromParsed(h,t,v,f),a));++m);if(a){for(m=l-1;m>=0;--m)if(!S()){this.updateRangeFromParsed(h,t,v,f);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=e.length;s<a;++s)l=e[s][t.axis],an(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=rk(_t(this.options.clip,ik(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],a=e.chartArea,l=[],u=this._drawStart||0,f=this._drawCount||s.length-u,h=this.options.drawActiveElementsOnTop;let g;for(i.dataset&&i.dataset.draw(t,a,u,f),g=u;g<u+f;++g){const p=s[g];p.hidden||(p.active&&h?l.push(p):p.draw(t,a))}for(g=0;g<l.length;++g)l[g].draw(t,a)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=uk(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=ck(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",a=this._cachedDataOpts,l=t+"-"+e,u=a[l],f=this.enableOptionSharing&&Go(i);if(u)return rd(u,f);const h=this.chart.config,g=h.datasetElementScopeKeys(this._type,t),p=s?[`${t}Hover`,"hover",t,""]:[t,""],m=h.getOptionScopes(this.getDataset(),g),v=Object.keys(qt.elements[t]),S=()=>this.getContext(i,s,e),y=h.resolveNamedOptions(m,v,S,p);return y.$shared&&(y.$shared=f,a[l]=Object.freeze(rd(y,f))),y}_resolveAnimations(t,e,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${e}`,u=a[l];if(u)return u;let f;if(s.options.animation!==!1){const g=this.chart.config,p=g.datasetAnimationScopeKeys(this._type,e),m=g.getOptionScopes(this.getDataset(),p);f=g.createResolver(m,this.getContext(t,i,e))}const h=new Ug(s,f&&f.animations);return f&&f._cacheable&&(a[l]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||$l(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(e,a)||a!==s;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:l}}updateElement(t,e,i,s){$l(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!$l(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const a=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,f,h]of this._syncList)this[u](f,h);this._syncList=[];const s=i.length,a=e.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,e,i=!0){const s=this._cachedMeta,a=s.data,l=t+e;let u;const f=h=>{for(h.length+=e,u=h.length-1;u>=l;u--)h[u]=h[u-e]};for(f(a),u=t;u<l;++u)a[u]=new this.dataElementType;this._parsing&&f(s._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Nr(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class hk extends Xg{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=e,l=this.chart._animationsDisabled;let{start:u,count:f}=XS(e,s,l);this._drawStart=u,this._drawCount=f,KS(e)&&(u=0,f=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:h},t),this.updateElements(s,u,f,t)}updateElements(t,e,i,s){const a=s==="reset",{iScale:l,vScale:u,_stacked:f,_dataset:h}=this._cachedMeta,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(e,s),m=l.axis,v=u.axis,{spanGaps:S,segment:y}=this.options,w=ps(S)?S:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||a||s==="none",O=e+i,P=t.length;let E=e>0&&this.getParsed(e-1);for(let M=0;M<P;++M){const R=t[M],B=k?R:{};if(M<e||M>=O){B.skip=!0;continue}const L=this.getParsed(M),$=Lt(L[v]),j=B[m]=l.getPixelForValue(L[m],M),K=B[v]=a||$?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,L,f):L[v],M);B.skip=isNaN(j)||isNaN(K)||$,B.stop=M>0&&Math.abs(L[m]-E[m])>w,y&&(B.parsed=L,B.raw=h.data[M]),p&&(B.options=g||this.resolveDataElementOptions(M,R.active?"active":s)),k||this.updateElement(R,M,B,s),E=L}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const a=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function Si(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $c{static override(t){Object.assign($c.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Si()}parse(){return Si()}format(){return Si()}add(){return Si()}diff(){return Si()}startOf(){return Si()}endOf(){return Si()}}var Kg={_date:$c};function dk(n,t,e,i){const{controller:s,data:a,_sorted:l}=n,u=s._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&l&&a.length){const h=u._reversePixels?NS:Ei;if(i){if(s._sharedOptions){const g=a[0],p=typeof g.getRange=="function"&&g.getRange(t);if(p){const m=h(a,t,e-p),v=h(a,t,e+p);return{lo:m.lo,hi:v.hi}}}}else{const g=h(a,t,e);if(f){const{vScale:p}=s._cachedMeta,{_parsed:m}=n,v=m.slice(0,g.lo+1).reverse().findIndex(y=>!Lt(y[p.axis]));g.lo-=Math.max(0,v);const S=m.slice(g.hi).findIndex(y=>!Lt(y[p.axis]));g.hi+=Math.max(0,S)}return g}}return{lo:0,hi:a.length-1}}function oa(n,t,e,i,s){const a=n.getSortedVisibleDatasetMetas(),l=e[t];for(let u=0,f=a.length;u<f;++u){const{index:h,data:g}=a[u],{lo:p,hi:m}=dk(a[u],t,l,s);for(let v=p;v<=m;++v){const S=g[v];S.skip||i(S,h,v)}}}function gk(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const a=t?Math.abs(i.x-s.x):0,l=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function Yl(n,t,e,i,s){const a=[];return!s&&!n.isPointInArea(t)||oa(n,e,t,function(u,f,h){!s&&!ms(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&a.push({element:u,datasetIndex:f,index:h})},!0),a}function pk(n,t,e,i){let s=[];function a(l,u,f){const{startAngle:h,endAngle:g}=l.getProps(["startAngle","endAngle"],i),{angle:p}=BS(l,{x:t.x,y:t.y});Tg(p,h,g)&&s.push({element:l,datasetIndex:u,index:f})}return oa(n,e,t,a),s}function mk(n,t,e,i,s,a){let l=[];const u=gk(e);let f=Number.POSITIVE_INFINITY;function h(g,p,m){const v=g.inRange(t.x,t.y,s);if(i&&!v)return;const S=g.getCenterPoint(s);if(!(!!a||n.isPointInArea(S))&&!v)return;const w=u(t,S);w<f?(l=[{element:g,datasetIndex:p,index:m}],f=w):w===f&&l.push({element:g,datasetIndex:p,index:m})}return oa(n,e,t,h),l}function Ul(n,t,e,i,s,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!i?pk(n,t,e,s):mk(n,t,e,i,s,a)}function sd(n,t,e,i,s){const a=[],l=e==="x"?"inXRange":"inYRange";let u=!1;return oa(n,e,t,(f,h,g)=>{f[l]&&f[l](t[e],s)&&(a.push({element:f,datasetIndex:h,index:g}),u=u||f.inRange(t.x,t.y,s))}),i&&!u?[]:a}var _k={modes:{index(n,t,e,i){const s=Mi(t,n),a=e.axis||"x",l=e.includeInvisible||!1,u=e.intersect?Yl(n,s,a,i,l):Ul(n,s,a,!1,i,l),f=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const g=u[0].index,p=h.data[g];p&&!p.skip&&f.push({element:p,datasetIndex:h.index,index:g})}),f):[]},dataset(n,t,e,i){const s=Mi(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;let u=e.intersect?Yl(n,s,a,i,l):Ul(n,s,a,!1,i,l);if(u.length>0){const f=u[0].datasetIndex,h=n.getDatasetMeta(f).data;u=[];for(let g=0;g<h.length;++g)u.push({element:h[g],datasetIndex:f,index:g})}return u},point(n,t,e,i){const s=Mi(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return Yl(n,s,a,i,l)},nearest(n,t,e,i){const s=Mi(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return Ul(n,s,a,e.intersect,i,l)},x(n,t,e,i){const s=Mi(t,n);return sd(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=Mi(t,n);return sd(n,s,"y",e.intersect,i)}}};const qg=["left","top","right","bottom"];function Hr(n,t){return n.filter(e=>e.pos===t)}function od(n,t){return n.filter(e=>qg.indexOf(e.pos)===-1&&e.box.axis===t)}function $r(n,t){return n.sort((e,i)=>{const s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function bk(n){const t=[];let e,i,s,a,l,u;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:a,options:{stack:l,stackWeight:u=1}}=s,t.push({index:e,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&a+l,stackWeight:u});return t}function vk(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:a}=e;if(!i||!qg.includes(s))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function xk(n,t){const e=vk(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let a,l,u;for(a=0,l=n.length;a<l;++a){u=n[a];const{fullSize:f}=u.box,h=e[u.stack],g=h&&u.stackWeight/h.weight;u.horizontal?(u.width=g?g*i:f&&t.availableWidth,u.height=s):(u.width=i,u.height=g?g*s:f&&t.availableHeight)}return e}function yk(n){const t=bk(n),e=$r(t.filter(h=>h.box.fullSize),!0),i=$r(Hr(t,"left"),!0),s=$r(Hr(t,"right")),a=$r(Hr(t,"top"),!0),l=$r(Hr(t,"bottom")),u=od(t,"x"),f=od(t,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:s.concat(f).concat(l).concat(u),chartArea:Hr(t,"chartArea"),vertical:i.concat(s).concat(f),horizontal:a.concat(l).concat(u)}}function ad(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function jg(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function wk(n,t,e,i){const{pos:s,box:a}=e,l=n.maxPadding;if(!Ct(s)){e.size&&(n[s]-=e.size);const p=i[e.stack]||{size:0,count:1};p.size=Math.max(p.size,e.horizontal?a.height:a.width),e.size=p.size/p.count,n[s]+=e.size}a.getPadding&&jg(l,a.getPadding());const u=Math.max(0,t.outerWidth-ad(l,n,"left","right")),f=Math.max(0,t.outerHeight-ad(l,n,"top","bottom")),h=u!==n.w,g=f!==n.h;return n.w=u,n.h=f,e.horizontal?{same:h,other:g}:{same:g,other:h}}function Sk(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Ck(n,t){const e=t.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{a[l]=Math.max(t[l],e[l])}),a}return i(n?["left","right"]:["top","bottom"])}function qr(n,t,e,i){const s=[];let a,l,u,f,h,g;for(a=0,l=n.length,h=0;a<l;++a){u=n[a],f=u.box,f.update(u.width||t.w,u.height||t.h,Ck(u.horizontal,t));const{same:p,other:m}=wk(t,e,u,i);h|=p&&s.length,g=g||m,f.fullSize||s.push(u)}return h&&qr(s,t,e,i)||g}function So(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function ld(n,t,e,i){const s=e.padding;let{x:a,y:l}=t;for(const u of n){const f=u.box,h=i[u.stack]||{placed:0,weight:1},g=u.stackWeight/h.weight||1;if(u.horizontal){const p=t.w*g,m=h.size||f.height;Go(h.start)&&(l=h.start),f.fullSize?So(f,s.left,l,e.outerWidth-s.right-s.left,m):So(f,t.left+h.placed,l,p,m),h.start=l,h.placed+=p,l=f.bottom}else{const p=t.h*g,m=h.size||f.width;Go(h.start)&&(a=h.start),f.fullSize?So(f,a,s.top,m,e.outerHeight-s.bottom-s.top):So(f,a,t.top+h.placed,m,p),h.start=a,h.placed+=p,a=f.right}}t.x=a,t.y=l}var on={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=ln(n.options.layout.padding),a=Math.max(t-s.width,0),l=Math.max(e-s.height,0),u=yk(n.boxes),f=u.vertical,h=u.horizontal;Tt(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const g=f.reduce((y,w)=>w.box.options&&w.box.options.display===!1?y:y+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/g,hBoxMaxHeight:l/2}),m=Object.assign({},s);jg(m,ln(i));const v=Object.assign({maxPadding:m,w:a,h:l,x:s.left,y:s.top},s),S=xk(f.concat(h),p);qr(u.fullSize,v,p,S),qr(f,v,p,S),qr(h,v,p,S)&&qr(f,v,p,S),Sk(v),ld(u.leftAndTop,v,p,S),v.x+=v.w,v.y+=v.h,ld(u.rightAndBottom,v,p,S),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Tt(u.chartArea,y=>{const w=y.box;Object.assign(w,n.chartArea),w.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class Gg{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class kk extends Gg{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Lo="$chartjs",Dk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cd=n=>n===null||n==="";function Mk(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Lo]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",cd(s)){const a=jh(n,"width");a!==void 0&&(n.width=a)}if(cd(i))if(n.style.height==="")n.height=n.width/(t||2);else{const a=jh(n,"height");a!==void 0&&(n.height=a)}return n}const Zg=BC?{passive:!0}:!1;function Tk(n,t,e){n&&n.addEventListener(t,e,Zg)}function Ak(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Zg)}function Ok(n,t){const e=Dk[n.type]||n.type,{x:i,y:s}=Mi(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Qo(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Ek(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||Qo(u.addedNodes,i),l=l&&!Qo(u.removedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Ik(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||Qo(u.removedNodes,i),l=l&&!Qo(u.addedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const bs=new Map;let ud=0;function Jg(){const n=window.devicePixelRatio;n!==ud&&(ud=n,bs.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Pk(n,t){bs.size||window.addEventListener("resize",Jg),bs.set(n,t)}function Lk(n){bs.delete(n),bs.size||window.removeEventListener("resize",Jg)}function Rk(n,t,e){const i=n.canvas,s=i&&Hc(i);if(!s)return;const a=Eg((u,f)=>{const h=s.clientWidth;e(u,f),h<s.clientWidth&&e()},window),l=new ResizeObserver(u=>{const f=u[0],h=f.contentRect.width,g=f.contentRect.height;h===0&&g===0||a(h,g)});return l.observe(s),Pk(n,a),l}function Vl(n,t,e){e&&e.disconnect(),t==="resize"&&Lk(n)}function Fk(n,t,e){const i=n.canvas,s=Eg(a=>{n.ctx!==null&&e(Ok(a,n))},n);return Tk(i,t,s),s}class Bk extends Gg{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Mk(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Lo])return!1;const i=e[Lo].initial;["height","width"].forEach(a=>{const l=i[a];Lt(l)?e.removeAttribute(a):e.setAttribute(a,l)});const s=i.style||{};return Object.keys(s).forEach(a=>{e.style[a]=s[a]}),e.width=e.width,delete e[Lo],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),l={attach:Ek,detach:Ik,resize:Rk}[e]||Fk;s[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Vl,detach:Vl,resize:Vl}[e]||Ak)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return FC(t,e,i,s)}isAttached(t){const e=t&&Hc(t);return!!(e&&e.isConnected)}}function Wk(n){return!Nc()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?kk:Bk}class Bi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ps(this.x)&&ps(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}}function zk(n,t){const e=n.options.ticks,i=Nk(n),s=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?$k(t):[],l=a.length,u=a[0],f=a[l-1],h=[];if(l>s)return Yk(t,h,a,l/s),h;const g=Hk(a,t,s);if(l>0){let p,m;const v=l>1?Math.round((f-u)/(l-1)):null;for(Co(t,h,g,Lt(v)?0:u-v,u),p=0,m=l-1;p<m;p++)Co(t,h,g,a[p],a[p+1]);return Co(t,h,g,f,Lt(v)?t.length:f+v),h}return Co(t,h,g),h}function Nk(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function Hk(n,t,e){const i=Uk(n),s=t.length/e;if(!i)return Math.max(s,1);const a=IS(i);for(let l=0,u=a.length-1;l<u;l++){const f=a[l];if(f>s)return f}return Math.max(s,1)}function $k(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Yk(n,t,e,i){let s=0,a=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(t.push(n[l]),s++,a=e[s*i])}function Co(n,t,e,i,s){const a=_t(i,0),l=Math.min(_t(s,n.length),n.length);let u=0,f,h,g;for(e=Math.ceil(e),s&&(f=s-i,e=f/Math.floor(f/e)),g=a;g<0;)u++,g=Math.round(a+u*e);for(h=Math.max(a,0);h<l;h++)h===g&&(t.push(n[h]),u++,g=Math.round(a+u*e))}function Uk(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const Vk=n=>n==="left"?"right":n==="right"?"left":n,fd=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,hd=(n,t)=>Math.min(t||n,n);function dd(n,t){const e=[],i=n.length/t,s=n.length;let a=0;for(;a<s;a+=i)e.push(n[Math.floor(a)]);return e}function Xk(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),a=n._startPixel,l=n._endPixel,u=1e-6;let f=n.getPixelForTick(s),h;if(!(e&&(i===1?h=Math.max(f-a,l-f):t===0?h=(n.getPixelForTick(1)-f)/2:h=(f-n.getPixelForTick(s-1))/2,f+=s<t?h:-h,f<a-u||f>l+u)))return f}function Kk(n,t){Tt(n,e=>{const i=e.gc,s=i.length/2;let a;if(s>t){for(a=0;a<s;++a)delete e.data[i[a]];i.splice(0,s)}})}function Yr(n){return n.drawTicks?n.tickLength:0}function gd(n,t){if(!n.display)return 0;const e=_e(n.font,t),i=ln(n.padding);return(ie(n.text)?n.text.length:1)*e.lineHeight+i.height}function qk(n,t){return Fi(n,{scale:t,type:"scale"})}function jk(n,t,e){return Fi(n,{tick:e,index:t,type:"tick"})}function Gk(n,t,e){let i=Pc(n);return(e&&t!=="right"||!e&&t==="right")&&(i=Vk(i)),i}function Zk(n,t,e,i){const{top:s,left:a,bottom:l,right:u,chart:f}=n,{chartArea:h,scales:g}=f;let p=0,m,v,S;const y=l-s,w=u-a;if(n.isHorizontal()){if(v=me(i,a,u),Ct(e)){const k=Object.keys(e)[0],O=e[k];S=g[k].getPixelForValue(O)+y-t}else e==="center"?S=(h.bottom+h.top)/2+y-t:S=fd(n,e,t);m=u-a}else{if(Ct(e)){const k=Object.keys(e)[0],O=e[k];v=g[k].getPixelForValue(O)-w+t}else e==="center"?v=(h.left+h.right)/2-w+t:v=fd(n,e,t);S=me(i,l,s),p=e==="left"?-bn:bn}return{titleX:v,titleY:S,maxWidth:m,rotation:p}}class vr extends Bi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Sn(t,Number.POSITIVE_INFINITY),e=Sn(e,Number.NEGATIVE_INFINITY),i=Sn(i,Number.POSITIVE_INFINITY),s=Sn(s,Number.NEGATIVE_INFINITY),{min:Sn(t,i),max:Sn(e,s),minDefined:an(t),maxDefined:an(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),l;if(s&&a)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let f=0,h=u.length;f<h;++f)l=u[f].controller.getMinMax(this,t),s||(e=Math.min(e,l.min)),a||(i=Math.max(i,l.max));return e=a&&e>i?i:e,i=s&&e>i?e:i,{min:Sn(e,Sn(i,e)),max:Sn(i,Sn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Bt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:a,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=gC(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?dd(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=zk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Bt(this.options.afterUpdate,[this])}beforeSetDimensions(){Bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Bt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Bt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,a;for(i=0,s=t.length;i<s;i++)a=t[i],a.label=Bt(e.callback,[a.value,i,t],this)}afterTickToLabelConversion(){Bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=hd(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,a=e.maxRotation;let l=s,u,f,h;if(!this._isVisible()||!e.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const g=this._getLabelSizes(),p=g.widest.width,m=g.highest.height,v=sn(this.chart.width-p,0,this.maxWidth);u=t.offset?this.maxWidth/i:v/(i-1),p+6>u&&(u=v/(i-(t.offset?.5:1)),f=this.maxHeight-Yr(t.grid)-e.padding-gd(t.title,this.chart.options.font),h=Math.sqrt(p*p+m*m),l=FS(Math.min(Math.asin(sn((g.highest.height+6)/u,-1,1)),Math.asin(sn(f/h,-1,1))-Math.asin(sn(m/h,-1,1)))),l=Math.max(s,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){Bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Bt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:a}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const f=gd(s,e.options.font);if(u?(t.width=this.maxWidth,t.height=Yr(a)+f):(t.height=this.maxHeight,t.width=Yr(a)+f),i.display&&this.ticks.length){const{first:h,last:g,widest:p,highest:m}=this._getLabelSizes(),v=i.padding*2,S=Oi(this.labelRotation),y=Math.cos(S),w=Math.sin(S);if(u){const k=i.mirror?0:w*p.width+y*m.height;t.height=Math.min(this.maxHeight,t.height+k+v)}else{const k=i.mirror?0:y*p.width+w*m.height;t.width=Math.min(this.maxWidth,t.width+k+v)}this._calculatePadding(h,g,w,y)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:a,padding:l},position:u}=this.options,f=this.labelRotation!==0,h=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;f?h?(m=s*t.width,v=i*e.height):(m=i*t.height,v=s*e.width):a==="start"?v=e.width:a==="end"?m=t.width:a!=="inner"&&(m=t.width/2,v=e.width/2),this.paddingLeft=Math.max((m-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((v-p+l)*this.width/(this.width-p),0)}else{let g=e.height/2,p=t.height/2;a==="start"?(g=0,p=t.height):a==="end"&&(g=e.height,p=0),this.paddingTop=g+l,this.paddingBottom=p+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Bt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Lt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=dd(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:a}=this,l=[],u=[],f=Math.floor(e/hd(e,i));let h=0,g=0,p,m,v,S,y,w,k,O,P,E,M;for(p=0;p<e;p+=f){if(S=t[p].label,y=this._resolveTickFontOptions(p),s.font=w=y.string,k=a[w]=a[w]||{data:{},gc:[]},O=y.lineHeight,P=E=0,!Lt(S)&&!ie(S))P=Uh(s,k.data,k.gc,P,S),E=O;else if(ie(S))for(m=0,v=S.length;m<v;++m)M=S[m],!Lt(M)&&!ie(M)&&(P=Uh(s,k.data,k.gc,P,M),E+=O);l.push(P),u.push(E),h=Math.max(P,h),g=Math.max(E,g)}Kk(a,e);const R=l.indexOf(h),B=u.indexOf(g),L=$=>({width:l[$]||0,height:u[$]||0});return{first:L(0),last:L(e-1),widest:L(R),highest:L(B),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return zS(this._alignToPixels?wi(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=jk(this.getContext(),t,i))}return this.$context||(this.$context=qk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Oi(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,u=a?a.widest.width+l:0,f=a?a.highest.height+l:0;return this.isHorizontal()?f*i>u*s?u/i:f/s:f*s<u*i?f/i:u/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:a,position:l,border:u}=s,f=a.offset,h=this.isHorizontal(),p=this.ticks.length+(f?1:0),m=Yr(a),v=[],S=u.setContext(this.getContext()),y=S.display?S.width:0,w=y/2,k=function(ht){return wi(i,ht,y)};let O,P,E,M,R,B,L,$,j,K,G,ct;if(l==="top")O=k(this.bottom),B=this.bottom-m,$=O-w,K=k(t.top)+w,ct=t.bottom;else if(l==="bottom")O=k(this.top),K=t.top,ct=k(t.bottom)-w,B=O+w,$=this.top+m;else if(l==="left")O=k(this.right),R=this.right-m,L=O-w,j=k(t.left)+w,G=t.right;else if(l==="right")O=k(this.left),j=t.left,G=k(t.right)-w,R=O+w,L=this.left+m;else if(e==="x"){if(l==="center")O=k((t.top+t.bottom)/2+.5);else if(Ct(l)){const ht=Object.keys(l)[0],yt=l[ht];O=k(this.chart.scales[ht].getPixelForValue(yt))}K=t.top,ct=t.bottom,B=O+w,$=B+m}else if(e==="y"){if(l==="center")O=k((t.left+t.right)/2);else if(Ct(l)){const ht=Object.keys(l)[0],yt=l[ht];O=k(this.chart.scales[ht].getPixelForValue(yt))}R=O-w,L=R-m,j=t.left,G=t.right}const xt=_t(s.ticks.maxTicksLimit,p),at=Math.max(1,Math.ceil(p/xt));for(P=0;P<p;P+=at){const ht=this.getContext(P),yt=a.setContext(ht),Dt=u.setContext(ht),te=yt.lineWidth,Gt=yt.color,bt=Dt.dash||[],le=Dt.dashOffset,we=yt.tickWidth,Re=yt.tickColor,ce=yt.tickBorderDash||[],ue=yt.tickBorderDashOffset;E=Xk(this,P,f),E!==void 0&&(M=wi(i,E,te),h?R=L=j=G=M:B=$=K=ct=M,v.push({tx1:R,ty1:B,tx2:L,ty2:$,x1:j,y1:K,x2:G,y2:ct,width:te,color:Gt,borderDash:bt,borderDashOffset:le,tickWidth:we,tickColor:Re,tickBorderDash:ce,tickBorderDashOffset:ue}))}return this._ticksLength=p,this._borderValue=O,v}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:a}=i,l=this.isHorizontal(),u=this.ticks,{align:f,crossAlign:h,padding:g,mirror:p}=a,m=Yr(i.grid),v=m+g,S=p?-g:v,y=-Oi(this.labelRotation),w=[];let k,O,P,E,M,R,B,L,$,j,K,G,ct="middle";if(s==="top")R=this.bottom-S,B=this._getXAxisLabelAlignment();else if(s==="bottom")R=this.top+S,B=this._getXAxisLabelAlignment();else if(s==="left"){const at=this._getYAxisLabelAlignment(m);B=at.textAlign,M=at.x}else if(s==="right"){const at=this._getYAxisLabelAlignment(m);B=at.textAlign,M=at.x}else if(e==="x"){if(s==="center")R=(t.top+t.bottom)/2+v;else if(Ct(s)){const at=Object.keys(s)[0],ht=s[at];R=this.chart.scales[at].getPixelForValue(ht)+v}B=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")M=(t.left+t.right)/2-v;else if(Ct(s)){const at=Object.keys(s)[0],ht=s[at];M=this.chart.scales[at].getPixelForValue(ht)}B=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(f==="start"?ct="top":f==="end"&&(ct="bottom"));const xt=this._getLabelSizes();for(k=0,O=u.length;k<O;++k){P=u[k],E=P.label;const at=a.setContext(this.getContext(k));L=this.getPixelForTick(k)+a.labelOffset,$=this._resolveTickFontOptions(k),j=$.lineHeight,K=ie(E)?E.length:1;const ht=K/2,yt=at.color,Dt=at.textStrokeColor,te=at.textStrokeWidth;let Gt=B;l?(M=L,B==="inner"&&(k===O-1?Gt=this.options.reverse?"left":"right":k===0?Gt=this.options.reverse?"right":"left":Gt="center"),s==="top"?h==="near"||y!==0?G=-K*j+j/2:h==="center"?G=-xt.highest.height/2-ht*j+j:G=-xt.highest.height+j/2:h==="near"||y!==0?G=j/2:h==="center"?G=xt.highest.height/2-ht*j:G=xt.highest.height-K*j,p&&(G*=-1),y!==0&&!at.showLabelBackdrop&&(M+=j/2*Math.sin(y))):(R=L,G=(1-K)*j/2);let bt;if(at.showLabelBackdrop){const le=ln(at.backdropPadding),we=xt.heights[k],Re=xt.widths[k];let ce=G-le.top,ue=0-le.left;switch(ct){case"middle":ce-=we/2;break;case"bottom":ce-=we;break}switch(B){case"center":ue-=Re/2;break;case"right":ue-=Re;break;case"inner":k===O-1?ue-=Re:k>0&&(ue-=Re/2);break}bt={left:ue,top:ce,width:Re+le.width,height:we+le.height,color:at.backdropColor}}w.push({label:E,font:$,textOffset:G,options:{rotation:y,color:yt,strokeColor:Dt,strokeWidth:te,textAlign:Gt,textBaseline:ct,translation:[M,R],backdrop:bt}})}return w}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Oi(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,l=this._getLabelSizes(),u=t+a,f=l.widest.width;let h,g;return e==="left"?s?(g=this.right+a,i==="near"?h="left":i==="center"?(h="center",g+=f/2):(h="right",g+=f)):(g=this.right-u,i==="near"?h="right":i==="center"?(h="center",g-=f/2):(h="left",g=this.left)):e==="right"?s?(g=this.left+a,i==="near"?h="right":i==="center"?(h="center",g-=f/2):(h="left",g-=f)):(g=this.left+u,i==="near"?h="left":i==="center"?(h="center",g+=f/2):(h="right",g=this.right)):h="right",{textAlign:h,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:a,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,a,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(a=>a.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const u=(f,h,g)=>{!g.width||!g.color||(i.save(),i.lineWidth=g.width,i.strokeStyle=g.color,i.setLineDash(g.borderDash||[]),i.lineDashOffset=g.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(e.display)for(a=0,l=s.length;a<l;++a){const f=s[a];e.drawOnChartArea&&u({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&u({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const u=s.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let h,g,p,m;this.isHorizontal()?(h=wi(t,this.left,l)-l/2,g=wi(t,this.right,u)+u/2,p=m=f):(p=wi(t,this.top,l)-l/2,m=wi(t,this.bottom,u)+u/2,h=g=f),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(h,p),e.lineTo(g,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Rc(i,s);const a=this.getLabelItems(t);for(const l of a){const u=l.options,f=l.font,h=l.label,g=l.textOffset;_s(i,h,0,g,f,u)}s&&Fc(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const a=_e(i.font),l=ln(i.padding),u=i.align;let f=a.lineHeight/2;e==="bottom"||e==="center"||Ct(e)?(f+=l.bottom,ie(i.text)&&(f+=a.lineHeight*(i.text.length-1))):f+=l.top;const{titleX:h,titleY:g,maxWidth:p,rotation:m}=Zk(this,f,e,u);_s(t,i.text,0,0,a,{color:i.color,maxWidth:p,rotation:m,textAlign:Gk(u,e,s),textBaseline:"middle",translation:[h,g]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=_t(t.grid&&t.grid.z,-1),s=_t(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==vr.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,l;for(a=0,l=e.length;a<l;++a){const u=e[a];u[i]===this.id&&(!t||u.type===t)&&s.push(u)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return _e(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ko{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;tD(e)&&(i=this.register(e));const s=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in s||(s[a]=t,Jk(t,l,i),this.override&&qt.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in qt[s]&&(delete qt[s][i],this.override&&delete Pi[i])}}function Jk(n,t,e){const i=gs(Object.create(null),[e?qt.get(e):{},qt.get(t),n.defaults]);qt.set(t,i),n.defaultRoutes&&Qk(t,n.defaultRoutes),n.descriptors&&qt.describe(t,n.descriptors)}function Qk(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),a=[n].concat(i).join("."),l=t[e].split("."),u=l.pop(),f=l.join(".");qt.route(a,s,f,u)})}function tD(n){return"id"in n&&"defaults"in n}class eD{constructor(){this.controllers=new ko(Xg,"datasets",!0),this.elements=new ko(Bi,"elements"),this.plugins=new ko(Object,"plugins"),this.scales=new ko(vr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(t,a,s):Tt(s,l=>{const u=i||this._getRegistryForType(l);this._exec(t,u,l)})})}_exec(t,e,i){const s=Ec(t);Bt(i["before"+s],[],i),e[t](i),Bt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var kn=new eD;class nD{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=s?this._descriptors(t).filter(s):this._descriptors(t),l=this._notify(a,t,e,i);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),l}_notify(t,e,i,s){s=s||{};for(const a of t){const l=a.plugin,u=l[i],f=[e,s,a.options];if(Bt(u,f,l)===!1&&s.cancelable)return!1}return!0}invalidate(){Lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=_t(i.options&&i.options.plugins,{}),a=iD(i);return s===!1&&!e?[]:sD(t,a,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(a,l)=>a.filter(u=>!l.some(f=>u.plugin.id===f.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function iD(n){const t={},e=[],i=Object.keys(kn.plugins.items);for(let a=0;a<i.length;a++)e.push(kn.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const l=s[a];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function rD(n,t){return!t&&n===!1?null:n===!0?{}:n}function sD(n,{plugins:t,localIds:e},i,s){const a=[],l=n.getContext();for(const u of t){const f=u.id,h=rD(i[f],s);h!==null&&a.push({plugin:u,options:oD(n.config,{plugin:u,local:e[f]},h,l)})}return a}function oD(n,{plugin:t,local:e},i,s){const a=n.pluginScopeKeys(t),l=n.getOptionScopes(i,a);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hc(n,t){const e=qt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function aD(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function lD(n,t){return n===t?"_index_":"_value_"}function pd(n){if(n==="x"||n==="y"||n==="r")return n}function cD(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function dc(n,...t){if(pd(n))return n;for(const e of t){const i=e.axis||cD(e.position)||n.length>1&&pd(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function md(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function uD(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return md(n,"x",e[0])||md(n,"y",e[0])}return{}}function fD(n,t){const e=Pi[n.type]||{scales:{}},i=t.scales||{},s=hc(n.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ct(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const f=dc(l,u,uD(l,n),qt.scales[u.type]),h=lD(f,s),g=e.scales||{};a[l]=Qr(Object.create(null),[{axis:f},u,g[f],g[h]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,f=l.indexAxis||hc(u,t),g=(Pi[u]||{}).scales||{};Object.keys(g).forEach(p=>{const m=aD(p,f),v=l[m+"AxisID"]||m;a[v]=a[v]||Object.create(null),Qr(a[v],[{axis:m},i[v],g[p]])})}),Object.keys(a).forEach(l=>{const u=a[l];Qr(u,[qt.scales[u.type],qt.scale])}),a}function Qg(n){const t=n.options||(n.options={});t.plugins=_t(t.plugins,{}),t.scales=fD(n,t)}function tp(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function hD(n){return n=n||{},n.data=tp(n.data),Qg(n),n}const _d=new Map,ep=new Set;function Do(n,t){let e=_d.get(n);return e||(e=t(),_d.set(n,e),ep.add(e)),e}const Ur=(n,t,e)=>{const i=jo(t,e);i!==void 0&&n.add(i)};class dD{constructor(t){this._config=hD(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=tp(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Qg(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Do(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Do(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Do(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Do(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:a}=this,l=this._cachedScopes(t,i),u=l.get(e);if(u)return u;const f=new Set;e.forEach(g=>{t&&(f.add(t),g.forEach(p=>Ur(f,t,p))),g.forEach(p=>Ur(f,s,p)),g.forEach(p=>Ur(f,Pi[a]||{},p)),g.forEach(p=>Ur(f,qt,p)),g.forEach(p=>Ur(f,cc,p))});const h=Array.from(f);return h.length===0&&h.push(Object.create(null)),ep.has(e)&&l.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Pi[e]||{},qt.datasets[e]||{},{type:e},qt,cc]}resolveNamedOptions(t,e,i,s=[""]){const a={$shared:!0},{resolver:l,subPrefixes:u}=bd(this._resolverCache,t,s);let f=l;if(pD(l,e)){a.$shared=!1,i=fi(i)?i():i;const h=this.createResolver(t,i,u);f=pr(l,i,h)}for(const h of e)a[h]=f[h];return a}createResolver(t,e,i=[""],s){const{resolver:a}=bd(this._resolverCache,t,i);return Ct(e)?pr(a,e,void 0,s):a}}function bd(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let a=i.get(s);return a||(a={resolver:Bc(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(s,a)),a}const gD=n=>Ct(n)&&Object.getOwnPropertyNames(n).some(t=>fi(n[t]));function pD(n,t){const{isScriptable:e,isIndexable:i}=Fg(n);for(const s of t){const a=e(s),l=i(s),u=(l||a)&&n[s];if(a&&(fi(u)||gD(u))||l&&ie(u))return!0}return!1}var mD="4.5.0";const _D=["top","bottom","left","right","chartArea"];function vd(n,t){return n==="top"||n==="bottom"||_D.indexOf(n)===-1&&t==="x"}function xd(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function yd(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Bt(e&&e.onComplete,[n],t)}function bD(n){const t=n.chart,e=t.options.animation;Bt(e&&e.onProgress,[n],t)}function np(n){return Nc()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Ro={},wd=n=>{const t=np(n);return Object.values(Ro).filter(e=>e.canvas===t).pop()};function vD(n,t,e){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=t){const l=n[s];delete n[s],(e>0||a>t)&&(n[a+e]=l)}}}function xD(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let vs=class{static defaults=qt;static instances=Ro;static overrides=Pi;static registry=kn;static version=mD;static getChart=wd;static register(...t){kn.add(...t),Sd()}static unregister(...t){kn.remove(...t),Sd()}constructor(t,e){const i=this.config=new dD(e),s=np(t),a=wd(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Wk(s)),this.platform.updateConfig(i);const u=this.platform.acquireContext(s,l.aspectRatio),f=u&&u.canvas,h=f&&f.height,g=f&&f.width;if(this.id=SS(),this.ctx=u,this.canvas=f,this.width=g,this.height=h,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=US(p=>this.update(p),l.resizeDelay||0),this._dataChanges=[],Ro[this.id]=this,!u||!f){console.error("Failed to create chart: can't acquire context from the given item");return}$n.listen(this,"complete",yd),$n.listen(this,"progress",bD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:a}=this;return Lt(t)?e&&a?a:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vh(this.canvas,this.ctx),this}stop(){return $n.stop(this),this}resize(t,e){$n.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,t,e,a),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,qh(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),Bt(i.onResize,[this,l],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Tt(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let a=[];e&&(a=a.concat(Object.keys(e).map(l=>{const u=e[l],f=dc(l,u),h=f==="r",g=f==="x";return{options:u,dposition:h?"chartArea":g?"bottom":"left",dtype:h?"radialLinear":g?"category":"linear"}}))),Tt(a,l=>{const u=l.options,f=u.id,h=dc(f,u),g=_t(u.type,l.dtype);(u.position===void 0||vd(u.position,h)!==vd(l.dposition))&&(u.position=l.dposition),s[f]=!0;let p=null;if(f in i&&i[f].type===g)p=i[f];else{const m=kn.getScale(g);p=new m({id:f,type:g,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(u,t)}),Tt(s,(l,u)=>{l||delete i[u]}),Tt(i,l=>{on.configure(this,l,l.options),on.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,a)=>s.index-a.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(xd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const a=e[i];let l=this.getDatasetMeta(i);const u=a.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=a.indexAxis||hc(u,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const f=kn.getController(u),{datasetElementType:h,dataElementType:g}=qt.datasets[u];Object.assign(f,{dataElementType:kn.getElement(g),datasetElementType:h&&kn.getElement(h)}),l.controller=new f(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Tt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let h=0,g=this.data.datasets.length;h<g;h++){const{controller:p}=this.getDatasetMeta(h),m=!s&&a.indexOf(p)===-1;p.buildOrUpdateElements(m),l=Math.max(+p.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||Tt(a,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xd("z","_idx"));const{_active:u,_lastEvent:f}=this;f?this._eventHandler(f,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Tt(this.scales,t=>{on.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Rh(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of e){const l=i==="_removeElements"?-a:a;vD(t,s,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,u)=>u+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<e;a++)if(!Rh(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;on.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Tt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,fi(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($n.has(this)?this.attached&&!$n.running(this)&&$n.start(this):(this.draw(),yd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,a;for(s=0,a=e.length;s<a;++s){const l=e[s];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=ZC(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Rc(e,s),t.controller.draw(),s&&Fc(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ms(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const a=_k.modes[e];return typeof a=="function"?a(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(a=>a&&a._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Fi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,s);Go(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(u=>u.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),$n.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Vh(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Ro[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(a,l)=>{e.addEventListener(this,a,l),t[a]=l},s=(a,l,u)=>{a.offsetX=l,a.offsetY=u,this._eventHandler(a)};Tt(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,h)=>{e.addEventListener(this,f,h),t[f]=h},s=(f,h)=>{t[f]&&(e.removeEventListener(this,f,h),delete t[f])},a=(f,h)=>{this.canvas&&this.resize(f,h)};let l;const u=()=>{s("attach",u),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():l()}unbindEvents(){Tt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Tt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let a,l,u,f;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),u=0,f=t.length;u<f;++u){l=t[u];const h=l&&this.getDatasetMeta(l.datasetIndex).controller;h&&h[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const u=this.getDatasetMeta(a);if(!u)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:u.data[l],index:l}});!Ko(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,a=(f,h)=>f.filter(g=>!h.some(p=>g.datasetIndex===p.datasetIndex&&g.index===p.index)),l=a(e,t),u=i?t:a(t,e);l.length&&this.updateHoverStyle(l,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:a}=this,l=e,u=this._getActiveElements(t,s,i,l),f=AS(t),h=xD(t,this._lastEvent,i,f);i&&(this._lastEvent=null,Bt(a.onHover,[t,u,this],this),f&&Bt(a.onClick,[t,u,this],this));const g=!Ko(u,s);return(g||e)&&(this._active=u,this._updateHoverStyles(u,s,e)),this._lastEvent=h,g}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}};function Sd(){return Tt(vs.instances,n=>n._plugins.invalidate())}function ip(n,t,e=t){n.lineCap=_t(e.borderCapStyle,t.borderCapStyle),n.setLineDash(_t(e.borderDash,t.borderDash)),n.lineDashOffset=_t(e.borderDashOffset,t.borderDashOffset),n.lineJoin=_t(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=_t(e.borderWidth,t.borderWidth),n.strokeStyle=_t(e.borderColor,t.borderColor)}function yD(n,t,e){n.lineTo(e.x,e.y)}function wD(n){return n.stepped?rC:n.tension||n.cubicInterpolationMode==="monotone"?sC:yD}function rp(n,t,e={}){const i=n.length,{start:s=0,end:a=i-1}=e,{start:l,end:u}=t,f=Math.max(s,l),h=Math.min(a,u),g=s<l&&a<l||s>u&&a>u;return{count:i,start:f,loop:t.loop,ilen:h<f&&!g?i+h-f:h-f}}function SD(n,t,e,i){const{points:s,options:a}=t,{count:l,start:u,loop:f,ilen:h}=rp(s,e,i),g=wD(a);let{move:p=!0,reverse:m}=i||{},v,S,y;for(v=0;v<=h;++v)S=s[(u+(m?h-v:v))%l],!S.skip&&(p?(n.moveTo(S.x,S.y),p=!1):g(n,y,S,m,a.stepped),y=S);return f&&(S=s[(u+(m?h:0))%l],g(n,y,S,m,a.stepped)),!!f}function CD(n,t,e,i){const s=t.points,{count:a,start:l,ilen:u}=rp(s,e,i),{move:f=!0,reverse:h}=i||{};let g=0,p=0,m,v,S,y,w,k;const O=E=>(l+(h?u-E:E))%a,P=()=>{y!==w&&(n.lineTo(g,w),n.lineTo(g,y),n.lineTo(g,k))};for(f&&(v=s[O(0)],n.moveTo(v.x,v.y)),m=0;m<=u;++m){if(v=s[O(m)],v.skip)continue;const E=v.x,M=v.y,R=E|0;R===S?(M<y?y=M:M>w&&(w=M),g=(p*g+E)/++p):(P(),n.lineTo(E,M),S=R,p=0,y=w=M),k=M}P()}function gc(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?CD:SD}function kD(n){return n.stepped?WC:n.tension||n.cubicInterpolationMode==="monotone"?zC:Ti}function DD(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),ip(n,t.options),n.stroke(s)}function MD(n,t,e,i){const{segments:s,options:a}=t,l=gc(t);for(const u of s)ip(n,a,u.style),n.beginPath(),l(n,t,u,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const TD=typeof Path2D=="function";function AD(n,t,e,i){TD&&!t.options.segment?DD(n,t,e,i):MD(n,t,e,i)}class OD extends Bi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;OC(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=KC(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],a=this.points,l=UC(this,{property:e,start:s,end:s});if(!l.length)return;const u=[],f=kD(i);let h,g;for(h=0,g=l.length;h<g;++h){const{start:p,end:m}=l[h],v=a[p],S=a[m];if(v===S){u.push(v);continue}const y=Math.abs((s-v[e])/(S[e]-v[e])),w=f(v,S,y,i.stepped);w[e]=t[e],u.push(w)}return u.length===1?u[0]:u}pathSegment(t,e,i){return gc(this)(t,this,e,i)}path(t,e,i){const s=this.segments,a=gc(this);let l=this._loop;e=e||0,i=i||this.points.length-e;for(const u of s)l&=a(t,this,u,{start:e,end:e+i-1});return!!l}draw(t,e,i,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),AD(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Cd(n,t,e,i){const s=n.options,{[e]:a}=n.getProps([e],i);return Math.abs(t-a)<s.radius+s.hitRadius}class ED extends Bi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(e-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return Cd(this,t,"x",e)}inYRange(t,e){return Cd(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ms(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,uc(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}const kd=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},ID=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Dd extends Bi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Bt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=_e(i.font),a=s.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:f}=kd(i,a);let h,g;e.font=s.string,this.isHorizontal()?(h=this.maxWidth,g=this._fitRows(l,a,u,f)+10):(g=this.maxHeight,h=this._fitCols(l,s,u,f)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(g,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:a,maxWidth:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],h=this.lineWidths=[0],g=s+u;let p=t;a.textAlign="left",a.textBaseline="middle";let m=-1,v=-g;return this.legendItems.forEach((S,y)=>{const w=i+e/2+a.measureText(S.text).width;(y===0||h[h.length-1]+w+2*u>l)&&(p+=g,h[h.length-(y>0?0:1)]=0,v+=g,m++),f[y]={left:0,top:v,row:m,width:w,height:s},h[h.length-1]+=w+u}),p}_fitCols(t,e,i,s){const{ctx:a,maxHeight:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],h=this.columnSizes=[],g=l-t;let p=u,m=0,v=0,S=0,y=0;return this.legendItems.forEach((w,k)=>{const{itemWidth:O,itemHeight:P}=PD(i,e,a,w,s);k>0&&v+P+2*u>g&&(p+=m+u,h.push({width:m,height:v}),S+=m+u,y++,m=v=0),f[k]={left:S,top:v,col:y,width:O,height:P},m=Math.max(m,O),v+=P+u}),p+=m,h.push({width:m,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:a}}=this,l=fr(a,this.left,this.width);if(this.isHorizontal()){let u=0,f=me(i,this.left+s,this.right-this.lineWidths[u]);for(const h of e)u!==h.row&&(u=h.row,f=me(i,this.left+s,this.right-this.lineWidths[u])),h.top+=this.top+t+s,h.left=l.leftForLtr(l.x(f),h.width),f+=h.width+s}else{let u=0,f=me(i,this.top+t+s,this.bottom-this.columnSizes[u].height);for(const h of e)h.col!==u&&(u=h.col,f=me(i,this.top+t+s,this.bottom-this.columnSizes[u].height)),h.top=f,h.left+=this.left+s,h.left=l.leftForLtr(l.x(h.left),h.width),f+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Rc(t,this),this._draw(),Fc(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:a,labels:l}=t,u=qt.color,f=fr(t.rtl,this.left,this.width),h=_e(l.font),{padding:g}=l,p=h.size,m=p/2;let v;this.drawTitle(),s.textAlign=f.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:S,boxHeight:y,itemHeight:w}=kd(l,p),k=function(R,B,L){if(isNaN(S)||S<=0||isNaN(y)||y<0)return;s.save();const $=_t(L.lineWidth,1);if(s.fillStyle=_t(L.fillStyle,u),s.lineCap=_t(L.lineCap,"butt"),s.lineDashOffset=_t(L.lineDashOffset,0),s.lineJoin=_t(L.lineJoin,"miter"),s.lineWidth=$,s.strokeStyle=_t(L.strokeStyle,u),s.setLineDash(_t(L.lineDash,[])),l.usePointStyle){const j={radius:y*Math.SQRT2/2,pointStyle:L.pointStyle,rotation:L.rotation,borderWidth:$},K=f.xPlus(R,S/2),G=B+m;Lg(s,j,K,G,l.pointStyleWidth&&S)}else{const j=B+Math.max((p-y)/2,0),K=f.leftForLtr(R,S),G=is(L.borderRadius);s.beginPath(),Object.values(G).some(ct=>ct!==0)?fc(s,{x:K,y:j,w:S,h:y,radius:G}):s.rect(K,j,S,y),s.fill(),$!==0&&s.stroke()}s.restore()},O=function(R,B,L){_s(s,L.text,R,B+w/2,h,{strikethrough:L.hidden,textAlign:f.textAlign(L.textAlign)})},P=this.isHorizontal(),E=this._computeTitleHeight();P?v={x:me(a,this.left+g,this.right-i[0]),y:this.top+g+E,line:0}:v={x:this.left+g,y:me(a,this.top+E+g,this.bottom-e[0].height),line:0},Hg(this.ctx,t.textDirection);const M=w+g;this.legendItems.forEach((R,B)=>{s.strokeStyle=R.fontColor,s.fillStyle=R.fontColor;const L=s.measureText(R.text).width,$=f.textAlign(R.textAlign||(R.textAlign=l.textAlign)),j=S+m+L;let K=v.x,G=v.y;f.setWidth(this.width),P?B>0&&K+j+g>this.right&&(G=v.y+=M,v.line++,K=v.x=me(a,this.left+g,this.right-i[v.line])):B>0&&G+M>this.bottom&&(K=v.x=K+e[v.line].width+g,v.line++,G=v.y=me(a,this.top+E+g,this.bottom-e[v.line].height));const ct=f.x(K);if(k(ct,G,R),K=VS($,K+S+m,P?K+j:this.right,t.rtl),O(f.x(K),G,R),P)v.x+=j+g;else if(typeof R.text!="string"){const xt=h.lineHeight;v.y+=sp(R,xt)+g}else v.y+=M}),$g(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=_e(e.font),s=ln(e.padding);if(!e.display)return;const a=fr(t.rtl,this.left,this.width),l=this.ctx,u=e.position,f=i.size/2,h=s.top+f;let g,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),g=this.top+h,p=me(t.align,p,this.right-m);else{const S=this.columnSizes.reduce((y,w)=>Math.max(y,w.height),0);g=h+me(t.align,this.top,this.bottom-S-t.labels.padding-this._computeTitleHeight())}const v=me(u,p,p+m);l.textAlign=a.textAlign(Pc(u)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,_s(l,e.text,v,g,i)}_computeTitleHeight(){const t=this.options.title,e=_e(t.font),i=ln(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,a;if(Kr(t,this.left,this.right)&&Kr(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],Kr(t,s.left,s.left+s.width)&&Kr(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!FD(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,a=ID(s,i);s&&!a&&Bt(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!a&&Bt(e.onHover,[t,i,this],this)}else i&&Bt(e.onClick,[t,i,this],this)}}function PD(n,t,e,i,s){const a=LD(i,n,t,e),l=RD(s,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function LD(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,l)=>a.length>l.length?a:l)),t+e.size/2+i.measureText(s).width}function RD(n,t,e){let i=n;return typeof t.text!="string"&&(i=sp(t,e)),i}function sp(n,t){const e=n.text?n.text.length:0;return t*e}function FD(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var BD={id:"legend",_element:Dd,start(n,t,e){const i=n.legend=new Dd({ctx:n.ctx,options:e,chart:n});on.configure(n,i,e),on.addBox(n,i)},stop(n){on.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;on.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:a,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const h=f.controller.getStyle(e?0:void 0),g=ln(h.borderWidth);return{text:t[f.index].label,fillStyle:h.backgroundColor,fontColor:a,hidden:!f.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:l&&(u||h.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class op extends Bi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=ie(i.text)?i.text.length:1;this._padding=ln(i.padding);const a=s*_e(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:a,options:l}=this,u=l.align;let f=0,h,g,p;return this.isHorizontal()?(g=me(u,i,a),p=e+t,h=a-i):(l.position==="left"?(g=i+t,p=me(u,s,e),f=re*-.5):(g=a-t,p=me(u,e,s),f=re*.5),h=s-e),{titleX:g,titleY:p,maxWidth:h,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=_e(e.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:f,rotation:h}=this._drawArgs(a);_s(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:h,textAlign:Pc(e.align),textBaseline:"middle",translation:[l,u]})}}function WD(n,t){const e=new op({ctx:n.ctx,options:t,chart:n});on.configure(n,e,t),on.addBox(n,e),n.titleBlock=e}var zD={id:"title",_element:op,start(n,t,e){WD(n,e)},stop(n){const t=n.titleBlock;on.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;on.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jr={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,a=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const f=u.tooltipPosition();i.add(f.x),s+=f.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((u,f)=>u+f)/i.size,y:s/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,a,l,u;for(a=0,l=n.length;a<l;++a){const f=n[a].element;if(f&&f.hasValue()){const h=f.getCenterPoint(),g=lc(t,h);g<s&&(s=g,u=f)}}if(u){const f=u.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function Cn(n,t){return t&&(ie(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Yn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function ND(n,t){const{element:e,datasetIndex:i,index:s}=t,a=n.getDatasetMeta(i).controller,{label:l,value:u}=a.getLabelAndValue(s);return{chart:n,label:l,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:u,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Md(n,t){const e=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:l,boxHeight:u}=t,f=_e(t.bodyFont),h=_e(t.titleFont),g=_e(t.footerFont),p=a.length,m=s.length,v=i.length,S=ln(t.padding);let y=S.height,w=0,k=i.reduce((E,M)=>E+M.before.length+M.lines.length+M.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,p&&(y+=p*h.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),k){const E=t.displayColors?Math.max(u,f.lineHeight):f.lineHeight;y+=v*E+(k-v)*f.lineHeight+(k-1)*t.bodySpacing}m&&(y+=t.footerMarginTop+m*g.lineHeight+(m-1)*t.footerSpacing);let O=0;const P=function(E){w=Math.max(w,e.measureText(E).width+O)};return e.save(),e.font=h.string,Tt(n.title,P),e.font=f.string,Tt(n.beforeBody.concat(n.afterBody),P),O=t.displayColors?l+2+t.boxPadding:0,Tt(i,E=>{Tt(E.before,P),Tt(E.lines,P),Tt(E.after,P)}),O=0,e.font=g.string,Tt(n.footer,P),e.restore(),w+=S.width,{width:w,height:y}}function HD(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function $D(n,t,e,i){const{x:s,width:a}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&s+a+l>t.width||n==="right"&&s-a-l<0)return!0}function YD(n,t,e,i){const{x:s,width:a}=e,{width:l,chartArea:{left:u,right:f}}=n;let h="center";return i==="center"?h=s<=(u+f)/2?"left":"right":s<=a/2?h="left":s>=l-a/2&&(h="right"),$D(h,n,t,e)&&(h="center"),h}function Td(n,t,e){const i=e.yAlign||t.yAlign||HD(n,e);return{xAlign:e.xAlign||t.xAlign||YD(n,t,e,i),yAlign:i}}function UD(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function VD(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function Ad(n,t,e,i){const{caretSize:s,caretPadding:a,cornerRadius:l}=n,{xAlign:u,yAlign:f}=e,h=s+a,{topLeft:g,topRight:p,bottomLeft:m,bottomRight:v}=is(l);let S=UD(t,u);const y=VD(t,f,h);return f==="center"?u==="left"?S+=h:u==="right"&&(S-=h):u==="left"?S-=Math.max(g,m)+s:u==="right"&&(S+=Math.max(p,v)+s),{x:sn(S,0,i.width-t.width),y:sn(y,0,i.height-t.height)}}function Mo(n,t,e){const i=ln(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Od(n){return Cn([],Yn(n))}function XD(n,t,e){return Fi(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Ed(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const ap={beforeTitle:Hn,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Hn,beforeBody:Hn,beforeLabel:Hn,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Lt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Hn,afterBody:Hn,beforeFooter:Hn,footer:Hn,afterFooter:Hn};function Te(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?ap[t].call(e,i):s}class Id extends Bi{static positioners=jr;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,a=new Ug(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=XD(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Te(i,"beforeTitle",this,t),a=Te(i,"title",this,t),l=Te(i,"afterTitle",this,t);let u=[];return u=Cn(u,Yn(s)),u=Cn(u,Yn(a)),u=Cn(u,Yn(l)),u}getBeforeBody(t,e){return Od(Te(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return Tt(t,a=>{const l={before:[],lines:[],after:[]},u=Ed(i,a);Cn(l.before,Yn(Te(u,"beforeLabel",this,a))),Cn(l.lines,Te(u,"label",this,a)),Cn(l.after,Yn(Te(u,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(t,e){return Od(Te(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Te(i,"beforeFooter",this,t),a=Te(i,"footer",this,t),l=Te(i,"afterFooter",this,t);let u=[];return u=Cn(u,Yn(s)),u=Cn(u,Yn(a)),u=Cn(u,Yn(l)),u}_createItems(t){const e=this._active,i=this.chart.data,s=[],a=[],l=[];let u=[],f,h;for(f=0,h=e.length;f<h;++f)u.push(ND(this.chart,e[f]));return t.filter&&(u=u.filter((g,p,m)=>t.filter(g,p,m,i))),t.itemSort&&(u=u.sort((g,p)=>t.itemSort(g,p,i))),Tt(u,g=>{const p=Ed(t.callbacks,g);s.push(Te(p,"labelColor",this,g)),a.push(Te(p,"labelPointStyle",this,g)),l.push(Te(p,"labelTextColor",this,g))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const u=jr[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const f=this._size=Md(this,i),h=Object.assign({},u,f),g=Td(this.chart,i,h),p=Ad(i,h,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,a={opacity:1,x:p.x,y:p.y,width:f.width,height:f.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const a=this.getCaretPosition(t,i,s);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:f,topRight:h,bottomLeft:g,bottomRight:p}=is(u),{x:m,y:v}=t,{width:S,height:y}=e;let w,k,O,P,E,M;return a==="center"?(E=v+y/2,s==="left"?(w=m,k=w-l,P=E+l,M=E-l):(w=m+S,k=w+l,P=E-l,M=E+l),O=w):(s==="left"?k=m+Math.max(f,g)+l:s==="right"?k=m+S-Math.max(h,p)-l:k=this.caretX,a==="top"?(P=v,E=P-l,w=k-l,O=k+l):(P=v+y,E=P+l,w=k+l,O=k-l),M=P),{x1:w,x2:k,x3:O,y1:P,y2:E,y3:M}}drawTitle(t,e,i){const s=this.title,a=s.length;let l,u,f;if(a){const h=fr(i.rtl,this.x,this.width);for(t.x=Mo(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",l=_e(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,f=0;f<a;++f)e.fillText(s[f],h.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,f+1===a&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,s,a){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:f,boxWidth:h}=a,g=_e(a.bodyFont),p=Mo(this,"left",a),m=s.x(p),v=f<g.lineHeight?(g.lineHeight-f)/2:0,S=e.y+v;if(a.usePointStyle){const y={radius:Math.min(h,f)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},w=s.leftForLtr(m,h)+h/2,k=S+f/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,uc(t,y,w,k),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,uc(t,y,w,k)}else{t.lineWidth=Ct(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const y=s.leftForLtr(m,h),w=s.leftForLtr(s.xPlus(m,1),h-2),k=is(l.borderRadius);Object.values(k).some(O=>O!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,fc(t,{x:y,y:S,w:h,h:f,radius:k}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),fc(t,{x:w,y:S+1,w:h-2,h:f-2,radius:k}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(y,S,h,f),t.strokeRect(y,S,h,f),t.fillStyle=l.backgroundColor,t.fillRect(w,S+1,h-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:u,boxHeight:f,boxWidth:h,boxPadding:g}=i,p=_e(i.bodyFont);let m=p.lineHeight,v=0;const S=fr(i.rtl,this.x,this.width),y=function(L){e.fillText(L,S.x(t.x+v),t.y+m/2),t.y+=m+a},w=S.textAlign(l);let k,O,P,E,M,R,B;for(e.textAlign=l,e.textBaseline="middle",e.font=p.string,t.x=Mo(this,w,i),e.fillStyle=i.bodyColor,Tt(this.beforeBody,y),v=u&&w!=="right"?l==="center"?h/2+g:h+2+g:0,E=0,R=s.length;E<R;++E){for(k=s[E],O=this.labelTextColors[E],e.fillStyle=O,Tt(k.before,y),P=k.lines,u&&P.length&&(this._drawColorBox(e,t,E,S,i),m=Math.max(p.lineHeight,f)),M=0,B=P.length;M<B;++M)y(P[M]),m=p.lineHeight;Tt(k.after,y)}v=0,m=p.lineHeight,Tt(this.afterBody,y),t.y-=a}drawFooter(t,e,i){const s=this.footer,a=s.length;let l,u;if(a){const f=fr(i.rtl,this.x,this.width);for(t.x=Mo(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",l=_e(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,u=0;u<a;++u)e.fillText(s[u],f.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:a,yAlign:l}=this,{x:u,y:f}=t,{width:h,height:g}=i,{topLeft:p,topRight:m,bottomLeft:v,bottomRight:S}=is(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(u+p,f),l==="top"&&this.drawCaret(t,e,i,s),e.lineTo(u+h-m,f),e.quadraticCurveTo(u+h,f,u+h,f+m),l==="center"&&a==="right"&&this.drawCaret(t,e,i,s),e.lineTo(u+h,f+g-S),e.quadraticCurveTo(u+h,f+g,u+h-S,f+g),l==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(u+v,f+g),e.quadraticCurveTo(u,f+g,u,f+g-v),l==="center"&&a==="left"&&this.drawCaret(t,e,i,s),e.lineTo(u,f+p),e.quadraticCurveTo(u,f,u+p,f),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=jr[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=Md(this,t),f=Object.assign({},l,this._size),h=Td(e,t,f),g=Ad(t,f,h,e);(s._to!==g.x||a._to!==g.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=ln(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,s,e),Hg(t,e.textDirection),a.y+=l.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),$g(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:u,index:f})=>{const h=this.chart.getDatasetMeta(u);if(!h)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:h.data[f],index:f}}),a=!Ko(i,s),l=this._positionChanged(s,e);(a||l)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(t,a,e,i),u=this._positionChanged(l,t),f=e||!Ko(l,a)||u;return f&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,s){const a=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:s,options:a}=this,l=jr[a.position].call(this,t,e);return l!==!1&&(i!==l.x||s!==l.y)}}var KD={id:"tooltip",_element:Id,positioners:jr,afterInit(n,t,e){e&&(n.tooltip=new Id({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ap},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const qD=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function jD(n,t,e,i){const s=n.indexOf(t);if(s===-1)return qD(n,t,e,i);const a=n.lastIndexOf(t);return s!==a?e:s}const GD=(n,t)=>n===null?null:sn(Math.round(n),0,t);function Pd(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class ZD extends vr{static id="category";static defaults={ticks:{callback:Pd}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:a}of e)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Lt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:jD(i,t,_t(e,t),this._addedLabels),GD(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=e;l++)s.push({value:l});return s}getLabelForValue(t){return Pd.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function JD(n,t){const e=[],{bounds:s,step:a,min:l,max:u,precision:f,count:h,maxTicks:g,maxDigits:p,includeBounds:m}=n,v=a||1,S=g-1,{min:y,max:w}=t,k=!Lt(l),O=!Lt(u),P=!Lt(h),E=(w-y)/(p+1);let M=Bh((w-y)/S/v)*v,R,B,L,$;if(M<1e-14&&!k&&!O)return[{value:y},{value:w}];$=Math.ceil(w/M)-Math.floor(y/M),$>S&&(M=Bh($*M/S/v)*v),Lt(f)||(R=Math.pow(10,f),M=Math.ceil(M*R)/R),s==="ticks"?(B=Math.floor(y/M)*M,L=Math.ceil(w/M)*M):(B=y,L=w),k&&O&&a&&LS((u-l)/a,M/1e3)?($=Math.round(Math.min((u-l)/M,g)),M=(u-l)/$,B=l,L=u):P?(B=k?l:B,L=O?u:L,$=h-1,M=(L-B)/$):($=(L-B)/M,ts($,Math.round($),M/1e3)?$=Math.round($):$=Math.ceil($));const j=Math.max(Wh(M),Wh(B));R=Math.pow(10,Lt(f)?j:f),B=Math.round(B*R)/R,L=Math.round(L*R)/R;let K=0;for(k&&(m&&B!==l?(e.push({value:l}),B<l&&K++,ts(Math.round((B+K*M)*R)/R,l,Ld(l,E,n))&&K++):B<l&&K++);K<$;++K){const G=Math.round((B+K*M)*R)/R;if(O&&G>u)break;e.push({value:G})}return O&&m&&L!==u?e.length&&ts(e[e.length-1].value,u,Ld(u,E,n))?e[e.length-1].value=u:e.push({value:u}):(!O||L===u)&&e.push({value:L}),e}function Ld(n,t,{horizontal:e,minRotation:i}){const s=Oi(i),a=(e?Math.sin(s):Math.cos(s))||.001,l=.75*t*(""+n).length;return Math.min(t/a,l)}class QD extends vr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Lt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const l=f=>s=e?s:f,u=f=>a=i?a:f;if(t){const f=gr(s),h=gr(a);f<0&&h<0?u(0):f>0&&h>0&&l(0)}if(s===a){let f=a===0?1:Math.abs(a*.05);u(a+f),t||l(s-f)}this.min=s,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,l=JD(s,a);return t.bounds==="ticks"&&RS(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Ig(t,this.chart.options.locale,this.options.ticks.format)}}class tM extends QD{static id="linear";static defaults={ticks:{callback:Pg.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=an(t)?t:0,this.max=an(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Oi(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const aa={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Le=Object.keys(aa);function Rd(n,t){return n-t}function Fd(n,t){if(Lt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),an(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(s&&(l=s==="week"&&(ps(a)||a===!0)?e.startOf(l,"isoWeek",a):e.startOf(l,s)),+l)}function Bd(n,t,e,i){const s=Le.length;for(let a=Le.indexOf(n);a<s-1;++a){const l=aa[Le[a]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(u*l.size))<=i)return Le[a]}return Le[s-1]}function eM(n,t,e,i,s){for(let a=Le.length-1;a>=Le.indexOf(e);a--){const l=Le[a];if(aa[l].common&&n._adapter.diff(s,i,l)>=t-1)return l}return Le[e?Le.indexOf(e):0]}function nM(n){for(let t=Le.indexOf(n)+1,e=Le.length;t<e;++t)if(aa[Le[t]].common)return Le[t]}function Wd(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=Ic(e,t),a=e[i]>=t?e[i]:e[s];n[a]=!0}}function iM(n,t,e,i){const s=n._adapter,a=+s.startOf(t[0].value,i),l=t[t.length-1].value;let u,f;for(u=a;u<=l;u=+s.add(u,1,i))f=e[u],f>=0&&(t[f].major=!0);return t}function zd(n,t,e){const i=[],s={},a=t.length;let l,u;for(l=0;l<a;++l)u=t[l],s[u]=l,i.push({value:u,major:!1});return a===0||!e?i:iM(n,i,s,e)}class pc extends vr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Kg._date(t.adapters.date);s.init(e),Qr(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Fd(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:u}=this.getUserBounds();function f(h){!l&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!u&&!isNaN(h.max)&&(a=Math.max(a,h.max))}(!l||!u)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),s=an(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),a=an(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,l=this.max,u=HS(s,a,l);return this._unit=e.unit||(i.autoSkip?Bd(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):eM(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:nM(this._unit),this.initOffsets(s),t.reverse&&u.reverse(),zd(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,a;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=sn(e,0,l),i=sn(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||Bd(a.minUnit,e,i,this._getLabelCapacity(e)),u=_t(s.ticks.stepSize,1),f=l==="week"?a.isoWeekday:!1,h=ps(f)||f===!0,g={};let p=e,m,v;if(h&&(p=+t.startOf(p,"isoWeek",f)),p=+t.startOf(p,h?"day":l),t.diff(i,e,l)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+l);const S=s.ticks.source==="data"&&this.getDataTimestamps();for(m=p,v=0;m<i;m=+t.add(m,u,l),v++)Wd(g,m,S);return(m===i||s.bounds==="ticks"||v===1)&&Wd(g,m,S),Object.keys(g).sort(Rd).map(y=>+y)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,a=this._unit,l=e||s[a];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,s){const a=this.options,l=a.ticks.callback;if(l)return Bt(l,[t,e,i],this);const u=a.time.displayFormats,f=this._unit,h=this._majorUnit,g=f&&u[f],p=h&&u[h],m=i[e],v=h&&p&&m&&m.major;return this._adapter.format(t,s||(v?p:g))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Oi(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:i*a+u*l,h:i*l+u*a}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,a=this._tickFormatFunction(t,0,zd(this,[t],this._majorUnit),s),l=this._getLabelSize(a),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Fd(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return YS(t.sort(Rd))}}function To(n,t,e){let i=0,s=n.length-1,a,l,u,f;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Ei(n,"pos",t)),{pos:a,time:u}=n[i],{pos:l,time:f}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Ei(n,"time",t)),{time:a,pos:u}=n[i],{time:l,pos:f}=n[s]);const h=l-a;return h?u+(f-u)*(t-a)/h:u}class tA extends pc{static id="timeseries";static defaults=pc.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=To(e,this.min),this._tableRange=To(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],a=[];let l,u,f,h,g;for(l=0,u=t.length;l<u;++l)h=t[l],h>=e&&h<=i&&s.push(h);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,u=s.length;l<u;++l)g=s[l+1],f=s[l-1],h=s[l],Math.round((g+f)/2)!==h&&a.push({time:h,pos:l/(u-1)});return a}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(To(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return To(this._table,i*this._tableRange+this._minPos,!0)}}const lp={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},rM={ariaLabel:{type:String},ariaDescribedby:{type:String}},sM={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...lp,...rM},oM=H1[0]==="2"?(n,t)=>Object.assign(n,{attrs:t}):(n,t)=>Object.assign(n,t);function rr(n){return bg(n)?sc(n):n}function aM(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return bg(t)?new Proxy(n,{}):n}function lM(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function cp(n,t){n.labels=t}function up(n,t,e){const i=[];n.datasets=t.map(s=>{const a=n.datasets.find(l=>l[e]===s[e]);return!a||!s.data||i.includes(a)?{...s}:(i.push(a),Object.assign(a,s),a)})}function cM(n,t){const e={labels:[],datasets:[]};return cp(e,n.labels),up(e,n.datasets,t),e}const uM=On({props:sM,setup(n,t){let{expose:e,slots:i}=t;const s=Ht(null),a=_g(null);e({chart:a});const l=()=>{if(!s.value)return;const{type:h,data:g,options:p,plugins:m,datasetIdKey:v}=n,S=cM(g,v),y=aM(S,g);a.value=new vs(s.value,{type:h,data:y,options:{...p},plugins:m})},u=()=>{const h=sc(a.value);h&&(n.destroyDelay>0?setTimeout(()=>{h.destroy(),a.value=null},n.destroyDelay):(h.destroy(),a.value=null))},f=h=>{h.update(n.updateMode)};return dr(l),gg(u),fs([()=>n.options,()=>n.data],(h,g)=>{let[p,m]=h,[v,S]=g;const y=sc(a.value);if(!y)return;let w=!1;if(p){const k=rr(p),O=rr(v);k&&k!==O&&(lM(y,k),w=!0)}if(m){const k=rr(m.labels),O=rr(S.labels),P=rr(m.datasets),E=rr(S.datasets);k!==O&&(cp(y.config.data,k),w=!0),P&&P!==E&&(up(y.config.data,P,n.datasetIdKey),w=!0)}w&&_n(()=>{f(y)})},{deep:!0}),()=>hs("canvas",{role:"img",ariaLabel:n.ariaLabel,ariaDescribedby:n.ariaDescribedby,ref:s},[hs("p",{},[i.default?i.default():""])])}});function fM(n,t){return vs.register(t),On({props:lp,setup(e,i){let{expose:s}=i;const a=_g(null),l=u=>{a.value=u?.chart};return s({chart:a}),()=>hs(uM,oM({ref:l},{type:n,...e}))}})}const hM=fM("line",hk);var Fo={exports:{}},dM=Fo.exports,Nd;function gM(){return Nd||(Nd=1,function(n,t){(function(e,i){n.exports=i()})(dM,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,a=/\d\d/,l=/\d\d?/,u=/\d*[^-_:/,()\s\d]+/,f={},h=function(w){return(w=+w)+(w>68?1900:2e3)},g=function(w){return function(k){this[w]=+k}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(w){(this.zone||(this.zone={})).offset=function(k){if(!k||k==="Z")return 0;var O=k.match(/([+-]|\d\d)/g),P=60*O[1]+(+O[2]||0);return P===0?0:O[0]==="+"?-P:P}(w)}],m=function(w){var k=f[w];return k&&(k.indexOf?k:k.s.concat(k.f))},v=function(w,k){var O,P=f.meridiem;if(P){for(var E=1;E<=24;E+=1)if(w.indexOf(P(E,0,k))>-1){O=E>12;break}}else O=w===(k?"pm":"PM");return O},S={A:[u,function(w){this.afternoon=v(w,!1)}],a:[u,function(w){this.afternoon=v(w,!0)}],Q:[s,function(w){this.month=3*(w-1)+1}],S:[s,function(w){this.milliseconds=100*+w}],SS:[a,function(w){this.milliseconds=10*+w}],SSS:[/\d{3}/,function(w){this.milliseconds=+w}],s:[l,g("seconds")],ss:[l,g("seconds")],m:[l,g("minutes")],mm:[l,g("minutes")],H:[l,g("hours")],h:[l,g("hours")],HH:[l,g("hours")],hh:[l,g("hours")],D:[l,g("day")],DD:[a,g("day")],Do:[u,function(w){var k=f.ordinal,O=w.match(/\d+/);if(this.day=O[0],k)for(var P=1;P<=31;P+=1)k(P).replace(/\[|\]/g,"")===w&&(this.day=P)}],w:[l,g("week")],ww:[a,g("week")],M:[l,g("month")],MM:[a,g("month")],MMM:[u,function(w){var k=m("months"),O=(m("monthsShort")||k.map(function(P){return P.slice(0,3)})).indexOf(w)+1;if(O<1)throw new Error;this.month=O%12||O}],MMMM:[u,function(w){var k=m("months").indexOf(w)+1;if(k<1)throw new Error;this.month=k%12||k}],Y:[/[+-]?\d+/,g("year")],YY:[a,function(w){this.year=h(w)}],YYYY:[/\d{4}/,g("year")],Z:p,ZZ:p};function y(w){var k,O;k=w,O=f&&f.formats;for(var P=(w=k.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,K,G){var ct=G&&G.toUpperCase();return K||O[G]||e[G]||O[ct].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(xt,at,ht){return at||ht.slice(1)})})).match(i),E=P.length,M=0;M<E;M+=1){var R=P[M],B=S[R],L=B&&B[0],$=B&&B[1];P[M]=$?{regex:L,parser:$}:R.replace(/^\[|\]$/g,"")}return function(j){for(var K={},G=0,ct=0;G<E;G+=1){var xt=P[G];if(typeof xt=="string")ct+=xt.length;else{var at=xt.regex,ht=xt.parser,yt=j.slice(ct),Dt=at.exec(yt)[0];ht.call(K,Dt),j=j.replace(Dt,"")}}return function(te){var Gt=te.afternoon;if(Gt!==void 0){var bt=te.hours;Gt?bt<12&&(te.hours+=12):bt===12&&(te.hours=0),delete te.afternoon}}(K),K}}return function(w,k,O){O.p.customParseFormat=!0,w&&w.parseTwoDigitYear&&(h=w.parseTwoDigitYear);var P=k.prototype,E=P.parse;P.parse=function(M){var R=M.date,B=M.utc,L=M.args;this.$u=B;var $=L[1];if(typeof $=="string"){var j=L[2]===!0,K=L[3]===!0,G=j||K,ct=L[2];K&&(ct=L[2]),f=this.$locale(),!j&&ct&&(f=O.Ls[ct]),this.$d=function(yt,Dt,te,Gt){try{if(["x","X"].indexOf(Dt)>-1)return new Date((Dt==="X"?1e3:1)*yt);var bt=y(Dt)(yt),le=bt.year,we=bt.month,Re=bt.day,ce=bt.hours,ue=bt.minutes,N=bt.seconds,it=bt.milliseconds,rt=bt.zone,Et=bt.week,Rt=new Date,fe=Re||(le||we?1:Rt.getDate()),Se=le||Rt.getFullYear(),At=0;le&&!we||(At=we>0?we-1:Rt.getMonth());var $t,vn=ce||0,he=ue||0,Wi=N||0,xr=it||0;return rt?new Date(Date.UTC(Se,At,fe,vn,he,Wi,xr+60*rt.offset*1e3)):te?new Date(Date.UTC(Se,At,fe,vn,he,Wi,xr)):($t=new Date(Se,At,fe,vn,he,Wi,xr),Et&&($t=Gt($t).week(Et).toDate()),$t)}catch{return new Date("")}}(R,$,B,O),this.init(),ct&&ct!==!0&&(this.$L=this.locale(ct).$L),G&&R!=this.format($)&&(this.$d=new Date("")),f={}}else if($ instanceof Array)for(var xt=$.length,at=1;at<=xt;at+=1){L[1]=$[at-1];var ht=O.apply(this,L);if(ht.isValid()){this.$d=ht.$d,this.$L=ht.$L,this.init();break}at===xt&&(this.$d=new Date(""))}else E.call(this,M)}}})}(Fo)),Fo.exports}var pM=gM();const mM=xs(pM);var Bo={exports:{}},_M=Bo.exports,Hd;function bM(){return Hd||(Hd=1,function(n,t){(function(e,i){n.exports=i()})(_M,function(){return function(e,i){var s=i.prototype,a=s.format;s.format=function(l){var u=this,f=this.$locale();if(!this.isValid())return a.bind(this)(l);var h=this.$utils(),g=(l||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(p){switch(p){case"Q":return Math.ceil((u.$M+1)/3);case"Do":return f.ordinal(u.$D);case"gggg":return u.weekYear();case"GGGG":return u.isoWeekYear();case"wo":return f.ordinal(u.week(),"W");case"w":case"ww":return h.s(u.week(),p==="w"?1:2,"0");case"W":case"WW":return h.s(u.isoWeek(),p==="W"?1:2,"0");case"k":case"kk":return h.s(String(u.$H===0?24:u.$H),p==="k"?1:2,"0");case"X":return Math.floor(u.$d.getTime()/1e3);case"x":return u.$d.getTime();case"z":return"["+u.offsetName()+"]";case"zzz":return"["+u.offsetName("long")+"]";default:return p}});return a.bind(this)(g)}}})}(Bo)),Bo.exports}var vM=bM();const xM=xs(vM);var Wo={exports:{}},yM=Wo.exports,$d;function wM(){return $d||($d=1,function(n,t){(function(e,i){n.exports=i()})(yM,function(){var e="month",i="quarter";return function(s,a){var l=a.prototype;l.quarter=function(h){return this.$utils().u(h)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(h-1))};var u=l.add;l.add=function(h,g){return h=Number(h),this.$utils().p(g)===i?this.add(3*h,e):u.bind(this)(h,g)};var f=l.startOf;l.startOf=function(h,g){var p=this.$utils(),m=!!p.u(g)||g;if(p.p(h)===i){var v=this.quarter()-1;return m?this.month(3*v).startOf(e).startOf("day"):this.month(3*v+2).endOf(e).endOf("day")}return f.bind(this)(h,g)}}})}(Wo)),Wo.exports}var SM=wM();const CM=xs(SM);var zo={exports:{}},kM=zo.exports,Yd;function DM(){return Yd||(Yd=1,function(n,t){(function(e,i){n.exports=i()})(kM,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(i,s,a){var l=s.prototype,u=l.format;a.en.formats=e,l.format=function(f){f===void 0&&(f="YYYY-MM-DDTHH:mm:ssZ");var h=this.$locale().formats,g=function(p,m){return p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(v,S,y){var w=y&&y.toUpperCase();return S||m[y]||e[y]||m[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(k,O,P){return O||P.slice(1)})})}(f,h===void 0?{}:h);return u.call(this,g)}}})}(zo)),zo.exports}var MM=DM();const TM=xs(MM);var No={exports:{}},AM=No.exports,Ud;function OM(){return Ud||(Ud=1,function(n,t){(function(e,i){n.exports=i()})(AM,function(){var e="day";return function(i,s,a){var l=function(h){return h.add(4-h.isoWeekday(),e)},u=s.prototype;u.isoWeekYear=function(){return l(this).year()},u.isoWeek=function(h){if(!this.$utils().u(h))return this.add(7*(h-this.isoWeek()),e);var g,p,m,v,S=l(this),y=(g=this.isoWeekYear(),p=this.$u,m=(p?a.utc:a)().year(g).startOf("year"),v=4-m.isoWeekday(),m.isoWeekday()>4&&(v+=7),m.add(v,e));return S.diff(y,"week")+1},u.isoWeekday=function(h){return this.$utils().u(h)?this.day()||7:this.day(this.day()%7?h:h-7)};var f=u.startOf;u.startOf=function(h,g){var p=this.$utils(),m=!!p.u(g)||g;return p.p(h)==="isoweek"?m?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):f.bind(this)(h,g)}}})}(No)),No.exports}var EM=OM();const IM=xs(EM);Pt.extend(xM);Pt.extend(CM);Pt.extend(TM);Pt.extend(mM);Pt.extend(IM);var PM={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Kg._date.override({formats:function(){return PM},parse:function(t,e){var i=typeof t;return t===null||i==="undefined"?null:i==="string"&&typeof e=="string"?Pt(t,e).isValid()?Pt(t,e).valueOf():null:t instanceof Pt?null:Pt(t).isValid()?Pt(t).valueOf():null},format:function(t,e){return Pt(t).format(e)},add:function(t,e,i){return Pt(t).add(e,i).valueOf()},diff:function(t,e,i){return Pt(t).diff(Pt(e),i)},startOf:function(t,e,i){if(e==="isoWeek"){var s=typeof i=="number"&&i>0&&i<7?i:1;return Pt(t).isoWeekday(s).startOf("day").valueOf()}return Pt(t).startOf(e).valueOf()},endOf:function(t,e){return Pt(t).endOf(e).valueOf()}});const LM={key:1,class:"error-placeholder"},RM={__name:"KdjChart",props:{stockId:{type:String,required:!0},width:{type:Number,default:200},height:{type:Number,default:100}},emits:["kdjClick"],setup(n,{emit:t}){vs.register(ZD,tM,ED,OD,zD,KD,BD,pc);const e={id:"kdjDisplay",afterDatasetsDraw:(p,m,v)=>{if(!v.enabled||!v.lastKdj)return;const{ctx:S,chartArea:y}=p,{lastKdj:w}=v,k=y.right-75,O=y.bottom-15;S.save(),S.fillStyle="rgba(255, 255, 255, 0.95)",S.strokeStyle="rgba(0, 0, 0, 0.15)",S.lineWidth=1;const P=k-5,E=O-12,M=70,R=20;S.fillRect(P,E,M,R),S.strokeRect(P,E,M,R),S.font="bold 11px Arial",S.textAlign="left",S.fillStyle="#4286f5",S.fillText(`K: ${w.k}`,k,O),S.fillStyle="#e75c9a",S.fillText(`D: ${w.d}`,k+35,O),S.restore()}};vs.register(e);const i=n,s=t,a=Mc(),l=Ht(null),u=ne(()=>{const p=a.userStockList.find(m=>m.id===i.stockId);return p?.data?.weeklyKdj?p.data.weeklyKdj.filter(m=>m&&Array.isArray(m)&&m.length>=4&&typeof m[1]=="number"&&!isNaN(m[1])&&typeof m[2]=="number"&&!isNaN(m[2])&&typeof m[3]=="number"&&!isNaN(m[3])).map(m=>({x:Pt(m[0],"YYYYMMDD").toDate(),k:m[1],d:m[2],j:m[3]})):[]}),f=ne(()=>{const p=u.value;if(!p||p.length===0)return{datasets:[]};const m=p.map(S=>({x:S.x,y:S.k})),v=p.map(S=>({x:S.x,y:S.d}));return{datasets:[{label:"K",data:m,borderColor:"#4286f5",backgroundColor:"rgba(66, 134, 245, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#4286f5",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2},{label:"D",data:v,borderColor:"#e75c9a",backgroundColor:"rgba(231, 92, 154, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#e75c9a",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2}]}}),h=ne(()=>{const p=u.value;return p&&p.length>0?p[p.length-1]:null}),g=ne(()=>{const p=h.value;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#333",bodyColor:"#333",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,cornerRadius:6,displayColors:!1,padding:8,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:function(m){const v=m[0].parsed.x;return Pt(v).format("YYYY-MM-DD(dd)")},label:function(m){const v=m.dataset.label,S=m.parsed.y.toFixed(2);return`${v}: ${S}`},afterLabel:function(m){const v=m.dataIndex,S=u.value;if(S&&S[v]){const y=S[v];if(m.datasetIndex===0)return[`K: ${y.k.toFixed(2)}`,`D: ${y.d.toFixed(2)}`,`J: ${y.j.toFixed(2)}`]}return[]}}},kdjDisplay:{enabled:!!p,lastKdj:p?{k:p.k.toFixed(2),d:p.d.toFixed(2),j:p.j.toFixed(2),date:Pt(p.x).format("YYYY/MM/DD")}:null}},scales:{x:{type:"time",time:{unit:"week",displayFormats:{week:"MM/DD"}},display:!1,grid:{display:!1},ticks:{display:!1},offset:!1,bounds:"data"},y:{type:"linear",position:"right",display:!0,min:0,max:100,border:{display:!1},grid:{drawTicks:!1,color:m=>{const v=m.tick.value;return[0,20,50,80,100].includes(v)?"rgba(200, 200, 200, 0.3)":"transparent"}},ticks:{stepSize:10,autoSkip:!1,color:"#888",font:{size:12},padding:-15,callback:m=>m===20||m===50||m===80?m:""}}},animation:!1,interaction:{mode:"nearest",intersect:!1,includeInvisible:!1},hover:{mode:"nearest",intersect:!1,animationDuration:200},onClick:(m,v,S)=>{console.log("Chart onClick triggered"),console.log("Event object:",m);const y=S.canvas.getBoundingClientRect();let w,k;if(m.native)w=m.native.offsetX||m.native.clientX-y.left,k=m.native.offsetY||m.native.clientY-y.top;else if(m.offsetX!==void 0)w=m.offsetX,k=m.offsetY;else if(m.clientX!==void 0)w=m.clientX-y.left,k=m.clientY-y.top;else{console.log("Cannot determine click position");return}console.log("Click position:",{x:w,y:k}),console.log("Canvas rect:",y);const O=S.chartArea,P={left:O.right-80,right:O.right-5,top:O.bottom-25,bottom:O.bottom-5};if(console.log("KDJ area:",P),w>=P.left&&w<=P.right&&k>=P.top&&k<=P.bottom){console.log("Clicked in KDJ area");const E=h.value;E&&(console.log("Emitting kdjClick event:",E),s("kdjClick",{k:E.k.toFixed(2),d:E.d.toFixed(2),j:E.j.toFixed(2),date:Pt(E.x).format("YYYY/MM/DD")}))}else console.log("Clicked outside KDJ area")}}});return(p,m)=>(Ee(),rn("div",{ref_key:"chartContainer",ref:l,class:"kdj-chart",style:{width:"100%",height:"100%"}},[f.value.datasets.length>0?(Ee(),pg(Oe(hM),{key:0,data:f.value,options:g.value},null,8,["data","options"])):(Ee(),rn("div",LM,"KDJ 圖表暫不可用"))],512))}},FM=Cc(RM,[["__scopeId","data-v-ac71bf60"]]),BM={class:"stock-name"},WM={class:"stock-name-main"},zM={class:"stock-name-left"},NM={class:"name highlight"},HM={class:"code"},$M={class:"stock-name-right"},YM={class:"stock-progress-bar"},UM={class:"progress-text"},VM={__name:"StockName",props:{name:String,code:String,price:[String,Number],change:[String,Number],changePercent:[String,Number],priceClass:String,progress:Number,progressText:String},setup(n){return(t,e)=>(Ee(),rn("div",BM,[pt("div",WM,[pt("div",zM,[pt("div",NM,Ie(n.name),1),pt("div",HM,Ie(n.code),1),e[0]||(e[0]=pt("div",{class:"star-area"},[pt("span",{class:"star"},"★")],-1))]),pt("div",$M,[pt("div",{class:oc(["price",n.priceClass])},Ie(n.price),3),pt("div",{class:oc(["change",n.priceClass])},Ie(n.change>0?"+":"")+Ie(n.change)+" ("+Ie(n.changePercent)+"%) ",3)])]),pt("div",YM,[pt("div",{class:"stock-progress-inner",style:mg({width:(n.progress||0)+"%"})},[pt("span",UM,Ie(n.progressText||(n.progress||0)+"%"),1)],4)])]))}},XM=Cc(VM,[["__scopeId","data-v-c759bb7e"]]);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Vd(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function An(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Vd(Object(e),!0).forEach(function(i){KM(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Vd(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Ho(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ho=function(t){return typeof t}:Ho=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(n)}function KM(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Kn(){return Kn=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Kn.apply(this,arguments)}function qM(n,t){if(n==null)return{};var e={},i=Object.keys(n),s,a;for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&(e[s]=n[s]);return e}function jM(n,t){if(n==null)return{};var e=qM(n,t),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}var GM="1.14.0";function Xn(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var qn=Xn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ws=Xn(/Edge/i),Xd=Xn(/firefox/i),rs=Xn(/safari/i)&&!Xn(/chrome/i)&&!Xn(/android/i),fp=Xn(/iP(ad|od|hone)/i),ZM=Xn(/chrome/i)&&Xn(/android/i),hp={capture:!1,passive:!1};function St(n,t,e){n.addEventListener(t,e,!qn&&hp)}function vt(n,t,e){n.removeEventListener(t,e,!qn&&hp)}function ta(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function JM(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Dn(n,t,e,i){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&ta(n,t):ta(n,t))||i&&n===e)return n;if(n===e)break}while(n=JM(n))}return null}var Kd=/\s+/g;function $e(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var i=(" "+n.className+" ").replace(Kd," ").replace(" "+t+" "," ");n.className=(i+(e?" "+t:"")).replace(Kd," ")}}function tt(n,t,e){var i=n&&n.style;if(i){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=e+(typeof e=="string"?"":"px")}}function hr(n,t){var e="";if(typeof n=="string")e=n;else do{var i=tt(n,"transform");i&&i!=="none"&&(e=i+" "+e)}while(!t&&(n=n.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(e)}function dp(n,t,e){if(n){var i=n.getElementsByTagName(t),s=0,a=i.length;if(e)for(;s<a;s++)e(i[s],s);return i}return[]}function Tn(){var n=document.scrollingElement;return n||document.documentElement}function Qt(n,t,e,i,s){if(!(!n.getBoundingClientRect&&n!==window)){var a,l,u,f,h,g,p;if(n!==window&&n.parentNode&&n!==Tn()?(a=n.getBoundingClientRect(),l=a.top,u=a.left,f=a.bottom,h=a.right,g=a.height,p=a.width):(l=0,u=0,f=window.innerHeight,h=window.innerWidth,g=window.innerHeight,p=window.innerWidth),(t||e)&&n!==window&&(s=s||n.parentNode,!qn))do if(s&&s.getBoundingClientRect&&(tt(s,"transform")!=="none"||e&&tt(s,"position")!=="static")){var m=s.getBoundingClientRect();l-=m.top+parseInt(tt(s,"border-top-width")),u-=m.left+parseInt(tt(s,"border-left-width")),f=l+a.height,h=u+a.width;break}while(s=s.parentNode);if(i&&n!==window){var v=hr(s||n),S=v&&v.a,y=v&&v.d;v&&(l/=y,u/=S,p/=S,g/=y,f=l+g,h=u+p)}return{top:l,left:u,bottom:f,right:h,width:p,height:g}}}function qd(n,t,e){for(var i=li(n,!0),s=Qt(n)[t];i;){var a=Qt(i)[e],l=void 0;if(l=s>=a,!l)return i;if(i===Tn())break;i=li(i,!1)}return!1}function _r(n,t,e,i){for(var s=0,a=0,l=n.children;a<l.length;){if(l[a].style.display!=="none"&&l[a]!==et.ghost&&(i||l[a]!==et.dragged)&&Dn(l[a],e.draggable,n,!1)){if(s===t)return l[a];s++}a++}return null}function Yc(n,t){for(var e=n.lastElementChild;e&&(e===et.ghost||tt(e,"display")==="none"||t&&!ta(e,t));)e=e.previousElementSibling;return e||null}function nn(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==et.clone&&(!t||ta(n,t))&&e++;return e}function jd(n){var t=0,e=0,i=Tn();if(n)do{var s=hr(n),a=s.a,l=s.d;t+=n.scrollLeft*a,e+=n.scrollTop*l}while(n!==i&&(n=n.parentNode));return[t,e]}function QM(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n[e][i])return Number(e)}return-1}function li(n,t){if(!n||!n.getBoundingClientRect)return Tn();var e=n,i=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var s=tt(e);if(e.clientWidth<e.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Tn();if(i||t)return e;i=!0}}while(e=e.parentNode);return Tn()}function tT(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Xl(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var ss;function gp(n,t){return function(){if(!ss){var e=arguments,i=this;e.length===1?n.call(i,e[0]):n.apply(i,e),ss=setTimeout(function(){ss=void 0},t)}}}function eT(){clearTimeout(ss),ss=void 0}function pp(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function mp(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}var Ue="Sortable"+new Date().getTime();function nT(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(s){if(!(tt(s,"display")==="none"||s===et.ghost)){n.push({target:s,rect:Qt(s)});var a=An({},n[n.length-1].rect);if(s.thisAnimationDuration){var l=hr(s,!0);l&&(a.top-=l.f,a.left-=l.e)}s.fromRect=a}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(QM(n,{target:i}),1)},animateAll:function(i){var s=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var a=!1,l=0;n.forEach(function(u){var f=0,h=u.target,g=h.fromRect,p=Qt(h),m=h.prevFromRect,v=h.prevToRect,S=u.rect,y=hr(h,!0);y&&(p.top-=y.f,p.left-=y.e),h.toRect=p,h.thisAnimationDuration&&Xl(m,p)&&!Xl(g,p)&&(S.top-p.top)/(S.left-p.left)===(g.top-p.top)/(g.left-p.left)&&(f=rT(S,m,v,s.options)),Xl(p,g)||(h.prevFromRect=g,h.prevToRect=p,f||(f=s.options.animation),s.animate(h,S,p,f)),f&&(a=!0,l=Math.max(l,f),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},f),h.thisAnimationDuration=f)}),clearTimeout(t),a?t=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),n=[]},animate:function(i,s,a,l){if(l){tt(i,"transition",""),tt(i,"transform","");var u=hr(this.el),f=u&&u.a,h=u&&u.d,g=(s.left-a.left)/(f||1),p=(s.top-a.top)/(h||1);i.animatingX=!!g,i.animatingY=!!p,tt(i,"transform","translate3d("+g+"px,"+p+"px,0)"),this.forRepaintDummy=iT(i),tt(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),tt(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){tt(i,"transition",""),tt(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function iT(n){return n.offsetWidth}function rT(n,t,e,i){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*i.animation}var sr=[],Kl={initializeByDefault:!0},Ss={mount:function(t){for(var e in Kl)Kl.hasOwnProperty(e)&&!(e in t)&&(t[e]=Kl[e]);sr.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),sr.push(t)},pluginEvent:function(t,e,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var a=t+"Global";sr.forEach(function(l){e[l.pluginName]&&(e[l.pluginName][a]&&e[l.pluginName][a](An({sortable:e},i)),e.options[l.pluginName]&&e[l.pluginName][t]&&e[l.pluginName][t](An({sortable:e},i)))})},initializePlugins:function(t,e,i,s){sr.forEach(function(u){var f=u.pluginName;if(!(!t.options[f]&&!u.initializeByDefault)){var h=new u(t,e,t.options);h.sortable=t,h.options=t.options,t[f]=h,Kn(i,h.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var l=this.modifyOption(t,a,t.options[a]);typeof l<"u"&&(t.options[a]=l)}},getEventProperties:function(t,e){var i={};return sr.forEach(function(s){typeof s.eventProperties=="function"&&Kn(i,s.eventProperties.call(e[s.pluginName],t))}),i},modifyOption:function(t,e,i){var s;return sr.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[e]=="function"&&(s=a.optionListeners[e].call(t[a.pluginName],i))}),s}};function sT(n){var t=n.sortable,e=n.rootEl,i=n.name,s=n.targetEl,a=n.cloneEl,l=n.toEl,u=n.fromEl,f=n.oldIndex,h=n.newIndex,g=n.oldDraggableIndex,p=n.newDraggableIndex,m=n.originalEvent,v=n.putSortable,S=n.extraEventProperties;if(t=t||e&&e[Ue],!!t){var y,w=t.options,k="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!qn&&!ws?y=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(y=document.createEvent("Event"),y.initEvent(i,!0,!0)),y.to=l||e,y.from=u||e,y.item=s||e,y.clone=a,y.oldIndex=f,y.newIndex=h,y.oldDraggableIndex=g,y.newDraggableIndex=p,y.originalEvent=m,y.pullMode=v?v.lastPutMode:void 0;var O=An(An({},S),Ss.getEventProperties(i,t));for(var P in O)y[P]=O[P];e&&e.dispatchEvent(y),w[k]&&w[k].call(t,y)}}var oT=["evt"],Ae=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.evt,a=jM(i,oT);Ss.pluginEvent.bind(et)(t,e,An({dragEl:Y,parentEl:Ut,ghostEl:ot,rootEl:zt,nextEl:Ai,lastDownEl:$o,cloneEl:Vt,cloneHidden:oi,dragStarted:Gr,putSortable:ae,activeSortable:et.active,originalEvent:s,oldIndex:cr,oldDraggableIndex:os,newIndex:Ye,newDraggableIndex:si,hideGhostForTarget:xp,unhideGhostForTarget:yp,cloneNowHidden:function(){oi=!0},cloneNowShown:function(){oi=!1},dispatchSortableEvent:function(u){ye({sortable:e,name:u,originalEvent:s})}},a))};function ye(n){sT(An({putSortable:ae,cloneEl:Vt,targetEl:Y,rootEl:zt,oldIndex:cr,oldDraggableIndex:os,newIndex:Ye,newDraggableIndex:si},n))}var Y,Ut,ot,zt,Ai,$o,Vt,oi,cr,Ye,os,si,Ao,ae,ar=!1,ea=!1,na=[],Ci,gn,ql,jl,Gd,Zd,Gr,or,as,ls=!1,Oo=!1,Yo,pe,Gl=[],mc=!1,ia=[],la=typeof document<"u",Eo=fp,Jd=ws||qn?"cssFloat":"float",aT=la&&!ZM&&!fp&&"draggable"in document.createElement("div"),_p=function(){if(la){if(qn)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),bp=function(t,e){var i=tt(t),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),a=_r(t,0,e),l=_r(t,1,e),u=a&&tt(a),f=l&&tt(l),h=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Qt(a).width,g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Qt(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&u.float&&u.float!=="none"){var p=u.float==="left"?"left":"right";return l&&(f.clear==="both"||f.clear===p)?"vertical":"horizontal"}return a&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||h>=s&&i[Jd]==="none"||l&&i[Jd]==="none"&&h+g>s)?"vertical":"horizontal"},lT=function(t,e,i){var s=i?t.left:t.top,a=i?t.right:t.bottom,l=i?t.width:t.height,u=i?e.left:e.top,f=i?e.right:e.bottom,h=i?e.width:e.height;return s===u||a===f||s+l/2===u+h/2},cT=function(t,e){var i;return na.some(function(s){var a=s[Ue].options.emptyInsertThreshold;if(!(!a||Yc(s))){var l=Qt(s),u=t>=l.left-a&&t<=l.right+a,f=e>=l.top-a&&e<=l.bottom+a;if(u&&f)return i=s}}),i},vp=function(t){function e(a,l){return function(u,f,h,g){var p=u.options.group.name&&f.options.group.name&&u.options.group.name===f.options.group.name;if(a==null&&(l||p))return!0;if(a==null||a===!1)return!1;if(l&&a==="clone")return a;if(typeof a=="function")return e(a(u,f,h,g),l)(u,f,h,g);var m=(l?u:f).options.group.name;return a===!0||typeof a=="string"&&a===m||a.join&&a.indexOf(m)>-1}}var i={},s=t.group;(!s||Ho(s)!="object")&&(s={name:s}),i.name=s.name,i.checkPull=e(s.pull,!0),i.checkPut=e(s.put),i.revertClone=s.revertClone,t.group=i},xp=function(){!_p&&ot&&tt(ot,"display","none")},yp=function(){!_p&&ot&&tt(ot,"display","")};la&&document.addEventListener("click",function(n){if(ea)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ea=!1,!1},!0);var ki=function(t){if(Y){t=t.touches?t.touches[0]:t;var e=cT(t.clientX,t.clientY);if(e){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[Ue]._onDragOver(i)}}},uT=function(t){Y&&Y.parentNode[Ue]._isOutsideThisEl(t.target)};function et(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=Kn({},t),n[Ue]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return bp(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,u){l.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:et.supportPointer!==!1&&"PointerEvent"in window&&!rs,emptyInsertThreshold:5};Ss.initializePlugins(this,n,e);for(var i in e)!(i in t)&&(t[i]=e[i]);vp(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:aT,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?St(n,"pointerdown",this._onTapStart):(St(n,"mousedown",this._onTapStart),St(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(St(n,"dragover",this),St(n,"dragenter",this)),na.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Kn(this,nT())}et.prototype={constructor:et,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(or=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,Y):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,s=this.options,a=s.preventOnFilter,l=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(u||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,g=s.filter;if(bT(i),!Y&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||s.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&rs&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Dn(f,s.draggable,i,!1),!(f&&f.animated)&&$o!==f)){if(cr=nn(f),os=nn(f,s.draggable),typeof g=="function"){if(g.call(this,t,f,this)){ye({sortable:e,rootEl:h,name:"filter",targetEl:f,toEl:i,fromEl:i}),Ae("filter",e,{evt:t}),a&&t.cancelable&&t.preventDefault();return}}else if(g&&(g=g.split(",").some(function(p){if(p=Dn(h,p.trim(),i,!1),p)return ye({sortable:e,rootEl:p,name:"filter",targetEl:f,fromEl:i,toEl:i}),Ae("filter",e,{evt:t}),!0}),g)){a&&t.cancelable&&t.preventDefault();return}s.handle&&!Dn(h,s.handle,i,!1)||this._prepareDragStart(t,u,f)}}},_prepareDragStart:function(t,e,i){var s=this,a=s.el,l=s.options,u=a.ownerDocument,f;if(i&&!Y&&i.parentNode===a){var h=Qt(i);if(zt=a,Y=i,Ut=Y.parentNode,Ai=Y.nextSibling,$o=i,Ao=l.group,et.dragged=Y,Ci={target:Y,clientX:(e||t).clientX,clientY:(e||t).clientY},Gd=Ci.clientX-h.left,Zd=Ci.clientY-h.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Y.style["will-change"]="all",f=function(){if(Ae("delayEnded",s,{evt:t}),et.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Xd&&s.nativeDraggable&&(Y.draggable=!0),s._triggerDragStart(t,e),ye({sortable:s,name:"choose",originalEvent:t}),$e(Y,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){dp(Y,g.trim(),Zl)}),St(u,"dragover",ki),St(u,"mousemove",ki),St(u,"touchmove",ki),St(u,"mouseup",s._onDrop),St(u,"touchend",s._onDrop),St(u,"touchcancel",s._onDrop),Xd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Y.draggable=!0),Ae("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(ws||qn))){if(et.eventCanceled){this._onDrop();return}St(u,"mouseup",s._disableDelayedDrag),St(u,"touchend",s._disableDelayedDrag),St(u,"touchcancel",s._disableDelayedDrag),St(u,"mousemove",s._delayedDragTouchMoveHandler),St(u,"touchmove",s._delayedDragTouchMoveHandler),l.supportPointer&&St(u,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(f,l.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Y&&Zl(Y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;vt(t,"mouseup",this._disableDelayedDrag),vt(t,"touchend",this._disableDelayedDrag),vt(t,"touchcancel",this._disableDelayedDrag),vt(t,"mousemove",this._delayedDragTouchMoveHandler),vt(t,"touchmove",this._delayedDragTouchMoveHandler),vt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?St(document,"pointermove",this._onTouchMove):e?St(document,"touchmove",this._onTouchMove):St(document,"mousemove",this._onTouchMove):(St(Y,"dragend",this),St(zt,"dragstart",this._onDragStart));try{document.selection?Uo(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(ar=!1,zt&&Y){Ae("dragStarted",this,{evt:e}),this.nativeDraggable&&St(document,"dragover",uT);var i=this.options;!t&&$e(Y,i.dragClass,!1),$e(Y,i.ghostClass,!0),et.active=this,t&&this._appendGhost(),ye({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(gn){this._lastX=gn.clientX,this._lastY=gn.clientY,xp();for(var t=document.elementFromPoint(gn.clientX,gn.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(gn.clientX,gn.clientY),t!==e);)e=t;if(Y.parentNode[Ue]._isOutsideThisEl(t),e)do{if(e[Ue]){var i=void 0;if(i=e[Ue]._onDragOver({clientX:gn.clientX,clientY:gn.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);yp()}},_onTouchMove:function(t){if(Ci){var e=this.options,i=e.fallbackTolerance,s=e.fallbackOffset,a=t.touches?t.touches[0]:t,l=ot&&hr(ot,!0),u=ot&&l&&l.a,f=ot&&l&&l.d,h=Eo&&pe&&jd(pe),g=(a.clientX-Ci.clientX+s.x)/(u||1)+(h?h[0]-Gl[0]:0)/(u||1),p=(a.clientY-Ci.clientY+s.y)/(f||1)+(h?h[1]-Gl[1]:0)/(f||1);if(!et.active&&!ar){if(i&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(ot){l?(l.e+=g-(ql||0),l.f+=p-(jl||0)):l={a:1,b:0,c:0,d:1,e:g,f:p};var m="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");tt(ot,"webkitTransform",m),tt(ot,"mozTransform",m),tt(ot,"msTransform",m),tt(ot,"transform",m),ql=g,jl=p,gn=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ot){var t=this.options.fallbackOnBody?document.body:zt,e=Qt(Y,!0,Eo,!0,t),i=this.options;if(Eo){for(pe=t;tt(pe,"position")==="static"&&tt(pe,"transform")==="none"&&pe!==document;)pe=pe.parentNode;pe!==document.body&&pe!==document.documentElement?(pe===document&&(pe=Tn()),e.top+=pe.scrollTop,e.left+=pe.scrollLeft):pe=Tn(),Gl=jd(pe)}ot=Y.cloneNode(!0),$e(ot,i.ghostClass,!1),$e(ot,i.fallbackClass,!0),$e(ot,i.dragClass,!0),tt(ot,"transition",""),tt(ot,"transform",""),tt(ot,"box-sizing","border-box"),tt(ot,"margin",0),tt(ot,"top",e.top),tt(ot,"left",e.left),tt(ot,"width",e.width),tt(ot,"height",e.height),tt(ot,"opacity","0.8"),tt(ot,"position",Eo?"absolute":"fixed"),tt(ot,"zIndex","100000"),tt(ot,"pointerEvents","none"),et.ghost=ot,t.appendChild(ot),tt(ot,"transform-origin",Gd/parseInt(ot.style.width)*100+"% "+Zd/parseInt(ot.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,s=t.dataTransfer,a=i.options;if(Ae("dragStart",this,{evt:t}),et.eventCanceled){this._onDrop();return}Ae("setupClone",this),et.eventCanceled||(Vt=mp(Y),Vt.draggable=!1,Vt.style["will-change"]="",this._hideClone(),$e(Vt,this.options.chosenClass,!1),et.clone=Vt),i.cloneId=Uo(function(){Ae("clone",i),!et.eventCanceled&&(i.options.removeCloneOnHide||zt.insertBefore(Vt,Y),i._hideClone(),ye({sortable:i,name:"clone"}))}),!e&&$e(Y,a.dragClass,!0),e?(ea=!0,i._loopId=setInterval(i._emulateDragOver,50)):(vt(document,"mouseup",i._onDrop),vt(document,"touchend",i._onDrop),vt(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",a.setData&&a.setData.call(i,s,Y)),St(document,"drop",i),tt(Y,"transform","translateZ(0)")),ar=!0,i._dragStartId=Uo(i._dragStarted.bind(i,e,t)),St(document,"selectstart",i),Gr=!0,rs&&tt(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,i=t.target,s,a,l,u=this.options,f=u.group,h=et.active,g=Ao===f,p=u.sort,m=ae||h,v,S=this,y=!1;if(mc)return;function w(Dt,te){Ae(Dt,S,An({evt:t,isOwner:g,axis:v?"vertical":"horizontal",revert:l,dragRect:s,targetRect:a,canSort:p,fromSortable:m,target:i,completed:O,onMove:function(bt,le){return Io(zt,e,Y,s,bt,Qt(bt),t,le)},changed:P},te))}function k(){w("dragOverAnimationCapture"),S.captureAnimationState(),S!==m&&m.captureAnimationState()}function O(Dt){return w("dragOverCompleted",{insertion:Dt}),Dt&&(g?h._hideClone():h._showClone(S),S!==m&&($e(Y,ae?ae.options.ghostClass:h.options.ghostClass,!1),$e(Y,u.ghostClass,!0)),ae!==S&&S!==et.active?ae=S:S===et.active&&ae&&(ae=null),m===S&&(S._ignoreWhileAnimating=i),S.animateAll(function(){w("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(i===Y&&!Y.animated||i===e&&!i.animated)&&(or=null),!u.dragoverBubble&&!t.rootEl&&i!==document&&(Y.parentNode[Ue]._isOutsideThisEl(t.target),!Dt&&ki(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),y=!0}function P(){Ye=nn(Y),si=nn(Y,u.draggable),ye({sortable:S,name:"change",toEl:e,newIndex:Ye,newDraggableIndex:si,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=Dn(i,u.draggable,e,!0),w("dragOver"),et.eventCanceled)return y;if(Y.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||S._ignoreWhileAnimating===i)return O(!1);if(ea=!1,h&&!u.disabled&&(g?p||(l=Ut!==zt):ae===this||(this.lastPutMode=Ao.checkPull(this,h,Y,t))&&f.checkPut(this,h,Y,t))){if(v=this._getDirection(t,i)==="vertical",s=Qt(Y),w("dragOverValid"),et.eventCanceled)return y;if(l)return Ut=zt,k(),this._hideClone(),w("revert"),et.eventCanceled||(Ai?zt.insertBefore(Y,Ai):zt.appendChild(Y)),O(!0);var E=Yc(e,u.draggable);if(!E||gT(t,v,this)&&!E.animated){if(E===Y)return O(!1);if(E&&e===t.target&&(i=E),i&&(a=Qt(i)),Io(zt,e,Y,s,i,a,t,!!i)!==!1)return k(),e.appendChild(Y),Ut=e,P(),O(!0)}else if(E&&dT(t,v,this)){var M=_r(e,0,u,!0);if(M===Y)return O(!1);if(i=M,a=Qt(i),Io(zt,e,Y,s,i,a,t,!1)!==!1)return k(),e.insertBefore(Y,M),Ut=e,P(),O(!0)}else if(i.parentNode===e){a=Qt(i);var R=0,B,L=Y.parentNode!==e,$=!lT(Y.animated&&Y.toRect||s,i.animated&&i.toRect||a,v),j=v?"top":"left",K=qd(i,"top","top")||qd(Y,"top","top"),G=K?K.scrollTop:void 0;or!==i&&(B=a[j],ls=!1,Oo=!$&&u.invertSwap||L),R=pT(t,i,a,v,$?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Oo,or===i);var ct;if(R!==0){var xt=nn(Y);do xt-=R,ct=Ut.children[xt];while(ct&&(tt(ct,"display")==="none"||ct===ot))}if(R===0||ct===i)return O(!1);or=i,as=R;var at=i.nextElementSibling,ht=!1;ht=R===1;var yt=Io(zt,e,Y,s,i,a,t,ht);if(yt!==!1)return(yt===1||yt===-1)&&(ht=yt===1),mc=!0,setTimeout(hT,30),k(),ht&&!at?e.appendChild(Y):i.parentNode.insertBefore(Y,ht?at:i),K&&pp(K,0,G-K.scrollTop),Ut=Y.parentNode,B!==void 0&&!Oo&&(Yo=Math.abs(B-Qt(i)[j])),P(),O(!0)}if(e.contains(Y))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){vt(document,"mousemove",this._onTouchMove),vt(document,"touchmove",this._onTouchMove),vt(document,"pointermove",this._onTouchMove),vt(document,"dragover",ki),vt(document,"mousemove",ki),vt(document,"touchmove",ki)},_offUpEvents:function(){var t=this.el.ownerDocument;vt(t,"mouseup",this._onDrop),vt(t,"touchend",this._onDrop),vt(t,"pointerup",this._onDrop),vt(t,"touchcancel",this._onDrop),vt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;if(Ye=nn(Y),si=nn(Y,i.draggable),Ae("drop",this,{evt:t}),Ut=Y&&Y.parentNode,Ye=nn(Y),si=nn(Y,i.draggable),et.eventCanceled){this._nulling();return}ar=!1,Oo=!1,ls=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_c(this.cloneId),_c(this._dragStartId),this.nativeDraggable&&(vt(document,"drop",this),vt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),rs&&tt(document.body,"user-select",""),tt(Y,"transform",""),t&&(Gr&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),ot&&ot.parentNode&&ot.parentNode.removeChild(ot),(zt===Ut||ae&&ae.lastPutMode!=="clone")&&Vt&&Vt.parentNode&&Vt.parentNode.removeChild(Vt),Y&&(this.nativeDraggable&&vt(Y,"dragend",this),Zl(Y),Y.style["will-change"]="",Gr&&!ar&&$e(Y,ae?ae.options.ghostClass:this.options.ghostClass,!1),$e(Y,this.options.chosenClass,!1),ye({sortable:this,name:"unchoose",toEl:Ut,newIndex:null,newDraggableIndex:null,originalEvent:t}),zt!==Ut?(Ye>=0&&(ye({rootEl:Ut,name:"add",toEl:Ut,fromEl:zt,originalEvent:t}),ye({sortable:this,name:"remove",toEl:Ut,originalEvent:t}),ye({rootEl:Ut,name:"sort",toEl:Ut,fromEl:zt,originalEvent:t}),ye({sortable:this,name:"sort",toEl:Ut,originalEvent:t})),ae&&ae.save()):Ye!==cr&&Ye>=0&&(ye({sortable:this,name:"update",toEl:Ut,originalEvent:t}),ye({sortable:this,name:"sort",toEl:Ut,originalEvent:t})),et.active&&((Ye==null||Ye===-1)&&(Ye=cr,si=os),ye({sortable:this,name:"end",toEl:Ut,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ae("nulling",this),zt=Y=Ut=ot=Ai=Vt=$o=oi=Ci=gn=Gr=Ye=si=cr=os=or=as=ae=Ao=et.dragged=et.ghost=et.clone=et.active=null,ia.forEach(function(t){t.checked=!0}),ia.length=ql=jl=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Y&&(this._onDragOver(t),fT(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,i=this.el.children,s=0,a=i.length,l=this.options;s<a;s++)e=i[s],Dn(e,l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||_T(e));return t},sort:function(t,e){var i={},s=this.el;this.toArray().forEach(function(a,l){var u=s.children[l];Dn(u,this.options.draggable,s,!1)&&(i[a]=u)},this),e&&this.captureAnimationState(),t.forEach(function(a){i[a]&&(s.removeChild(i[a]),s.appendChild(i[a]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Dn(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(e===void 0)return i[t];var s=Ss.modifyOption(this,t,e);typeof s<"u"?i[t]=s:i[t]=e,t==="group"&&vp(i)},destroy:function(){Ae("destroy",this);var t=this.el;t[Ue]=null,vt(t,"mousedown",this._onTapStart),vt(t,"touchstart",this._onTapStart),vt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(vt(t,"dragover",this),vt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),na.splice(na.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!oi){if(Ae("hideClone",this),et.eventCanceled)return;tt(Vt,"display","none"),this.options.removeCloneOnHide&&Vt.parentNode&&Vt.parentNode.removeChild(Vt),oi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(oi){if(Ae("showClone",this),et.eventCanceled)return;Y.parentNode==zt&&!this.options.group.revertClone?zt.insertBefore(Vt,Y):Ai?zt.insertBefore(Vt,Ai):zt.appendChild(Vt),this.options.group.revertClone&&this.animate(Y,Vt),tt(Vt,"display",""),oi=!1}}};function fT(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Io(n,t,e,i,s,a,l,u){var f,h=n[Ue],g=h.options.onMove,p;return window.CustomEvent&&!qn&&!ws?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=n,f.dragged=e,f.draggedRect=i,f.related=s||t,f.relatedRect=a||Qt(t),f.willInsertAfter=u,f.originalEvent=l,n.dispatchEvent(f),g&&(p=g.call(h,f,l)),p}function Zl(n){n.draggable=!1}function hT(){mc=!1}function dT(n,t,e){var i=Qt(_r(e.el,0,e.options,!0)),s=10;return t?n.clientX<i.left-s||n.clientY<i.top&&n.clientX<i.right:n.clientY<i.top-s||n.clientY<i.bottom&&n.clientX<i.left}function gT(n,t,e){var i=Qt(Yc(e.el,e.options.draggable)),s=10;return t?n.clientX>i.right+s||n.clientX<=i.right&&n.clientY>i.bottom&&n.clientX>=i.left:n.clientX>i.right&&n.clientY>i.top||n.clientX<=i.right&&n.clientY>i.bottom+s}function pT(n,t,e,i,s,a,l,u){var f=i?n.clientY:n.clientX,h=i?e.height:e.width,g=i?e.top:e.left,p=i?e.bottom:e.right,m=!1;if(!l){if(u&&Yo<h*s){if(!ls&&(as===1?f>g+h*a/2:f<p-h*a/2)&&(ls=!0),ls)m=!0;else if(as===1?f<g+Yo:f>p-Yo)return-as}else if(f>g+h*(1-s)/2&&f<p-h*(1-s)/2)return mT(t)}return m=m||l,m&&(f<g+h*a/2||f>p-h*a/2)?f>g+h/2?1:-1:0}function mT(n){return nn(Y)<nn(n)?1:-1}function _T(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,i=0;e--;)i+=t.charCodeAt(e);return i.toString(36)}function bT(n){ia.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var i=t[e];i.checked&&ia.push(i)}}function Uo(n){return setTimeout(n,0)}function _c(n){return clearTimeout(n)}la&&St(document,"touchmove",function(n){(et.active||ar)&&n.cancelable&&n.preventDefault()});et.utils={on:St,off:vt,css:tt,find:dp,is:function(t,e){return!!Dn(t,e,t,!1)},extend:tT,throttle:gp,closest:Dn,toggleClass:$e,clone:mp,index:nn,nextTick:Uo,cancelNextTick:_c,detectDirection:bp,getChild:_r};et.get=function(n){return n[Ue]};et.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(et.utils=An(An({},et.utils),i.utils)),Ss.mount(i)})};et.create=function(n,t){return new et(n,t)};et.version=GM;var jt=[],Zr,bc,vc=!1,Jl,Ql,ra,Jr;function vT(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var i=e.originalEvent;this.sortable.nativeDraggable?St(document,"dragover",this._handleAutoScroll):this.options.supportPointer?St(document,"pointermove",this._handleFallbackAutoScroll):i.touches?St(document,"touchmove",this._handleFallbackAutoScroll):St(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var i=e.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?vt(document,"dragover",this._handleAutoScroll):(vt(document,"pointermove",this._handleFallbackAutoScroll),vt(document,"touchmove",this._handleFallbackAutoScroll),vt(document,"mousemove",this._handleFallbackAutoScroll)),Qd(),Vo(),eT()},nulling:function(){ra=bc=Zr=vc=Jr=Jl=Ql=null,jt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,i){var s=this,a=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,u=document.elementFromPoint(a,l);if(ra=e,i||this.options.forceAutoScrollFallback||ws||qn||rs){tc(e,this.options,u,i);var f=li(u,!0);vc&&(!Jr||a!==Jl||l!==Ql)&&(Jr&&Qd(),Jr=setInterval(function(){var h=li(document.elementFromPoint(a,l),!0);h!==f&&(f=h,Vo()),tc(e,s.options,h,i)},10),Jl=a,Ql=l)}else{if(!this.options.bubbleScroll||li(u,!0)===Tn()){Vo();return}tc(e,this.options,li(u,!1),!1)}}},Kn(n,{pluginName:"scroll",initializeByDefault:!0})}function Vo(){jt.forEach(function(n){clearInterval(n.pid)}),jt=[]}function Qd(){clearInterval(Jr)}var tc=gp(function(n,t,e,i){if(t.scroll){var s=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,l=t.scrollSensitivity,u=t.scrollSpeed,f=Tn(),h=!1,g;bc!==e&&(bc=e,Vo(),Zr=t.scroll,g=t.scrollFn,Zr===!0&&(Zr=li(e,!0)));var p=0,m=Zr;do{var v=m,S=Qt(v),y=S.top,w=S.bottom,k=S.left,O=S.right,P=S.width,E=S.height,M=void 0,R=void 0,B=v.scrollWidth,L=v.scrollHeight,$=tt(v),j=v.scrollLeft,K=v.scrollTop;v===f?(M=P<B&&($.overflowX==="auto"||$.overflowX==="scroll"||$.overflowX==="visible"),R=E<L&&($.overflowY==="auto"||$.overflowY==="scroll"||$.overflowY==="visible")):(M=P<B&&($.overflowX==="auto"||$.overflowX==="scroll"),R=E<L&&($.overflowY==="auto"||$.overflowY==="scroll"));var G=M&&(Math.abs(O-s)<=l&&j+P<B)-(Math.abs(k-s)<=l&&!!j),ct=R&&(Math.abs(w-a)<=l&&K+E<L)-(Math.abs(y-a)<=l&&!!K);if(!jt[p])for(var xt=0;xt<=p;xt++)jt[xt]||(jt[xt]={});(jt[p].vx!=G||jt[p].vy!=ct||jt[p].el!==v)&&(jt[p].el=v,jt[p].vx=G,jt[p].vy=ct,clearInterval(jt[p].pid),(G!=0||ct!=0)&&(h=!0,jt[p].pid=setInterval((function(){i&&this.layer===0&&et.active._onTouchMove(ra);var at=jt[this.layer].vy?jt[this.layer].vy*u:0,ht=jt[this.layer].vx?jt[this.layer].vx*u:0;typeof g=="function"&&g.call(et.dragged.parentNode[Ue],ht,at,n,ra,jt[this.layer].el)!=="continue"||pp(jt[this.layer].el,ht,at)}).bind({layer:p}),24))),p++}while(t.bubbleScroll&&m!==f&&(m=li(m,!1)));vc=h}},30),wp=function(t){var e=t.originalEvent,i=t.putSortable,s=t.dragEl,a=t.activeSortable,l=t.dispatchSortableEvent,u=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(e){var h=i||a;u();var g=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(g.clientX,g.clientY);f(),h&&!h.el.contains(p)&&(l("spill"),this.onSpill({dragEl:s,putSortable:i}))}};function Uc(){}Uc.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=_r(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(e,s):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:wp};Kn(Uc,{pluginName:"revertOnSpill"});function Vc(){}Vc.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,s=i||this.sortable;s.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),s.animateAll()},drop:wp};Kn(Vc,{pluginName:"removeOnSpill"});et.mount(new vT);et.mount(Vc,Uc);function ec(n){n.parentElement!==null&&n.parentElement.removeChild(n)}function tg(n,t,e){const i=e===0?n.children[0]:n.children[e-1].nextSibling;n.insertBefore(t,i)}function xT(){return typeof window<"u"?window.console:global.console}const yT=xT();function wT(n){const t=Object.create(null);return function(i){return t[i]||(t[i]=n(i))}}const ST=/-(\w)/g,CT=wT(n=>n.replace(ST,(t,e)=>e.toUpperCase())),Sp=["Start","Add","Remove","Update","End"],Cp=["Choose","Unchoose","Sort","Filter","Clone"],kp=["Move"],kT=[kp,Sp,Cp].flatMap(n=>n).map(n=>`on${n}`),xc={manage:kp,manageAndEmit:Sp,emit:Cp};function DT(n){return kT.indexOf(n)!==-1}const MT=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function TT(n){return MT.includes(n)}function AT(n){return["transition-group","TransitionGroup"].includes(n)}function Dp(n){return["id","class","role","style"].includes(n)||n.startsWith("data-")||n.startsWith("aria-")||n.startsWith("on")}function Mp(n){return n.reduce((t,[e,i])=>(t[e]=i,t),{})}function OT({$attrs:n,componentData:t={}}){return{...Mp(Object.entries(n).filter(([i,s])=>Dp(i))),...t}}function ET({$attrs:n,callBackBuilder:t}){const e=Mp(Tp(n));Object.entries(t).forEach(([s,a])=>{xc[s].forEach(l=>{e[`on${l}`]=a(l)})});const i=`[data-draggable]${e.draggable||""}`;return{...e,draggable:i}}function Tp(n){return Object.entries(n).filter(([t,e])=>!Dp(t)).map(([t,e])=>[CT(t),e]).filter(([t,e])=>!DT(t))}const eg=({el:n})=>n,IT=(n,t)=>n.__draggable_context=t,ng=n=>n.__draggable_context;class PT{constructor({nodes:{header:t,default:e,footer:i},root:s,realList:a}){this.defaultNodes=e,this.children=[...t,...e,...i],this.externalComponent=s.externalComponent,this.rootTransition=s.transition,this.tag=s.tag,this.realList=a}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(t,e){const{tag:i,children:s,_isRootComponent:a}=this;return t(i,e,a?{default:()=>s}:s)}updated(){const{defaultNodes:t,realList:e}=this;t.forEach((i,s)=>{IT(eg(i),{element:e[s],index:s})})}getUnderlyingVm(t){return ng(t)}getVmIndexFromDomIndex(t,e){const{defaultNodes:i}=this,{length:s}=i,a=e.children,l=a.item(t);if(l===null)return s;const u=ng(l);if(u)return u.index;if(s===0)return 0;const f=eg(i[0]),h=[...a].findIndex(g=>g===f);return t<h?0:s}}function LT(n,t){const e=n[t];return e?e():[]}function RT({$slots:n,realList:t,getKey:e}){const i=t||[],[s,a]=["header","footer"].map(f=>LT(n,f)),{item:l}=n;if(!l)throw new Error("draggable element must have an item slot");const u=i.flatMap((f,h)=>l({element:f,index:h}).map(g=>(g.key=e(f),g.props={...g.props||{},"data-draggable":!0},g)));if(u.length!==i.length)throw new Error("Item slot must have only one child");return{header:s,footer:a,default:u}}function FT(n){const t=AT(n),e=!TT(n)&&!t;return{transition:t,externalComponent:e,tag:e?$1(n):t?Y1:n}}function BT({$slots:n,tag:t,realList:e,getKey:i}){const s=RT({$slots:n,realList:e,getKey:i}),a=FT(t);return new PT({nodes:s,root:a,realList:e})}function Ap(n,t){_n(()=>this.$emit(n.toLowerCase(),t))}function Op(n){return(t,e)=>{if(this.realList!==null)return this[`onDrag${n}`](t,e)}}function WT(n){const t=Op.call(this,n);return(e,i)=>{t.call(this,e,i),Ap.call(this,n,e)}}let nc=null;const zT={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:n=>n},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},NT=["update:modelValue","change",...[...xc.manageAndEmit,...xc.emit].map(n=>n.toLowerCase())],HT=On({name:"draggable",inheritAttrs:!1,props:zT,emits:NT,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:n,$attrs:t,tag:e,componentData:i,realList:s,getKey:a}=this,l=BT({$slots:n,tag:e,realList:s,getKey:a});this.componentStructure=l;const u=OT({$attrs:t,componentData:i});return l.render(hs,u)}catch(n){return this.error=!0,hs("pre",{style:{color:"red"}},n.stack)}},created(){this.list!==null&&this.modelValue!==null&&yT.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:n,$el:t,componentStructure:e}=this;e.updated();const i=ET({$attrs:n,callBackBuilder:{manageAndEmit:a=>WT.call(this,a),emit:a=>Ap.bind(this,a),manage:a=>Op.call(this,a)}}),s=t.nodeType===1?t:t.parentElement;this._sortable=new et(s,i),this.targetDomElement=s,s.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList(){const{list:n}=this;return n||this.modelValue},getKey(){const{itemKey:n}=this;return typeof n=="function"?n:t=>t[n]}},watch:{$attrs:{handler(n){const{_sortable:t}=this;t&&Tp(n).forEach(([e,i])=>{t.option(e,i)})},deep:!0}},methods:{getUnderlyingVm(n){return this.componentStructure.getUnderlyingVm(n)||null},getUnderlyingPotencialDraggableComponent(n){return n.__draggable_component__},emitChanges(n){_n(()=>this.$emit("change",n))},alterList(n){if(this.list){n(this.list);return}const t=[...this.modelValue];n(t),this.$emit("update:modelValue",t)},spliceList(){const n=t=>t.splice(...arguments);this.alterList(n)},updatePosition(n,t){const e=i=>i.splice(t,0,i.splice(n,1)[0]);this.alterList(e)},getRelatedContextFromMoveEvent({to:n,related:t}){const e=this.getUnderlyingPotencialDraggableComponent(n);if(!e)return{component:e};const i=e.realList,s={list:i,component:e};return n!==t&&i?{...e.getUnderlyingVm(t)||{},...s}:s},getVmIndexFromDomIndex(n){return this.componentStructure.getVmIndexFromDomIndex(n,this.targetDomElement)},onDragStart(n){this.context=this.getUnderlyingVm(n.item),n.item._underlying_vm_=this.clone(this.context.element),nc=n.item},onDragAdd(n){const t=n.item._underlying_vm_;if(t===void 0)return;ec(n.item);const e=this.getVmIndexFromDomIndex(n.newIndex);this.spliceList(e,0,t);const i={element:t,newIndex:e};this.emitChanges({added:i})},onDragRemove(n){if(tg(this.$el,n.item,n.oldIndex),n.pullMode==="clone"){ec(n.clone);return}const{index:t,element:e}=this.context;this.spliceList(t,1);const i={element:e,oldIndex:t};this.emitChanges({removed:i})},onDragUpdate(n){ec(n.item),tg(n.from,n.item,n.oldIndex);const t=this.context.index,e=this.getVmIndexFromDomIndex(n.newIndex);this.updatePosition(t,e);const i={element:this.context.element,oldIndex:t,newIndex:e};this.emitChanges({moved:i})},computeFutureIndex(n,t){if(!n.element)return 0;const e=[...t.to.children].filter(l=>l.style.display!=="none"),i=e.indexOf(t.related),s=n.component.getVmIndexFromDomIndex(i);return e.indexOf(nc)!==-1||!t.willInsertAfter?s:s+1},onDragMove(n,t){const{move:e,realList:i}=this;if(!e||!i)return!0;const s=this.getRelatedContextFromMoveEvent(n),a=this.computeFutureIndex(s,n),l={...this.context,futureIndex:a},u={...n,relatedContext:s,draggedContext:l};return e(u,t)},onDragEnd(){nc=null}}}),$T={class:"stock-page"},YT={class:"action-buttons"},UT={class:"stock-content"},VT={class:"stock-indicator"},XT={class:"kd-indicator"},KT={class:"rsi-indicator"},qT={class:"rsi-value"},jT={__name:"Stock",setup(n){const t=Mc(),e=dg("stock-search");Ht(null),Ht(null),Ht(0);const i=Ht(!1),s=Ht(null);dr(async()=>{try{t.loadUserStockList()}catch(E){console.error("初始化資料庫失敗:",E)}});const a=ne({get(){return t.userStockList},set(E){t.reorderStockList(E)}});function l(){e.emit(!0)}function u(E,M){console.log(`Stock ${M} indicator changed to ${E}`)}function f(E){return E>0?"price-up":E<0?"price-down":"price-flat"}const h=ne(()=>s.value?[{name:`K 值: ${s.value.k}`,subname:"快線指標 (敏感度高)",color:"#4286f5"},{name:`D 值: ${s.value.d}`,subname:"慢線指標 (敏感度低)",color:"#e75c9a"},{name:`J 值: ${s.value.j}`,subname:"超買超賣指標",color:"#666"},{name:`更新時間: ${s.value.date}`,subname:"週線資料最後更新",color:"#999"}]:[]);function g(E){s.value=E,i.value=!0}function p(E){console.log("KDJ ActionSheet 選擇:",E.name),i.value=!1,E.name.includes("K 值")?Di("K 值反映股價短期波動"):E.name.includes("D 值")?Di("D 值是 K 值的移動平均"):E.name.includes("J 值")&&Di("J 值 > 80 超買，< 20 超賣")}function m(E){return E>70?"rsi-overbought":E<30?"rsi-oversold":"rsi-normal"}function v(E){return E>70?"超買":E<30?"超賣":"正常"}function S(){}function y(E){Di(`買賣 ${E.name}`)}function w(E){Di(`${E.name} 策略設定`)}function k(E){Di(`${E.name} 其他功能`)}function O(E){setTimeout(()=>{const M=document.querySelector(".stock-row.sortable-chosen");if(M){const R=M.querySelector("canvas"),B=document.querySelector(".stock-row.sortable-drag");if(R&&B){const L=B.querySelector("canvas");if(L&&R.width&&R.height){L.width=R.width,L.height=R.height;const $=L.getContext("2d");$.clearRect(0,0,L.width,L.height),$.drawImage(R,0,0)}}}},0)}function P(E){console.log("拖曳結束",E)}return U1(document,"visibilitychange",()=>{}),dr(()=>{}),(E,M)=>(Ee(),rn("div",$T,[X(Oe(HT),{modelValue:a.value,"onUpdate:modelValue":M[1]||(M[1]=R=>a.value=R),"item-key":"id",delay:200,animation:200,"ghost-class":"stock-row-ghost",onStart:O,onEnd:P},{item:pn(({element:R,index:B})=>[pt("div",{class:"stock-row",onContextmenu:M[0]||(M[0]=V1(()=>{},["prevent"]))},[X(Oe(kw),{"left-width":200,onClickLeft:S},{left:pn(()=>[pt("div",YT,[X(Oe(Pl),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:L=>y(R)},{default:pn(()=>M[3]||(M[3]=[pt("div",null,"交 易",-1),pt("div",null,"記 錄",-1)])),_:2,__:[3]},1032,["onClick"]),X(Oe(Pl),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:L=>w(R)},{default:pn(()=>M[4]||(M[4]=[rc("策 略",-1)])),_:2,__:[4]},1032,["onClick"]),X(Oe(Pl),{type:"default",size:"small",class:"action-btn other-btn",onClick:L=>k(R)},{default:pn(()=>M[5]||(M[5]=[rc("更 多",-1)])),_:2,__:[5]},1032,["onClick"])])]),default:pn(()=>[pt("div",UT,[X(XM,{name:R.name,code:R.code,price:R.price,change:R.change,"change-percent":R.changePercent,"price-class":f(R.change),progress:R.progress,"progress-text":R.progressText},null,8,["name","code","price","change","change-percent","price-class","progress","progress-text"]),pt("div",VT,[X(Oe(X1),{"show-indicators":!1,loop:!1,autoplay:0,onChange:L=>u(L,B)},{default:pn(()=>[X(Oe(Ch),{class:"indicator-content"},{default:pn(()=>[pt("div",XT,[X(FM,{width:120,height:60,"stock-id":R.id,onKdjClick:g},null,8,["stock-id"])])]),_:2},1024),X(Oe(Ch),{class:"indicator-content"},{default:pn(()=>[pt("div",KT,[pt("div",qT,Ie(R.rsi),1),pt("div",{class:oc(["rsi-trend",m(R.rsi)])},Ie(v(R.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],32)]),_:1},8,["modelValue"]),X(Oe(mw),{axis:"xy",magnetic:"x",gap:{x:20,y:80},style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"rgba(255, 224, 102, 0.9)","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:l},{default:pn(()=>M[6]||(M[6]=[pt("div",{class:"bubble-content",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[pt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24"},[pt("path",{fill:"#322b0d","fill-rule":"evenodd",d:"M13 13v7a1 1 0 0 1-2 0v-7H4a1 1 0 0 1 0-2h7V4a1 1 0 0 1 2 0v7h7a1 1 0 0 1 0 2z"})]),pt("span",{class:"bubble-label",style:{color:"#322b0d","font-size":"14px"}},"新增")],-1)])),_:1,__:[6]}),X(tS),X(Oe(xg),{show:i.value,"onUpdate:show":M[2]||(M[2]=R=>i.value=R),actions:h.value,"cancel-text":"取消",title:"KDJ 指標詳情",onSelect:p},null,8,["show","actions"])]))}},eA=Cc(jT,[["__scopeId","data-v-453b1c82"]]);export{eA as default};
