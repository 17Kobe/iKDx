import{I as B}from"./iconify-Csfmhro-.js";import{C as y,r as P,F as b}from"./chart-BedpvtEZ.js";import{a5 as R,r,o as M,n as U,S as g,O as h,Q as e,l as o,P as u,a7 as C,R as n,U as I,V as q,W as Y,N as Z,Y as m,Z as _,a6 as j}from"./index-BcQzbtGx.js";import{B as w,s as G}from"./function-call-_qzuiCtY.js";import{A as N}from"./index-BbpYSU6S.js";import{T as V,a as H}from"./index-CJYy9coi.js";import"./index-B8P8pqjX.js";import"./index-CX6uRjZQ.js";const J={class:"asset-content"},K={class:"charts-section"},X={class:"chart-row"},ee={class:"chart-card"},ae={class:"chart-container"},te={class:"chart-card"},se={class:"chart-container"},le={class:"chart-row"},ne={class:"chart-card"},oe={class:"chart-container"},ie={class:"chart-card"},re={class:"chart-container"},ce={class:"asset-list-section"},de={class:"section-header"},ue={class:"asset-cards"},pe=["onClick"],ve={class:"asset-icon"},me={class:"asset-info"},he={class:"asset-type"},fe={class:"asset-value"},ye={class:"amount"},_e={key:0,class:"empty-state"},ge={class:"asset-form"},be={class:"form-actions"},Ce={__name:"AssetOverview",setup(z){y.register(...P);const d=r(!1),v=r(!1),i=r(null),c=r(!1),f=r(null),k=r(null),x=r(null),T=r(null),s=r({name:"",type:"",amount:"",description:""}),p=r([{id:1,name:"台積電",type:"股票",amount:5e5,change:2.5,icon:"mdi:chart-line",color:"#1976d2"},{id:2,name:"富邦台50",type:"ETF",amount:3e5,change:1.2,icon:"mdi:trending-up",color:"#388e3c"},{id:3,name:"定期存款",type:"現金",amount:2e5,change:.8,icon:"mdi:bank",color:"#ffa726"}]),A=[{name:"股票",value:"股票",icon:"mdi:chart-line"},{name:"ETF",value:"ETF",icon:"mdi:trending-up"},{name:"基金",value:"基金",icon:"mdi:chart-pie"},{name:"債券",value:"債券",icon:"mdi:chart-bar"},{name:"現金",value:"現金",icon:"mdi:bank"},{name:"房地產",value:"房地產",icon:"mdi:home"},{name:"其他",value:"其他",icon:"mdi:dots-horizontal"}];function D(l){return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(l)}function F(){i.value=null,s.value={name:"",type:"",amount:"",description:""},d.value=!0}function W(l){i.value=l,s.value={name:l.name,type:l.type,amount:l.amount.toString(),description:l.description||""},d.value=!0}function E(){v.value=!0}function Q(l){s.value.type=l.value,v.value=!1}async function L(){if(!s.value.name||!s.value.type||!s.value.amount){_.fail("請填寫必要欄位");return}c.value=!0;try{const l={name:s.value.name,type:s.value.type,amount:parseFloat(s.value.amount),description:s.value.description,change:Math.random()*10-5,icon:A.find(a=>a.value===s.value.type)?.icon||"mdi:help",color:"#1976d2"};if(i.value){const a=p.value.findIndex(t=>t.id===i.value.id);a!==-1&&(p.value[a]={...p.value[a],...l}),_.success("資產已更新")}else l.id=Date.now(),p.value.push(l),_.success("資產已新增");d.value=!1,await U(),S()}catch{_.fail("操作失敗")}finally{c.value=!1}}function $(){G({title:"確認刪除",message:"確定要刪除這個資產嗎？",showCancelButton:!0,confirmButtonText:"刪除",cancelButtonText:"取消"}).then(()=>{const l=p.value.findIndex(a=>a.id===i.value.id);l!==-1&&(p.value.splice(l,1),_.success("資產已刪除"),d.value=!1,S())}).catch(()=>{})}function O(){f.value&&new y(f.value,{type:"doughnut",data:{labels:["股票","ETF","現金","其他"],datasets:[{data:[50,30,15,5],backgroundColor:["#1976d2","#388e3c","#ffa726","#f57c00"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}}),k.value&&new y(k.value,{type:"line",data:{labels:["1月","2月","3月","4月","5月","6月"],datasets:[{data:[1e6,105e4,102e4,11e5,118e4,1234567],borderColor:"#1976d2",backgroundColor:"rgba(25, 118, 210, 0.1)",fill:!0,tension:.4,borderWidth:2,pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}}}}),x.value&&new y(x.value,{type:"doughnut",data:{labels:["收入","支出"],datasets:[{data:[60,40],backgroundColor:["#4caf50","#f44336"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}}),T.value&&new y(T.value,{type:"bar",data:{labels:["Q1","Q2","Q3","Q4"],datasets:[{data:[5.2,3.8,8.1,8.3],backgroundColor:["#2196f3","#4caf50","#ff9800","#9c27b0"],borderRadius:4,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{display:!1},y:{display:!1}}}})}function S(){console.log("更新圖表數據")}return M(async()=>{await U(),O()}),(l,a)=>(h(),g("div",J,[e("div",K,[e("div",X,[e("div",ee,[a[6]||(a[6]=e("div",{class:"chart-header"},[e("h3",null,"資產分布"),e("span",{class:"chart-total"},"NT$ 1,234,567")],-1)),e("div",ae,[e("canvas",{ref_key:"assetPieChart",ref:f,class:"chart-canvas"},null,512)])]),e("div",te,[a[7]||(a[7]=e("div",{class:"chart-header"},[e("h3",null,"月度趨勢"),e("span",{class:"chart-period"},"近6個月")],-1)),e("div",se,[e("canvas",{ref_key:"trendLineChart",ref:k,class:"chart-canvas"},null,512)])])]),e("div",le,[e("div",ne,[a[8]||(a[8]=e("div",{class:"chart-header"},[e("h3",null,"收支比例"),e("span",{class:"chart-value"},"+12.5%")],-1)),e("div",oe,[e("canvas",{ref_key:"incomeChart",ref:x,class:"chart-canvas"},null,512)])]),e("div",ie,[a[9]||(a[9]=e("div",{class:"chart-header"},[e("h3",null,"投資回報"),e("span",{class:"chart-return"},"+8.3%")],-1)),e("div",re,[e("canvas",{ref_key:"returnChart",ref:T,class:"chart-canvas"},null,512)])])])]),e("div",ce,[e("div",de,[a[11]||(a[11]=e("h3",null,"我的資產",-1)),o(n(w),{type:"primary",size:"small",round:"",onClick:F,icon:"plus"},{default:u(()=>a[10]||(a[10]=[C(" 新增資產 ",-1)])),_:1,__:[10]})]),e("div",ue,[(h(!0),g(q,null,Y(p.value,t=>(h(),g("div",{key:t.id,class:"asset-card",onClick:Te=>W(t)},[e("div",ve,[o(n(B),{icon:t.icon,width:"32",height:"32",color:t.color},null,8,["icon","color"])]),e("div",me,[e("h4",null,m(t.name),1),e("p",he,m(t.type),1)]),e("div",fe,[e("span",ye,m(D(t.amount)),1),e("span",{class:j(["change",{positive:t.change>0,negative:t.change<0}])},m(t.change>0?"+":"")+m(t.change.toFixed(2))+"% ",3)])],8,pe))),128)),p.value.length===0?(h(),g("div",_e,[o(n(B),{icon:"mdi:wallet-outline",width:"60",height:"60",color:"#ccc"}),a[13]||(a[13]=e("p",null,"尚未添加任何資產",-1)),o(n(w),{type:"primary",onClick:F},{default:u(()=>a[12]||(a[12]=[C("新增第一個資產",-1)])),_:1,__:[12]})])):I("",!0)])]),o(n(N),{show:d.value,"onUpdate:show":a[4]||(a[4]=t=>d.value=t),title:i.value?"編輯資產":"新增資產","cancel-text":"取消"},{default:u(()=>[e("div",ge,[o(n(b),{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value.name=t),label:"資產名稱",placeholder:"請輸入資產名稱",required:""},null,8,["modelValue"]),o(n(b),{modelValue:s.value.type,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.type=t),label:"資產類型",placeholder:"請選擇資產類型",readonly:"",onClick:E},null,8,["modelValue"]),o(n(b),{modelValue:s.value.amount,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value.amount=t),label:"金額",placeholder:"請輸入金額",type:"number"},null,8,["modelValue"]),o(n(b),{modelValue:s.value.description,"onUpdate:modelValue":a[3]||(a[3]=t=>s.value.description=t),label:"備註",placeholder:"選填",type:"textarea",rows:"2"},null,8,["modelValue"]),e("div",be,[o(n(w),{type:"primary",size:"large",block:"",onClick:L,loading:c.value},{default:u(()=>[C(m(i.value?"更新":"新增"),1)]),_:1},8,["loading"]),i.value?(h(),Z(n(w),{key:0,type:"danger",size:"large",block:"",plain:"",onClick:$,style:{"margin-top":"12px"}},{default:u(()=>a[14]||(a[14]=[C(" 刪除資產 ",-1)])),_:1,__:[14]})):I("",!0)])])]),_:1},8,["show","title"]),o(n(N),{show:v.value,"onUpdate:show":a[5]||(a[5]=t=>v.value=t),title:"選擇資產類型",actions:A,"cancel-text":"取消",onSelect:Q},null,8,["show"])]))}},we=R(Ce,[["__scopeId","data-v-642d6dfa"]]),ke={class:"asset-page"},xe={__name:"Asset",setup(z){const d=r("asset"),v=i=>{console.log("切換到：",i)};return(i,c)=>(h(),g("div",ke,[o(n(H),{active:d.value,"onUpdate:active":c[0]||(c[0]=f=>d.value=f),swipeable:"",sticky:"",onChange:v,class:"custom-tabs"},{default:u(()=>[o(n(V),{title:"資產",name:"asset"},{default:u(()=>[o(we)]),_:1}),o(n(V),{title:"收支",name:"income"},{default:u(()=>c[1]||(c[1]=[e("div",{class:"tab-content"},[e("h3",null,"收支內容"),e("p",null,"這裡是收支相關的內容")],-1)])),_:1,__:[1]}),o(n(V),{title:"預算",name:"budget"},{default:u(()=>c[2]||(c[2]=[e("div",{class:"tab-content"},[e("h3",null,"預算內容"),e("p",null,"這裡是預算相關的內容")],-1)])),_:1,__:[2]})]),_:1},8,["active"])]))}},Re=R(xe,[["__scopeId","data-v-18a583c2"]]);export{Re as default};
