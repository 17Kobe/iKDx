import{d as qe,m as un,c as bn,r as W,a as re,i as kn,w as Kt,b as Gt,e as _n,u as qn,f as Kn,o as lt,n as _e,g as It,h as Mo,j as Ao,k as Yo,v as Po,l as L,s as $o,p as Gn,T as Lo,q as Jn,t as Ot,x as yn,y as Zn,z as Qn,A as No,B as eo,C as Dn,D as Fo,E as Ro,F as Cn,G as Wo,H as Bo,I as Vo,J as Nt,K as to,L as no,M as jo,N as Ft,O as z,P as ee,Q as f,R as X,S as H,U as et,V as bt,W as dn,X as oo,Y as V,Z as de,_ as ao,$ as it,a0 as zo,a1 as fn,a2 as ro,a3 as ct,a4 as J,a5 as Rt,a6 as st,a7 as ze,a8 as Ke,a9 as ht,aa as Xo,ab as Ho,ac as Uo,ad as qo,ae as Ko,af as Go}from"./index-JjBT1LCz.js";import{F as Ve,f as io,C as Mt,L as Jo,a as Zo,b as Qo,c as ea,P as ta,d as na,p as oa,e as aa,g as ra,T as ia}from"./chart-D1WKZXWY.js";import{u as sa,S as la,a as En}from"./index-DqLODx3x.js";import{A as Le}from"./index-zKXH1J4I.js";import{B as Ne,s as Tn}from"./function-call-CmaPiqWv.js";import"./index-ys9g71mX.js";function In(t,e){return t.reduce((n,o)=>Math.abs(n-e)<Math.abs(o-e)?n:o)}const ca={gap:{type:[Number,Object],default:24},icon:String,axis:un("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[ua,On]=bn("floating-bubble");var da=qe({name:ua,inheritAttrs:!1,props:ca,emits:["click","update:offset","offsetChange"],setup(t,{slots:e,emit:n,attrs:o}){const a=W(),r=W({x:0,y:0,width:0,height:0}),i=re(()=>kn(t.gap)?t.gap.x:t.gap),s=re(()=>kn(t.gap)?t.gap.y:t.gap),c=re(()=>({top:s.value,right:Gt.value-r.value.width-i.value,bottom:Kt.value-r.value.height-s.value,left:i.value})),l=W(!1);let d=!1;const u=re(()=>{const y={},A=_n(r.value.x),k=_n(r.value.y);return y.transform=`translate3d(${A}, ${k}, 0)`,(l.value||!d)&&(y.transition="none"),y}),h=()=>{if(!M.value)return;const{width:y,height:A}=Jn(a.value),{offset:k}=t;r.value={x:k?k.x:Gt.value-y-i.value,y:k?k.y:Kt.value-A-s.value,width:y,height:A}},m=qn();let g=0,v=0;const p=y=>{m.start(y),l.value=!0,g=r.value.x,v=r.value.y};Kn("touchmove",y=>{if(y.preventDefault(),m.move(y),t.axis!=="lock"&&!m.isTap.value){if(t.axis==="x"||t.axis==="xy"){let k=g+m.deltaX.value;k<c.value.left&&(k=c.value.left),k>c.value.right&&(k=c.value.right),r.value.x=k}if(t.axis==="y"||t.axis==="xy"){let k=v+m.deltaY.value;k<c.value.top&&(k=c.value.top),k>c.value.bottom&&(k=c.value.bottom),r.value.y=k}const A=Ot(r.value,["x","y"]);n("update:offset",A)}},{target:a});const D=()=>{l.value=!1,_e(()=>{if(t.magnetic==="x"){const y=In([c.value.left,c.value.right],r.value.x);r.value.x=y}if(t.magnetic==="y"){const y=In([c.value.top,c.value.bottom],r.value.y);r.value.y=y}if(!m.isTap.value){const y=Ot(r.value,["x","y"]);n("update:offset",y),(g!==y.x||v!==y.y)&&n("offsetChange",y)}})},C=y=>{m.isTap.value?n("click",y):y.stopPropagation()};lt(()=>{h(),_e(()=>{d=!0})}),It([Gt,Kt,i,s,()=>t.offset],h,{deep:!0});const M=W(!0);return Mo(()=>{M.value=!0}),Ao(()=>{t.teleport&&(M.value=!1)}),()=>{const y=Yo(L("div",Gn({class:On(),ref:a,onTouchstartPassive:p,onTouchend:D,onTouchcancel:D,onClickCapture:C,style:u.value},o),[e.default?e.default():L($o,{name:t.icon,class:On("icon")},null)]),[[Po,M.value]]);return t.teleport?L(Lo,{to:t.teleport},{default:()=>[y]}):y}}});const fa=yn(da),[ha,Ge,pa]=bn("search"),ga=Zn({},io,{label:String,shape:un("square"),leftIcon:un("search"),clearable:No,actionText:String,background:String,showAction:Boolean});var ma=qe({name:ha,props:ga,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:n,attrs:o}){const a=sa(),r=W(),i=()=>{n.action||(e("update:modelValue",""),e("cancel"))},s=y=>{y.keyCode===13&&(eo(y),e("search",t.modelValue))},c=()=>t.id||`${a}-input`,l=()=>{if(n.label||t.label)return L("label",{class:Ge("label"),for:c(),"data-allow-mismatch":"attribute"},[n.label?n.label():t.label])},d=()=>{if(t.showAction){const y=t.actionText||pa("cancel");return L("div",{class:Ge("action"),role:"button",tabindex:0,onClick:i},[n.action?n.action():y])}},u=()=>{var y;return(y=r.value)==null?void 0:y.blur()},h=()=>{var y;return(y=r.value)==null?void 0:y.focus()},m=y=>e("blur",y),g=y=>e("focus",y),v=y=>e("clear",y),p=y=>e("clickInput",y),w=y=>e("clickLeftIcon",y),D=y=>e("clickRightIcon",y),C=Object.keys(io),M=()=>{const y=Zn({},o,Ot(t,C),{id:c()}),A=k=>e("update:modelValue",k);return L(Ve,Gn({ref:r,type:"search",class:Ge("field",{"with-message":y.errorMessage}),border:!1,onBlur:m,onFocus:g,onClear:v,onKeypress:s,onClickInput:p,onClickLeftIcon:w,onClickRightIcon:D,"onUpdate:modelValue":A},y),Ot(n,["left-icon","right-icon"]))};return Qn({focus:h,blur:u}),()=>{var y;return L("div",{class:Ge({"show-action":t.showAction}),style:{background:t.background}},[(y=n.left)==null?void 0:y.call(n),L("div",{class:Ge("content",t.shape)},[l(),M()]),d()])}}});const va=yn(ma),[ba,Jt]=bn("swipe-cell"),ya={name:Fo(""),disabled:Boolean,leftWidth:Dn,rightWidth:Dn,beforeClose:Function,stopPropagation:Boolean};var wa=qe({name:ba,props:ya,emits:["open","close","click"],setup(t,{emit:e,slots:n}){let o,a,r,i;const s=W(),c=W(),l=W(),d=Ro({offset:0,dragging:!1}),u=qn(),h=x=>x.value?Jn(x).width:0,m=re(()=>Cn(t.leftWidth)?+t.leftWidth:h(c)),g=re(()=>Cn(t.rightWidth)?+t.rightWidth:h(l)),v=x=>{d.offset=x==="left"?m.value:-g.value,o||(o=!0,e("open",{name:t.name,position:x}))},p=x=>{d.offset=0,o&&(o=!1,e("close",{name:t.name,position:x}))},w=x=>{const _=Math.abs(d.offset),j=.15,I=o?1-j:j,N=x==="left"?m.value:g.value;N&&_>N*I?v(x):p(x)},D=x=>{t.disabled||(r=d.offset,u.start(x))},C=x=>{if(t.disabled)return;const{deltaX:_}=u;u.move(x),u.isHorizontal()&&(a=!0,d.dragging=!0,(!o||_.value*r<0)&&eo(x,t.stopPropagation),d.offset=Bo(_.value+r,-g.value,m.value))},M=()=>{d.dragging&&(d.dragging=!1,w(d.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},y=(x="outside",_)=>{i||(e("click",x),o&&!a&&(i=!0,Vo(t.beforeClose,{args:[{event:_,name:t.name,position:x}],done:()=>{i=!1,p(x)},canceled:()=>i=!1,error:()=>i=!1})))},A=x=>_=>{(a||o)&&_.stopPropagation(),!a&&y(x,_)},k=(x,_)=>{const j=n[x];if(j)return L("div",{ref:_,class:Jt(x),onClick:A(x)},[j()])};return Qn({open:v,close:p}),Wo(s,x=>y("outside",x),{eventName:"touchstart"}),Kn("touchmove",C,{target:s}),()=>{var x;const _={transform:`translate3d(${d.offset}px, 0, 0)`,transitionDuration:d.dragging?"0s":".6s"};return L("div",{ref:s,class:Jt(),onClick:A("cell"),onTouchstartPassive:D,onTouchend:M,onTouchcancel:M},[L("div",{class:Jt("wrapper"),style:_},[k("left",c),(x=n.default)==null?void 0:x.call(n),k("right",l)])])}}});const xa=yn(wa),Sa={style:{display:"flex","flex-direction":"column",gap:"0"}},ka={style:{margin:"16px 0 0 0"}},_a={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},Da=["onClick"],Ca={key:0,style:{"margin-top":"12px"}},Ea={key:0},Ta={key:0,style:{background:"#d3d3d3","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",opacity:"0.6"}},Ia={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Oa={style:{"font-size":"16px",color:"#333",flex:"1"}},Ma=["onClick"],Aa={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Ya={style:{"font-size":"16px",color:"#333",flex:"1"}},Pa={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},$a={__name:"StockSearch",setup(t){const e=Nt(),n=to("stock-search"),o=W(!1);lt(()=>{n.on(v=>{o.value=v})}),no(()=>{n.reset()});const a=W(),r=W(""),i=W([]),s=["台積電","鴻海","聯發科","長榮","中鋼"],c={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},l={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function d(v){return r.value===v?{...c,...l}:c}function u(){_e(()=>{const v=a.value?.$el?.querySelector("input");v&&v.focus()})}It(()=>o.value,v=>{v&&setTimeout(()=>{u()},300)}),It(()=>r.value,async v=>{if(console.log("localSearch 更新:",v),!v||v.length<1){i.value=[];return}console.log("觸發 getAllStocks");try{const p=await jo();console.log("getAllStocks 執行成功",p),i.value=p.filter(w=>w.name.includes(v)||w.id.includes(v)),console.log("搜尋結果:",i.value)}catch(p){console.error("getAllStocks 執行失敗:",p)}});function h(v){}function m(v){console.log("點擊熱門標籤:",v),r.value=v}async function g(v){const p=await e.addStockToList(v);de({message:p.message,type:p.success?"success":"fail"})}return(v,p)=>(z(),Ft(X(Le),{show:o.value,"onUpdate:show":p[3]||(p[3]=w=>o.value=w),"cancel-text":"離開",title:"股票搜尋",onSelect:g,style:{height:"80vh",maxHeight:"80vh"},"body-style":"height:80vh;max-height:80vh;overflow-y:auto;"},{description:ee(()=>[f("div",Sa,[L(X(va),{ref_key:"searchInputRef",ref:a,modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=w=>r.value=w),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:h},null,8,["modelValue"]),f("div",ka,[p[5]||(p[5]=f("div",{style:{"font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px","margin-bottom":"8px","margin-left":"8px","text-align":"left"}}," | 熱門股票 ",-1)),f("div",_a,[(z(),H(bt,null,dn(s,w=>f("span",{key:w,onClick:D=>m(w),style:oo(d(w))},V(w),13,Da)),64))]),r.value&&r.value.length>=1?(z(),H("div",Ca,[i.value.length?(z(),H("div",Ea,[(z(!0),H(bt,null,dn(i.value,w=>(z(),H(bt,{key:w.id},[X(e).isStockInList(w.id)?(z(),H("div",Ta,[f("div",Ia,V(w.id),1),f("div",Oa,V(w.name),1),p[4]||(p[4]=f("div",{style:{"margin-left":"12px","min-width":"60px",height:"40px",background:"#e0e0e0",color:"#666","font-weight":"bold","font-size":"16px","border-radius":"8px",width:"64px",display:"flex","align-items":"center","justify-content":"center"}}," 已新增 ",-1))])):(z(),H("div",{key:1,onClick:D=>g(w),style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",cursor:"pointer",transition:"all 0.2s ease"},onMouseenter:p[1]||(p[1]=D=>D.target.style.background="#eff3f6"),onMouseleave:p[2]||(p[2]=D=>D.target.style.background="#fff")},[f("div",Aa,V(w.id),1),f("div",Ya,V(w.name),1)],40,Ma))],64))),128))])):(z(),H("div",Pa," 查無資料 "))])):et("",!0)])])]),_:1},8,["show"]))}},so={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},La={ariaLabel:{type:String},ariaDescribedby:{type:String}},Na={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...so,...La},Fa=zo[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function Re(t){return ro(t)?fn(t):t}function Ra(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return ro(e)?new Proxy(t,{}):t}function Wa(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function lo(t,e){t.labels=e}function co(t,e,n){const o=[];t.datasets=e.map(a=>{const r=t.datasets.find(i=>i[n]===a[n]);return!r||!a.data||o.includes(r)?{...a}:(o.push(r),Object.assign(r,a),r)})}function Ba(t,e){const n={labels:[],datasets:[]};return lo(n,t.labels),co(n,t.datasets,e),n}const Va=qe({props:Na,setup(t,e){let{expose:n,slots:o}=e;const a=W(null),r=ao(null);n({chart:r});const i=()=>{if(!a.value)return;const{type:l,data:d,options:u,plugins:h,datasetIdKey:m}=t,g=Ba(d,m),v=Ra(g,d);r.value=new Mt(a.value,{type:l,data:v,options:{...u},plugins:h})},s=()=>{const l=fn(r.value);l&&(t.destroyDelay>0?setTimeout(()=>{l.destroy(),r.value=null},t.destroyDelay):(l.destroy(),r.value=null))},c=l=>{l.update(t.updateMode)};return lt(i),no(s),It([()=>t.options,()=>t.data],(l,d)=>{let[u,h]=l,[m,g]=d;const v=fn(r.value);if(!v)return;let p=!1;if(u){const w=Re(u),D=Re(m);w&&w!==D&&(Wa(v,w),p=!0)}if(h){const w=Re(h.labels),D=Re(g.labels),C=Re(h.datasets),M=Re(g.datasets);w!==D&&(lo(v.config.data,w),p=!0),C&&C!==M&&(co(v.config.data,C,t.datasetIdKey),p=!0)}p&&_e(()=>{c(v)})},{deep:!0}),()=>it("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:a},[it("p",{},[o.default?o.default():""])])}});function ja(t,e){return Mt.register(e),qe({props:so,setup(n,o){let{expose:a}=o;const r=ao(null),i=s=>{r.value=s?.chart};return a({chart:r}),()=>it(Va,Fa({ref:i},{type:t,...n}))}})}const za=ja("line",Jo);var yt={exports:{}},Xa=yt.exports,Mn;function Ha(){return Mn||(Mn=1,function(t,e){(function(n,o){t.exports=o()})(Xa,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,r=/\d\d/,i=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,c={},l=function(p){return(p=+p)+(p>68?1900:2e3)},d=function(p){return function(w){this[p]=+w}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(w){if(!w||w==="Z")return 0;var D=w.match(/([+-]|\d\d)/g),C=60*D[1]+(+D[2]||0);return C===0?0:D[0]==="+"?-C:C}(p)}],h=function(p){var w=c[p];return w&&(w.indexOf?w:w.s.concat(w.f))},m=function(p,w){var D,C=c.meridiem;if(C){for(var M=1;M<=24;M+=1)if(p.indexOf(C(M,0,w))>-1){D=M>12;break}}else D=p===(w?"pm":"PM");return D},g={A:[s,function(p){this.afternoon=m(p,!1)}],a:[s,function(p){this.afternoon=m(p,!0)}],Q:[a,function(p){this.month=3*(p-1)+1}],S:[a,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[i,d("seconds")],ss:[i,d("seconds")],m:[i,d("minutes")],mm:[i,d("minutes")],H:[i,d("hours")],h:[i,d("hours")],HH:[i,d("hours")],hh:[i,d("hours")],D:[i,d("day")],DD:[r,d("day")],Do:[s,function(p){var w=c.ordinal,D=p.match(/\d+/);if(this.day=D[0],w)for(var C=1;C<=31;C+=1)w(C).replace(/\[|\]/g,"")===p&&(this.day=C)}],w:[i,d("week")],ww:[r,d("week")],M:[i,d("month")],MM:[r,d("month")],MMM:[s,function(p){var w=h("months"),D=(h("monthsShort")||w.map(function(C){return C.slice(0,3)})).indexOf(p)+1;if(D<1)throw new Error;this.month=D%12||D}],MMMM:[s,function(p){var w=h("months").indexOf(p)+1;if(w<1)throw new Error;this.month=w%12||w}],Y:[/[+-]?\d+/,d("year")],YY:[r,function(p){this.year=l(p)}],YYYY:[/\d{4}/,d("year")],Z:u,ZZ:u};function v(p){var w,D;w=p,D=c&&c.formats;for(var C=(p=w.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(j,I,N){var P=N&&N.toUpperCase();return I||D[N]||n[N]||D[P].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(R,Q,U){return Q||U.slice(1)})})).match(o),M=C.length,y=0;y<M;y+=1){var A=C[y],k=g[A],x=k&&k[0],_=k&&k[1];C[y]=_?{regex:x,parser:_}:A.replace(/^\[|\]$/g,"")}return function(j){for(var I={},N=0,P=0;N<M;N+=1){var R=C[N];if(typeof R=="string")P+=R.length;else{var Q=R.regex,U=R.parser,ge=j.slice(P),se=Q.exec(ge)[0];U.call(I,se),j=j.replace(se,"")}}return function(me){var Me=me.afternoon;if(Me!==void 0){var ne=me.hours;Me?ne<12&&(me.hours+=12):ne===12&&(me.hours=0),delete me.afternoon}}(I),I}}return function(p,w,D){D.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(l=p.parseTwoDigitYear);var C=w.prototype,M=C.parse;C.parse=function(y){var A=y.date,k=y.utc,x=y.args;this.$u=k;var _=x[1];if(typeof _=="string"){var j=x[2]===!0,I=x[3]===!0,N=j||I,P=x[2];I&&(P=x[2]),c=this.$locale(),!j&&P&&(c=D.Ls[P]),this.$d=function(ge,se,me,Me){try{if(["x","X"].indexOf(se)>-1)return new Date((se==="X"?1e3:1)*ge);var ne=v(se)(ge),Ae=ne.year,Fe=ne.month,Bt=ne.day,Vt=ne.hours,jt=ne.minutes,zt=ne.seconds,O=ne.milliseconds,b=ne.zone,Y=ne.week,he=new Date,ye=Bt||(Ae||Fe?1:he.getDate()),ve=Ae||he.getFullYear(),we=0;Ae&&!Fe||(we=Fe>0?Fe-1:he.getMonth());var ft,Xt=Vt||0,Ht=jt||0,Ut=zt||0,qt=O||0;return b?new Date(Date.UTC(ve,we,ye,Xt,Ht,Ut,qt+60*b.offset*1e3)):me?new Date(Date.UTC(ve,we,ye,Xt,Ht,Ut,qt)):(ft=new Date(ve,we,ye,Xt,Ht,Ut,qt),Y&&(ft=Me(ft).week(Y).toDate()),ft)}catch{return new Date("")}}(A,_,k,D),this.init(),P&&P!==!0&&(this.$L=this.locale(P).$L),N&&A!=this.format(_)&&(this.$d=new Date("")),c={}}else if(_ instanceof Array)for(var R=_.length,Q=1;Q<=R;Q+=1){x[1]=_[Q-1];var U=D.apply(this,x);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}Q===R&&(this.$d=new Date(""))}else M.call(this,y)}}})}(yt)),yt.exports}var Ua=Ha();const qa=ct(Ua);var wt={exports:{}},Ka=wt.exports,An;function Ga(){return An||(An=1,function(t,e){(function(n,o){t.exports=o()})(Ka,function(){return function(n,o){var a=o.prototype,r=a.format;a.format=function(i){var s=this,c=this.$locale();if(!this.isValid())return r.bind(this)(i);var l=this.$utils(),d=(i||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(u){switch(u){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return c.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return c.ordinal(s.week(),"W");case"w":case"ww":return l.s(s.week(),u==="w"?1:2,"0");case"W":case"WW":return l.s(s.isoWeek(),u==="W"?1:2,"0");case"k":case"kk":return l.s(String(s.$H===0?24:s.$H),u==="k"?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return u}});return r.bind(this)(d)}}})}(wt)),wt.exports}var Ja=Ga();const Za=ct(Ja);var xt={exports:{}},Qa=xt.exports,Yn;function er(){return Yn||(Yn=1,function(t,e){(function(n,o){t.exports=o()})(Qa,function(){var n="month",o="quarter";return function(a,r){var i=r.prototype;i.quarter=function(l){return this.$utils().u(l)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(l-1))};var s=i.add;i.add=function(l,d){return l=Number(l),this.$utils().p(d)===o?this.add(3*l,n):s.bind(this)(l,d)};var c=i.startOf;i.startOf=function(l,d){var u=this.$utils(),h=!!u.u(d)||d;if(u.p(l)===o){var m=this.quarter()-1;return h?this.month(3*m).startOf(n).startOf("day"):this.month(3*m+2).endOf(n).endOf("day")}return c.bind(this)(l,d)}}})}(xt)),xt.exports}var tr=er();const nr=ct(tr);var St={exports:{}},or=St.exports,Pn;function ar(){return Pn||(Pn=1,function(t,e){(function(n,o){t.exports=o()})(or,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(o,a,r){var i=a.prototype,s=i.format;r.en.formats=n,i.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var l=this.$locale().formats,d=function(u,h){return u.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(m,g,v){var p=v&&v.toUpperCase();return g||h[v]||n[v]||h[p].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,D,C){return D||C.slice(1)})})}(c,l===void 0?{}:l);return s.call(this,d)}}})}(St)),St.exports}var rr=ar();const ir=ct(rr);var kt={exports:{}},sr=kt.exports,$n;function lr(){return $n||($n=1,function(t,e){(function(n,o){t.exports=o()})(sr,function(){var n="day";return function(o,a,r){var i=function(l){return l.add(4-l.isoWeekday(),n)},s=a.prototype;s.isoWeekYear=function(){return i(this).year()},s.isoWeek=function(l){if(!this.$utils().u(l))return this.add(7*(l-this.isoWeek()),n);var d,u,h,m,g=i(this),v=(d=this.isoWeekYear(),u=this.$u,h=(u?r.utc:r)().year(d).startOf("year"),m=4-h.isoWeekday(),h.isoWeekday()>4&&(m+=7),h.add(m,n));return g.diff(v,"week")+1},s.isoWeekday=function(l){return this.$utils().u(l)?this.day()||7:this.day(this.day()%7?l:l-7)};var c=s.startOf;s.startOf=function(l,d){var u=this.$utils(),h=!!u.u(d)||d;return u.p(l)==="isoweek"?h?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):c.bind(this)(l,d)}}})}(kt)),kt.exports}var cr=lr();const ur=ct(cr);J.extend(Za);J.extend(nr);J.extend(ir);J.extend(qa);J.extend(ur);var dr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Zo._date.override({formats:function(){return dr},parse:function(e,n){var o=typeof e;return e===null||o==="undefined"?null:o==="string"&&typeof n=="string"?J(e,n).isValid()?J(e,n).valueOf():null:e instanceof J?null:J(e).isValid()?J(e).valueOf():null},format:function(e,n){return J(e).format(n)},add:function(e,n,o){return J(e).add(n,o).valueOf()},diff:function(e,n,o){return J(e).diff(J(n),o)},startOf:function(e,n,o){if(n==="isoWeek"){var a=typeof o=="number"&&o>0&&o<7?o:1;return J(e).isoWeekday(a).startOf("day").valueOf()}return J(e).startOf(n).valueOf()},endOf:function(e,n){return J(e).endOf(n).valueOf()}});const fr={key:1,class:"error-placeholder"},hr={__name:"KdjChart",props:{stockId:{type:String,required:!0},width:{type:Number,default:200},height:{type:Number,default:100}},emits:["kdjClick"],setup(t,{emit:e}){Mt.register(Qo,ea,ta,na,oa,aa,ra,ia);const n={id:"kdjDisplay",afterDatasetsDraw:(u,h,m)=>{if(!m.enabled||!m.lastKdj)return;const{ctx:g,chartArea:v}=u,{lastKdj:p}=m,D=u.scales.y.getPixelForValue(0),C=v.right-97,M=D+15,y=D+30;g.save(),console.log("Drawing KDJ values:",{k:p.k,d:p.d,xStart:C,yK:M,yD:y,zeroY:D,chartArea:v}),g.font="bold 12px Arial",g.textAlign="left",g.fillStyle="#4286f5";const A=`K: ${p.k}`;g.fillText(A,C,M);const k=g.measureText(A).width;g.fillStyle="#e75c9a";const x=` D: ${p.d}`,_=C+k;console.log("Drawing D value:",x,"at same line position:",_,M),g.fillText(x,_,M),g.restore()}};Mt.register(n);const o=t,a=e,r=Nt(),i=W(null),s=re(()=>{const u=r.userStockList.find(h=>h.id===o.stockId);return u?.data?.weeklyKdj?u.data.weeklyKdj.filter(h=>h&&Array.isArray(h)&&h.length>=4&&typeof h[1]=="number"&&!isNaN(h[1])&&typeof h[2]=="number"&&!isNaN(h[2])&&typeof h[3]=="number"&&!isNaN(h[3])).map(h=>({x:J(h[0],"YYYYMMDD").toDate(),k:h[1],d:h[2],j:h[3]})):[]}),c=re(()=>{const u=s.value;if(!u||u.length===0)return{datasets:[]};const h=u.map(g=>({x:g.x,y:g.k})),m=u.map(g=>({x:g.x,y:g.d}));return{datasets:[{label:"K",data:h,borderColor:"#4286f5",backgroundColor:"rgba(66, 134, 245, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#4286f5",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2},{label:"D",data:m,borderColor:"#e75c9a",backgroundColor:"rgba(231, 92, 154, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#e75c9a",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2}]}}),l=re(()=>{const u=s.value;return u&&u.length>0?u[u.length-1]:null}),d=re(()=>{const u=l.value;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#333",bodyColor:"#333",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,cornerRadius:6,displayColors:!1,padding:8,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:function(h){const m=h[0].parsed.x;return J(m).format("YYYY-MM-DD(dd)")},label:function(h){const m=h.dataset.label,g=h.parsed.y.toFixed(2);return`${m}: ${g}`},afterLabel:function(h){const m=h.dataIndex,g=s.value;if(g&&g[m]){const v=g[m];if(h.datasetIndex===0)return[`K: ${v.k.toFixed(2)}`,`D: ${v.d.toFixed(2)}`,`J: ${v.j.toFixed(2)}`]}return[]}}},kdjDisplay:{enabled:!!u,lastKdj:u?{k:u.k.toFixed(2),d:u.d.toFixed(2),j:u.j.toFixed(2),date:J(u.x).format("YYYY/MM/DD")}:null}},scales:{x:{type:"time",time:{unit:"week",displayFormats:{week:"MM/DD"}},display:!1,grid:{display:!1},ticks:{display:!1},offset:!1,bounds:"data"},y:{type:"linear",position:"right",display:!0,min:-20,max:100,border:{display:!1},grid:{drawTicks:!1,color:h=>{const m=h.tick.value;return[0,20,50,80,100].includes(m)?"rgba(200, 200, 200, 0.3)":"transparent"}},ticks:{stepSize:10,autoSkip:!1,color:"#888",font:{size:12},padding:-15,callback:h=>h===20||h===50||h===80?h:""}}},animation:!1,interaction:{mode:"nearest",intersect:!1,includeInvisible:!1},hover:{mode:"nearest",intersect:!1,animationDuration:200},onClick:(h,m,g)=>{console.log("Chart onClick triggered"),console.log("Event object:",h);const v=g.canvas.getBoundingClientRect();let p,w;if(h.native)p=h.native.offsetX||h.native.clientX-v.left,w=h.native.offsetY||h.native.clientY-v.top;else if(h.offsetX!==void 0)p=h.offsetX,w=h.offsetY;else if(h.clientX!==void 0)p=h.clientX-v.left,w=h.clientY-v.top;else{console.log("Cannot determine click position");return}console.log("Click position:",{x:p,y:w}),console.log("Canvas rect:",v);const D=g.chartArea,M=g.scales.y.getPixelForValue(0),y={left:D.right-120,right:D.right-5,top:M+5,bottom:M+20};if(console.log("KDJ area:",y),p>=y.left&&p<=y.right&&w>=y.top&&w<=y.bottom){console.log("Clicked in KDJ area");const A=l.value;A&&(console.log("Emitting kdjClick event:",A),a("kdjClick",{k:A.k.toFixed(2),d:A.d.toFixed(2),j:A.j.toFixed(2),date:J(A.x).format("YYYY/MM/DD")}))}else console.log("Clicked outside KDJ area")}}});return(u,h)=>(z(),H("div",{ref_key:"chartContainer",ref:i,class:"kdj-chart",style:{width:"100%",height:"100%"}},[c.value.datasets.length>0?(z(),Ft(X(za),{key:0,data:c.value,options:d.value},null,8,["data","options"])):(z(),H("div",fr,"KDJ 圖表暫不可用"))],512))}},pr=Rt(hr,[["__scopeId","data-v-7b9bfd80"]]),gr={class:"stock-name"},mr={class:"stock-name-main"},vr={class:"stock-name-left"},br={class:"name highlight"},yr={class:"code"},wr={class:"stock-name-right"},xr={class:"stock-progress-bar"},Sr={class:"progress-text"},kr={__name:"StockName",props:{name:String,code:String,price:[String,Number],change:[String,Number],changePercent:[String,Number],priceClass:String,progress:Number,progressText:String},setup(t){return(e,n)=>(z(),H("div",gr,[f("div",mr,[f("div",vr,[f("div",br,V(t.name),1),f("div",yr,V(t.code),1),n[0]||(n[0]=f("div",{class:"star-area"},[f("span",{class:"star"},"★")],-1))]),f("div",wr,[f("div",{class:st(["price",t.priceClass])},V(t.price),3),f("div",{class:st(["change",t.priceClass])},V(t.change>0?"+":"")+V(t.change)+" ("+V(t.changePercent)+"%) ",3)])]),f("div",xr,[f("div",{class:"stock-progress-inner",style:oo({width:(t.progress||0)+"%"})},[f("span",Sr,V(t.progressText||(t.progress||0)+"%"),1)],4)])]))}},_r=Rt(kr,[["__scopeId","data-v-e4a25520"]]),Dr={class:"stock-actions"},Cr={class:"sheet-content"},Er={class:"sheet-header"},Tr={class:"current-price"},Ir={class:"add-trade-section"},Or={class:"trade-list"},Mr=["onClick"],Ar={class:"trade-info"},Yr={class:"trade-details"},Pr={class:"trade-date"},$r={class:"trade-amount"},Lr={class:"trade-total"},Nr={class:"total-amount"},Fr={key:0,class:"empty-trades"},Rr={key:0,class:"trade-summary"},Wr={class:"summary-item"},Br={class:"value"},Vr={class:"summary-item"},jr={class:"value"},zr={class:"summary-item"},Xr={class:"sheet-content"},Hr={class:"sheet-header"},Ur={class:"strategy-list"},qr={class:"strategy-status"},Kr={key:0,class:"enabled"},Gr={key:1,class:"disabled"},Jr={class:"strategy-status"},Zr={key:0,class:"enabled"},Qr={key:1,class:"disabled"},ei={class:"strategy-status"},ti={key:0,class:"enabled"},ni={key:1,class:"disabled"},oi={class:"strategy-status"},ai={key:0,class:"enabled"},ri={key:1,class:"disabled"},ii={class:"sheet-content"},si={class:"more-list"},li={class:"more-info"},ci={class:"trade-form"},ui={class:"form-actions"},di={__name:"StockActions",props:{stockInfo:{type:Object,required:!0}},setup(t,{expose:e}){const n=t,o=Nt(),a=W(!1),r=W(!1),i=W(!1),s=W(!1),c=W(!1),l=W(null),d=W(!1),u=W(!1),h=re(()=>{if(!n.stockInfo)return 0;const O=n.stockInfo.price;if(typeof O=="string"){const b=parseFloat(O);return isNaN(b)?0:b}return typeof O=="number"?O:0}),m=W({type:"",shares:"",price:"",date:new Date().toISOString().split("T")[0],note:""}),g=W([]),v=W({stopLoss:{enabled:!1,price:0,percentage:10},takeProfit:{enabled:!1,price:0,percentage:15},priceAlert:{enabled:!1,alerts:[]},autoInvest:{enabled:!1,amount:1e4,frequency:"monthly"}}),p=[{name:"買入",value:"buy"},{name:"賣出",value:"sell"}],w=re(()=>g.value.reduce((O,b)=>b.type==="buy"?O+b.shares:O-b.shares,0)),D=re(()=>{const O=g.value.filter(he=>he.type==="buy"),b=O.reduce((he,ye)=>he+ye.shares*ye.price,0),Y=O.reduce((he,ye)=>he+ye.shares,0);return Y>0?b/Y:0}),C=re(()=>{if(!h.value||w.value===0)return 0;const O=w.value*h.value,Y=g.value.filter(ve=>ve.type==="buy").reduce((ve,we)=>ve+we.shares*we.price,0),ye=g.value.filter(ve=>ve.type==="sell").reduce((ve,we)=>ve+we.shares*we.price,0);return O+ye-Y});function M(){if(!n.stockInfo)return;const O=n.stockInfo.code||n.stockInfo.id,b=localStorage.getItem(`tradeRecords_${O}`);b?g.value=JSON.parse(b):O==="2330"?g.value=[{id:1,type:"buy",shares:1e3,price:550,date:"2024-01-15",note:"首次買入"},{id:2,type:"buy",shares:500,price:520,date:"2024-02-10",note:"加碼買入"}]:g.value=[]}function y(){if(!n.stockInfo)return;const O=n.stockInfo.code||n.stockInfo.id,b=localStorage.getItem(`strategies_${O}`);b&&(v.value={...v.value,...JSON.parse(b)})}function A(){if(!n.stockInfo)return;const O=n.stockInfo.code||n.stockInfo.id;localStorage.setItem(`tradeRecords_${O}`,JSON.stringify(g.value))}function k(O){return new Date(O).toLocaleDateString("zh-TW")}function x(){M(),a.value=!0}function _(){y(),r.value=!0}function j(){i.value=!0}function I(){l.value=null,m.value={type:"",shares:"",price:h.value>0?h.value.toString():"",date:new Date().toISOString().split("T")[0],note:""},s.value=!0}function N(O){l.value=O,m.value={type:O.type,shares:O.shares.toString(),price:O.price.toString(),date:O.date,note:O.note||""},a.value=!1,s.value=!0}function P(){c.value=!0}function R(O){m.value.type=O.value,c.value=!1}function Q(){if(!m.value.type||!m.value.shares||!m.value.price){ht("請填寫必要欄位");return}d.value=!0;try{const O={type:m.value.type,shares:parseInt(m.value.shares),price:parseFloat(m.value.price),date:m.value.date,note:m.value.note};if(l.value){const b=g.value.findIndex(Y=>Y.id===l.value.id);b!==-1&&(g.value[b]={...g.value[b],...O}),Ke("交易記錄已更新")}else O.id=Date.now(),g.value.push(O),Ke("交易記錄已新增");s.value=!1,A()}catch{ht("操作失敗")}finally{d.value=!1}}function U(){Tn({title:"確認刪除",message:"確定要刪除這筆交易記錄嗎？",showCancelButton:!0,confirmButtonText:"刪除",cancelButtonText:"取消"}).then(()=>{const O=g.value.findIndex(b=>b.id===l.value.id);O!==-1&&(g.value.splice(O,1),Ke("交易記錄已刪除"),s.value=!1,A())}).catch(()=>{})}function ge(){de("停損設定功能開發中")}function se(){de("停利設定功能開發中")}function me(){de("價格提醒功能開發中")}function Me(){de("定期定額功能開發中")}function ne(){de("技術分析功能開發中")}function Ae(){de("相關新聞功能開發中")}function Fe(){de("財務報表功能開發中")}function Bt(){u.value=!u.value,Ke(u.value?"已加入關注":"已移除關注"),i.value=!1}function Vt(){de("分享功能開發中")}function jt(){de("匯出功能開發中")}async function zt(){if(!n.stockInfo)return;const O=n.stockInfo.code||n.stockInfo.id,b=n.stockInfo.name||O;Tn({title:"確認刪除",message:`確定要刪除「${b}」的所有相關數據嗎？

此操作將清除：
• Pinia Store 中的股票資料
• IndexedDB 中的交易記錄
• IndexedDB 中的價格數據

此操作無法復原！`,showCancelButton:!0,confirmButtonText:"刪除",confirmButtonColor:"#ee0a24",cancelButtonText:"取消"}).then(async()=>{try{const Y=await o.removeStockFromList(O);if(!Y.success){ht(`從股票清單移除失敗：${Y.message}`);return}await Xo(O),await(await Ho()).delete("user-stock-data",O),i.value=!1,Ke(`已刪除「${b}」的所有相關數據`)}catch(Y){console.error("刪除股票數據失敗:",Y),ht("刪除失敗，請稍後再試")}}).catch(()=>{})}return e({showTradeSheet:x,showStrategySheet:_,showMoreSheet:j}),lt(()=>{M(),y()}),(O,b)=>(z(),H("div",Dr,[L(X(Le),{show:a.value,"onUpdate:show":b[0]||(b[0]=Y=>a.value=Y),title:"交易記錄","cancel-text":"關閉",class:"trade-action-sheet"},{default:ee(()=>[f("div",Cr,[f("div",Er,[f("h3",null,V(t.stockInfo.name)+" ("+V(t.stockInfo.code)+")",1),f("p",Tr," 現價：NT$ "+V(h.value?h.value.toLocaleString():"--"),1)]),f("div",Ir,[L(X(Ne),{type:"primary",block:"",onClick:I,icon:"plus"},{default:ee(()=>b[10]||(b[10]=[ze(" 新增交易記錄 ",-1)])),_:1,__:[10]})]),f("div",Or,[(z(!0),H(bt,null,dn(g.value,Y=>(z(),H("div",{key:Y.id,class:"trade-item",onClick:he=>N(Y)},[f("div",Ar,[f("div",{class:st(["trade-type",Y.type])},V(Y.type==="buy"?"買入":"賣出"),3),f("div",Yr,[f("p",Pr,V(k(Y.date)),1),f("p",$r,V(Y.shares)+"股 @ NT$ "+V(Y.price),1)])]),f("div",Lr,[f("span",Nr,"NT$ "+V((Y.shares*Y.price).toLocaleString()),1)])],8,Mr))),128)),g.value.length===0?(z(),H("div",Fr,[b[12]||(b[12]=f("p",null,"尚無交易記錄",-1)),L(X(Ne),{type:"primary",onClick:I},{default:ee(()=>b[11]||(b[11]=[ze("新增第一筆交易",-1)])),_:1,__:[11]})])):et("",!0)]),g.value.length>0?(z(),H("div",Rr,[f("div",Wr,[b[13]||(b[13]=f("span",{class:"label"},"持有股數",-1)),f("span",Br,V(w.value)+"股",1)]),f("div",Vr,[b[14]||(b[14]=f("span",{class:"label"},"平均成本",-1)),f("span",jr,"NT$ "+V(D.value.toFixed(2)),1)]),f("div",zr,[b[15]||(b[15]=f("span",{class:"label"},"損益",-1)),f("span",{class:st(["value",{profit:C.value>0,loss:C.value<0}])},V(C.value>0?"+":"")+"NT$ "+V(Math.abs(C.value).toLocaleString()),3)])])):et("",!0)])]),_:1},8,["show"]),L(X(Le),{show:r.value,"onUpdate:show":b[1]||(b[1]=Y=>r.value=Y),title:"投資策略","cancel-text":"關閉",class:"strategy-action-sheet"},{default:ee(()=>[f("div",Xr,[f("div",Hr,[f("h3",null,V(t.stockInfo.name)+" 策略設定",1)]),f("div",Ur,[f("div",{class:"strategy-item",onClick:ge},[b[16]||(b[16]=f("div",{class:"strategy-icon"},"🛡️",-1)),b[17]||(b[17]=f("div",{class:"strategy-info"},[f("h4",null,"停損設定"),f("p",null,"自動停損保護")],-1)),f("div",qr,[v.value.stopLoss.enabled?(z(),H("span",Kr,"已啟用")):(z(),H("span",Gr,"未設定"))])]),f("div",{class:"strategy-item",onClick:se},[b[18]||(b[18]=f("div",{class:"strategy-icon"},"🎯",-1)),b[19]||(b[19]=f("div",{class:"strategy-info"},[f("h4",null,"停利設定"),f("p",null,"自動獲利了結")],-1)),f("div",Jr,[v.value.takeProfit.enabled?(z(),H("span",Zr,"已啟用")):(z(),H("span",Qr,"未設定"))])]),f("div",{class:"strategy-item",onClick:me},[b[20]||(b[20]=f("div",{class:"strategy-icon"},"🔔",-1)),b[21]||(b[21]=f("div",{class:"strategy-info"},[f("h4",null,"價格提醒"),f("p",null,"到價通知提醒")],-1)),f("div",ei,[v.value.priceAlert.enabled?(z(),H("span",ti,V(v.value.priceAlert.alerts.length)+"個提醒",1)):(z(),H("span",ni,"未設定"))])]),f("div",{class:"strategy-item",onClick:Me},[b[22]||(b[22]=f("div",{class:"strategy-icon"},"🔄",-1)),b[23]||(b[23]=f("div",{class:"strategy-info"},[f("h4",null,"定期定額"),f("p",null,"自動投資計劃")],-1)),f("div",oi,[v.value.autoInvest.enabled?(z(),H("span",ai,"已啟用")):(z(),H("span",ri,"未設定"))])])])])]),_:1},8,["show"]),L(X(Le),{show:i.value,"onUpdate:show":b[2]||(b[2]=Y=>i.value=Y),title:"更多選項","cancel-text":"關閉",class:"more-action-sheet"},{default:ee(()=>[f("div",ii,[f("div",si,[f("div",{class:"more-item",onClick:ne},b[24]||(b[24]=[f("div",{class:"more-icon"},"📊",-1),f("div",{class:"more-info"},[f("h4",null,"技術分析"),f("p",null,"查看技術指標")],-1)])),f("div",{class:"more-item",onClick:Ae},b[25]||(b[25]=[f("div",{class:"more-icon"},"📰",-1),f("div",{class:"more-info"},[f("h4",null,"相關新聞"),f("p",null,"最新財經資訊")],-1)])),f("div",{class:"more-item",onClick:Fe},b[26]||(b[26]=[f("div",{class:"more-icon"},"📈",-1),f("div",{class:"more-info"},[f("h4",null,"財務報表"),f("p",null,"財務數據分析")],-1)])),f("div",{class:"more-item",onClick:Bt},[b[27]||(b[27]=f("div",{class:"more-icon"},"⭐",-1)),f("div",li,[f("h4",null,V(u.value?"移除關注":"加入關注"),1),f("p",null,V(u.value?"從關注清單移除":"加入自選股"),1)])]),f("div",{class:"more-item",onClick:Vt},b[28]||(b[28]=[f("div",{class:"more-icon"},"📤",-1),f("div",{class:"more-info"},[f("h4",null,"分享"),f("p",null,"分享股票資訊")],-1)])),f("div",{class:"more-item",onClick:jt},b[29]||(b[29]=[f("div",{class:"more-icon"},"💾",-1),f("div",{class:"more-info"},[f("h4",null,"匯出資料"),f("p",null,"匯出交易記錄")],-1)])),f("div",{class:"more-item danger",onClick:zt},b[30]||(b[30]=[f("div",{class:"more-icon"},"🗑️",-1),f("div",{class:"more-info"},[f("h4",null,"刪除"),f("p",null,"清除股票相關數據")],-1)]))])])]),_:1},8,["show"]),L(X(Le),{show:s.value,"onUpdate:show":b[8]||(b[8]=Y=>s.value=Y),title:l.value?"編輯交易":"新增交易記錄","cancel-text":"取消"},{default:ee(()=>[f("div",ci,[L(X(Ve),{modelValue:m.value.type,"onUpdate:modelValue":b[3]||(b[3]=Y=>m.value.type=Y),label:"交易類型",readonly:"",onClick:P,placeholder:m.value.type==="buy"?"買入":m.value.type==="sell"?"賣出":"請選擇"},null,8,["modelValue","placeholder"]),L(X(Ve),{modelValue:m.value.shares,"onUpdate:modelValue":b[4]||(b[4]=Y=>m.value.shares=Y),label:"股數",type:"number",placeholder:"請輸入股數"},null,8,["modelValue"]),L(X(Ve),{modelValue:m.value.price,"onUpdate:modelValue":b[5]||(b[5]=Y=>m.value.price=Y),label:"價格",type:"number",placeholder:"請輸入成交價格"},null,8,["modelValue"]),L(X(Ve),{modelValue:m.value.date,"onUpdate:modelValue":b[6]||(b[6]=Y=>m.value.date=Y),label:"交易日期",type:"date"},null,8,["modelValue"]),L(X(Ve),{modelValue:m.value.note,"onUpdate:modelValue":b[7]||(b[7]=Y=>m.value.note=Y),label:"備註",placeholder:"選填",type:"textarea",rows:"2"},null,8,["modelValue"]),f("div",ui,[L(X(Ne),{type:"primary",size:"large",block:"",onClick:Q,loading:d.value},{default:ee(()=>[ze(V(l.value?"更新":"新增"),1)]),_:1},8,["loading"]),l.value?(z(),Ft(X(Ne),{key:0,type:"danger",size:"large",block:"",plain:"",onClick:U,style:{"margin-top":"12px"}},{default:ee(()=>b[31]||(b[31]=[ze(" 刪除記錄 ",-1)])),_:1,__:[31]})):et("",!0)])])]),_:1},8,["show","title"]),L(X(Le),{show:c.value,"onUpdate:show":b[9]||(b[9]=Y=>c.value=Y),title:"選擇交易類型",actions:p,"cancel-text":"取消",onSelect:R},null,8,["show"])]))}},fi=Rt(di,[["__scopeId","data-v-fa889fff"]]);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ln(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(n),!0).forEach(function(o){hi(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function _t(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(e){return typeof e}:_t=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(t)}function hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ce(){return Ce=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ce.apply(this,arguments)}function pi(t,e){if(t==null)return{};var n={},o=Object.keys(t),a,r;for(r=0;r<o.length;r++)a=o[r],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function gi(t,e){if(t==null)return{};var n=pi(t,e),o,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}var mi="1.14.0";function De(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ee=De(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ut=De(/Edge/i),Nn=De(/firefox/i),tt=De(/safari/i)&&!De(/chrome/i)&&!De(/android/i),uo=De(/iP(ad|od|hone)/i),vi=De(/chrome/i)&&De(/android/i),fo={capture:!1,passive:!1};function B(t,e,n){t.addEventListener(e,n,!Ee&&fo)}function F(t,e,n){t.removeEventListener(e,n,!Ee&&fo)}function At(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function bi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function xe(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&At(t,e):At(t,e))||o&&t===n)return t;if(t===n)break}while(t=bi(t))}return null}var Fn=/\s+/g;function ce(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(Fn," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(Fn," ")}}function E(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function He(t,e){var n="";if(typeof t=="string")n=t;else do{var o=E(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function ho(t,e,n){if(t){var o=t.getElementsByTagName(e),a=0,r=o.length;if(n)for(;a<r;a++)n(o[a],a);return o}return[]}function Se(){var t=document.scrollingElement;return t||document.documentElement}function te(t,e,n,o,a){if(!(!t.getBoundingClientRect&&t!==window)){var r,i,s,c,l,d,u;if(t!==window&&t.parentNode&&t!==Se()?(r=t.getBoundingClientRect(),i=r.top,s=r.left,c=r.bottom,l=r.right,d=r.height,u=r.width):(i=0,s=0,c=window.innerHeight,l=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(e||n)&&t!==window&&(a=a||t.parentNode,!Ee))do if(a&&a.getBoundingClientRect&&(E(a,"transform")!=="none"||n&&E(a,"position")!=="static")){var h=a.getBoundingClientRect();i-=h.top+parseInt(E(a,"border-top-width")),s-=h.left+parseInt(E(a,"border-left-width")),c=i+r.height,l=s+r.width;break}while(a=a.parentNode);if(o&&t!==window){var m=He(a||t),g=m&&m.a,v=m&&m.d;m&&(i/=v,s/=g,u/=g,d/=v,c=i+d,l=s+u)}return{top:i,left:s,bottom:c,right:l,width:u,height:d}}}function Rn(t,e,n){for(var o=Oe(t,!0),a=te(t)[e];o;){var r=te(o)[n],i=void 0;if(i=a>=r,!i)return o;if(o===Se())break;o=Oe(o,!1)}return!1}function Ue(t,e,n,o){for(var a=0,r=0,i=t.children;r<i.length;){if(i[r].style.display!=="none"&&i[r]!==T.ghost&&(o||i[r]!==T.dragged)&&xe(i[r],n.draggable,t,!1)){if(a===e)return i[r];a++}r++}return null}function wn(t,e){for(var n=t.lastElementChild;n&&(n===T.ghost||E(n,"display")==="none"||e&&!At(n,e));)n=n.previousElementSibling;return n||null}function pe(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==T.clone&&(!e||At(t,e))&&n++;return n}function Wn(t){var e=0,n=0,o=Se();if(t)do{var a=He(t),r=a.a,i=a.d;e+=t.scrollLeft*r,n+=t.scrollTop*i}while(t!==o&&(t=t.parentNode));return[e,n]}function yi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function Oe(t,e){if(!t||!t.getBoundingClientRect)return Se();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=E(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Se();if(o||e)return n;o=!0}}while(n=n.parentNode);return Se()}function wi(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Zt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var nt;function po(t,e){return function(){if(!nt){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),nt=setTimeout(function(){nt=void 0},e)}}}function xi(){clearTimeout(nt),nt=void 0}function go(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function mo(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var fe="Sortable"+new Date().getTime();function Si(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(a){if(!(E(a,"display")==="none"||a===T.ghost)){t.push({target:a,rect:te(a)});var r=ke({},t[t.length-1].rect);if(a.thisAnimationDuration){var i=He(a,!0);i&&(r.top-=i.f,r.left-=i.e)}a.fromRect=r}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(yi(t,{target:o}),1)},animateAll:function(o){var a=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var r=!1,i=0;t.forEach(function(s){var c=0,l=s.target,d=l.fromRect,u=te(l),h=l.prevFromRect,m=l.prevToRect,g=s.rect,v=He(l,!0);v&&(u.top-=v.f,u.left-=v.e),l.toRect=u,l.thisAnimationDuration&&Zt(h,u)&&!Zt(d,u)&&(g.top-u.top)/(g.left-u.left)===(d.top-u.top)/(d.left-u.left)&&(c=_i(g,h,m,a.options)),Zt(u,d)||(l.prevFromRect=d,l.prevToRect=u,c||(c=a.options.animation),a.animate(l,g,u,c)),c&&(r=!0,i=Math.max(i,c),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},c),l.thisAnimationDuration=c)}),clearTimeout(e),r?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),t=[]},animate:function(o,a,r,i){if(i){E(o,"transition",""),E(o,"transform","");var s=He(this.el),c=s&&s.a,l=s&&s.d,d=(a.left-r.left)/(c||1),u=(a.top-r.top)/(l||1);o.animatingX=!!d,o.animatingY=!!u,E(o,"transform","translate3d("+d+"px,"+u+"px,0)"),this.forRepaintDummy=ki(o),E(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),E(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){E(o,"transition",""),E(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function ki(t){return t.offsetWidth}function _i(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var We=[],Qt={initializeByDefault:!0},dt={mount:function(e){for(var n in Qt)Qt.hasOwnProperty(n)&&!(n in e)&&(e[n]=Qt[n]);We.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),We.push(e)},pluginEvent:function(e,n,o){var a=this;this.eventCanceled=!1,o.cancel=function(){a.eventCanceled=!0};var r=e+"Global";We.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][r]&&n[i.pluginName][r](ke({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](ke({sortable:n},o)))})},initializePlugins:function(e,n,o,a){We.forEach(function(s){var c=s.pluginName;if(!(!e.options[c]&&!s.initializeByDefault)){var l=new s(e,n,e.options);l.sortable=e,l.options=e.options,e[c]=l,Ce(o,l.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var i=this.modifyOption(e,r,e.options[r]);typeof i<"u"&&(e.options[r]=i)}},getEventProperties:function(e,n){var o={};return We.forEach(function(a){typeof a.eventProperties=="function"&&Ce(o,a.eventProperties.call(n[a.pluginName],e))}),o},modifyOption:function(e,n,o){var a;return We.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(a=r.optionListeners[n].call(e[r.pluginName],o))}),a}};function Di(t){var e=t.sortable,n=t.rootEl,o=t.name,a=t.targetEl,r=t.cloneEl,i=t.toEl,s=t.fromEl,c=t.oldIndex,l=t.newIndex,d=t.oldDraggableIndex,u=t.newDraggableIndex,h=t.originalEvent,m=t.putSortable,g=t.extraEventProperties;if(e=e||n&&n[fe],!!e){var v,p=e.options,w="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Ee&&!ut?v=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(o,!0,!0)),v.to=i||n,v.from=s||n,v.item=a||n,v.clone=r,v.oldIndex=c,v.newIndex=l,v.oldDraggableIndex=d,v.newDraggableIndex=u,v.originalEvent=h,v.pullMode=m?m.lastPutMode:void 0;var D=ke(ke({},g),dt.getEventProperties(o,e));for(var C in D)v[C]=D[C];n&&n.dispatchEvent(v),p[w]&&p[w].call(e,v)}}var Ci=["evt"],le=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.evt,r=gi(o,Ci);dt.pluginEvent.bind(T)(e,n,ke({dragEl:S,parentEl:K,ghostEl:$,rootEl:q,nextEl:$e,lastDownEl:Dt,cloneEl:G,cloneHidden:Ie,dragStarted:Je,putSortable:oe,activeSortable:T.active,originalEvent:a,oldIndex:Xe,oldDraggableIndex:ot,newIndex:ue,newDraggableIndex:Te,hideGhostForTarget:wo,unhideGhostForTarget:xo,cloneNowHidden:function(){Ie=!0},cloneNowShown:function(){Ie=!1},dispatchSortableEvent:function(s){ie({sortable:n,name:s,originalEvent:a})}},r))};function ie(t){Di(ke({putSortable:oe,cloneEl:G,targetEl:S,rootEl:q,oldIndex:Xe,oldDraggableIndex:ot,newIndex:ue,newDraggableIndex:Te},t))}var S,K,$,q,$e,Dt,G,Ie,Xe,ue,ot,Te,pt,oe,je=!1,Yt=!1,Pt=[],Ye,be,en,tn,Bn,Vn,Je,Be,at,rt=!1,gt=!1,Ct,ae,nn=[],hn=!1,$t=[],Wt=typeof document<"u",mt=uo,jn=ut||Ee?"cssFloat":"float",Ei=Wt&&!vi&&!uo&&"draggable"in document.createElement("div"),vo=function(){if(Wt){if(Ee)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),bo=function(e,n){var o=E(e),a=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=Ue(e,0,n),i=Ue(e,1,n),s=r&&E(r),c=i&&E(i),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+te(r).width,d=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+te(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var u=s.float==="left"?"left":"right";return i&&(c.clear==="both"||c.clear===u)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||l>=a&&o[jn]==="none"||i&&o[jn]==="none"&&l+d>a)?"vertical":"horizontal"},Ti=function(e,n,o){var a=o?e.left:e.top,r=o?e.right:e.bottom,i=o?e.width:e.height,s=o?n.left:n.top,c=o?n.right:n.bottom,l=o?n.width:n.height;return a===s||r===c||a+i/2===s+l/2},Ii=function(e,n){var o;return Pt.some(function(a){var r=a[fe].options.emptyInsertThreshold;if(!(!r||wn(a))){var i=te(a),s=e>=i.left-r&&e<=i.right+r,c=n>=i.top-r&&n<=i.bottom+r;if(s&&c)return o=a}}),o},yo=function(e){function n(r,i){return function(s,c,l,d){var u=s.options.group.name&&c.options.group.name&&s.options.group.name===c.options.group.name;if(r==null&&(i||u))return!0;if(r==null||r===!1)return!1;if(i&&r==="clone")return r;if(typeof r=="function")return n(r(s,c,l,d),i)(s,c,l,d);var h=(i?s:c).options.group.name;return r===!0||typeof r=="string"&&r===h||r.join&&r.indexOf(h)>-1}}var o={},a=e.group;(!a||_t(a)!="object")&&(a={name:a}),o.name=a.name,o.checkPull=n(a.pull,!0),o.checkPut=n(a.put),o.revertClone=a.revertClone,e.group=o},wo=function(){!vo&&$&&E($,"display","none")},xo=function(){!vo&&$&&E($,"display","")};Wt&&document.addEventListener("click",function(t){if(Yt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Yt=!1,!1},!0);var Pe=function(e){if(S){e=e.touches?e.touches[0]:e;var n=Ii(e.clientX,e.clientY);if(n){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[fe]._onDragOver(o)}}},Oi=function(e){S&&S.parentNode[fe]._isOutsideThisEl(e.target)};function T(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ce({},e),t[fe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return bo(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:T.supportPointer!==!1&&"PointerEvent"in window&&!tt,emptyInsertThreshold:5};dt.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);yo(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Ei,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?B(t,"pointerdown",this._onTapStart):(B(t,"mousedown",this._onTapStart),B(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(B(t,"dragover",this),B(t,"dragenter",this)),Pt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ce(this,Si())}T.prototype={constructor:T,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Be=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,o=this.el,a=this.options,r=a.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,d=a.filter;if(Fi(o),!S&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||a.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&tt&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=xe(c,a.draggable,o,!1),!(c&&c.animated)&&Dt!==c)){if(Xe=pe(c),ot=pe(c,a.draggable),typeof d=="function"){if(d.call(this,e,c,this)){ie({sortable:n,rootEl:l,name:"filter",targetEl:c,toEl:o,fromEl:o}),le("filter",n,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(u){if(u=xe(l,u.trim(),o,!1),u)return ie({sortable:n,rootEl:u,name:"filter",targetEl:c,fromEl:o,toEl:o}),le("filter",n,{evt:e}),!0}),d)){r&&e.cancelable&&e.preventDefault();return}a.handle&&!xe(l,a.handle,o,!1)||this._prepareDragStart(e,s,c)}}},_prepareDragStart:function(e,n,o){var a=this,r=a.el,i=a.options,s=r.ownerDocument,c;if(o&&!S&&o.parentNode===r){var l=te(o);if(q=r,S=o,K=S.parentNode,$e=S.nextSibling,Dt=o,pt=i.group,T.dragged=S,Ye={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},Bn=Ye.clientX-l.left,Vn=Ye.clientY-l.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",c=function(){if(le("delayEnded",a,{evt:e}),T.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Nn&&a.nativeDraggable&&(S.draggable=!0),a._triggerDragStart(e,n),ie({sortable:a,name:"choose",originalEvent:e}),ce(S,i.chosenClass,!0)},i.ignore.split(",").forEach(function(d){ho(S,d.trim(),on)}),B(s,"dragover",Pe),B(s,"mousemove",Pe),B(s,"touchmove",Pe),B(s,"mouseup",a._onDrop),B(s,"touchend",a._onDrop),B(s,"touchcancel",a._onDrop),Nn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),le("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ut||Ee))){if(T.eventCanceled){this._onDrop();return}B(s,"mouseup",a._disableDelayedDrag),B(s,"touchend",a._disableDelayedDrag),B(s,"touchcancel",a._disableDelayedDrag),B(s,"mousemove",a._delayedDragTouchMoveHandler),B(s,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&B(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(c,i.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&on(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?B(document,"pointermove",this._onTouchMove):n?B(document,"touchmove",this._onTouchMove):B(document,"mousemove",this._onTouchMove):(B(S,"dragend",this),B(q,"dragstart",this._onDragStart));try{document.selection?Et(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(je=!1,q&&S){le("dragStarted",this,{evt:n}),this.nativeDraggable&&B(document,"dragover",Oi);var o=this.options;!e&&ce(S,o.dragClass,!1),ce(S,o.ghostClass,!0),T.active=this,e&&this._appendGhost(),ie({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(be){this._lastX=be.clientX,this._lastY=be.clientY,wo();for(var e=document.elementFromPoint(be.clientX,be.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(be.clientX,be.clientY),e!==n);)n=e;if(S.parentNode[fe]._isOutsideThisEl(e),n)do{if(n[fe]){var o=void 0;if(o=n[fe]._onDragOver({clientX:be.clientX,clientY:be.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);xo()}},_onTouchMove:function(e){if(Ye){var n=this.options,o=n.fallbackTolerance,a=n.fallbackOffset,r=e.touches?e.touches[0]:e,i=$&&He($,!0),s=$&&i&&i.a,c=$&&i&&i.d,l=mt&&ae&&Wn(ae),d=(r.clientX-Ye.clientX+a.x)/(s||1)+(l?l[0]-nn[0]:0)/(s||1),u=(r.clientY-Ye.clientY+a.y)/(c||1)+(l?l[1]-nn[1]:0)/(c||1);if(!T.active&&!je){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if($){i?(i.e+=d-(en||0),i.f+=u-(tn||0)):i={a:1,b:0,c:0,d:1,e:d,f:u};var h="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");E($,"webkitTransform",h),E($,"mozTransform",h),E($,"msTransform",h),E($,"transform",h),en=d,tn=u,be=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!$){var e=this.options.fallbackOnBody?document.body:q,n=te(S,!0,mt,!0,e),o=this.options;if(mt){for(ae=e;E(ae,"position")==="static"&&E(ae,"transform")==="none"&&ae!==document;)ae=ae.parentNode;ae!==document.body&&ae!==document.documentElement?(ae===document&&(ae=Se()),n.top+=ae.scrollTop,n.left+=ae.scrollLeft):ae=Se(),nn=Wn(ae)}$=S.cloneNode(!0),ce($,o.ghostClass,!1),ce($,o.fallbackClass,!0),ce($,o.dragClass,!0),E($,"transition",""),E($,"transform",""),E($,"box-sizing","border-box"),E($,"margin",0),E($,"top",n.top),E($,"left",n.left),E($,"width",n.width),E($,"height",n.height),E($,"opacity","0.8"),E($,"position",mt?"absolute":"fixed"),E($,"zIndex","100000"),E($,"pointerEvents","none"),T.ghost=$,e.appendChild($),E($,"transform-origin",Bn/parseInt($.style.width)*100+"% "+Vn/parseInt($.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,a=e.dataTransfer,r=o.options;if(le("dragStart",this,{evt:e}),T.eventCanceled){this._onDrop();return}le("setupClone",this),T.eventCanceled||(G=mo(S),G.draggable=!1,G.style["will-change"]="",this._hideClone(),ce(G,this.options.chosenClass,!1),T.clone=G),o.cloneId=Et(function(){le("clone",o),!T.eventCanceled&&(o.options.removeCloneOnHide||q.insertBefore(G,S),o._hideClone(),ie({sortable:o,name:"clone"}))}),!n&&ce(S,r.dragClass,!0),n?(Yt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(F(document,"mouseup",o._onDrop),F(document,"touchend",o._onDrop),F(document,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(o,a,S)),B(document,"drop",o),E(S,"transform","translateZ(0)")),je=!0,o._dragStartId=Et(o._dragStarted.bind(o,n,e)),B(document,"selectstart",o),Je=!0,tt&&E(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,a,r,i,s=this.options,c=s.group,l=T.active,d=pt===c,u=s.sort,h=oe||l,m,g=this,v=!1;if(hn)return;function p(se,me){le(se,g,ke({evt:e,isOwner:d,axis:m?"vertical":"horizontal",revert:i,dragRect:a,targetRect:r,canSort:u,fromSortable:h,target:o,completed:D,onMove:function(ne,Ae){return vt(q,n,S,a,ne,te(ne),e,Ae)},changed:C},me))}function w(){p("dragOverAnimationCapture"),g.captureAnimationState(),g!==h&&h.captureAnimationState()}function D(se){return p("dragOverCompleted",{insertion:se}),se&&(d?l._hideClone():l._showClone(g),g!==h&&(ce(S,oe?oe.options.ghostClass:l.options.ghostClass,!1),ce(S,s.ghostClass,!0)),oe!==g&&g!==T.active?oe=g:g===T.active&&oe&&(oe=null),h===g&&(g._ignoreWhileAnimating=o),g.animateAll(function(){p("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(o===S&&!S.animated||o===n&&!o.animated)&&(Be=null),!s.dragoverBubble&&!e.rootEl&&o!==document&&(S.parentNode[fe]._isOutsideThisEl(e.target),!se&&Pe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function C(){ue=pe(S),Te=pe(S,s.draggable),ie({sortable:g,name:"change",toEl:n,newIndex:ue,newDraggableIndex:Te,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=xe(o,s.draggable,n,!0),p("dragOver"),T.eventCanceled)return v;if(S.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||g._ignoreWhileAnimating===o)return D(!1);if(Yt=!1,l&&!s.disabled&&(d?u||(i=K!==q):oe===this||(this.lastPutMode=pt.checkPull(this,l,S,e))&&c.checkPut(this,l,S,e))){if(m=this._getDirection(e,o)==="vertical",a=te(S),p("dragOverValid"),T.eventCanceled)return v;if(i)return K=q,w(),this._hideClone(),p("revert"),T.eventCanceled||($e?q.insertBefore(S,$e):q.appendChild(S)),D(!0);var M=wn(n,s.draggable);if(!M||Pi(e,m,this)&&!M.animated){if(M===S)return D(!1);if(M&&n===e.target&&(o=M),o&&(r=te(o)),vt(q,n,S,a,o,r,e,!!o)!==!1)return w(),n.appendChild(S),K=n,C(),D(!0)}else if(M&&Yi(e,m,this)){var y=Ue(n,0,s,!0);if(y===S)return D(!1);if(o=y,r=te(o),vt(q,n,S,a,o,r,e,!1)!==!1)return w(),n.insertBefore(S,y),K=n,C(),D(!0)}else if(o.parentNode===n){r=te(o);var A=0,k,x=S.parentNode!==n,_=!Ti(S.animated&&S.toRect||a,o.animated&&o.toRect||r,m),j=m?"top":"left",I=Rn(o,"top","top")||Rn(S,"top","top"),N=I?I.scrollTop:void 0;Be!==o&&(k=r[j],rt=!1,gt=!_&&s.invertSwap||x),A=$i(e,o,r,m,_?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,gt,Be===o);var P;if(A!==0){var R=pe(S);do R-=A,P=K.children[R];while(P&&(E(P,"display")==="none"||P===$))}if(A===0||P===o)return D(!1);Be=o,at=A;var Q=o.nextElementSibling,U=!1;U=A===1;var ge=vt(q,n,S,a,o,r,e,U);if(ge!==!1)return(ge===1||ge===-1)&&(U=ge===1),hn=!0,setTimeout(Ai,30),w(),U&&!Q?n.appendChild(S):o.parentNode.insertBefore(S,U?Q:o),I&&go(I,0,N-I.scrollTop),K=S.parentNode,k!==void 0&&!gt&&(Ct=Math.abs(k-te(o)[j])),C(),D(!0)}if(n.contains(S))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",Pe),F(document,"mousemove",Pe),F(document,"touchmove",Pe)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(ue=pe(S),Te=pe(S,o.draggable),le("drop",this,{evt:e}),K=S&&S.parentNode,ue=pe(S),Te=pe(S,o.draggable),T.eventCanceled){this._nulling();return}je=!1,gt=!1,rt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pn(this.cloneId),pn(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),tt&&E(document.body,"user-select",""),E(S,"transform",""),e&&(Je&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),$&&$.parentNode&&$.parentNode.removeChild($),(q===K||oe&&oe.lastPutMode!=="clone")&&G&&G.parentNode&&G.parentNode.removeChild(G),S&&(this.nativeDraggable&&F(S,"dragend",this),on(S),S.style["will-change"]="",Je&&!je&&ce(S,oe?oe.options.ghostClass:this.options.ghostClass,!1),ce(S,this.options.chosenClass,!1),ie({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),q!==K?(ue>=0&&(ie({rootEl:K,name:"add",toEl:K,fromEl:q,originalEvent:e}),ie({sortable:this,name:"remove",toEl:K,originalEvent:e}),ie({rootEl:K,name:"sort",toEl:K,fromEl:q,originalEvent:e}),ie({sortable:this,name:"sort",toEl:K,originalEvent:e})),oe&&oe.save()):ue!==Xe&&ue>=0&&(ie({sortable:this,name:"update",toEl:K,originalEvent:e}),ie({sortable:this,name:"sort",toEl:K,originalEvent:e})),T.active&&((ue==null||ue===-1)&&(ue=Xe,Te=ot),ie({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){le("nulling",this),q=S=K=$=$e=G=Dt=Ie=Ye=be=Je=ue=Te=Xe=ot=Be=at=oe=pt=T.dragged=T.ghost=T.clone=T.active=null,$t.forEach(function(e){e.checked=!0}),$t.length=en=tn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Mi(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,a=0,r=o.length,i=this.options;a<r;a++)n=o[a],xe(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||Ni(n));return e},sort:function(e,n){var o={},a=this.el;this.toArray().forEach(function(r,i){var s=a.children[i];xe(s,this.options.draggable,a,!1)&&(o[r]=s)},this),n&&this.captureAnimationState(),e.forEach(function(r){o[r]&&(a.removeChild(o[r]),a.appendChild(o[r]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return xe(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var a=dt.modifyOption(this,e,n);typeof a<"u"?o[e]=a:o[e]=n,e==="group"&&yo(o)},destroy:function(){le("destroy",this);var e=this.el;e[fe]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Pt.splice(Pt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ie){if(le("hideClone",this),T.eventCanceled)return;E(G,"display","none"),this.options.removeCloneOnHide&&G.parentNode&&G.parentNode.removeChild(G),Ie=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Ie){if(le("showClone",this),T.eventCanceled)return;S.parentNode==q&&!this.options.group.revertClone?q.insertBefore(G,S):$e?q.insertBefore(G,$e):q.appendChild(G),this.options.group.revertClone&&this.animate(S,G),E(G,"display",""),Ie=!1}}};function Mi(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function vt(t,e,n,o,a,r,i,s){var c,l=t[fe],d=l.options.onMove,u;return window.CustomEvent&&!Ee&&!ut?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=n,c.draggedRect=o,c.related=a||e,c.relatedRect=r||te(e),c.willInsertAfter=s,c.originalEvent=i,t.dispatchEvent(c),d&&(u=d.call(l,c,i)),u}function on(t){t.draggable=!1}function Ai(){hn=!1}function Yi(t,e,n){var o=te(Ue(n.el,0,n.options,!0)),a=10;return e?t.clientX<o.left-a||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-a||t.clientY<o.bottom&&t.clientX<o.left}function Pi(t,e,n){var o=te(wn(n.el,n.options.draggable)),a=10;return e?t.clientX>o.right+a||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+a}function $i(t,e,n,o,a,r,i,s){var c=o?t.clientY:t.clientX,l=o?n.height:n.width,d=o?n.top:n.left,u=o?n.bottom:n.right,h=!1;if(!i){if(s&&Ct<l*a){if(!rt&&(at===1?c>d+l*r/2:c<u-l*r/2)&&(rt=!0),rt)h=!0;else if(at===1?c<d+Ct:c>u-Ct)return-at}else if(c>d+l*(1-a)/2&&c<u-l*(1-a)/2)return Li(e)}return h=h||i,h&&(c<d+l*r/2||c>u-l*r/2)?c>d+l/2?1:-1:0}function Li(t){return pe(S)<pe(t)?1:-1}function Ni(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function Fi(t){$t.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&$t.push(o)}}function Et(t){return setTimeout(t,0)}function pn(t){return clearTimeout(t)}Wt&&B(document,"touchmove",function(t){(T.active||je)&&t.cancelable&&t.preventDefault()});T.utils={on:B,off:F,css:E,find:ho,is:function(e,n){return!!xe(e,n,e,!1)},extend:wi,throttle:po,closest:xe,toggleClass:ce,clone:mo,index:pe,nextTick:Et,cancelNextTick:pn,detectDirection:bo,getChild:Ue};T.get=function(t){return t[fe]};T.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(T.utils=ke(ke({},T.utils),o.utils)),dt.mount(o)})};T.create=function(t,e){return new T(t,e)};T.version=mi;var Z=[],Ze,gn,mn=!1,an,rn,Lt,Qe;function Ri(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):this.options.supportPointer?B(document,"pointermove",this._handleFallbackAutoScroll):o.touches?B(document,"touchmove",this._handleFallbackAutoScroll):B(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),zn(),Tt(),xi()},nulling:function(){Lt=gn=Ze=mn=Qe=an=rn=null,Z.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var a=this,r=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(r,i);if(Lt=n,o||this.options.forceAutoScrollFallback||ut||Ee||tt){sn(n,this.options,s,o);var c=Oe(s,!0);mn&&(!Qe||r!==an||i!==rn)&&(Qe&&zn(),Qe=setInterval(function(){var l=Oe(document.elementFromPoint(r,i),!0);l!==c&&(c=l,Tt()),sn(n,a.options,l,o)},10),an=r,rn=i)}else{if(!this.options.bubbleScroll||Oe(s,!0)===Se()){Tt();return}sn(n,this.options,Oe(s,!1),!1)}}},Ce(t,{pluginName:"scroll",initializeByDefault:!0})}function Tt(){Z.forEach(function(t){clearInterval(t.pid)}),Z=[]}function zn(){clearInterval(Qe)}var sn=po(function(t,e,n,o){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,c=Se(),l=!1,d;gn!==n&&(gn=n,Tt(),Ze=e.scroll,d=e.scrollFn,Ze===!0&&(Ze=Oe(n,!0)));var u=0,h=Ze;do{var m=h,g=te(m),v=g.top,p=g.bottom,w=g.left,D=g.right,C=g.width,M=g.height,y=void 0,A=void 0,k=m.scrollWidth,x=m.scrollHeight,_=E(m),j=m.scrollLeft,I=m.scrollTop;m===c?(y=C<k&&(_.overflowX==="auto"||_.overflowX==="scroll"||_.overflowX==="visible"),A=M<x&&(_.overflowY==="auto"||_.overflowY==="scroll"||_.overflowY==="visible")):(y=C<k&&(_.overflowX==="auto"||_.overflowX==="scroll"),A=M<x&&(_.overflowY==="auto"||_.overflowY==="scroll"));var N=y&&(Math.abs(D-a)<=i&&j+C<k)-(Math.abs(w-a)<=i&&!!j),P=A&&(Math.abs(p-r)<=i&&I+M<x)-(Math.abs(v-r)<=i&&!!I);if(!Z[u])for(var R=0;R<=u;R++)Z[R]||(Z[R]={});(Z[u].vx!=N||Z[u].vy!=P||Z[u].el!==m)&&(Z[u].el=m,Z[u].vx=N,Z[u].vy=P,clearInterval(Z[u].pid),(N!=0||P!=0)&&(l=!0,Z[u].pid=setInterval((function(){o&&this.layer===0&&T.active._onTouchMove(Lt);var Q=Z[this.layer].vy?Z[this.layer].vy*s:0,U=Z[this.layer].vx?Z[this.layer].vx*s:0;typeof d=="function"&&d.call(T.dragged.parentNode[fe],U,Q,t,Lt,Z[this.layer].el)!=="continue"||go(Z[this.layer].el,U,Q)}).bind({layer:u}),24))),u++}while(e.bubbleScroll&&h!==c&&(h=Oe(h,!1)));mn=l}},30),So=function(e){var n=e.originalEvent,o=e.putSortable,a=e.dragEl,r=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(n){var l=o||r;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,u=document.elementFromPoint(d.clientX,d.clientY);c(),l&&!l.el.contains(u)&&(i("spill"),this.onSpill({dragEl:a,putSortable:o}))}};function xn(){}xn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var a=Ue(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:So};Ce(xn,{pluginName:"revertOnSpill"});function Sn(){}Sn.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,a=o||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:So};Ce(Sn,{pluginName:"removeOnSpill"});T.mount(new Ri);T.mount(Sn,xn);function ln(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function Xn(t,e,n){const o=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,o)}function Wi(){return typeof window<"u"?window.console:global.console}const Bi=Wi();function Vi(t){const e=Object.create(null);return function(o){return e[o]||(e[o]=t(o))}}const ji=/-(\w)/g,zi=Vi(t=>t.replace(ji,(e,n)=>n.toUpperCase())),ko=["Start","Add","Remove","Update","End"],_o=["Choose","Unchoose","Sort","Filter","Clone"],Do=["Move"],Xi=[Do,ko,_o].flatMap(t=>t).map(t=>`on${t}`),vn={manage:Do,manageAndEmit:ko,emit:_o};function Hi(t){return Xi.indexOf(t)!==-1}const Ui=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function qi(t){return Ui.includes(t)}function Ki(t){return["transition-group","TransitionGroup"].includes(t)}function Co(t){return["id","class","role","style"].includes(t)||t.startsWith("data-")||t.startsWith("aria-")||t.startsWith("on")}function Eo(t){return t.reduce((e,[n,o])=>(e[n]=o,e),{})}function Gi({$attrs:t,componentData:e={}}){return{...Eo(Object.entries(t).filter(([o,a])=>Co(o))),...e}}function Ji({$attrs:t,callBackBuilder:e}){const n=Eo(To(t));Object.entries(e).forEach(([a,r])=>{vn[a].forEach(i=>{n[`on${i}`]=r(i)})});const o=`[data-draggable]${n.draggable||""}`;return{...n,draggable:o}}function To(t){return Object.entries(t).filter(([e,n])=>!Co(e)).map(([e,n])=>[zi(e),n]).filter(([e,n])=>!Hi(e))}const Hn=({el:t})=>t,Zi=(t,e)=>t.__draggable_context=e,Un=t=>t.__draggable_context;class Qi{constructor({nodes:{header:e,default:n,footer:o},root:a,realList:r}){this.defaultNodes=n,this.children=[...e,...n,...o],this.externalComponent=a.externalComponent,this.rootTransition=a.transition,this.tag=a.tag,this.realList=r}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(e,n){const{tag:o,children:a,_isRootComponent:r}=this;return e(o,n,r?{default:()=>a}:a)}updated(){const{defaultNodes:e,realList:n}=this;e.forEach((o,a)=>{Zi(Hn(o),{element:n[a],index:a})})}getUnderlyingVm(e){return Un(e)}getVmIndexFromDomIndex(e,n){const{defaultNodes:o}=this,{length:a}=o,r=n.children,i=r.item(e);if(i===null)return a;const s=Un(i);if(s)return s.index;if(a===0)return 0;const c=Hn(o[0]),l=[...r].findIndex(d=>d===c);return e<l?0:a}}function es(t,e){const n=t[e];return n?n():[]}function ts({$slots:t,realList:e,getKey:n}){const o=e||[],[a,r]=["header","footer"].map(c=>es(t,c)),{item:i}=t;if(!i)throw new Error("draggable element must have an item slot");const s=o.flatMap((c,l)=>i({element:c,index:l}).map(d=>(d.key=n(c),d.props={...d.props||{},"data-draggable":!0},d)));if(s.length!==o.length)throw new Error("Item slot must have only one child");return{header:a,footer:r,default:s}}function ns(t){const e=Ki(t),n=!qi(t)&&!e;return{transition:e,externalComponent:n,tag:n?Uo(t):e?qo:t}}function os({$slots:t,tag:e,realList:n,getKey:o}){const a=ts({$slots:t,realList:n,getKey:o}),r=ns(e);return new Qi({nodes:a,root:r,realList:n})}function Io(t,e){_e(()=>this.$emit(t.toLowerCase(),e))}function Oo(t){return(e,n)=>{if(this.realList!==null)return this[`onDrag${t}`](e,n)}}function as(t){const e=Oo.call(this,t);return(n,o)=>{e.call(this,n,o),Io.call(this,t,n)}}let cn=null;const rs={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},is=["update:modelValue","change",...[...vn.manageAndEmit,...vn.emit].map(t=>t.toLowerCase())],ss=qe({name:"draggable",inheritAttrs:!1,props:rs,emits:is,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:t,$attrs:e,tag:n,componentData:o,realList:a,getKey:r}=this,i=os({$slots:t,tag:n,realList:a,getKey:r});this.componentStructure=i;const s=Gi({$attrs:e,componentData:o});return i.render(it,s)}catch(t){return this.error=!0,it("pre",{style:{color:"red"}},t.stack)}},created(){this.list!==null&&this.modelValue!==null&&Bi.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:t,$el:e,componentStructure:n}=this;n.updated();const o=Ji({$attrs:t,callBackBuilder:{manageAndEmit:r=>as.call(this,r),emit:r=>Io.bind(this,r),manage:r=>Oo.call(this,r)}}),a=e.nodeType===1?e:e.parentElement;this._sortable=new T(a,o),this.targetDomElement=a,a.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList(){const{list:t}=this;return t||this.modelValue},getKey(){const{itemKey:t}=this;return typeof t=="function"?t:e=>e[t]}},watch:{$attrs:{handler(t){const{_sortable:e}=this;e&&To(t).forEach(([n,o])=>{e.option(n,o)})},deep:!0}},methods:{getUnderlyingVm(t){return this.componentStructure.getUnderlyingVm(t)||null},getUnderlyingPotencialDraggableComponent(t){return t.__draggable_component__},emitChanges(t){_e(()=>this.$emit("change",t))},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=o=>o.splice(e,0,o.splice(t,1)[0]);this.alterList(n)},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};const o=n.realList,a={list:o,component:n};return t!==e&&o?{...n.getUnderlyingVm(e)||{},...a}:a},getVmIndexFromDomIndex(t){return this.componentStructure.getVmIndexFromDomIndex(t,this.targetDomElement)},onDragStart(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),cn=t.item},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;ln(t.item);const n=this.getVmIndexFromDomIndex(t.newIndex);this.spliceList(n,0,e);const o={element:e,newIndex:n};this.emitChanges({added:o})},onDragRemove(t){if(Xn(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){ln(t.clone);return}const{index:e,element:n}=this.context;this.spliceList(e,1);const o={element:n,oldIndex:e};this.emitChanges({removed:o})},onDragUpdate(t){ln(t.item),Xn(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndexFromDomIndex(t.newIndex);this.updatePosition(e,n);const o={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:o})},computeFutureIndex(t,e){if(!t.element)return 0;const n=[...e.to.children].filter(i=>i.style.display!=="none"),o=n.indexOf(e.related),a=t.component.getVmIndexFromDomIndex(o);return n.indexOf(cn)!==-1||!e.willInsertAfter?a:a+1},onDragMove(t,e){const{move:n,realList:o}=this;if(!n||!o)return!0;const a=this.getRelatedContextFromMoveEvent(t),r=this.computeFutureIndex(a,t),i={...this.context,futureIndex:r},s={...t,relatedContext:a,draggedContext:i};return n(s,e)},onDragEnd(){cn=null}}}),ls={class:"stock-page"},cs={class:"action-buttons"},us={class:"stock-content"},ds={class:"stock-indicator"},fs={class:"kd-indicator"},hs={class:"rsi-indicator"},ps={class:"rsi-value"},gs={__name:"Stock",setup(t){const e=Nt(),n=to("stock-search");W(null),W(null),W(0);const o=W(!1),a=W(null),r=W(null),i=W(null),s=re({get(){return e.userStockList},set(){}});function c(k){if(k.moved){const{element:x,newIndex:_,oldIndex:j}=k.moved;console.log("[onDragChange] 事件",{movedStock:x,newIndex:_,oldIndex:j,evt:k,userStockList:e.userStockList.map(P=>({id:P.id,order:P.order}))});const I=e.userStockList.filter(P=>P.id!==x.id);let N;if(_===0){const P=I[0]?.order||2e3;if(N=Math.floor(P/2),P<100){console.log("[onDragChange] 第一位間隔太小，觸發重新排序",{movedStock:x,firstOrder:P,newOrder:N,originalList:I.map(R=>({id:R.id,order:R.order}))}),e.updateStockList(e.userStockList);return}console.log("[onDragChange] 移到第一位",{movedStock:x,firstOrder:P,newOrder:N,originalList:I.map(R=>({id:R.id,order:R.order}))})}else if(_===I.length){const P=I[I.length-1]?.order||0;N=P+1e3,console.log("[onDragChange] 移到最後一位",{movedStock:x,lastOrder:P,newOrder:N,originalList:I.map(R=>({id:R.id,order:R.order}))})}else{const P=I[_-1]?.order||0,R=I[_]?.order||P+2e3,Q=Math.floor((P+R)/2);if(console.log("[onDragChange] 移到中間",{movedStock:x,prevOrder:P,nextOrder:R,midOrder:Q,originalList:I.map(U=>({id:U.id,order:U.order}))}),R-P<100){console.log("[onDragChange] 間隔太小，觸發重新排序",{movedStock:x,prevOrder:P,nextOrder:R,originalList:I.map(U=>({id:U.id,order:U.order}))}),e.updateStockList(e.userStockList);return}N=Q}console.log("[onDragChange] 最終更新",{movedStock:x,newOrder:N}),e.updateSingleStockOrder(x.id,N)}}function l(){n.emit(!0)}function d(k,x){console.log(`Stock ${x} indicator changed to ${k}`)}function u(k){return k>0?"price-up":k<0?"price-down":"price-flat"}const h=re(()=>a.value?[{name:`K 值: ${a.value.k}`,subname:"快線指標 (敏感度高)",color:"#4286f5"},{name:`D 值: ${a.value.d}`,subname:"慢線指標 (敏感度低)",color:"#e75c9a"},{name:`J 值: ${a.value.j}`,subname:"超買超賣指標",color:"#666"},{name:`更新時間: ${a.value.date}`,subname:"週線資料最後更新",color:"#999"}]:[]);function m(k){a.value=k,o.value=!0}function g(k){console.log("KDJ ActionSheet 選擇:",k.name),o.value=!1,k.name.includes("K 值")?de("K 值反映股價短期波動"):k.name.includes("D 值")?de("D 值是 K 值的移動平均"):k.name.includes("J 值")&&de("J 值 > 80 超買，< 20 超賣")}function v(k){return k>70?"rsi-overbought":k<30?"rsi-oversold":"rsi-normal"}function p(k){return k>70?"超買":k<30?"超賣":"正常"}function w(){}function D(k){i.value=k,_e(()=>{r.value?.showTradeSheet()})}function C(k){i.value=k,_e(()=>{r.value?.showStrategySheet()})}function M(k){i.value=k,_e(()=>{r.value?.showMoreSheet()})}function y(k){setTimeout(()=>{const x=document.querySelector(".stock-row.sortable-chosen");if(x){const _=x.querySelector("canvas"),j=document.querySelector(".stock-row.sortable-drag");if(_&&j){const I=j.querySelector("canvas");if(I&&_.width&&_.height){I.width=_.width,I.height=_.height;const N=I.getContext("2d");N.clearRect(0,0,I.width,I.height),N.drawImage(_,0,0)}}}},0)}function A(k){console.log("拖曳結束",k)}return Ko(document,"visibilitychange",()=>{}),lt(()=>{}),(k,x)=>(z(),H("div",ls,[L(X(ss),{modelValue:s.value,"onUpdate:modelValue":x[1]||(x[1]=_=>s.value=_),"item-key":"id",delay:200,animation:200,"ghost-class":"stock-row-ghost",onStart:y,onEnd:A,onChange:c},{item:ee(({element:_,index:j})=>[f("div",{class:"stock-row",onContextmenu:x[0]||(x[0]=Go(()=>{},["prevent"]))},[L(X(xa),{"left-width":200,onClickLeft:w},{left:ee(()=>[f("div",cs,[L(X(Ne),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:I=>D(_)},{default:ee(()=>x[3]||(x[3]=[f("div",null,"交 易",-1),f("div",null,"記 錄",-1)])),_:2,__:[3]},1032,["onClick"]),L(X(Ne),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:I=>C(_)},{default:ee(()=>x[4]||(x[4]=[ze("策 略",-1)])),_:2,__:[4]},1032,["onClick"]),L(X(Ne),{type:"default",size:"small",class:"action-btn other-btn",onClick:I=>M(_)},{default:ee(()=>x[5]||(x[5]=[ze("更 多",-1)])),_:2,__:[5]},1032,["onClick"])])]),default:ee(()=>[f("div",us,[L(_r,{name:_.name,code:_.code,price:_.price,change:_.change,"change-percent":_.changePercent,"price-class":u(_.change),progress:_.progress,"progress-text":_.progressText},null,8,["name","code","price","change","change-percent","price-class","progress","progress-text"]),f("div",ds,[L(X(la),{"show-indicators":!1,loop:!1,autoplay:0,onChange:I=>d(I,j)},{default:ee(()=>[L(X(En),{class:"indicator-content"},{default:ee(()=>[f("div",fs,[L(pr,{width:120,height:60,"stock-id":_.id,onKdjClick:m},null,8,["stock-id"])])]),_:2},1024),L(X(En),{class:"indicator-content"},{default:ee(()=>[f("div",hs,[f("div",ps,V(_.rsi),1),f("div",{class:st(["rsi-trend",v(_.rsi)])},V(p(_.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],32)]),_:1},8,["modelValue"]),L(X(fa),{axis:"xy",magnetic:"x",gap:{x:20,y:80},style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"rgba(255, 224, 102, 0.9)","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:l},{default:ee(()=>x[6]||(x[6]=[f("div",{class:"bubble-content",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24"},[f("path",{fill:"#322b0d","fill-rule":"evenodd",d:"M13 13v7a1 1 0 0 1-2 0v-7H4a1 1 0 0 1 0-2h7V4a1 1 0 0 1 2 0v7h7a1 1 0 0 1 0 2z"})]),f("span",{class:"bubble-label",style:{color:"#322b0d","font-size":"14px"}},"新增")],-1)])),_:1,__:[6]}),L($a),L(X(Le),{show:o.value,"onUpdate:show":x[2]||(x[2]=_=>o.value=_),actions:h.value,"cancel-text":"取消",title:"KDJ 指標詳情",onSelect:g},null,8,["show","actions"]),i.value?(z(),Ft(fi,{key:0,ref_key:"stockActionsRef",ref:r,"stock-info":i.value},null,8,["stock-info"])):et("",!0)]))}},ks=Rt(gs,[["__scopeId","data-v-599d4758"]]);export{ks as default};
