import{G as A,Q as me,d as N,D as I,m as x,c as j,a as Y,R as wn,k as o,e as ce,t as q,S as Ge,U as Pn,V as Ze,J as U,W as ne,H as D,C as J,X as _n,h as Je,Y as Qe,f as Q,Z as Bn,r as L,u as ze,$ as Oe,T as Xe,a0 as Tn,a1 as T,j as Le,v as pe,l as K,o as Ie,g as zn,a2 as Ce,a3 as On,n as ee,a4 as en,a5 as nn,a6 as Ln,a7 as $n,i as tn,a8 as En,a9 as An,aa as Vn,ab as Rn,ac as an,K as Mn,ad as Dn,ae as Nn,af as jn,ag as Re,y as xe,ah as qn,ai as Fn,aj as Un,ak as Kn,q as Te,al as Wn,am as on,an as Hn,x as ae,N as V,ao as _e,z as se,ap as Me,A as Yn,B as Z,aq as De,O as be,P as ke}from"./index-CDtZPptw.js";import{u as Gn}from"./use-touch-DLsMWnoZ.js";function we(e){const n=me();n&&A(n.proxy,e)}let Zn=2e3;const Jn=()=>++Zn,[Qn,ge]=j("loading"),Xn=Array(12).fill(null).map((e,n)=>o("i",{class:ge("line",String(n+1))},null)),pn=o("svg",{class:ge("circular"),viewBox:"25 25 50 50"},[o("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),et={size:I,type:x("circular"),color:String,vertical:Boolean,textSize:I,textColor:String};var nt=N({name:Qn,props:et,setup(e,{slots:n}){const a=Y(()=>A({color:e.color},wn(e.size))),s=()=>{const i=e.type==="spinner"?Xn:pn;return o("span",{class:ge("spinner",e.type),style:a.value},[n.icon?n.icon():i])},l=()=>{var i;if(n.default)return o("span",{class:ge("text"),style:{fontSize:ce(e.textSize),color:(i=e.textColor)!=null?i:e.color}},[n.default()])};return()=>{const{type:i,vertical:g}=e;return o("div",{class:ge([i,{vertical:g}]),"aria-live":"polite","aria-busy":!0},[s(),l()])}}});const ln=q(nt),[tt,oe]=j("button"),at=A({},Ze,{tag:x("button"),text:String,icon:String,type:x("default"),size:x("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:x("button"),loadingSize:I,loadingText:String,loadingType:String,iconPosition:x("left")});var ot=N({name:tt,props:at,emits:["click"],setup(e,{emit:n,slots:a}){const s=Ge(),l=()=>a.loading?a.loading():o(ln,{size:e.loadingSize,type:e.loadingType,class:oe("loading")},null),i=()=>{if(e.loading)return l();if(a.icon)return o("div",{class:oe("icon")},[a.icon()]);if(e.icon)return o(U,{name:e.icon,class:oe("icon"),classPrefix:e.iconPrefix},null)},g=()=>{let r;if(e.loading?r=e.loadingText:r=a.default?a.default():e.text,r)return o("span",{class:oe("text")},[r])},m=()=>{const{color:r,plain:c}=e;if(r){const d={color:c?r:"white"};return c||(d.background=r),r.includes("gradient")?d.border=0:d.borderColor=r,d}},u=r=>{e.loading?ne(r):e.disabled||(n("click",r),s())};return()=>{const{tag:r,type:c,size:d,block:b,round:S,plain:w,square:C,loading:f,disabled:_,hairline:z,nativeType:W,iconPosition:$}=e,v=[oe([c,d,{plain:w,block:b,round:S,square:C,loading:f,disabled:_,hairline:z}]),{[Pn]:z}];return o(r,{type:W,class:v,style:m(),disabled:_,onClick:u},{default:()=>[o("div",{class:oe("content")},[$==="left"&&i(),g(),$==="right"&&i()])]})}}});const Ne=q(ot),lt={show:Boolean,zIndex:I,overlay:D,duration:I,teleport:[String,Object],lockScroll:D,lazyRender:D,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:J,transitionAppear:Boolean,closeOnClickOverlay:D};let ue=0;const je="van-overflow-hidden";function it(e,n){const a=Gn(),s="01",l="10",i=c=>{a.move(c);const d=a.deltaY.value>0?l:s,b=Bn(c.target,e.value),{scrollHeight:S,offsetHeight:w,scrollTop:C}=b;let f="11";C===0?f=w>=S?"00":"01":C+w>=S&&(f="10"),f!=="11"&&a.isVertical()&&!(parseInt(f,2)&parseInt(d,2))&&ne(c,!0)},g=()=>{document.addEventListener("touchstart",a.start),document.addEventListener("touchmove",i,{passive:!1}),ue||document.body.classList.add(je),ue++},m=()=>{ue&&(document.removeEventListener("touchstart",a.start),document.removeEventListener("touchmove",i),ue--,ue||document.body.classList.remove(je))},u=()=>n()&&g(),r=()=>n()&&m();_n(u),Je(r),Qe(r),Q(n,c=>{c?g():m()})}function rn(e){const n=L(!1);return Q(e,a=>{a&&(n.value=a)},{immediate:!0}),a=>()=>n.value?a():null}const qe=()=>{var e;const{scopeId:n}=((e=me())==null?void 0:e.vnode)||{};return n?{[n]:""}:null},[rt,ct]=j("overlay"),st={show:Boolean,zIndex:I,duration:I,className:J,lockScroll:D,lazyRender:D,customStyle:Object,teleport:[String,Object]};var ut=N({name:rt,inheritAttrs:!1,props:st,setup(e,{attrs:n,slots:a}){const s=L(),l=rn(()=>e.show||!e.lazyRender),i=m=>{e.lockScroll&&ne(m,!0)},g=l(()=>{var m;const u=A(Tn(e.zIndex),e.customStyle);return T(e.duration)&&(u.animationDuration=`${e.duration}s`),Le(o("div",K({ref:s,style:u,class:[ct(),e.className]},n),[(m=a.default)==null?void 0:m.call(a)]),[[pe,e.show]])});return ze("touchmove",i,{target:s}),()=>{const m=o(Oe,{name:"van-fade",appear:!0},{default:g});return e.teleport?o(Xe,{to:e.teleport},{default:()=>[m]}):m}}});const dt=q(ut),ft=A({},lt,{round:Boolean,position:x("center"),closeIcon:x("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:x("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[gt,Fe]=j("popup");var mt=N({name:gt,inheritAttrs:!1,props:ft,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:n,attrs:a,slots:s}){let l,i;const g=L(),m=L(),u=rn(()=>e.show||!e.lazyRender),r=Y(()=>{const k={zIndex:g.value};if(T(e.duration)){const E=e.position==="center"?"animationDuration":"transitionDuration";k[E]=`${e.duration}s`}return k}),c=()=>{l||(l=!0,g.value=e.zIndex!==void 0?+e.zIndex:Jn(),n("open"))},d=()=>{l&&On(e.beforeClose,{done(){l=!1,n("close"),n("update:show",!1)}})},b=k=>{n("clickOverlay",k),e.closeOnClickOverlay&&d()},S=()=>{if(e.overlay){const k=A({show:e.show,class:e.overlayClass,zIndex:g.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},e.overlayProps);return o(dt,K(k,qe(),{onClick:b}),{default:s["overlay-content"]})}},w=k=>{n("clickCloseIcon",k),d()},C=()=>{if(e.closeable)return o(U,{role:"button",tabindex:0,name:e.closeIcon,class:[Fe("close-icon",e.closeIconPosition),en],classPrefix:e.iconPrefix,onClick:w},null)};let f;const _=()=>{f&&clearTimeout(f),f=setTimeout(()=>{n("opened")})},z=()=>n("closed"),W=k=>n("keydown",k),$=u(()=>{var k;const{destroyOnClose:E,round:G,position:te,safeAreaInsetTop:Pe,safeAreaInsetBottom:ve,show:he}=e;if(!(!he&&E))return Le(o("div",K({ref:m,style:r.value,role:"dialog",tabindex:0,class:[Fe({round:G,[te]:te}),{"van-safe-area-top":Pe,"van-safe-area-bottom":ve}],onKeydown:W},a,qe()),[(k=s.default)==null?void 0:k.call(s),C()]),[[pe,he]])}),v=()=>{const{position:k,transition:E,transitionAppear:G}=e,te=k==="center"?"van-fade":`van-popup-slide-${k}`;return o(Oe,{name:E||te,appear:G,onAfterEnter:_,onAfterLeave:z},{default:$})};return Q(()=>e.show,k=>{k&&!l&&(c(),a.tabindex===0&&ee(()=>{var E;(E=m.value)==null||E.focus()})),!k&&l&&(l=!1,n("close"))}),we({popupRef:m}),it(m,()=>e.show&&e.lockScroll),ze("popstate",()=>{e.closeOnPopstate&&(d(),i=!1)}),Ie(()=>{e.show&&c()}),zn(()=>{i&&(n("update:show",!0),i=!1)}),Je(()=>{e.show&&e.teleport&&(d(),i=!0)}),nn(Ln,()=>e.show),()=>e.teleport?o(Xe,{to:e.teleport},{default:()=>[S(),v()]}):o(Ce,null,[S(),v()])}});const vt=q(mt);let ht=0;function cn(){const e=me(),{name:n="unknown"}=e?.type||{};return`${n}-${++ht}`}const[yt,le]=j("cell"),sn={tag:x("div"),icon:String,size:String,title:I,value:I,label:I,center:Boolean,isLink:Boolean,border:D,iconPrefix:String,valueClass:J,labelClass:J,titleClass:J,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},bt=A({},sn,Ze);var kt=N({name:yt,props:bt,setup(e,{slots:n}){const a=Ge(),s=()=>{if(n.label||T(e.label))return o("div",{class:[le("label"),e.labelClass]},[n.label?n.label():e.label])},l=()=>{var u;if(n.title||T(e.title)){const r=(u=n.title)==null?void 0:u.call(n);return Array.isArray(r)&&r.length===0?void 0:o("div",{class:[le("title"),e.titleClass],style:e.titleStyle},[r||o("span",null,[e.title]),s()])}},i=()=>{const u=n.value||n.default;if(u||T(e.value))return o("div",{class:[le("value"),e.valueClass]},[u?u():o("span",null,[e.value])])},g=()=>{if(n.icon)return n.icon();if(e.icon)return o(U,{name:e.icon,class:le("left-icon"),classPrefix:e.iconPrefix},null)},m=()=>{if(n["right-icon"])return n["right-icon"]();if(e.isLink){const u=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return o(U,{name:u,class:le("right-icon")},null)}};return()=>{var u;const{tag:r,size:c,center:d,border:b,isLink:S,required:w}=e,C=(u=e.clickable)!=null?u:S,f={center:d,required:!!w,clickable:C,borderless:!b};return c&&(f[c]=!!c),o(r,{class:le(f),role:C?"button":void 0,tabindex:C?0:void 0,onClick:a},{default:()=>{var _;return[g(),l(),i(),m(),(_=n.extra)==null?void 0:_.call(n)]}})}}});const St=q(kt);function un(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Ct(e,n){if(un(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function xt(e,n){return new Promise(a=>{const s=n.validator(e,n);if(Vn(s)){s.then(a);return}a(s)})}function Ue(e,n){const{message:a}=n;return An(a)?a(e,n):a||""}function It({target:e}){e.composing=!0}function Ke({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function wt(e,n){const a=$n();e.style.height="auto";let s=e.scrollHeight;if(tn(n)){const{maxHeight:l,minHeight:i}=n;l!==void 0&&(s=Math.min(s,l)),i!==void 0&&(s=Math.max(s,i))}s&&(e.style.height=`${s}px`,En(a))}function Pt(e,n){return e==="number"&&(e="text",n??(n="decimal")),e==="digit"&&(e="tel",n??(n="numeric")),{type:e,inputmode:n}}function H(e){return[...e].length}function Be(e,n){return[...e].slice(0,n).join("")}const[_t,R]=j("field"),$e={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:I,max:Number,min:Number,formatter:Function,clearIcon:x("clear"),modelValue:Rn(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:x("focus"),formatTrigger:x("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},Bt=A({},sn,$e,{rows:I,type:x("text"),rules:Array,autosize:[Boolean,Object],labelWidth:I,labelClass:J,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Tt=N({name:_t,props:Bt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a}){const s=cn(),l=an({status:"unvalidated",focused:!1,validateMessage:""}),i=L(),g=L(),m=L(),{parent:u}=Mn(Dn),r=()=>{var t;return String((t=e.modelValue)!=null?t:"")},c=t=>{if(T(e[t]))return e[t];if(u&&T(u.props[t]))return u.props[t]},d=Y(()=>{const t=c("readonly");if(e.clearable&&!t){const h=r()!=="",y=e.clearTrigger==="always"||e.clearTrigger==="focus"&&l.focused;return h&&y}return!1}),b=Y(()=>m.value&&a.input?m.value():e.modelValue),S=Y(()=>{var t;const h=c("required");return h==="auto"?(t=e.rules)==null?void 0:t.some(y=>y.required):h}),w=t=>t.reduce((h,y)=>h.then(()=>{if(l.status==="failed")return;let{value:P}=b;if(y.formatter&&(P=y.formatter(P,y)),!Ct(P,y)){l.status="failed",l.validateMessage=Ue(P,y);return}if(y.validator)return un(P)&&y.validateEmpty===!1?void 0:xt(P,y).then(B=>{B&&typeof B=="string"?(l.status="failed",l.validateMessage=B):B===!1&&(l.status="failed",l.validateMessage=Ue(P,y))})}),Promise.resolve()),C=()=>{l.status="unvalidated",l.validateMessage=""},f=()=>n("endValidate",{status:l.status,message:l.validateMessage}),_=(t=e.rules)=>new Promise(h=>{C(),t?(n("startValidate"),w(t).then(()=>{l.status==="failed"?(h({name:e.name,message:l.validateMessage}),f()):(l.status="passed",h(),f())})):h()}),z=t=>{if(u&&e.rules){const{validateTrigger:h}=u.props,y=Re(h).includes(t),P=e.rules.filter(B=>B.trigger?Re(B.trigger).includes(t):y);P.length&&_(P)}},W=t=>{var h;const{maxlength:y}=e;if(T(y)&&H(t)>+y){const P=r();if(P&&H(P)===+y)return P;const B=(h=i.value)==null?void 0:h.selectionEnd;if(l.focused&&B){const X=[...t],p=X.length-+y;return X.splice(B-p,p),X.join("")}return Be(t,+y)}return t},$=(t,h="onChange")=>{var y,P;const B=t;t=W(t);const X=H(B)-H(t);if(e.type==="number"||e.type==="digit"){const F=e.type==="number";if(t=Nn(t,F,F),h==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)){const M=jn(+t,(y=e.min)!=null?y:-1/0,(P=e.max)!=null?P:1/0);+t!==M&&(t=M.toString())}}let p=0;if(e.formatter&&h===e.formatTrigger){const{formatter:F,maxlength:M}=e;if(t=F(t),T(M)&&H(t)>+M&&(t=Be(t,+M)),i.value&&l.focused){const{selectionEnd:ye}=i.value,Ve=Be(B,ye);p=H(F(Ve))-H(Ve)}}if(i.value&&i.value.value!==t)if(l.focused){let{selectionStart:F,selectionEnd:M}=i.value;if(i.value.value=t,T(F)&&T(M)){const ye=H(t);X?(F-=X,M-=X):p&&(F+=p,M+=p),i.value.setSelectionRange(Math.min(F,ye),Math.min(M,ye))}}else i.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},v=t=>{t.target.composing||$(t.target.value)},k=()=>{var t;return(t=i.value)==null?void 0:t.blur()},E=()=>{var t;return(t=i.value)==null?void 0:t.focus()},G=()=>{const t=i.value;e.type==="textarea"&&e.autosize&&t&&wt(t,e.autosize)},te=t=>{l.focused=!0,n("focus",t),ee(G),c("readonly")&&k()},Pe=t=>{l.focused=!1,$(r(),"onBlur"),n("blur",t),!c("readonly")&&(z("onBlur"),ee(G),qn())},ve=t=>n("clickInput",t),he=t=>n("clickLeftIcon",t),fn=t=>n("clickRightIcon",t),gn=t=>{ne(t),n("update:modelValue",""),n("clear",t)},Ee=Y(()=>{if(typeof e.error=="boolean")return e.error;if(u&&u.props.showError&&l.status==="failed")return!0}),mn=Y(()=>{const t=c("labelWidth"),h=c("labelAlign");if(t&&h!=="top")return{width:ce(t)}}),vn=t=>{t.keyCode===13&&(!(u&&u.props.submitOnEnter)&&e.type!=="textarea"&&ne(t),e.type==="search"&&k()),n("keypress",t)},Ae=()=>e.id||`${s}-input`,hn=()=>l.status,yn=()=>{const t=R("control",[c("inputAlign"),{error:Ee.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return o("div",{class:t,onClick:ve},[a.input()]);const h={id:Ae(),ref:i,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:c("disabled"),readonly:c("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${s}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:Pe,onFocus:te,onInput:v,onClick:ve,onChange:Ke,onKeypress:vn,onCompositionend:Ke,onCompositionstart:It};return e.type==="textarea"?o("textarea",K(h,{inputmode:e.inputmode}),null):o("input",K(Pt(e.type,e.inputmode),h),null)},bn=()=>{const t=a["left-icon"];if(e.leftIcon||t)return o("div",{class:R("left-icon"),onClick:he},[t?t():o(U,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},kn=()=>{const t=a["right-icon"];if(e.rightIcon||t)return o("div",{class:R("right-icon"),onClick:fn},[t?t():o(U,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Sn=()=>{if(e.showWordLimit&&e.maxlength){const t=H(r());return o("div",{class:R("word-limit")},[o("span",{class:R("word-num")},[t]),xe("/"),e.maxlength])}},Cn=()=>{if(u&&u.props.showErrorMessage===!1)return;const t=e.errorMessage||l.validateMessage;if(t){const h=a["error-message"],y=c("errorMessageAlign");return o("div",{class:R("error-message",y)},[h?h({message:t}):t])}},xn=()=>{const t=c("labelWidth"),h=c("labelAlign"),y=c("colon")?":":"";if(a.label)return[a.label(),y];if(e.label)return o("label",{id:`${s}-label`,for:a.input?void 0:Ae(),"data-allow-mismatch":"attribute",onClick:P=>{ne(P),E()},style:h==="top"&&t?{width:ce(t)}:void 0},[e.label+y])},In=()=>[o("div",{class:R("body")},[yn(),d.value&&o(U,{ref:g,name:e.clearIcon,class:R("clear")},null),kn(),a.button&&o("div",{class:R("button")},[a.button()])]),Sn(),Cn()];return we({blur:k,focus:E,validate:_,formValue:b,resetValidation:C,getValidationStatus:hn}),nn(Fn,{customValue:m,resetValidation:C,validateWithTrigger:z}),Q(()=>e.modelValue,()=>{$(r()),C(),z("onChange"),ee(G)}),Ie(()=>{$(r(),e.formatTrigger),ee(G)}),ze("touchstart",gn,{target:Y(()=>{var t;return(t=g.value)==null?void 0:t.$el})}),()=>{const t=c("disabled"),h=c("labelAlign"),y=bn(),P=()=>{const B=xn();return h==="top"?[y,B].filter(Boolean):B||[]};return o(St,{size:e.size,class:R({error:Ee.value,disabled:t,[`label-${h}`]:h}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:mn.value,valueClass:R("value"),titleClass:[R("label",[h,{required:S.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:y&&h!=="top"?()=>y:null,title:P,value:In,extra:a.extra})}}});const zt=q(Tt);let de=0;function Ot(e){e?(de||document.body.classList.add("van-toast--unclickable"),de++):de&&(de--,de||document.body.classList.remove("van-toast--unclickable"))}const[Lt,ie]=j("toast"),$t=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Et={icon:String,show:Boolean,type:x("text"),overlay:Boolean,message:I,iconSize:I,duration:Un(2e3),position:x("middle"),teleport:[String,Object],wordBreak:String,className:J,iconPrefix:String,transition:x("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:J,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:I};var dn=N({name:Lt,props:Et,emits:["update:show"],setup(e,{emit:n,slots:a}){let s,l=!1;const i=()=>{const d=e.show&&e.forbidClick;l!==d&&(l=d,Ot(l))},g=d=>n("update:show",d),m=()=>{e.closeOnClick&&g(!1)},u=()=>clearTimeout(s),r=()=>{const{icon:d,type:b,iconSize:S,iconPrefix:w,loadingType:C}=e;if(d||b==="success"||b==="fail")return o(U,{name:d||b,size:S,class:ie("icon"),classPrefix:w},null);if(b==="loading")return o(ln,{class:ie("loading"),size:S,type:C},null)},c=()=>{const{type:d,message:b}=e;if(a.message)return o("div",{class:ie("text")},[a.message()]);if(T(b)&&b!=="")return d==="html"?o("div",{key:0,class:ie("text"),innerHTML:String(b)},null):o("div",{class:ie("text")},[b])};return Q(()=>[e.show,e.forbidClick],i),Q(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(s=setTimeout(()=>{g(!1)},e.duration))}),Ie(i),Kn(i),()=>o(vt,K({class:[ie([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:m,onClosed:u,"onUpdate:show":g},Te(e,$t)),{default:()=>[r(),c()]})}});function At(){const e=an({show:!1}),n=l=>{e.show=l},a=l=>{A(e,l,{transitionAppear:!0}),n(!0)},s=()=>n(!1);return we({open:a,close:s,toggle:n}),{open:a,close:s,state:e,toggle:n}}function Vt(e){const n=Wn(e),a=document.createElement("div");return document.body.appendChild(a),{instance:n.mount(a),unmount(){n.unmount(),document.body.removeChild(a)}}}const Rt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let Se=[],Mt=!1,We=A({},Rt);const Dt=new Map;function Nt(e){return tn(e)?e:{message:e}}function jt(){const{instance:e}=Vt({setup(){const n=L(""),{open:a,state:s,close:l,toggle:i}=At(),g=()=>{},m=()=>o(dn,K(s,{onClosed:g,"onUpdate:show":i}),null);return Q(n,u=>{s.message=u}),me().render=m,{open:a,close:l,message:n}}});return e}function qt(){if(!Se.length||Mt){const e=jt();Se.push(e)}return Se[Se.length-1]}function Ft(e={}){if(!on)return{};const n=qt(),a=Nt(e);return n.open(A({},We,Dt.get(a.type||We.type),a)),n}q(dn);const[Ut,He]=j("tag"),Kt={size:String,mark:Boolean,show:D,type:x("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var Wt=N({name:Ut,props:Kt,emits:["close"],setup(e,{slots:n,emit:a}){const s=g=>{g.stopPropagation(),a("close",g)},l=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},i=()=>{var g;const{type:m,mark:u,plain:r,round:c,size:d,closeable:b}=e,S={mark:u,plain:r,round:c};d&&(S[d]=d);const w=b&&o(U,{name:"cross",class:[He("close"),en],onClick:s},null);return o("span",{style:l(),class:He([S,m])},[(g=n.default)==null?void 0:g.call(n),w])};return()=>o(Oe,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?i():null]})}});const Ht=q(Wt),[Yt,re]=j("image"),Gt={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:I,height:I,radius:I,lazyLoad:Boolean,iconSize:I,showError:D,errorIcon:x("photo-fail"),iconPrefix:String,showLoading:D,loadingIcon:x("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var Zt=N({name:Yt,props:Gt,emits:["load","error"],setup(e,{emit:n,slots:a}){const s=L(!1),l=L(!0),i=L(),{$Lazyload:g}=me().proxy,m=Y(()=>{const f={width:ce(e.width),height:ce(e.height)};return T(e.radius)&&(f.overflow="hidden",f.borderRadius=ce(e.radius)),f});Q(()=>e.src,()=>{s.value=!1,l.value=!0});const u=f=>{l.value&&(l.value=!1,n("load",f))},r=()=>{const f=new Event("load");Object.defineProperty(f,"target",{value:i.value,enumerable:!0}),u(f)},c=f=>{s.value=!0,l.value=!1,n("error",f)},d=(f,_,z)=>z?z():o(U,{name:f,size:e.iconSize,class:_,classPrefix:e.iconPrefix},null),b=()=>{if(l.value&&e.showLoading)return o("div",{class:re("loading")},[d(e.loadingIcon,re("loading-icon"),a.loading)]);if(s.value&&e.showError)return o("div",{class:re("error")},[d(e.errorIcon,re("error-icon"),a.error)])},S=()=>{if(s.value||!e.src)return;const f={alt:e.alt,class:re("img"),decoding:e.decoding,style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?Le(o("img",K({ref:i},f),null),[[Hn("lazy"),e.src]]):o("img",K({ref:i,src:e.src,onLoad:u,onError:c},f),null)},w=({el:f})=>{const _=()=>{f===i.value&&l.value&&r()};i.value?_():ee(_)},C=({el:f})=>{f===i.value&&!s.value&&c()};return g&&on&&(g.$on("loaded",w),g.$on("error",C),Qe(()=>{g.$off("loaded",w),g.$off("error",C)})),Ie(()=>{ee(()=>{var f;(f=i.value)!=null&&f.complete&&!e.lazyLoad&&r()})}),()=>{var f;return o("div",{class:re({round:e.round,block:e.block}),style:m.value},[S(),b(),(f=a.default)==null?void 0:f.call(a)])}}});const Jt=q(Zt),[Qt,O]=j("card"),Xt={tag:String,num:I,desc:String,thumb:String,title:String,price:I,centered:Boolean,lazyLoad:Boolean,currency:x("¥"),thumbLink:String,originPrice:I};var pt=N({name:Qt,props:Xt,emits:["clickThumb"],setup(e,{slots:n,emit:a}){const s=()=>{if(n.title)return n.title();if(e.title)return o("div",{class:[O("title"),"van-multi-ellipsis--l2"]},[e.title])},l=()=>{if(n.tag||e.tag)return o("div",{class:O("tag")},[n.tag?n.tag():o(Ht,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},i=()=>n.thumb?n.thumb():o(Jt,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),g=()=>{if(n.thumb||e.thumb)return o("a",{href:e.thumbLink,class:O("thumb"),onClick:r=>a("clickThumb",r)},[i(),l()])},m=()=>{if(n.desc)return n.desc();if(e.desc)return o("div",{class:[O("desc"),"van-ellipsis"]},[e.desc])},u=()=>{const r=e.price.toString().split(".");return o("div",null,[o("span",{class:O("price-currency")},[e.currency]),o("span",{class:O("price-integer")},[r[0]]),r.length>1&&o(Ce,null,[xe("."),o("span",{class:O("price-decimal")},[r[1]])])])};return()=>{var r,c,d;const b=n.num||T(e.num),S=n.price||T(e.price),w=n["origin-price"]||T(e.originPrice),C=b||S||w||n.bottom,f=S&&o("div",{class:O("price")},[n.price?n.price():u()]),_=w&&o("div",{class:O("origin-price")},[n["origin-price"]?n["origin-price"]():`${e.currency} ${e.originPrice}`]),z=b&&o("div",{class:O("num")},[n.num?n.num():`x${e.num}`]),W=n.footer&&o("div",{class:O("footer")},[n.footer()]),$=C&&o("div",{class:O("bottom")},[(r=n["price-top"])==null?void 0:r.call(n),f,_,z,(c=n.bottom)==null?void 0:c.call(n)]);return o("div",{class:O()},[o("div",{class:O("header")},[g(),o("div",{class:O("content",{centered:e.centered})},[o("div",null,[s(),m(),(d=n.tags)==null?void 0:d.call(n)]),$])]),W])}}});const Ye=q(pt),[ea,fe,na]=j("search"),ta=A({},$e,{label:String,shape:x("square"),leftIcon:x("search"),clearable:D,actionText:String,background:String,showAction:Boolean});var aa=N({name:ea,props:ta,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:a,attrs:s}){const l=cn(),i=L(),g=()=>{a.action||(n("update:modelValue",""),n("cancel"))},m=v=>{v.keyCode===13&&(ne(v),n("search",e.modelValue))},u=()=>e.id||`${l}-input`,r=()=>{if(a.label||e.label)return o("label",{class:fe("label"),for:u(),"data-allow-mismatch":"attribute"},[a.label?a.label():e.label])},c=()=>{if(e.showAction){const v=e.actionText||na("cancel");return o("div",{class:fe("action"),role:"button",tabindex:0,onClick:g},[a.action?a.action():v])}},d=()=>{var v;return(v=i.value)==null?void 0:v.blur()},b=()=>{var v;return(v=i.value)==null?void 0:v.focus()},S=v=>n("blur",v),w=v=>n("focus",v),C=v=>n("clear",v),f=v=>n("clickInput",v),_=v=>n("clickLeftIcon",v),z=v=>n("clickRightIcon",v),W=Object.keys($e),$=()=>{const v=A({},s,Te(e,W),{id:u()}),k=E=>n("update:modelValue",E);return o(zt,K({ref:i,type:"search",class:fe("field",{"with-message":v.errorMessage}),border:!1,onBlur:S,onFocus:w,onClear:C,onKeypress:m,onClickInput:f,onClickLeftIcon:_,onClickRightIcon:z,"onUpdate:modelValue":k},v),Te(a,["left-icon","right-icon"]))};return we({focus:b,blur:d}),()=>{var v;return o("div",{class:fe({"show-action":e.showAction}),style:{background:e.background}},[(v=a.left)==null?void 0:v.call(a),o("div",{class:fe("content",e.shape)},[r(),$()]),c()])}}});const oa=q(aa),la={style:{padding:"16px",background:"#f8f9fa"}},ia={style:{"margin-bottom":"20px"}},ra={key:0,style:{"margin-bottom":"20px"}},ca={style:{display:"flex","justify-content":"space-between","align-items":"center"}},sa={style:{"font-weight":"600","margin-bottom":"4px"}},ua={style:{color:"#666","font-size":"14px"}},da={key:1},fa={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ga={style:{"font-weight":"600","margin-bottom":"4px"}},ma={style:{color:"#666","font-size":"14px"}},va={key:2,style:{"text-align":"center",padding:"40px 0",color:"#999"}},ba={__name:"Add",setup(e){const n=Yn(),a=L(""),s=L([]),l=L([{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"}]),i=[{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"},{code:"2881",name:"富邦金"},{code:"2303",name:"聯電"},{code:"2308",name:"台達電"},{code:"1303",name:"南亞"}];function g(){if(!a.value.trim()){s.value=[];return}s.value=i.filter(r=>r.code.includes(a.value)||r.name.includes(a.value))}function m(){s.value=[]}function u(r){Ft(`已新增 ${r.name} (${r.code}) 到自選股`),setTimeout(()=>{n.push("/")},1e3)}return(r,c)=>(Z(),ae("div",la,[V("div",ia,[c[1]||(c[1]=V("h2",{style:{margin:"0 0 16px 0","font-size":"20px","font-weight":"600"}},"新增股票",-1)),o(se(oa),{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=d=>a.value=d),placeholder:"搜尋股票代號或名稱",shape:"round",onSearch:g,onClear:m},null,8,["modelValue"])]),s.value.length>0?(Z(),ae("div",ra,[c[3]||(c[3]=V("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"搜尋結果",-1)),(Z(!0),ae(Ce,null,Me(s.value,d=>(Z(),De(se(Ye),{key:d.code,style:{"margin-bottom":"8px"}},{default:be(()=>[V("div",ca,[V("div",null,[V("div",sa,ke(d.name),1),V("div",ua,ke(d.code),1)]),o(se(Ne),{type:"primary",size:"small",onClick:b=>u(d)},{default:be(()=>c[2]||(c[2]=[xe(" 新增 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),_:2},1024))),128))])):_e("",!0),a.value===""?(Z(),ae("div",da,[c[5]||(c[5]=V("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"熱門股票",-1)),(Z(!0),ae(Ce,null,Me(l.value,d=>(Z(),De(se(Ye),{key:d.code,style:{"margin-bottom":"8px"}},{default:be(()=>[V("div",fa,[V("div",null,[V("div",ga,ke(d.name),1),V("div",ma,ke(d.code),1)]),o(se(Ne),{type:"primary",size:"small",onClick:b=>u(d)},{default:be(()=>c[4]||(c[4]=[xe(" 新增 ",-1)])),_:2,__:[4]},1032,["onClick"])])]),_:2},1024))),128))])):_e("",!0),a.value!==""&&s.value.length===0?(Z(),ae("div",va," 查無相關股票 ")):_e("",!0)]))}};export{ba as default};
