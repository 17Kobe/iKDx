import{d as On,e as br,c as Li,u as ig,B as f1,a as j,r as rg,m as Pe,n as Vn,I as ci,p as ur,L as sg,w as Ri,b as cs,f as us,P as h1,g as d1,t as lr,h as g1,i as p1,H as m1,j as _n,k as Lo,l as mn,o as _1,q as ic,s as b1,v as v1,x as x1,y as og,z as ag,A as Ht,C as y1,F as w1,D as ne,E as Ko,G as yc,J as S1,K as fs,M as dr,N as wc,O as wh,Q as C1,R as lg,S as rc,T as k1,U as D1,V as El,W as Il,X as cg,Y as M1,Z as T1,_ as A1,$ as O1,a0 as E1,a1 as I1,a2 as ug,a3 as P1,a4 as L1,a5 as Sc,a6 as R1,a7 as fg,a8 as go,a9 as F1,aa as Pt,ab as B1,ac as W1,ad as z1,ae as N1,af as hg,ag as dg,ah as gg,ai as Ee,aj as pn,ak as mt,al as Oe,am as rn,an as H1,ao as Pl,ap as Sh,aq as pg,ar as Ie,as as Di,at as mg,au as hs,av as $1,aw as sc,ax as _g,ay as xs,az as Cc,aA as oc,aB as Y1,aC as U1,aD as V1,aE as X1}from"./index-8F0G5GDC.js";import{w as kc}from"./worker-pool-Vr2Seoof.js";import{u as bg,S as K1,a as Ch}from"./index-BXyNHFmV.js";function kh(n,t){return n.reduce((e,i)=>Math.abs(e-t)<Math.abs(i-t)?e:i)}const[q1,er]=Li("button"),j1=br({},rg,{tag:Pe("button"),text:String,icon:String,type:Pe("default"),size:Pe("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:Pe("button"),loadingSize:Vn,loadingText:String,loadingType:String,iconPosition:Pe("left")});var G1=On({name:q1,props:j1,emits:["click"],setup(n,{emit:t,slots:e}){const i=ig(),s=()=>e.loading?e.loading():j(sg,{size:n.loadingSize,type:n.loadingType,class:er("loading")},null),a=()=>{if(n.loading)return s();if(e.icon)return j("div",{class:er("icon")},[e.icon()]);if(n.icon)return j(ci,{name:n.icon,class:er("icon"),classPrefix:n.iconPrefix},null)},l=()=>{let h;if(n.loading?h=n.loadingText:h=e.default?e.default():n.text,h)return j("span",{class:er("text")},[h])},u=()=>{const{color:h,plain:g}=n;if(h){const p={color:g?h:"white"};return g||(p.background=h),h.includes("gradient")?p.border=0:p.borderColor=h,p}},f=h=>{n.loading?ur(h):n.disabled||(t("click",h),i())};return()=>{const{tag:h,type:g,size:p,block:_,round:b,plain:S,square:w,loading:y,disabled:k,hairline:O,nativeType:P,iconPosition:F}=n,D=[er([g,p,{plain:S,block:_,round:b,square:w,loading:y,disabled:k,hairline:O}]),{[f1]:O}];return j(h,{type:P,class:D,style:u(),disabled:k,onClick:f},{default:()=>[j("div",{class:er("content")},[F==="left"&&a(),l(),F==="right"&&a()])]})}}});const Ll=Ri(G1),[Z1,Qe]=Li("action-sheet"),J1=br({},d1,{title:String,round:lr,actions:g1(),closeIcon:Pe("cross"),closeable:lr,cancelText:String,description:String,closeOnPopstate:lr,closeOnClickAction:Boolean,safeAreaInsetBottom:lr}),Q1=[...p1,"round","closeOnPopstate","safeAreaInsetBottom"];var tw=On({name:Z1,props:J1,emits:["select","cancel","update:show"],setup(n,{slots:t,emit:e}){const i=p=>e("update:show",p),s=()=>{i(!1),e("cancel")},a=()=>{if(n.title)return j("div",{class:Qe("header")},[n.title,n.closeable&&j(ci,{name:n.closeIcon,class:[Qe("close"),m1],onClick:s},null)])},l=()=>{if(t.cancel||n.cancelText)return[j("div",{class:Qe("gap")},null),j("button",{type:"button",class:Qe("cancel"),onClick:s},[t.cancel?t.cancel():n.cancelText])]},u=p=>{if(p.icon)return j(ci,{class:Qe("item-icon"),name:p.icon},null)},f=(p,_)=>p.loading?j(sg,{class:Qe("loading-icon")},null):t.action?t.action({action:p,index:_}):[j("span",{class:Qe("name")},[p.name]),p.subname&&j("div",{class:Qe("subname")},[p.subname])],h=(p,_)=>{const{color:b,loading:S,callback:w,disabled:y,className:k}=p,O=()=>{y||S||(w&&w(p),n.closeOnClickAction&&i(!1),_n(()=>e("select",p,_)))};return j("button",{type:"button",style:{color:b},class:[Qe("item",{loading:S,disabled:y}),k],onClick:O},[u(p),f(p,_)])},g=()=>{if(n.description||t.description){const p=t.description?t.description():n.description;return j("div",{class:Qe("description")},[p])}};return()=>j(h1,cs({class:Qe(),position:"bottom","onUpdate:show":i},us(n,Q1)),{default:()=>{var p;return[a(),g(),j("div",{class:Qe("content")},[n.actions.map(h),(p=t.default)==null?void 0:p.call(t)]),l()]}})}});const vg=Ri(tw),[ew,nr]=Li("cell"),xg={tag:Pe("div"),icon:String,size:String,title:Vn,value:Vn,label:Vn,center:Boolean,isLink:Boolean,border:lr,iconPrefix:String,valueClass:Lo,labelClass:Lo,titleClass:Lo,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},nw=br({},xg,rg);var iw=On({name:ew,props:nw,setup(n,{slots:t}){const e=ig(),i=()=>{if(t.label||mn(n.label))return j("div",{class:[nr("label"),n.labelClass]},[t.label?t.label():n.label])},s=()=>{var f;if(t.title||mn(n.title)){const h=(f=t.title)==null?void 0:f.call(t);return Array.isArray(h)&&h.length===0?void 0:j("div",{class:[nr("title"),n.titleClass],style:n.titleStyle},[h||j("span",null,[n.title]),i()])}},a=()=>{const f=t.value||t.default;if(f||mn(n.value))return j("div",{class:[nr("value"),n.valueClass]},[f?f():j("span",null,[n.value])])},l=()=>{if(t.icon)return t.icon();if(n.icon)return j(ci,{name:n.icon,class:nr("left-icon"),classPrefix:n.iconPrefix},null)},u=()=>{if(t["right-icon"])return t["right-icon"]();if(n.isLink){const f=n.arrowDirection&&n.arrowDirection!=="right"?`arrow-${n.arrowDirection}`:"arrow";return j(ci,{name:f,class:nr("right-icon")},null)}};return()=>{var f;const{tag:h,size:g,center:p,border:_,isLink:b,required:S}=n,w=(f=n.clickable)!=null?f:b,y={center:p,required:!!S,clickable:w,borderless:!_};return g&&(y[g]=!!g),j(h,{class:nr(y),role:w?"button":void 0,tabindex:w?0:void 0,onClick:e},{default:()=>{var k;return[l(),s(),a(),u(),(k=t.extra)==null?void 0:k.call(t)]}})}}});const rw=Ri(iw);function yg(n){return Array.isArray(n)?!n.length:n===0?!1:!n}function sw(n,t){if(yg(n)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(n)))}function ow(n,t){return new Promise(e=>{const i=t.validator(n,t);if(x1(i)){i.then(e);return}e(i)})}function Dh(n,t){const{message:e}=t;return v1(e)?e(n,t):e||""}function aw({target:n}){n.composing=!0}function Mh({target:n}){n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}function lw(n,t){const e=_1();n.style.height="auto";let i=n.scrollHeight;if(ic(t)){const{maxHeight:s,minHeight:a}=t;s!==void 0&&(i=Math.min(i,s)),a!==void 0&&(i=Math.max(i,a))}i&&(n.style.height=`${i}px`,b1(e))}function cw(n,t){return n==="number"&&(n="text",t??(t="decimal")),n==="digit"&&(n="tel",t??(t="numeric")),{type:n,inputmode:t}}function Nn(n){return[...n].length}function Rl(n,t){return[...n].slice(0,t).join("")}const[uw,tn]=Li("field"),Dc={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:Vn,max:Number,min:Number,formatter:Function,clearIcon:Pe("clear"),modelValue:og(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:Pe("focus"),formatTrigger:Pe("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},fw=br({},xg,Dc,{rows:Vn,type:Pe("text"),rules:Array,autosize:[Boolean,Object],labelWidth:Vn,labelClass:Lo,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var hw=On({name:uw,props:fw,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(n,{emit:t,slots:e}){const i=bg(),s=ag({status:"unvalidated",focused:!1,validateMessage:""}),a=Ht(),l=Ht(),u=Ht(),{parent:f}=y1(w1),h=()=>{var H;return String((H=n.modelValue)!=null?H:"")},g=H=>{if(mn(n[H]))return n[H];if(f&&mn(f.props[H]))return f.props[H]},p=ne(()=>{const H=g("readonly");if(n.clearable&&!H){const rt=h()!=="",st=n.clearTrigger==="always"||n.clearTrigger==="focus"&&s.focused;return rt&&st}return!1}),_=ne(()=>u.value&&e.input?u.value():n.modelValue),b=ne(()=>{var H;const rt=g("required");return rt==="auto"?(H=n.rules)==null?void 0:H.some(st=>st.required):rt}),S=H=>H.reduce((rt,st)=>rt.then(()=>{if(s.status==="failed")return;let{value:Et}=_;if(st.formatter&&(Et=st.formatter(Et,st)),!sw(Et,st)){s.status="failed",s.validateMessage=Dh(Et,st);return}if(st.validator)return yg(Et)&&st.validateEmpty===!1?void 0:ow(Et,st).then(Rt=>{Rt&&typeof Rt=="string"?(s.status="failed",s.validateMessage=Rt):Rt===!1&&(s.status="failed",s.validateMessage=Dh(Et,st))})}),Promise.resolve()),w=()=>{s.status="unvalidated",s.validateMessage=""},y=()=>t("endValidate",{status:s.status,message:s.validateMessage}),k=(H=n.rules)=>new Promise(rt=>{w(),H?(t("startValidate"),S(H).then(()=>{s.status==="failed"?(rt({name:n.name,message:s.validateMessage}),y()):(s.status="passed",rt(),y())})):rt()}),O=H=>{if(f&&n.rules){const{validateTrigger:rt}=f.props,st=wh(rt).includes(H),Et=n.rules.filter(Rt=>Rt.trigger?wh(Rt.trigger).includes(H):st);Et.length&&k(Et)}},P=H=>{var rt;const{maxlength:st}=n;if(mn(st)&&Nn(H)>+st){const Et=h();if(Et&&Nn(Et)===+st)return Et;const Rt=(rt=a.value)==null?void 0:rt.selectionEnd;if(s.focused&&Rt){const fe=[...H],Se=fe.length-+st;return fe.splice(Rt-Se,Se),fe.join("")}return Rl(H,+st)}return H},F=(H,rt="onChange")=>{var st,Et;const Rt=H;H=P(H);const fe=Nn(Rt)-Nn(H);if(n.type==="number"||n.type==="digit"){const At=n.type==="number";if(H=C1(H,At,At),rt==="onBlur"&&H!==""&&(n.min!==void 0||n.max!==void 0)){const $t=lg(+H,(st=n.min)!=null?st:-1/0,(Et=n.max)!=null?Et:1/0);+H!==$t&&(H=$t.toString())}}let Se=0;if(n.formatter&&rt===n.formatTrigger){const{formatter:At,maxlength:$t}=n;if(H=At(H),mn($t)&&Nn(H)>+$t&&(H=Rl(H,+$t)),a.value&&s.focused){const{selectionEnd:vn}=a.value,he=Rl(Rt,vn);Se=Nn(At(he))-Nn(he)}}if(a.value&&a.value.value!==H)if(s.focused){let{selectionStart:At,selectionEnd:$t}=a.value;if(a.value.value=H,mn(At)&&mn($t)){const vn=Nn(H);fe?(At-=fe,$t-=fe):Se&&(At+=Se,$t+=Se),a.value.setSelectionRange(Math.min(At,vn),Math.min($t,vn))}}else a.value.value=H;H!==n.modelValue&&t("update:modelValue",H)},D=H=>{H.target.composing||F(H.target.value)},L=()=>{var H;return(H=a.value)==null?void 0:H.blur()},E=()=>{var H;return(H=a.value)==null?void 0:H.focus()},R=()=>{const H=a.value;n.type==="textarea"&&n.autosize&&H&&lw(H,n.autosize)},W=H=>{s.focused=!0,t("focus",H),_n(R),g("readonly")&&L()},X=H=>{s.focused=!1,F(h(),"onBlur"),t("blur",H),!g("readonly")&&(O("onBlur"),_n(R),k1())},Y=H=>t("clickInput",H),K=H=>t("clickLeftIcon",H),it=H=>t("clickRightIcon",H),ht=H=>{ur(H),t("update:modelValue",""),t("clear",H)},lt=ne(()=>{if(typeof n.error=="boolean")return n.error;if(f&&f.props.showError&&s.status==="failed")return!0}),dt=ne(()=>{const H=g("labelWidth"),rt=g("labelAlign");if(H&&rt!=="top")return{width:Ko(H)}}),yt=H=>{H.keyCode===13&&(!(f&&f.props.submitOnEnter)&&n.type!=="textarea"&&ur(H),n.type==="search"&&L()),t("keypress",H)},Dt=()=>n.id||`${i}-input`,te=()=>s.status,Gt=()=>{const H=tn("control",[g("inputAlign"),{error:lt.value,custom:!!e.input,"min-height":n.type==="textarea"&&!n.autosize}]);if(e.input)return j("div",{class:H,onClick:Y},[e.input()]);const rt={id:Dt(),ref:a,name:n.name,rows:n.rows!==void 0?+n.rows:void 0,class:H,disabled:g("disabled"),readonly:g("readonly"),autofocus:n.autofocus,placeholder:n.placeholder,autocomplete:n.autocomplete,autocapitalize:n.autocapitalize,autocorrect:n.autocorrect,enterkeyhint:n.enterkeyhint,spellcheck:n.spellcheck,"aria-labelledby":n.label?`${i}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:X,onFocus:W,onInput:D,onClick:Y,onChange:Mh,onKeypress:yt,onCompositionend:Mh,onCompositionstart:aw};return n.type==="textarea"?j("textarea",cs(rt,{inputmode:n.inputmode}),null):j("input",cs(cw(n.type,n.inputmode),rt),null)},vt=()=>{const H=e["left-icon"];if(n.leftIcon||H)return j("div",{class:tn("left-icon"),onClick:K},[H?H():j(ci,{name:n.leftIcon,classPrefix:n.iconPrefix},null)])},le=()=>{const H=e["right-icon"];if(n.rightIcon||H)return j("div",{class:tn("right-icon"),onClick:it},[H?H():j(ci,{name:n.rightIcon,classPrefix:n.iconPrefix},null)])},we=()=>{if(n.showWordLimit&&n.maxlength){const H=Nn(h());return j("div",{class:tn("word-limit")},[j("span",{class:tn("word-num")},[H]),rc("/"),n.maxlength])}},Re=()=>{if(f&&f.props.showErrorMessage===!1)return;const H=n.errorMessage||s.validateMessage;if(H){const rt=e["error-message"],st=g("errorMessageAlign");return j("div",{class:tn("error-message",st)},[rt?rt({message:H}):H])}},ce=()=>{const H=g("labelWidth"),rt=g("labelAlign"),st=g("colon")?":":"";if(e.label)return[e.label(),st];if(n.label)return j("label",{id:`${i}-label`,for:e.input?void 0:Dt(),"data-allow-mismatch":"attribute",onClick:Et=>{ur(Et),E()},style:rt==="top"&&H?{width:Ko(H)}:void 0},[n.label+st])},ue=()=>[j("div",{class:tn("body")},[Gt(),p.value&&j(ci,{ref:l,name:n.clearIcon,class:tn("clear")},null),le(),e.button&&j("div",{class:tn("button")},[e.button()])]),we(),Re()];return yc({blur:L,focus:E,validate:k,formValue:_,resetValidation:w,getValidationStatus:te}),S1(D1,{customValue:u,resetValidation:w,validateWithTrigger:O}),fs(()=>n.modelValue,()=>{F(h()),w(),O("onChange"),_n(R)}),dr(()=>{F(h(),n.formatTrigger),_n(R)}),wc("touchstart",ht,{target:ne(()=>{var H;return(H=l.value)==null?void 0:H.$el})}),()=>{const H=g("disabled"),rt=g("labelAlign"),st=vt(),Et=()=>{const Rt=ce();return rt==="top"?[st,Rt].filter(Boolean):Rt||[]};return j(rw,{size:n.size,class:tn({error:lt.value,disabled:H,[`label-${rt}`]:rt}),center:n.center,border:n.border,isLink:n.isLink,clickable:n.clickable,titleStyle:dt.value,valueClass:tn("value"),titleClass:[tn("label",[rt,{required:b.value}]),n.labelClass],arrowDirection:n.arrowDirection},{icon:st&&rt!=="top"?()=>st:null,title:Et,value:ue,extra:e.extra})}}});const dw=Ri(hw),gw={gap:{type:[Number,Object],default:24},icon:String,axis:Pe("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[pw,Th]=Li("floating-bubble");var mw=On({name:pw,inheritAttrs:!1,props:gw,emits:["click","update:offset","offsetChange"],setup(n,{slots:t,emit:e,attrs:i}){const s=Ht(),a=Ht({x:0,y:0,width:0,height:0}),l=ne(()=>ic(n.gap)?n.gap.x:n.gap),u=ne(()=>ic(n.gap)?n.gap.y:n.gap),f=ne(()=>({top:u.value,right:Il.value-a.value.width-l.value,bottom:El.value-a.value.height-u.value,left:l.value})),h=Ht(!1);let g=!1;const p=ne(()=>{const D={},L=Ko(a.value.x),E=Ko(a.value.y);return D.transform=`translate3d(${L}, ${E}, 0)`,(h.value||!g)&&(D.transition="none"),D}),_=()=>{if(!F.value)return;const{width:D,height:L}=ug(s.value),{offset:E}=n;a.value={x:E?E.x:Il.value-D-l.value,y:E?E.y:El.value-L-u.value,width:D,height:L}},b=cg();let S=0,w=0;const y=D=>{b.start(D),h.value=!0,S=a.value.x,w=a.value.y};wc("touchmove",D=>{if(D.preventDefault(),b.move(D),n.axis!=="lock"&&!b.isTap.value){if(n.axis==="x"||n.axis==="xy"){let E=S+b.deltaX.value;E<f.value.left&&(E=f.value.left),E>f.value.right&&(E=f.value.right),a.value.x=E}if(n.axis==="y"||n.axis==="xy"){let E=w+b.deltaY.value;E<f.value.top&&(E=f.value.top),E>f.value.bottom&&(E=f.value.bottom),a.value.y=E}const L=us(a.value,["x","y"]);e("update:offset",L)}},{target:s});const O=()=>{h.value=!1,_n(()=>{if(n.magnetic==="x"){const D=kh([f.value.left,f.value.right],a.value.x);a.value.x=D}if(n.magnetic==="y"){const D=kh([f.value.top,f.value.bottom],a.value.y);a.value.y=D}if(!b.isTap.value){const D=us(a.value,["x","y"]);e("update:offset",D),(S!==D.x||w!==D.y)&&e("offsetChange",D)}})},P=D=>{b.isTap.value?e("click",D):D.stopPropagation()};dr(()=>{_(),_n(()=>{g=!0})}),fs([Il,El,l,u,()=>n.offset],_,{deep:!0});const F=Ht(!0);return M1(()=>{F.value=!0}),T1(()=>{n.teleport&&(F.value=!1)}),()=>{const D=A1(j("div",cs({class:Th(),ref:s,onTouchstartPassive:y,onTouchend:O,onTouchcancel:O,onClickCapture:P,style:p.value},i),[t.default?t.default():j(E1,{name:n.icon,class:Th("icon")},null)]),[[O1,F.value]]);return n.teleport?j(I1,{to:n.teleport},{default:()=>[D]}):D}}});const _w=Ri(mw),[bw,zr,vw]=Li("search"),xw=br({},Dc,{label:String,shape:Pe("square"),leftIcon:Pe("search"),clearable:lr,actionText:String,background:String,showAction:Boolean});var yw=On({name:bw,props:xw,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(n,{emit:t,slots:e,attrs:i}){const s=bg(),a=Ht(),l=()=>{e.action||(t("update:modelValue",""),t("cancel"))},u=D=>{D.keyCode===13&&(ur(D),t("search",n.modelValue))},f=()=>n.id||`${s}-input`,h=()=>{if(e.label||n.label)return j("label",{class:zr("label"),for:f(),"data-allow-mismatch":"attribute"},[e.label?e.label():n.label])},g=()=>{if(n.showAction){const D=n.actionText||vw("cancel");return j("div",{class:zr("action"),role:"button",tabindex:0,onClick:l},[e.action?e.action():D])}},p=()=>{var D;return(D=a.value)==null?void 0:D.blur()},_=()=>{var D;return(D=a.value)==null?void 0:D.focus()},b=D=>t("blur",D),S=D=>t("focus",D),w=D=>t("clear",D),y=D=>t("clickInput",D),k=D=>t("clickLeftIcon",D),O=D=>t("clickRightIcon",D),P=Object.keys(Dc),F=()=>{const D=br({},i,us(n,P),{id:f()}),L=E=>t("update:modelValue",E);return j(dw,cs({ref:a,type:"search",class:zr("field",{"with-message":D.errorMessage}),border:!1,onBlur:b,onFocus:S,onClear:w,onKeypress:u,onClickInput:y,onClickLeftIcon:k,onClickRightIcon:O,"onUpdate:modelValue":L},D),us(e,["left-icon","right-icon"]))};return yc({focus:_,blur:p}),()=>{var D;return j("div",{class:zr({"show-action":n.showAction}),style:{background:n.background}},[(D=e.left)==null?void 0:D.call(e),j("div",{class:zr("content",n.shape)},[h(),F()]),g()])}}});const ww=Ri(yw),[Sw,Fl]=Li("swipe-cell"),Cw={name:og(""),disabled:Boolean,leftWidth:Vn,rightWidth:Vn,beforeClose:Function,stopPropagation:Boolean};var kw=On({name:Sw,props:Cw,emits:["open","close","click"],setup(n,{emit:t,slots:e}){let i,s,a,l;const u=Ht(),f=Ht(),h=Ht(),g=ag({offset:0,dragging:!1}),p=cg(),_=R=>R.value?ug(R).width:0,b=ne(()=>mn(n.leftWidth)?+n.leftWidth:_(f)),S=ne(()=>mn(n.rightWidth)?+n.rightWidth:_(h)),w=R=>{g.offset=R==="left"?b.value:-S.value,i||(i=!0,t("open",{name:n.name,position:R}))},y=R=>{g.offset=0,i&&(i=!1,t("close",{name:n.name,position:R}))},k=R=>{const W=Math.abs(g.offset),X=.15,Y=i?1-X:X,K=R==="left"?b.value:S.value;K&&W>K*Y?w(R):y(R)},O=R=>{n.disabled||(a=g.offset,p.start(R))},P=R=>{if(n.disabled)return;const{deltaX:W}=p;p.move(R),p.isHorizontal()&&(s=!0,g.dragging=!0,(!i||W.value*a<0)&&ur(R,n.stopPropagation),g.offset=lg(W.value+a,-S.value,b.value))},F=()=>{g.dragging&&(g.dragging=!1,k(g.offset>0?"left":"right"),setTimeout(()=>{s=!1},0))},D=(R="outside",W)=>{l||(t("click",R),i&&!s&&(l=!0,L1(n.beforeClose,{args:[{event:W,name:n.name,position:R}],done:()=>{l=!1,y(R)},canceled:()=>l=!1,error:()=>l=!1})))},L=R=>W=>{(s||i)&&W.stopPropagation(),!s&&D(R,W)},E=(R,W)=>{const X=e[R];if(X)return j("div",{ref:W,class:Fl(R),onClick:L(R)},[X()])};return yc({open:w,close:y}),P1(u,R=>D("outside",R),{eventName:"touchstart"}),wc("touchmove",P,{target:u}),()=>{var R;const W={transform:`translate3d(${g.offset}px, 0, 0)`,transitionDuration:g.dragging?"0s":".6s"};return j("div",{ref:u,class:Fl(),onClick:L("cell"),onTouchstartPassive:O,onTouchend:F,onTouchcancel:F},[j("div",{class:Fl("wrapper"),style:W},[E("left",f),(R=e.default)==null?void 0:R.call(e),E("right",h)])])}}});const Dw=Ri(kw);async function Mw(){console.log("開始執行 getAllStocks");const n=await R1("all-stocks");if(n&&n.length>0)return console.log("從 IndexedDB 獲取的股票資料:",n),n;{console.log("all-stocks store 無資料，開始從 stock_list.json 獲取");const e=(await fg.get("data/stock_list.json")).data;for(const i of e)await Sc("all-stocks",i);return console.log("股票資料已快取到 IndexedDB:",e),e}}async function Tw(n){return await getFromStore("all-stocks",n)}async function Aw(n){return await Sc("all-stocks",n)}var Vr={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Ow=Vr.exports,Ah;function Ew(){return Ah||(Ah=1,function(n,t){(function(){var e,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,g="__lodash_placeholder__",p=1,_=2,b=4,S=1,w=2,y=1,k=2,O=4,P=8,F=16,D=32,L=64,E=128,R=256,W=512,X=30,Y="...",K=800,it=16,ht=1,lt=2,dt=3,yt=1/0,Dt=9007199254740991,te=17976931348623157e292,Gt=NaN,vt=4294967295,le=vt-1,we=vt>>>1,Re=[["ary",E],["bind",y],["bindKey",k],["curry",P],["curryRight",F],["flip",W],["partial",D],["partialRight",L],["rearg",R]],ce="[object Arguments]",ue="[object Array]",H="[object AsyncFunction]",rt="[object Boolean]",st="[object Date]",Et="[object DOMException]",Rt="[object Error]",fe="[object Function]",Se="[object GeneratorFunction]",At="[object Map]",$t="[object Number]",vn="[object Null]",he="[object Object]",Wi="[object Promise]",xr="[object Proxy]",zi="[object RegExp]",cn="[object Set]",yr="[object String]",Cs="[object Symbol]",Op="[object Undefined]",wr="[object WeakMap]",Ep="[object WeakSet]",Sr="[object ArrayBuffer]",Ni="[object DataView]",ua="[object Float32Array]",fa="[object Float64Array]",ha="[object Int8Array]",da="[object Int16Array]",ga="[object Int32Array]",pa="[object Uint8Array]",ma="[object Uint8ClampedArray]",_a="[object Uint16Array]",ba="[object Uint32Array]",Ip=/\b__p \+= '';/g,Pp=/\b(__p \+=) '' \+/g,Lp=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xc=/&(?:amp|lt|gt|quot|#39);/g,Kc=/[&<>"']/g,Rp=RegExp(Xc.source),Fp=RegExp(Kc.source),Bp=/<%-([\s\S]+?)%>/g,Wp=/<%([\s\S]+?)%>/g,qc=/<%=([\s\S]+?)%>/g,zp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Np=/^\w*$/,Hp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,va=/[\\^$.*+?()[\]{}|]/g,$p=RegExp(va.source),xa=/^\s+/,Yp=/\s/,Up=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vp=/\{\n\/\* \[wrapped with (.+)\] \*/,Xp=/,? & /,Kp=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qp=/[()=,{}\[\]\/\s]/,jp=/\\(\\)?/g,Gp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jc=/\w*$/,Zp=/^[-+]0x[0-9a-f]+$/i,Jp=/^0b[01]+$/i,Qp=/^\[object .+?Constructor\]$/,tm=/^0o[0-7]+$/i,em=/^(?:0|[1-9]\d*)$/,nm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ks=/($^)/,im=/['\n\r\u2028\u2029\\]/g,Ds="\\ud800-\\udfff",rm="\\u0300-\\u036f",sm="\\ufe20-\\ufe2f",om="\\u20d0-\\u20ff",Gc=rm+sm+om,Zc="\\u2700-\\u27bf",Jc="a-z\\xdf-\\xf6\\xf8-\\xff",am="\\xac\\xb1\\xd7\\xf7",lm="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",cm="\\u2000-\\u206f",um=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qc="A-Z\\xc0-\\xd6\\xd8-\\xde",tu="\\ufe0e\\ufe0f",eu=am+lm+cm+um,ya="['’]",fm="["+Ds+"]",nu="["+eu+"]",Ms="["+Gc+"]",iu="\\d+",hm="["+Zc+"]",ru="["+Jc+"]",su="[^"+Ds+eu+iu+Zc+Jc+Qc+"]",wa="\\ud83c[\\udffb-\\udfff]",dm="(?:"+Ms+"|"+wa+")",ou="[^"+Ds+"]",Sa="(?:\\ud83c[\\udde6-\\uddff]){2}",Ca="[\\ud800-\\udbff][\\udc00-\\udfff]",Hi="["+Qc+"]",au="\\u200d",lu="(?:"+ru+"|"+su+")",gm="(?:"+Hi+"|"+su+")",cu="(?:"+ya+"(?:d|ll|m|re|s|t|ve))?",uu="(?:"+ya+"(?:D|LL|M|RE|S|T|VE))?",fu=dm+"?",hu="["+tu+"]?",pm="(?:"+au+"(?:"+[ou,Sa,Ca].join("|")+")"+hu+fu+")*",mm="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_m="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",du=hu+fu+pm,bm="(?:"+[hm,Sa,Ca].join("|")+")"+du,vm="(?:"+[ou+Ms+"?",Ms,Sa,Ca,fm].join("|")+")",xm=RegExp(ya,"g"),ym=RegExp(Ms,"g"),ka=RegExp(wa+"(?="+wa+")|"+vm+du,"g"),wm=RegExp([Hi+"?"+ru+"+"+cu+"(?="+[nu,Hi,"$"].join("|")+")",gm+"+"+uu+"(?="+[nu,Hi+lu,"$"].join("|")+")",Hi+"?"+lu+"+"+cu,Hi+"+"+uu,_m,mm,iu,bm].join("|"),"g"),Sm=RegExp("["+au+Ds+Gc+tu+"]"),Cm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,km=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Dm=-1,Ft={};Ft[ua]=Ft[fa]=Ft[ha]=Ft[da]=Ft[ga]=Ft[pa]=Ft[ma]=Ft[_a]=Ft[ba]=!0,Ft[ce]=Ft[ue]=Ft[Sr]=Ft[rt]=Ft[Ni]=Ft[st]=Ft[Rt]=Ft[fe]=Ft[At]=Ft[$t]=Ft[he]=Ft[zi]=Ft[cn]=Ft[yr]=Ft[wr]=!1;var It={};It[ce]=It[ue]=It[Sr]=It[Ni]=It[rt]=It[st]=It[ua]=It[fa]=It[ha]=It[da]=It[ga]=It[At]=It[$t]=It[he]=It[zi]=It[cn]=It[yr]=It[Cs]=It[pa]=It[ma]=It[_a]=It[ba]=!0,It[Rt]=It[fe]=It[wr]=!1;var Mm={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Tm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Am={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Om={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Em=parseFloat,Im=parseInt,gu=typeof go=="object"&&go&&go.Object===Object&&go,Pm=typeof self=="object"&&self&&self.Object===Object&&self,se=gu||Pm||Function("return this")(),Da=t&&!t.nodeType&&t,hi=Da&&!0&&n&&!n.nodeType&&n,pu=hi&&hi.exports===Da,Ma=pu&&gu.process,Ve=function(){try{var T=hi&&hi.require&&hi.require("util").types;return T||Ma&&Ma.binding&&Ma.binding("util")}catch{}}(),mu=Ve&&Ve.isArrayBuffer,_u=Ve&&Ve.isDate,bu=Ve&&Ve.isMap,vu=Ve&&Ve.isRegExp,xu=Ve&&Ve.isSet,yu=Ve&&Ve.isTypedArray;function Fe(T,B,I){switch(I.length){case 0:return T.call(B);case 1:return T.call(B,I[0]);case 2:return T.call(B,I[0],I[1]);case 3:return T.call(B,I[0],I[1],I[2])}return T.apply(B,I)}function Lm(T,B,I,q){for(var nt=-1,wt=T==null?0:T.length;++nt<wt;){var Zt=T[nt];B(q,Zt,I(Zt),T)}return q}function Xe(T,B){for(var I=-1,q=T==null?0:T.length;++I<q&&B(T[I],I,T)!==!1;);return T}function Rm(T,B){for(var I=T==null?0:T.length;I--&&B(T[I],I,T)!==!1;);return T}function wu(T,B){for(var I=-1,q=T==null?0:T.length;++I<q;)if(!B(T[I],I,T))return!1;return!0}function jn(T,B){for(var I=-1,q=T==null?0:T.length,nt=0,wt=[];++I<q;){var Zt=T[I];B(Zt,I,T)&&(wt[nt++]=Zt)}return wt}function Ts(T,B){var I=T==null?0:T.length;return!!I&&$i(T,B,0)>-1}function Ta(T,B,I){for(var q=-1,nt=T==null?0:T.length;++q<nt;)if(I(B,T[q]))return!0;return!1}function Wt(T,B){for(var I=-1,q=T==null?0:T.length,nt=Array(q);++I<q;)nt[I]=B(T[I],I,T);return nt}function Gn(T,B){for(var I=-1,q=B.length,nt=T.length;++I<q;)T[nt+I]=B[I];return T}function Aa(T,B,I,q){var nt=-1,wt=T==null?0:T.length;for(q&&wt&&(I=T[++nt]);++nt<wt;)I=B(I,T[nt],nt,T);return I}function Fm(T,B,I,q){var nt=T==null?0:T.length;for(q&&nt&&(I=T[--nt]);nt--;)I=B(I,T[nt],nt,T);return I}function Oa(T,B){for(var I=-1,q=T==null?0:T.length;++I<q;)if(B(T[I],I,T))return!0;return!1}var Bm=Ea("length");function Wm(T){return T.split("")}function zm(T){return T.match(Kp)||[]}function Su(T,B,I){var q;return I(T,function(nt,wt,Zt){if(B(nt,wt,Zt))return q=wt,!1}),q}function As(T,B,I,q){for(var nt=T.length,wt=I+(q?1:-1);q?wt--:++wt<nt;)if(B(T[wt],wt,T))return wt;return-1}function $i(T,B,I){return B===B?Zm(T,B,I):As(T,Cu,I)}function Nm(T,B,I,q){for(var nt=I-1,wt=T.length;++nt<wt;)if(q(T[nt],B))return nt;return-1}function Cu(T){return T!==T}function ku(T,B){var I=T==null?0:T.length;return I?Pa(T,B)/I:Gt}function Ea(T){return function(B){return B==null?e:B[T]}}function Ia(T){return function(B){return T==null?e:T[B]}}function Du(T,B,I,q,nt){return nt(T,function(wt,Zt,Ot){I=q?(q=!1,wt):B(I,wt,Zt,Ot)}),I}function Hm(T,B){var I=T.length;for(T.sort(B);I--;)T[I]=T[I].value;return T}function Pa(T,B){for(var I,q=-1,nt=T.length;++q<nt;){var wt=B(T[q]);wt!==e&&(I=I===e?wt:I+wt)}return I}function La(T,B){for(var I=-1,q=Array(T);++I<T;)q[I]=B(I);return q}function $m(T,B){return Wt(B,function(I){return[I,T[I]]})}function Mu(T){return T&&T.slice(0,Eu(T)+1).replace(xa,"")}function Be(T){return function(B){return T(B)}}function Ra(T,B){return Wt(B,function(I){return T[I]})}function Cr(T,B){return T.has(B)}function Tu(T,B){for(var I=-1,q=T.length;++I<q&&$i(B,T[I],0)>-1;);return I}function Au(T,B){for(var I=T.length;I--&&$i(B,T[I],0)>-1;);return I}function Ym(T,B){for(var I=T.length,q=0;I--;)T[I]===B&&++q;return q}var Um=Ia(Mm),Vm=Ia(Tm);function Xm(T){return"\\"+Om[T]}function Km(T,B){return T==null?e:T[B]}function Yi(T){return Sm.test(T)}function qm(T){return Cm.test(T)}function jm(T){for(var B,I=[];!(B=T.next()).done;)I.push(B.value);return I}function Fa(T){var B=-1,I=Array(T.size);return T.forEach(function(q,nt){I[++B]=[nt,q]}),I}function Ou(T,B){return function(I){return T(B(I))}}function Zn(T,B){for(var I=-1,q=T.length,nt=0,wt=[];++I<q;){var Zt=T[I];(Zt===B||Zt===g)&&(T[I]=g,wt[nt++]=I)}return wt}function Os(T){var B=-1,I=Array(T.size);return T.forEach(function(q){I[++B]=q}),I}function Gm(T){var B=-1,I=Array(T.size);return T.forEach(function(q){I[++B]=[q,q]}),I}function Zm(T,B,I){for(var q=I-1,nt=T.length;++q<nt;)if(T[q]===B)return q;return-1}function Jm(T,B,I){for(var q=I+1;q--;)if(T[q]===B)return q;return q}function Ui(T){return Yi(T)?t_(T):Bm(T)}function un(T){return Yi(T)?e_(T):Wm(T)}function Eu(T){for(var B=T.length;B--&&Yp.test(T.charAt(B)););return B}var Qm=Ia(Am);function t_(T){for(var B=ka.lastIndex=0;ka.test(T);)++B;return B}function e_(T){return T.match(ka)||[]}function n_(T){return T.match(wm)||[]}var i_=function T(B){B=B==null?se:Vi.defaults(se.Object(),B,Vi.pick(se,km));var I=B.Array,q=B.Date,nt=B.Error,wt=B.Function,Zt=B.Math,Ot=B.Object,Ba=B.RegExp,r_=B.String,Ke=B.TypeError,Es=I.prototype,s_=wt.prototype,Xi=Ot.prototype,Is=B["__core-js_shared__"],Ps=s_.toString,Mt=Xi.hasOwnProperty,o_=0,Iu=function(){var r=/[^.]+$/.exec(Is&&Is.keys&&Is.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),Ls=Xi.toString,a_=Ps.call(Ot),l_=se._,c_=Ba("^"+Ps.call(Mt).replace(va,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rs=pu?B.Buffer:e,Jn=B.Symbol,Fs=B.Uint8Array,Pu=Rs?Rs.allocUnsafe:e,Bs=Ou(Ot.getPrototypeOf,Ot),Lu=Ot.create,Ru=Xi.propertyIsEnumerable,Ws=Es.splice,Fu=Jn?Jn.isConcatSpreadable:e,kr=Jn?Jn.iterator:e,di=Jn?Jn.toStringTag:e,zs=function(){try{var r=bi(Ot,"defineProperty");return r({},"",{}),r}catch{}}(),u_=B.clearTimeout!==se.clearTimeout&&B.clearTimeout,f_=q&&q.now!==se.Date.now&&q.now,h_=B.setTimeout!==se.setTimeout&&B.setTimeout,Ns=Zt.ceil,Hs=Zt.floor,Wa=Ot.getOwnPropertySymbols,d_=Rs?Rs.isBuffer:e,Bu=B.isFinite,g_=Es.join,p_=Ou(Ot.keys,Ot),Jt=Zt.max,de=Zt.min,m_=q.now,__=B.parseInt,Wu=Zt.random,b_=Es.reverse,za=bi(B,"DataView"),Dr=bi(B,"Map"),Na=bi(B,"Promise"),Ki=bi(B,"Set"),Mr=bi(B,"WeakMap"),Tr=bi(Ot,"create"),$s=Mr&&new Mr,qi={},v_=vi(za),x_=vi(Dr),y_=vi(Na),w_=vi(Ki),S_=vi(Mr),Ys=Jn?Jn.prototype:e,Ar=Ys?Ys.valueOf:e,zu=Ys?Ys.toString:e;function v(r){if(Yt(r)&&!ot(r)&&!(r instanceof pt)){if(r instanceof qe)return r;if(Mt.call(r,"__wrapped__"))return Hf(r)}return new qe(r)}var ji=function(){function r(){}return function(o){if(!Nt(o))return{};if(Lu)return Lu(o);r.prototype=o;var c=new r;return r.prototype=e,c}}();function Us(){}function qe(r,o){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=e}v.templateSettings={escape:Bp,evaluate:Wp,interpolate:qc,variable:"",imports:{_:v}},v.prototype=Us.prototype,v.prototype.constructor=v,qe.prototype=ji(Us.prototype),qe.prototype.constructor=qe;function pt(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=vt,this.__views__=[]}function C_(){var r=new pt(this.__wrapped__);return r.__actions__=Ce(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ce(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ce(this.__views__),r}function k_(){if(this.__filtered__){var r=new pt(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function D_(){var r=this.__wrapped__.value(),o=this.__dir__,c=ot(r),d=o<0,m=c?r.length:0,x=Wb(0,m,this.__views__),C=x.start,M=x.end,A=M-C,z=d?M:C-1,N=this.__iteratees__,$=N.length,V=0,G=de(A,this.__takeCount__);if(!c||!d&&m==A&&G==A)return uf(r,this.__actions__);var J=[];t:for(;A--&&V<G;){z+=o;for(var ut=-1,Q=r[z];++ut<$;){var gt=N[ut],_t=gt.iteratee,Ne=gt.type,xe=_t(Q);if(Ne==lt)Q=xe;else if(!xe){if(Ne==ht)continue t;break t}}J[V++]=Q}return J}pt.prototype=ji(Us.prototype),pt.prototype.constructor=pt;function gi(r){var o=-1,c=r==null?0:r.length;for(this.clear();++o<c;){var d=r[o];this.set(d[0],d[1])}}function M_(){this.__data__=Tr?Tr(null):{},this.size=0}function T_(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}function A_(r){var o=this.__data__;if(Tr){var c=o[r];return c===f?e:c}return Mt.call(o,r)?o[r]:e}function O_(r){var o=this.__data__;return Tr?o[r]!==e:Mt.call(o,r)}function E_(r,o){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=Tr&&o===e?f:o,this}gi.prototype.clear=M_,gi.prototype.delete=T_,gi.prototype.get=A_,gi.prototype.has=O_,gi.prototype.set=E_;function En(r){var o=-1,c=r==null?0:r.length;for(this.clear();++o<c;){var d=r[o];this.set(d[0],d[1])}}function I_(){this.__data__=[],this.size=0}function P_(r){var o=this.__data__,c=Vs(o,r);if(c<0)return!1;var d=o.length-1;return c==d?o.pop():Ws.call(o,c,1),--this.size,!0}function L_(r){var o=this.__data__,c=Vs(o,r);return c<0?e:o[c][1]}function R_(r){return Vs(this.__data__,r)>-1}function F_(r,o){var c=this.__data__,d=Vs(c,r);return d<0?(++this.size,c.push([r,o])):c[d][1]=o,this}En.prototype.clear=I_,En.prototype.delete=P_,En.prototype.get=L_,En.prototype.has=R_,En.prototype.set=F_;function In(r){var o=-1,c=r==null?0:r.length;for(this.clear();++o<c;){var d=r[o];this.set(d[0],d[1])}}function B_(){this.size=0,this.__data__={hash:new gi,map:new(Dr||En),string:new gi}}function W_(r){var o=io(this,r).delete(r);return this.size-=o?1:0,o}function z_(r){return io(this,r).get(r)}function N_(r){return io(this,r).has(r)}function H_(r,o){var c=io(this,r),d=c.size;return c.set(r,o),this.size+=c.size==d?0:1,this}In.prototype.clear=B_,In.prototype.delete=W_,In.prototype.get=z_,In.prototype.has=N_,In.prototype.set=H_;function pi(r){var o=-1,c=r==null?0:r.length;for(this.__data__=new In;++o<c;)this.add(r[o])}function $_(r){return this.__data__.set(r,f),this}function Y_(r){return this.__data__.has(r)}pi.prototype.add=pi.prototype.push=$_,pi.prototype.has=Y_;function fn(r){var o=this.__data__=new En(r);this.size=o.size}function U_(){this.__data__=new En,this.size=0}function V_(r){var o=this.__data__,c=o.delete(r);return this.size=o.size,c}function X_(r){return this.__data__.get(r)}function K_(r){return this.__data__.has(r)}function q_(r,o){var c=this.__data__;if(c instanceof En){var d=c.__data__;if(!Dr||d.length<s-1)return d.push([r,o]),this.size=++c.size,this;c=this.__data__=new In(d)}return c.set(r,o),this.size=c.size,this}fn.prototype.clear=U_,fn.prototype.delete=V_,fn.prototype.get=X_,fn.prototype.has=K_,fn.prototype.set=q_;function Nu(r,o){var c=ot(r),d=!c&&xi(r),m=!c&&!d&&ii(r),x=!c&&!d&&!m&&Qi(r),C=c||d||m||x,M=C?La(r.length,r_):[],A=M.length;for(var z in r)(o||Mt.call(r,z))&&!(C&&(z=="length"||m&&(z=="offset"||z=="parent")||x&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||Fn(z,A)))&&M.push(z);return M}function Hu(r){var o=r.length;return o?r[Za(0,o-1)]:e}function j_(r,o){return ro(Ce(r),mi(o,0,r.length))}function G_(r){return ro(Ce(r))}function Ha(r,o,c){(c!==e&&!hn(r[o],c)||c===e&&!(o in r))&&Pn(r,o,c)}function Or(r,o,c){var d=r[o];(!(Mt.call(r,o)&&hn(d,c))||c===e&&!(o in r))&&Pn(r,o,c)}function Vs(r,o){for(var c=r.length;c--;)if(hn(r[c][0],o))return c;return-1}function Z_(r,o,c,d){return Qn(r,function(m,x,C){o(d,m,c(m),C)}),d}function $u(r,o){return r&&yn(o,ee(o),r)}function J_(r,o){return r&&yn(o,De(o),r)}function Pn(r,o,c){o=="__proto__"&&zs?zs(r,o,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[o]=c}function $a(r,o){for(var c=-1,d=o.length,m=I(d),x=r==null;++c<d;)m[c]=x?e:wl(r,o[c]);return m}function mi(r,o,c){return r===r&&(c!==e&&(r=r<=c?r:c),o!==e&&(r=r>=o?r:o)),r}function je(r,o,c,d,m,x){var C,M=o&p,A=o&_,z=o&b;if(c&&(C=m?c(r,d,m,x):c(r)),C!==e)return C;if(!Nt(r))return r;var N=ot(r);if(N){if(C=Nb(r),!M)return Ce(r,C)}else{var $=ge(r),V=$==fe||$==Se;if(ii(r))return df(r,M);if($==he||$==ce||V&&!m){if(C=A||V?{}:If(r),!M)return A?Ab(r,J_(C,r)):Tb(r,$u(C,r))}else{if(!It[$])return m?r:{};C=Hb(r,$,M)}}x||(x=new fn);var G=x.get(r);if(G)return G;x.set(r,C),ah(r)?r.forEach(function(Q){C.add(je(Q,o,c,Q,r,x))}):sh(r)&&r.forEach(function(Q,gt){C.set(gt,je(Q,o,c,gt,r,x))});var J=z?A?ll:al:A?De:ee,ut=N?e:J(r);return Xe(ut||r,function(Q,gt){ut&&(gt=Q,Q=r[gt]),Or(C,gt,je(Q,o,c,gt,r,x))}),C}function Q_(r){var o=ee(r);return function(c){return Yu(c,r,o)}}function Yu(r,o,c){var d=c.length;if(r==null)return!d;for(r=Ot(r);d--;){var m=c[d],x=o[m],C=r[m];if(C===e&&!(m in r)||!x(C))return!1}return!0}function Uu(r,o,c){if(typeof r!="function")throw new Ke(l);return Br(function(){r.apply(e,c)},o)}function Er(r,o,c,d){var m=-1,x=Ts,C=!0,M=r.length,A=[],z=o.length;if(!M)return A;c&&(o=Wt(o,Be(c))),d?(x=Ta,C=!1):o.length>=s&&(x=Cr,C=!1,o=new pi(o));t:for(;++m<M;){var N=r[m],$=c==null?N:c(N);if(N=d||N!==0?N:0,C&&$===$){for(var V=z;V--;)if(o[V]===$)continue t;A.push(N)}else x(o,$,d)||A.push(N)}return A}var Qn=bf(xn),Vu=bf(Ua,!0);function tb(r,o){var c=!0;return Qn(r,function(d,m,x){return c=!!o(d,m,x),c}),c}function Xs(r,o,c){for(var d=-1,m=r.length;++d<m;){var x=r[d],C=o(x);if(C!=null&&(M===e?C===C&&!ze(C):c(C,M)))var M=C,A=x}return A}function eb(r,o,c,d){var m=r.length;for(c=ct(c),c<0&&(c=-c>m?0:m+c),d=d===e||d>m?m:ct(d),d<0&&(d+=m),d=c>d?0:ch(d);c<d;)r[c++]=o;return r}function Xu(r,o){var c=[];return Qn(r,function(d,m,x){o(d,m,x)&&c.push(d)}),c}function oe(r,o,c,d,m){var x=-1,C=r.length;for(c||(c=Yb),m||(m=[]);++x<C;){var M=r[x];o>0&&c(M)?o>1?oe(M,o-1,c,d,m):Gn(m,M):d||(m[m.length]=M)}return m}var Ya=vf(),Ku=vf(!0);function xn(r,o){return r&&Ya(r,o,ee)}function Ua(r,o){return r&&Ku(r,o,ee)}function Ks(r,o){return jn(o,function(c){return Bn(r[c])})}function _i(r,o){o=ei(o,r);for(var c=0,d=o.length;r!=null&&c<d;)r=r[wn(o[c++])];return c&&c==d?r:e}function qu(r,o,c){var d=o(r);return ot(r)?d:Gn(d,c(r))}function be(r){return r==null?r===e?Op:vn:di&&di in Ot(r)?Bb(r):Gb(r)}function Va(r,o){return r>o}function nb(r,o){return r!=null&&Mt.call(r,o)}function ib(r,o){return r!=null&&o in Ot(r)}function rb(r,o,c){return r>=de(o,c)&&r<Jt(o,c)}function Xa(r,o,c){for(var d=c?Ta:Ts,m=r[0].length,x=r.length,C=x,M=I(x),A=1/0,z=[];C--;){var N=r[C];C&&o&&(N=Wt(N,Be(o))),A=de(N.length,A),M[C]=!c&&(o||m>=120&&N.length>=120)?new pi(C&&N):e}N=r[0];var $=-1,V=M[0];t:for(;++$<m&&z.length<A;){var G=N[$],J=o?o(G):G;if(G=c||G!==0?G:0,!(V?Cr(V,J):d(z,J,c))){for(C=x;--C;){var ut=M[C];if(!(ut?Cr(ut,J):d(r[C],J,c)))continue t}V&&V.push(J),z.push(G)}}return z}function sb(r,o,c,d){return xn(r,function(m,x,C){o(d,c(m),x,C)}),d}function Ir(r,o,c){o=ei(o,r),r=Ff(r,o);var d=r==null?r:r[wn(Ze(o))];return d==null?e:Fe(d,r,c)}function ju(r){return Yt(r)&&be(r)==ce}function ob(r){return Yt(r)&&be(r)==Sr}function ab(r){return Yt(r)&&be(r)==st}function Pr(r,o,c,d,m){return r===o?!0:r==null||o==null||!Yt(r)&&!Yt(o)?r!==r&&o!==o:lb(r,o,c,d,Pr,m)}function lb(r,o,c,d,m,x){var C=ot(r),M=ot(o),A=C?ue:ge(r),z=M?ue:ge(o);A=A==ce?he:A,z=z==ce?he:z;var N=A==he,$=z==he,V=A==z;if(V&&ii(r)){if(!ii(o))return!1;C=!0,N=!1}if(V&&!N)return x||(x=new fn),C||Qi(r)?Af(r,o,c,d,m,x):Rb(r,o,A,c,d,m,x);if(!(c&S)){var G=N&&Mt.call(r,"__wrapped__"),J=$&&Mt.call(o,"__wrapped__");if(G||J){var ut=G?r.value():r,Q=J?o.value():o;return x||(x=new fn),m(ut,Q,c,d,x)}}return V?(x||(x=new fn),Fb(r,o,c,d,m,x)):!1}function cb(r){return Yt(r)&&ge(r)==At}function Ka(r,o,c,d){var m=c.length,x=m,C=!d;if(r==null)return!x;for(r=Ot(r);m--;){var M=c[m];if(C&&M[2]?M[1]!==r[M[0]]:!(M[0]in r))return!1}for(;++m<x;){M=c[m];var A=M[0],z=r[A],N=M[1];if(C&&M[2]){if(z===e&&!(A in r))return!1}else{var $=new fn;if(d)var V=d(z,N,A,r,o,$);if(!(V===e?Pr(N,z,S|w,d,$):V))return!1}}return!0}function Gu(r){if(!Nt(r)||Vb(r))return!1;var o=Bn(r)?c_:Qp;return o.test(vi(r))}function ub(r){return Yt(r)&&be(r)==zi}function fb(r){return Yt(r)&&ge(r)==cn}function hb(r){return Yt(r)&&uo(r.length)&&!!Ft[be(r)]}function Zu(r){return typeof r=="function"?r:r==null?Me:typeof r=="object"?ot(r)?tf(r[0],r[1]):Qu(r):xh(r)}function qa(r){if(!Fr(r))return p_(r);var o=[];for(var c in Ot(r))Mt.call(r,c)&&c!="constructor"&&o.push(c);return o}function db(r){if(!Nt(r))return jb(r);var o=Fr(r),c=[];for(var d in r)d=="constructor"&&(o||!Mt.call(r,d))||c.push(d);return c}function ja(r,o){return r<o}function Ju(r,o){var c=-1,d=ke(r)?I(r.length):[];return Qn(r,function(m,x,C){d[++c]=o(m,x,C)}),d}function Qu(r){var o=ul(r);return o.length==1&&o[0][2]?Lf(o[0][0],o[0][1]):function(c){return c===r||Ka(c,r,o)}}function tf(r,o){return hl(r)&&Pf(o)?Lf(wn(r),o):function(c){var d=wl(c,r);return d===e&&d===o?Sl(c,r):Pr(o,d,S|w)}}function qs(r,o,c,d,m){r!==o&&Ya(o,function(x,C){if(m||(m=new fn),Nt(x))gb(r,o,C,c,qs,d,m);else{var M=d?d(gl(r,C),x,C+"",r,o,m):e;M===e&&(M=x),Ha(r,C,M)}},De)}function gb(r,o,c,d,m,x,C){var M=gl(r,c),A=gl(o,c),z=C.get(A);if(z){Ha(r,c,z);return}var N=x?x(M,A,c+"",r,o,C):e,$=N===e;if($){var V=ot(A),G=!V&&ii(A),J=!V&&!G&&Qi(A);N=A,V||G||J?ot(M)?N=M:Xt(M)?N=Ce(M):G?($=!1,N=df(A,!0)):J?($=!1,N=gf(A,!0)):N=[]:Wr(A)||xi(A)?(N=M,xi(M)?N=uh(M):(!Nt(M)||Bn(M))&&(N=If(A))):$=!1}$&&(C.set(A,N),m(N,A,d,x,C),C.delete(A)),Ha(r,c,N)}function ef(r,o){var c=r.length;if(c)return o+=o<0?c:0,Fn(o,c)?r[o]:e}function nf(r,o,c){o.length?o=Wt(o,function(x){return ot(x)?function(C){return _i(C,x.length===1?x[0]:x)}:x}):o=[Me];var d=-1;o=Wt(o,Be(Z()));var m=Ju(r,function(x,C,M){var A=Wt(o,function(z){return z(x)});return{criteria:A,index:++d,value:x}});return Hm(m,function(x,C){return Mb(x,C,c)})}function pb(r,o){return rf(r,o,function(c,d){return Sl(r,d)})}function rf(r,o,c){for(var d=-1,m=o.length,x={};++d<m;){var C=o[d],M=_i(r,C);c(M,C)&&Lr(x,ei(C,r),M)}return x}function mb(r){return function(o){return _i(o,r)}}function Ga(r,o,c,d){var m=d?Nm:$i,x=-1,C=o.length,M=r;for(r===o&&(o=Ce(o)),c&&(M=Wt(r,Be(c)));++x<C;)for(var A=0,z=o[x],N=c?c(z):z;(A=m(M,N,A,d))>-1;)M!==r&&Ws.call(M,A,1),Ws.call(r,A,1);return r}function sf(r,o){for(var c=r?o.length:0,d=c-1;c--;){var m=o[c];if(c==d||m!==x){var x=m;Fn(m)?Ws.call(r,m,1):tl(r,m)}}return r}function Za(r,o){return r+Hs(Wu()*(o-r+1))}function _b(r,o,c,d){for(var m=-1,x=Jt(Ns((o-r)/(c||1)),0),C=I(x);x--;)C[d?x:++m]=r,r+=c;return C}function Ja(r,o){var c="";if(!r||o<1||o>Dt)return c;do o%2&&(c+=r),o=Hs(o/2),o&&(r+=r);while(o);return c}function ft(r,o){return pl(Rf(r,o,Me),r+"")}function bb(r){return Hu(tr(r))}function vb(r,o){var c=tr(r);return ro(c,mi(o,0,c.length))}function Lr(r,o,c,d){if(!Nt(r))return r;o=ei(o,r);for(var m=-1,x=o.length,C=x-1,M=r;M!=null&&++m<x;){var A=wn(o[m]),z=c;if(A==="__proto__"||A==="constructor"||A==="prototype")return r;if(m!=C){var N=M[A];z=d?d(N,A,M):e,z===e&&(z=Nt(N)?N:Fn(o[m+1])?[]:{})}Or(M,A,z),M=M[A]}return r}var of=$s?function(r,o){return $s.set(r,o),r}:Me,xb=zs?function(r,o){return zs(r,"toString",{configurable:!0,enumerable:!1,value:kl(o),writable:!0})}:Me;function yb(r){return ro(tr(r))}function Ge(r,o,c){var d=-1,m=r.length;o<0&&(o=-o>m?0:m+o),c=c>m?m:c,c<0&&(c+=m),m=o>c?0:c-o>>>0,o>>>=0;for(var x=I(m);++d<m;)x[d]=r[d+o];return x}function wb(r,o){var c;return Qn(r,function(d,m,x){return c=o(d,m,x),!c}),!!c}function js(r,o,c){var d=0,m=r==null?d:r.length;if(typeof o=="number"&&o===o&&m<=we){for(;d<m;){var x=d+m>>>1,C=r[x];C!==null&&!ze(C)&&(c?C<=o:C<o)?d=x+1:m=x}return m}return Qa(r,o,Me,c)}function Qa(r,o,c,d){var m=0,x=r==null?0:r.length;if(x===0)return 0;o=c(o);for(var C=o!==o,M=o===null,A=ze(o),z=o===e;m<x;){var N=Hs((m+x)/2),$=c(r[N]),V=$!==e,G=$===null,J=$===$,ut=ze($);if(C)var Q=d||J;else z?Q=J&&(d||V):M?Q=J&&V&&(d||!G):A?Q=J&&V&&!G&&(d||!ut):G||ut?Q=!1:Q=d?$<=o:$<o;Q?m=N+1:x=N}return de(x,le)}function af(r,o){for(var c=-1,d=r.length,m=0,x=[];++c<d;){var C=r[c],M=o?o(C):C;if(!c||!hn(M,A)){var A=M;x[m++]=C===0?0:C}}return x}function lf(r){return typeof r=="number"?r:ze(r)?Gt:+r}function We(r){if(typeof r=="string")return r;if(ot(r))return Wt(r,We)+"";if(ze(r))return zu?zu.call(r):"";var o=r+"";return o=="0"&&1/r==-yt?"-0":o}function ti(r,o,c){var d=-1,m=Ts,x=r.length,C=!0,M=[],A=M;if(c)C=!1,m=Ta;else if(x>=s){var z=o?null:Pb(r);if(z)return Os(z);C=!1,m=Cr,A=new pi}else A=o?[]:M;t:for(;++d<x;){var N=r[d],$=o?o(N):N;if(N=c||N!==0?N:0,C&&$===$){for(var V=A.length;V--;)if(A[V]===$)continue t;o&&A.push($),M.push(N)}else m(A,$,c)||(A!==M&&A.push($),M.push(N))}return M}function tl(r,o){return o=ei(o,r),r=Ff(r,o),r==null||delete r[wn(Ze(o))]}function cf(r,o,c,d){return Lr(r,o,c(_i(r,o)),d)}function Gs(r,o,c,d){for(var m=r.length,x=d?m:-1;(d?x--:++x<m)&&o(r[x],x,r););return c?Ge(r,d?0:x,d?x+1:m):Ge(r,d?x+1:0,d?m:x)}function uf(r,o){var c=r;return c instanceof pt&&(c=c.value()),Aa(o,function(d,m){return m.func.apply(m.thisArg,Gn([d],m.args))},c)}function el(r,o,c){var d=r.length;if(d<2)return d?ti(r[0]):[];for(var m=-1,x=I(d);++m<d;)for(var C=r[m],M=-1;++M<d;)M!=m&&(x[m]=Er(x[m]||C,r[M],o,c));return ti(oe(x,1),o,c)}function ff(r,o,c){for(var d=-1,m=r.length,x=o.length,C={};++d<m;){var M=d<x?o[d]:e;c(C,r[d],M)}return C}function nl(r){return Xt(r)?r:[]}function il(r){return typeof r=="function"?r:Me}function ei(r,o){return ot(r)?r:hl(r,o)?[r]:Nf(kt(r))}var Sb=ft;function ni(r,o,c){var d=r.length;return c=c===e?d:c,!o&&c>=d?r:Ge(r,o,c)}var hf=u_||function(r){return se.clearTimeout(r)};function df(r,o){if(o)return r.slice();var c=r.length,d=Pu?Pu(c):new r.constructor(c);return r.copy(d),d}function rl(r){var o=new r.constructor(r.byteLength);return new Fs(o).set(new Fs(r)),o}function Cb(r,o){var c=o?rl(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}function kb(r){var o=new r.constructor(r.source,jc.exec(r));return o.lastIndex=r.lastIndex,o}function Db(r){return Ar?Ot(Ar.call(r)):{}}function gf(r,o){var c=o?rl(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}function pf(r,o){if(r!==o){var c=r!==e,d=r===null,m=r===r,x=ze(r),C=o!==e,M=o===null,A=o===o,z=ze(o);if(!M&&!z&&!x&&r>o||x&&C&&A&&!M&&!z||d&&C&&A||!c&&A||!m)return 1;if(!d&&!x&&!z&&r<o||z&&c&&m&&!d&&!x||M&&c&&m||!C&&m||!A)return-1}return 0}function Mb(r,o,c){for(var d=-1,m=r.criteria,x=o.criteria,C=m.length,M=c.length;++d<C;){var A=pf(m[d],x[d]);if(A){if(d>=M)return A;var z=c[d];return A*(z=="desc"?-1:1)}}return r.index-o.index}function mf(r,o,c,d){for(var m=-1,x=r.length,C=c.length,M=-1,A=o.length,z=Jt(x-C,0),N=I(A+z),$=!d;++M<A;)N[M]=o[M];for(;++m<C;)($||m<x)&&(N[c[m]]=r[m]);for(;z--;)N[M++]=r[m++];return N}function _f(r,o,c,d){for(var m=-1,x=r.length,C=-1,M=c.length,A=-1,z=o.length,N=Jt(x-M,0),$=I(N+z),V=!d;++m<N;)$[m]=r[m];for(var G=m;++A<z;)$[G+A]=o[A];for(;++C<M;)(V||m<x)&&($[G+c[C]]=r[m++]);return $}function Ce(r,o){var c=-1,d=r.length;for(o||(o=I(d));++c<d;)o[c]=r[c];return o}function yn(r,o,c,d){var m=!c;c||(c={});for(var x=-1,C=o.length;++x<C;){var M=o[x],A=d?d(c[M],r[M],M,c,r):e;A===e&&(A=r[M]),m?Pn(c,M,A):Or(c,M,A)}return c}function Tb(r,o){return yn(r,fl(r),o)}function Ab(r,o){return yn(r,Of(r),o)}function Zs(r,o){return function(c,d){var m=ot(c)?Lm:Z_,x=o?o():{};return m(c,r,Z(d,2),x)}}function Gi(r){return ft(function(o,c){var d=-1,m=c.length,x=m>1?c[m-1]:e,C=m>2?c[2]:e;for(x=r.length>3&&typeof x=="function"?(m--,x):e,C&&ve(c[0],c[1],C)&&(x=m<3?e:x,m=1),o=Ot(o);++d<m;){var M=c[d];M&&r(o,M,d,x)}return o})}function bf(r,o){return function(c,d){if(c==null)return c;if(!ke(c))return r(c,d);for(var m=c.length,x=o?m:-1,C=Ot(c);(o?x--:++x<m)&&d(C[x],x,C)!==!1;);return c}}function vf(r){return function(o,c,d){for(var m=-1,x=Ot(o),C=d(o),M=C.length;M--;){var A=C[r?M:++m];if(c(x[A],A,x)===!1)break}return o}}function Ob(r,o,c){var d=o&y,m=Rr(r);function x(){var C=this&&this!==se&&this instanceof x?m:r;return C.apply(d?c:this,arguments)}return x}function xf(r){return function(o){o=kt(o);var c=Yi(o)?un(o):e,d=c?c[0]:o.charAt(0),m=c?ni(c,1).join(""):o.slice(1);return d[r]()+m}}function Zi(r){return function(o){return Aa(bh(_h(o).replace(xm,"")),r,"")}}function Rr(r){return function(){var o=arguments;switch(o.length){case 0:return new r;case 1:return new r(o[0]);case 2:return new r(o[0],o[1]);case 3:return new r(o[0],o[1],o[2]);case 4:return new r(o[0],o[1],o[2],o[3]);case 5:return new r(o[0],o[1],o[2],o[3],o[4]);case 6:return new r(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new r(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var c=ji(r.prototype),d=r.apply(c,o);return Nt(d)?d:c}}function Eb(r,o,c){var d=Rr(r);function m(){for(var x=arguments.length,C=I(x),M=x,A=Ji(m);M--;)C[M]=arguments[M];var z=x<3&&C[0]!==A&&C[x-1]!==A?[]:Zn(C,A);if(x-=z.length,x<c)return kf(r,o,Js,m.placeholder,e,C,z,e,e,c-x);var N=this&&this!==se&&this instanceof m?d:r;return Fe(N,this,C)}return m}function yf(r){return function(o,c,d){var m=Ot(o);if(!ke(o)){var x=Z(c,3);o=ee(o),c=function(M){return x(m[M],M,m)}}var C=r(o,c,d);return C>-1?m[x?o[C]:C]:e}}function wf(r){return Rn(function(o){var c=o.length,d=c,m=qe.prototype.thru;for(r&&o.reverse();d--;){var x=o[d];if(typeof x!="function")throw new Ke(l);if(m&&!C&&no(x)=="wrapper")var C=new qe([],!0)}for(d=C?d:c;++d<c;){x=o[d];var M=no(x),A=M=="wrapper"?cl(x):e;A&&dl(A[0])&&A[1]==(E|P|D|R)&&!A[4].length&&A[9]==1?C=C[no(A[0])].apply(C,A[3]):C=x.length==1&&dl(x)?C[M]():C.thru(x)}return function(){var z=arguments,N=z[0];if(C&&z.length==1&&ot(N))return C.plant(N).value();for(var $=0,V=c?o[$].apply(this,z):N;++$<c;)V=o[$].call(this,V);return V}})}function Js(r,o,c,d,m,x,C,M,A,z){var N=o&E,$=o&y,V=o&k,G=o&(P|F),J=o&W,ut=V?e:Rr(r);function Q(){for(var gt=arguments.length,_t=I(gt),Ne=gt;Ne--;)_t[Ne]=arguments[Ne];if(G)var xe=Ji(Q),He=Ym(_t,xe);if(d&&(_t=mf(_t,d,m,G)),x&&(_t=_f(_t,x,C,G)),gt-=He,G&&gt<z){var Kt=Zn(_t,xe);return kf(r,o,Js,Q.placeholder,c,_t,Kt,M,A,z-gt)}var dn=$?c:this,zn=V?dn[r]:r;return gt=_t.length,M?_t=Zb(_t,M):J&&gt>1&&_t.reverse(),N&&A<gt&&(_t.length=A),this&&this!==se&&this instanceof Q&&(zn=ut||Rr(zn)),zn.apply(dn,_t)}return Q}function Sf(r,o){return function(c,d){return sb(c,r,o(d),{})}}function Qs(r,o){return function(c,d){var m;if(c===e&&d===e)return o;if(c!==e&&(m=c),d!==e){if(m===e)return d;typeof c=="string"||typeof d=="string"?(c=We(c),d=We(d)):(c=lf(c),d=lf(d)),m=r(c,d)}return m}}function sl(r){return Rn(function(o){return o=Wt(o,Be(Z())),ft(function(c){var d=this;return r(o,function(m){return Fe(m,d,c)})})})}function to(r,o){o=o===e?" ":We(o);var c=o.length;if(c<2)return c?Ja(o,r):o;var d=Ja(o,Ns(r/Ui(o)));return Yi(o)?ni(un(d),0,r).join(""):d.slice(0,r)}function Ib(r,o,c,d){var m=o&y,x=Rr(r);function C(){for(var M=-1,A=arguments.length,z=-1,N=d.length,$=I(N+A),V=this&&this!==se&&this instanceof C?x:r;++z<N;)$[z]=d[z];for(;A--;)$[z++]=arguments[++M];return Fe(V,m?c:this,$)}return C}function Cf(r){return function(o,c,d){return d&&typeof d!="number"&&ve(o,c,d)&&(c=d=e),o=Wn(o),c===e?(c=o,o=0):c=Wn(c),d=d===e?o<c?1:-1:Wn(d),_b(o,c,d,r)}}function eo(r){return function(o,c){return typeof o=="string"&&typeof c=="string"||(o=Je(o),c=Je(c)),r(o,c)}}function kf(r,o,c,d,m,x,C,M,A,z){var N=o&P,$=N?C:e,V=N?e:C,G=N?x:e,J=N?e:x;o|=N?D:L,o&=~(N?L:D),o&O||(o&=-4);var ut=[r,o,m,G,$,J,V,M,A,z],Q=c.apply(e,ut);return dl(r)&&Bf(Q,ut),Q.placeholder=d,Wf(Q,r,o)}function ol(r){var o=Zt[r];return function(c,d){if(c=Je(c),d=d==null?0:de(ct(d),292),d&&Bu(c)){var m=(kt(c)+"e").split("e"),x=o(m[0]+"e"+(+m[1]+d));return m=(kt(x)+"e").split("e"),+(m[0]+"e"+(+m[1]-d))}return o(c)}}var Pb=Ki&&1/Os(new Ki([,-0]))[1]==yt?function(r){return new Ki(r)}:Tl;function Df(r){return function(o){var c=ge(o);return c==At?Fa(o):c==cn?Gm(o):$m(o,r(o))}}function Ln(r,o,c,d,m,x,C,M){var A=o&k;if(!A&&typeof r!="function")throw new Ke(l);var z=d?d.length:0;if(z||(o&=-97,d=m=e),C=C===e?C:Jt(ct(C),0),M=M===e?M:ct(M),z-=m?m.length:0,o&L){var N=d,$=m;d=m=e}var V=A?e:cl(r),G=[r,o,c,d,m,N,$,x,C,M];if(V&&qb(G,V),r=G[0],o=G[1],c=G[2],d=G[3],m=G[4],M=G[9]=G[9]===e?A?0:r.length:Jt(G[9]-z,0),!M&&o&(P|F)&&(o&=-25),!o||o==y)var J=Ob(r,o,c);else o==P||o==F?J=Eb(r,o,M):(o==D||o==(y|D))&&!m.length?J=Ib(r,o,c,d):J=Js.apply(e,G);var ut=V?of:Bf;return Wf(ut(J,G),r,o)}function Mf(r,o,c,d){return r===e||hn(r,Xi[c])&&!Mt.call(d,c)?o:r}function Tf(r,o,c,d,m,x){return Nt(r)&&Nt(o)&&(x.set(o,r),qs(r,o,e,Tf,x),x.delete(o)),r}function Lb(r){return Wr(r)?e:r}function Af(r,o,c,d,m,x){var C=c&S,M=r.length,A=o.length;if(M!=A&&!(C&&A>M))return!1;var z=x.get(r),N=x.get(o);if(z&&N)return z==o&&N==r;var $=-1,V=!0,G=c&w?new pi:e;for(x.set(r,o),x.set(o,r);++$<M;){var J=r[$],ut=o[$];if(d)var Q=C?d(ut,J,$,o,r,x):d(J,ut,$,r,o,x);if(Q!==e){if(Q)continue;V=!1;break}if(G){if(!Oa(o,function(gt,_t){if(!Cr(G,_t)&&(J===gt||m(J,gt,c,d,x)))return G.push(_t)})){V=!1;break}}else if(!(J===ut||m(J,ut,c,d,x))){V=!1;break}}return x.delete(r),x.delete(o),V}function Rb(r,o,c,d,m,x,C){switch(c){case Ni:if(r.byteLength!=o.byteLength||r.byteOffset!=o.byteOffset)return!1;r=r.buffer,o=o.buffer;case Sr:return!(r.byteLength!=o.byteLength||!x(new Fs(r),new Fs(o)));case rt:case st:case $t:return hn(+r,+o);case Rt:return r.name==o.name&&r.message==o.message;case zi:case yr:return r==o+"";case At:var M=Fa;case cn:var A=d&S;if(M||(M=Os),r.size!=o.size&&!A)return!1;var z=C.get(r);if(z)return z==o;d|=w,C.set(r,o);var N=Af(M(r),M(o),d,m,x,C);return C.delete(r),N;case Cs:if(Ar)return Ar.call(r)==Ar.call(o)}return!1}function Fb(r,o,c,d,m,x){var C=c&S,M=al(r),A=M.length,z=al(o),N=z.length;if(A!=N&&!C)return!1;for(var $=A;$--;){var V=M[$];if(!(C?V in o:Mt.call(o,V)))return!1}var G=x.get(r),J=x.get(o);if(G&&J)return G==o&&J==r;var ut=!0;x.set(r,o),x.set(o,r);for(var Q=C;++$<A;){V=M[$];var gt=r[V],_t=o[V];if(d)var Ne=C?d(_t,gt,V,o,r,x):d(gt,_t,V,r,o,x);if(!(Ne===e?gt===_t||m(gt,_t,c,d,x):Ne)){ut=!1;break}Q||(Q=V=="constructor")}if(ut&&!Q){var xe=r.constructor,He=o.constructor;xe!=He&&"constructor"in r&&"constructor"in o&&!(typeof xe=="function"&&xe instanceof xe&&typeof He=="function"&&He instanceof He)&&(ut=!1)}return x.delete(r),x.delete(o),ut}function Rn(r){return pl(Rf(r,e,Uf),r+"")}function al(r){return qu(r,ee,fl)}function ll(r){return qu(r,De,Of)}var cl=$s?function(r){return $s.get(r)}:Tl;function no(r){for(var o=r.name+"",c=qi[o],d=Mt.call(qi,o)?c.length:0;d--;){var m=c[d],x=m.func;if(x==null||x==r)return m.name}return o}function Ji(r){var o=Mt.call(v,"placeholder")?v:r;return o.placeholder}function Z(){var r=v.iteratee||Dl;return r=r===Dl?Zu:r,arguments.length?r(arguments[0],arguments[1]):r}function io(r,o){var c=r.__data__;return Ub(o)?c[typeof o=="string"?"string":"hash"]:c.map}function ul(r){for(var o=ee(r),c=o.length;c--;){var d=o[c],m=r[d];o[c]=[d,m,Pf(m)]}return o}function bi(r,o){var c=Km(r,o);return Gu(c)?c:e}function Bb(r){var o=Mt.call(r,di),c=r[di];try{r[di]=e;var d=!0}catch{}var m=Ls.call(r);return d&&(o?r[di]=c:delete r[di]),m}var fl=Wa?function(r){return r==null?[]:(r=Ot(r),jn(Wa(r),function(o){return Ru.call(r,o)}))}:Al,Of=Wa?function(r){for(var o=[];r;)Gn(o,fl(r)),r=Bs(r);return o}:Al,ge=be;(za&&ge(new za(new ArrayBuffer(1)))!=Ni||Dr&&ge(new Dr)!=At||Na&&ge(Na.resolve())!=Wi||Ki&&ge(new Ki)!=cn||Mr&&ge(new Mr)!=wr)&&(ge=function(r){var o=be(r),c=o==he?r.constructor:e,d=c?vi(c):"";if(d)switch(d){case v_:return Ni;case x_:return At;case y_:return Wi;case w_:return cn;case S_:return wr}return o});function Wb(r,o,c){for(var d=-1,m=c.length;++d<m;){var x=c[d],C=x.size;switch(x.type){case"drop":r+=C;break;case"dropRight":o-=C;break;case"take":o=de(o,r+C);break;case"takeRight":r=Jt(r,o-C);break}}return{start:r,end:o}}function zb(r){var o=r.match(Vp);return o?o[1].split(Xp):[]}function Ef(r,o,c){o=ei(o,r);for(var d=-1,m=o.length,x=!1;++d<m;){var C=wn(o[d]);if(!(x=r!=null&&c(r,C)))break;r=r[C]}return x||++d!=m?x:(m=r==null?0:r.length,!!m&&uo(m)&&Fn(C,m)&&(ot(r)||xi(r)))}function Nb(r){var o=r.length,c=new r.constructor(o);return o&&typeof r[0]=="string"&&Mt.call(r,"index")&&(c.index=r.index,c.input=r.input),c}function If(r){return typeof r.constructor=="function"&&!Fr(r)?ji(Bs(r)):{}}function Hb(r,o,c){var d=r.constructor;switch(o){case Sr:return rl(r);case rt:case st:return new d(+r);case Ni:return Cb(r,c);case ua:case fa:case ha:case da:case ga:case pa:case ma:case _a:case ba:return gf(r,c);case At:return new d;case $t:case yr:return new d(r);case zi:return kb(r);case cn:return new d;case Cs:return Db(r)}}function $b(r,o){var c=o.length;if(!c)return r;var d=c-1;return o[d]=(c>1?"& ":"")+o[d],o=o.join(c>2?", ":" "),r.replace(Up,`{
/* [wrapped with `+o+`] */
`)}function Yb(r){return ot(r)||xi(r)||!!(Fu&&r&&r[Fu])}function Fn(r,o){var c=typeof r;return o=o??Dt,!!o&&(c=="number"||c!="symbol"&&em.test(r))&&r>-1&&r%1==0&&r<o}function ve(r,o,c){if(!Nt(c))return!1;var d=typeof o;return(d=="number"?ke(c)&&Fn(o,c.length):d=="string"&&o in c)?hn(c[o],r):!1}function hl(r,o){if(ot(r))return!1;var c=typeof r;return c=="number"||c=="symbol"||c=="boolean"||r==null||ze(r)?!0:Np.test(r)||!zp.test(r)||o!=null&&r in Ot(o)}function Ub(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}function dl(r){var o=no(r),c=v[o];if(typeof c!="function"||!(o in pt.prototype))return!1;if(r===c)return!0;var d=cl(c);return!!d&&r===d[0]}function Vb(r){return!!Iu&&Iu in r}var Xb=Is?Bn:Ol;function Fr(r){var o=r&&r.constructor,c=typeof o=="function"&&o.prototype||Xi;return r===c}function Pf(r){return r===r&&!Nt(r)}function Lf(r,o){return function(c){return c==null?!1:c[r]===o&&(o!==e||r in Ot(c))}}function Kb(r){var o=lo(r,function(d){return c.size===h&&c.clear(),d}),c=o.cache;return o}function qb(r,o){var c=r[1],d=o[1],m=c|d,x=m<(y|k|E),C=d==E&&c==P||d==E&&c==R&&r[7].length<=o[8]||d==(E|R)&&o[7].length<=o[8]&&c==P;if(!(x||C))return r;d&y&&(r[2]=o[2],m|=c&y?0:O);var M=o[3];if(M){var A=r[3];r[3]=A?mf(A,M,o[4]):M,r[4]=A?Zn(r[3],g):o[4]}return M=o[5],M&&(A=r[5],r[5]=A?_f(A,M,o[6]):M,r[6]=A?Zn(r[5],g):o[6]),M=o[7],M&&(r[7]=M),d&E&&(r[8]=r[8]==null?o[8]:de(r[8],o[8])),r[9]==null&&(r[9]=o[9]),r[0]=o[0],r[1]=m,r}function jb(r){var o=[];if(r!=null)for(var c in Ot(r))o.push(c);return o}function Gb(r){return Ls.call(r)}function Rf(r,o,c){return o=Jt(o===e?r.length-1:o,0),function(){for(var d=arguments,m=-1,x=Jt(d.length-o,0),C=I(x);++m<x;)C[m]=d[o+m];m=-1;for(var M=I(o+1);++m<o;)M[m]=d[m];return M[o]=c(C),Fe(r,this,M)}}function Ff(r,o){return o.length<2?r:_i(r,Ge(o,0,-1))}function Zb(r,o){for(var c=r.length,d=de(o.length,c),m=Ce(r);d--;){var x=o[d];r[d]=Fn(x,c)?m[x]:e}return r}function gl(r,o){if(!(o==="constructor"&&typeof r[o]=="function")&&o!="__proto__")return r[o]}var Bf=zf(of),Br=h_||function(r,o){return se.setTimeout(r,o)},pl=zf(xb);function Wf(r,o,c){var d=o+"";return pl(r,$b(d,Jb(zb(d),c)))}function zf(r){var o=0,c=0;return function(){var d=m_(),m=it-(d-c);if(c=d,m>0){if(++o>=K)return arguments[0]}else o=0;return r.apply(e,arguments)}}function ro(r,o){var c=-1,d=r.length,m=d-1;for(o=o===e?d:o;++c<o;){var x=Za(c,m),C=r[x];r[x]=r[c],r[c]=C}return r.length=o,r}var Nf=Kb(function(r){var o=[];return r.charCodeAt(0)===46&&o.push(""),r.replace(Hp,function(c,d,m,x){o.push(m?x.replace(jp,"$1"):d||c)}),o});function wn(r){if(typeof r=="string"||ze(r))return r;var o=r+"";return o=="0"&&1/r==-yt?"-0":o}function vi(r){if(r!=null){try{return Ps.call(r)}catch{}try{return r+""}catch{}}return""}function Jb(r,o){return Xe(Re,function(c){var d="_."+c[0];o&c[1]&&!Ts(r,d)&&r.push(d)}),r.sort()}function Hf(r){if(r instanceof pt)return r.clone();var o=new qe(r.__wrapped__,r.__chain__);return o.__actions__=Ce(r.__actions__),o.__index__=r.__index__,o.__values__=r.__values__,o}function Qb(r,o,c){(c?ve(r,o,c):o===e)?o=1:o=Jt(ct(o),0);var d=r==null?0:r.length;if(!d||o<1)return[];for(var m=0,x=0,C=I(Ns(d/o));m<d;)C[x++]=Ge(r,m,m+=o);return C}function t0(r){for(var o=-1,c=r==null?0:r.length,d=0,m=[];++o<c;){var x=r[o];x&&(m[d++]=x)}return m}function e0(){var r=arguments.length;if(!r)return[];for(var o=I(r-1),c=arguments[0],d=r;d--;)o[d-1]=arguments[d];return Gn(ot(c)?Ce(c):[c],oe(o,1))}var n0=ft(function(r,o){return Xt(r)?Er(r,oe(o,1,Xt,!0)):[]}),i0=ft(function(r,o){var c=Ze(o);return Xt(c)&&(c=e),Xt(r)?Er(r,oe(o,1,Xt,!0),Z(c,2)):[]}),r0=ft(function(r,o){var c=Ze(o);return Xt(c)&&(c=e),Xt(r)?Er(r,oe(o,1,Xt,!0),e,c):[]});function s0(r,o,c){var d=r==null?0:r.length;return d?(o=c||o===e?1:ct(o),Ge(r,o<0?0:o,d)):[]}function o0(r,o,c){var d=r==null?0:r.length;return d?(o=c||o===e?1:ct(o),o=d-o,Ge(r,0,o<0?0:o)):[]}function a0(r,o){return r&&r.length?Gs(r,Z(o,3),!0,!0):[]}function l0(r,o){return r&&r.length?Gs(r,Z(o,3),!0):[]}function c0(r,o,c,d){var m=r==null?0:r.length;return m?(c&&typeof c!="number"&&ve(r,o,c)&&(c=0,d=m),eb(r,o,c,d)):[]}function $f(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var m=c==null?0:ct(c);return m<0&&(m=Jt(d+m,0)),As(r,Z(o,3),m)}function Yf(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var m=d-1;return c!==e&&(m=ct(c),m=c<0?Jt(d+m,0):de(m,d-1)),As(r,Z(o,3),m,!0)}function Uf(r){var o=r==null?0:r.length;return o?oe(r,1):[]}function u0(r){var o=r==null?0:r.length;return o?oe(r,yt):[]}function f0(r,o){var c=r==null?0:r.length;return c?(o=o===e?1:ct(o),oe(r,o)):[]}function h0(r){for(var o=-1,c=r==null?0:r.length,d={};++o<c;){var m=r[o];d[m[0]]=m[1]}return d}function Vf(r){return r&&r.length?r[0]:e}function d0(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var m=c==null?0:ct(c);return m<0&&(m=Jt(d+m,0)),$i(r,o,m)}function g0(r){var o=r==null?0:r.length;return o?Ge(r,0,-1):[]}var p0=ft(function(r){var o=Wt(r,nl);return o.length&&o[0]===r[0]?Xa(o):[]}),m0=ft(function(r){var o=Ze(r),c=Wt(r,nl);return o===Ze(c)?o=e:c.pop(),c.length&&c[0]===r[0]?Xa(c,Z(o,2)):[]}),_0=ft(function(r){var o=Ze(r),c=Wt(r,nl);return o=typeof o=="function"?o:e,o&&c.pop(),c.length&&c[0]===r[0]?Xa(c,e,o):[]});function b0(r,o){return r==null?"":g_.call(r,o)}function Ze(r){var o=r==null?0:r.length;return o?r[o-1]:e}function v0(r,o,c){var d=r==null?0:r.length;if(!d)return-1;var m=d;return c!==e&&(m=ct(c),m=m<0?Jt(d+m,0):de(m,d-1)),o===o?Jm(r,o,m):As(r,Cu,m,!0)}function x0(r,o){return r&&r.length?ef(r,ct(o)):e}var y0=ft(Xf);function Xf(r,o){return r&&r.length&&o&&o.length?Ga(r,o):r}function w0(r,o,c){return r&&r.length&&o&&o.length?Ga(r,o,Z(c,2)):r}function S0(r,o,c){return r&&r.length&&o&&o.length?Ga(r,o,e,c):r}var C0=Rn(function(r,o){var c=r==null?0:r.length,d=$a(r,o);return sf(r,Wt(o,function(m){return Fn(m,c)?+m:m}).sort(pf)),d});function k0(r,o){var c=[];if(!(r&&r.length))return c;var d=-1,m=[],x=r.length;for(o=Z(o,3);++d<x;){var C=r[d];o(C,d,r)&&(c.push(C),m.push(d))}return sf(r,m),c}function ml(r){return r==null?r:b_.call(r)}function D0(r,o,c){var d=r==null?0:r.length;return d?(c&&typeof c!="number"&&ve(r,o,c)?(o=0,c=d):(o=o==null?0:ct(o),c=c===e?d:ct(c)),Ge(r,o,c)):[]}function M0(r,o){return js(r,o)}function T0(r,o,c){return Qa(r,o,Z(c,2))}function A0(r,o){var c=r==null?0:r.length;if(c){var d=js(r,o);if(d<c&&hn(r[d],o))return d}return-1}function O0(r,o){return js(r,o,!0)}function E0(r,o,c){return Qa(r,o,Z(c,2),!0)}function I0(r,o){var c=r==null?0:r.length;if(c){var d=js(r,o,!0)-1;if(hn(r[d],o))return d}return-1}function P0(r){return r&&r.length?af(r):[]}function L0(r,o){return r&&r.length?af(r,Z(o,2)):[]}function R0(r){var o=r==null?0:r.length;return o?Ge(r,1,o):[]}function F0(r,o,c){return r&&r.length?(o=c||o===e?1:ct(o),Ge(r,0,o<0?0:o)):[]}function B0(r,o,c){var d=r==null?0:r.length;return d?(o=c||o===e?1:ct(o),o=d-o,Ge(r,o<0?0:o,d)):[]}function W0(r,o){return r&&r.length?Gs(r,Z(o,3),!1,!0):[]}function z0(r,o){return r&&r.length?Gs(r,Z(o,3)):[]}var N0=ft(function(r){return ti(oe(r,1,Xt,!0))}),H0=ft(function(r){var o=Ze(r);return Xt(o)&&(o=e),ti(oe(r,1,Xt,!0),Z(o,2))}),$0=ft(function(r){var o=Ze(r);return o=typeof o=="function"?o:e,ti(oe(r,1,Xt,!0),e,o)});function Y0(r){return r&&r.length?ti(r):[]}function U0(r,o){return r&&r.length?ti(r,Z(o,2)):[]}function V0(r,o){return o=typeof o=="function"?o:e,r&&r.length?ti(r,e,o):[]}function _l(r){if(!(r&&r.length))return[];var o=0;return r=jn(r,function(c){if(Xt(c))return o=Jt(c.length,o),!0}),La(o,function(c){return Wt(r,Ea(c))})}function Kf(r,o){if(!(r&&r.length))return[];var c=_l(r);return o==null?c:Wt(c,function(d){return Fe(o,e,d)})}var X0=ft(function(r,o){return Xt(r)?Er(r,o):[]}),K0=ft(function(r){return el(jn(r,Xt))}),q0=ft(function(r){var o=Ze(r);return Xt(o)&&(o=e),el(jn(r,Xt),Z(o,2))}),j0=ft(function(r){var o=Ze(r);return o=typeof o=="function"?o:e,el(jn(r,Xt),e,o)}),G0=ft(_l);function Z0(r,o){return ff(r||[],o||[],Or)}function J0(r,o){return ff(r||[],o||[],Lr)}var Q0=ft(function(r){var o=r.length,c=o>1?r[o-1]:e;return c=typeof c=="function"?(r.pop(),c):e,Kf(r,c)});function qf(r){var o=v(r);return o.__chain__=!0,o}function tv(r,o){return o(r),r}function so(r,o){return o(r)}var ev=Rn(function(r){var o=r.length,c=o?r[0]:0,d=this.__wrapped__,m=function(x){return $a(x,r)};return o>1||this.__actions__.length||!(d instanceof pt)||!Fn(c)?this.thru(m):(d=d.slice(c,+c+(o?1:0)),d.__actions__.push({func:so,args:[m],thisArg:e}),new qe(d,this.__chain__).thru(function(x){return o&&!x.length&&x.push(e),x}))});function nv(){return qf(this)}function iv(){return new qe(this.value(),this.__chain__)}function rv(){this.__values__===e&&(this.__values__=lh(this.value()));var r=this.__index__>=this.__values__.length,o=r?e:this.__values__[this.__index__++];return{done:r,value:o}}function sv(){return this}function ov(r){for(var o,c=this;c instanceof Us;){var d=Hf(c);d.__index__=0,d.__values__=e,o?m.__wrapped__=d:o=d;var m=d;c=c.__wrapped__}return m.__wrapped__=r,o}function av(){var r=this.__wrapped__;if(r instanceof pt){var o=r;return this.__actions__.length&&(o=new pt(this)),o=o.reverse(),o.__actions__.push({func:so,args:[ml],thisArg:e}),new qe(o,this.__chain__)}return this.thru(ml)}function lv(){return uf(this.__wrapped__,this.__actions__)}var cv=Zs(function(r,o,c){Mt.call(r,c)?++r[c]:Pn(r,c,1)});function uv(r,o,c){var d=ot(r)?wu:tb;return c&&ve(r,o,c)&&(o=e),d(r,Z(o,3))}function fv(r,o){var c=ot(r)?jn:Xu;return c(r,Z(o,3))}var hv=yf($f),dv=yf(Yf);function gv(r,o){return oe(oo(r,o),1)}function pv(r,o){return oe(oo(r,o),yt)}function mv(r,o,c){return c=c===e?1:ct(c),oe(oo(r,o),c)}function jf(r,o){var c=ot(r)?Xe:Qn;return c(r,Z(o,3))}function Gf(r,o){var c=ot(r)?Rm:Vu;return c(r,Z(o,3))}var _v=Zs(function(r,o,c){Mt.call(r,c)?r[c].push(o):Pn(r,c,[o])});function bv(r,o,c,d){r=ke(r)?r:tr(r),c=c&&!d?ct(c):0;var m=r.length;return c<0&&(c=Jt(m+c,0)),fo(r)?c<=m&&r.indexOf(o,c)>-1:!!m&&$i(r,o,c)>-1}var vv=ft(function(r,o,c){var d=-1,m=typeof o=="function",x=ke(r)?I(r.length):[];return Qn(r,function(C){x[++d]=m?Fe(o,C,c):Ir(C,o,c)}),x}),xv=Zs(function(r,o,c){Pn(r,c,o)});function oo(r,o){var c=ot(r)?Wt:Ju;return c(r,Z(o,3))}function yv(r,o,c,d){return r==null?[]:(ot(o)||(o=o==null?[]:[o]),c=d?e:c,ot(c)||(c=c==null?[]:[c]),nf(r,o,c))}var wv=Zs(function(r,o,c){r[c?0:1].push(o)},function(){return[[],[]]});function Sv(r,o,c){var d=ot(r)?Aa:Du,m=arguments.length<3;return d(r,Z(o,4),c,m,Qn)}function Cv(r,o,c){var d=ot(r)?Fm:Du,m=arguments.length<3;return d(r,Z(o,4),c,m,Vu)}function kv(r,o){var c=ot(r)?jn:Xu;return c(r,co(Z(o,3)))}function Dv(r){var o=ot(r)?Hu:bb;return o(r)}function Mv(r,o,c){(c?ve(r,o,c):o===e)?o=1:o=ct(o);var d=ot(r)?j_:vb;return d(r,o)}function Tv(r){var o=ot(r)?G_:yb;return o(r)}function Av(r){if(r==null)return 0;if(ke(r))return fo(r)?Ui(r):r.length;var o=ge(r);return o==At||o==cn?r.size:qa(r).length}function Ov(r,o,c){var d=ot(r)?Oa:wb;return c&&ve(r,o,c)&&(o=e),d(r,Z(o,3))}var Ev=ft(function(r,o){if(r==null)return[];var c=o.length;return c>1&&ve(r,o[0],o[1])?o=[]:c>2&&ve(o[0],o[1],o[2])&&(o=[o[0]]),nf(r,oe(o,1),[])}),ao=f_||function(){return se.Date.now()};function Iv(r,o){if(typeof o!="function")throw new Ke(l);return r=ct(r),function(){if(--r<1)return o.apply(this,arguments)}}function Zf(r,o,c){return o=c?e:o,o=r&&o==null?r.length:o,Ln(r,E,e,e,e,e,o)}function Jf(r,o){var c;if(typeof o!="function")throw new Ke(l);return r=ct(r),function(){return--r>0&&(c=o.apply(this,arguments)),r<=1&&(o=e),c}}var bl=ft(function(r,o,c){var d=y;if(c.length){var m=Zn(c,Ji(bl));d|=D}return Ln(r,d,o,c,m)}),Qf=ft(function(r,o,c){var d=y|k;if(c.length){var m=Zn(c,Ji(Qf));d|=D}return Ln(o,d,r,c,m)});function th(r,o,c){o=c?e:o;var d=Ln(r,P,e,e,e,e,e,o);return d.placeholder=th.placeholder,d}function eh(r,o,c){o=c?e:o;var d=Ln(r,F,e,e,e,e,e,o);return d.placeholder=eh.placeholder,d}function nh(r,o,c){var d,m,x,C,M,A,z=0,N=!1,$=!1,V=!0;if(typeof r!="function")throw new Ke(l);o=Je(o)||0,Nt(c)&&(N=!!c.leading,$="maxWait"in c,x=$?Jt(Je(c.maxWait)||0,o):x,V="trailing"in c?!!c.trailing:V);function G(Kt){var dn=d,zn=m;return d=m=e,z=Kt,C=r.apply(zn,dn),C}function J(Kt){return z=Kt,M=Br(gt,o),N?G(Kt):C}function ut(Kt){var dn=Kt-A,zn=Kt-z,yh=o-dn;return $?de(yh,x-zn):yh}function Q(Kt){var dn=Kt-A,zn=Kt-z;return A===e||dn>=o||dn<0||$&&zn>=x}function gt(){var Kt=ao();if(Q(Kt))return _t(Kt);M=Br(gt,ut(Kt))}function _t(Kt){return M=e,V&&d?G(Kt):(d=m=e,C)}function Ne(){M!==e&&hf(M),z=0,d=A=m=M=e}function xe(){return M===e?C:_t(ao())}function He(){var Kt=ao(),dn=Q(Kt);if(d=arguments,m=this,A=Kt,dn){if(M===e)return J(A);if($)return hf(M),M=Br(gt,o),G(A)}return M===e&&(M=Br(gt,o)),C}return He.cancel=Ne,He.flush=xe,He}var Pv=ft(function(r,o){return Uu(r,1,o)}),Lv=ft(function(r,o,c){return Uu(r,Je(o)||0,c)});function Rv(r){return Ln(r,W)}function lo(r,o){if(typeof r!="function"||o!=null&&typeof o!="function")throw new Ke(l);var c=function(){var d=arguments,m=o?o.apply(this,d):d[0],x=c.cache;if(x.has(m))return x.get(m);var C=r.apply(this,d);return c.cache=x.set(m,C)||x,C};return c.cache=new(lo.Cache||In),c}lo.Cache=In;function co(r){if(typeof r!="function")throw new Ke(l);return function(){var o=arguments;switch(o.length){case 0:return!r.call(this);case 1:return!r.call(this,o[0]);case 2:return!r.call(this,o[0],o[1]);case 3:return!r.call(this,o[0],o[1],o[2])}return!r.apply(this,o)}}function Fv(r){return Jf(2,r)}var Bv=Sb(function(r,o){o=o.length==1&&ot(o[0])?Wt(o[0],Be(Z())):Wt(oe(o,1),Be(Z()));var c=o.length;return ft(function(d){for(var m=-1,x=de(d.length,c);++m<x;)d[m]=o[m].call(this,d[m]);return Fe(r,this,d)})}),vl=ft(function(r,o){var c=Zn(o,Ji(vl));return Ln(r,D,e,o,c)}),ih=ft(function(r,o){var c=Zn(o,Ji(ih));return Ln(r,L,e,o,c)}),Wv=Rn(function(r,o){return Ln(r,R,e,e,e,o)});function zv(r,o){if(typeof r!="function")throw new Ke(l);return o=o===e?o:ct(o),ft(r,o)}function Nv(r,o){if(typeof r!="function")throw new Ke(l);return o=o==null?0:Jt(ct(o),0),ft(function(c){var d=c[o],m=ni(c,0,o);return d&&Gn(m,d),Fe(r,this,m)})}function Hv(r,o,c){var d=!0,m=!0;if(typeof r!="function")throw new Ke(l);return Nt(c)&&(d="leading"in c?!!c.leading:d,m="trailing"in c?!!c.trailing:m),nh(r,o,{leading:d,maxWait:o,trailing:m})}function $v(r){return Zf(r,1)}function Yv(r,o){return vl(il(o),r)}function Uv(){if(!arguments.length)return[];var r=arguments[0];return ot(r)?r:[r]}function Vv(r){return je(r,b)}function Xv(r,o){return o=typeof o=="function"?o:e,je(r,b,o)}function Kv(r){return je(r,p|b)}function qv(r,o){return o=typeof o=="function"?o:e,je(r,p|b,o)}function jv(r,o){return o==null||Yu(r,o,ee(o))}function hn(r,o){return r===o||r!==r&&o!==o}var Gv=eo(Va),Zv=eo(function(r,o){return r>=o}),xi=ju(function(){return arguments}())?ju:function(r){return Yt(r)&&Mt.call(r,"callee")&&!Ru.call(r,"callee")},ot=I.isArray,Jv=mu?Be(mu):ob;function ke(r){return r!=null&&uo(r.length)&&!Bn(r)}function Xt(r){return Yt(r)&&ke(r)}function Qv(r){return r===!0||r===!1||Yt(r)&&be(r)==rt}var ii=d_||Ol,tx=_u?Be(_u):ab;function ex(r){return Yt(r)&&r.nodeType===1&&!Wr(r)}function nx(r){if(r==null)return!0;if(ke(r)&&(ot(r)||typeof r=="string"||typeof r.splice=="function"||ii(r)||Qi(r)||xi(r)))return!r.length;var o=ge(r);if(o==At||o==cn)return!r.size;if(Fr(r))return!qa(r).length;for(var c in r)if(Mt.call(r,c))return!1;return!0}function ix(r,o){return Pr(r,o)}function rx(r,o,c){c=typeof c=="function"?c:e;var d=c?c(r,o):e;return d===e?Pr(r,o,e,c):!!d}function xl(r){if(!Yt(r))return!1;var o=be(r);return o==Rt||o==Et||typeof r.message=="string"&&typeof r.name=="string"&&!Wr(r)}function sx(r){return typeof r=="number"&&Bu(r)}function Bn(r){if(!Nt(r))return!1;var o=be(r);return o==fe||o==Se||o==H||o==xr}function rh(r){return typeof r=="number"&&r==ct(r)}function uo(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Dt}function Nt(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}function Yt(r){return r!=null&&typeof r=="object"}var sh=bu?Be(bu):cb;function ox(r,o){return r===o||Ka(r,o,ul(o))}function ax(r,o,c){return c=typeof c=="function"?c:e,Ka(r,o,ul(o),c)}function lx(r){return oh(r)&&r!=+r}function cx(r){if(Xb(r))throw new nt(a);return Gu(r)}function ux(r){return r===null}function fx(r){return r==null}function oh(r){return typeof r=="number"||Yt(r)&&be(r)==$t}function Wr(r){if(!Yt(r)||be(r)!=he)return!1;var o=Bs(r);if(o===null)return!0;var c=Mt.call(o,"constructor")&&o.constructor;return typeof c=="function"&&c instanceof c&&Ps.call(c)==a_}var yl=vu?Be(vu):ub;function hx(r){return rh(r)&&r>=-Dt&&r<=Dt}var ah=xu?Be(xu):fb;function fo(r){return typeof r=="string"||!ot(r)&&Yt(r)&&be(r)==yr}function ze(r){return typeof r=="symbol"||Yt(r)&&be(r)==Cs}var Qi=yu?Be(yu):hb;function dx(r){return r===e}function gx(r){return Yt(r)&&ge(r)==wr}function px(r){return Yt(r)&&be(r)==Ep}var mx=eo(ja),_x=eo(function(r,o){return r<=o});function lh(r){if(!r)return[];if(ke(r))return fo(r)?un(r):Ce(r);if(kr&&r[kr])return jm(r[kr]());var o=ge(r),c=o==At?Fa:o==cn?Os:tr;return c(r)}function Wn(r){if(!r)return r===0?r:0;if(r=Je(r),r===yt||r===-yt){var o=r<0?-1:1;return o*te}return r===r?r:0}function ct(r){var o=Wn(r),c=o%1;return o===o?c?o-c:o:0}function ch(r){return r?mi(ct(r),0,vt):0}function Je(r){if(typeof r=="number")return r;if(ze(r))return Gt;if(Nt(r)){var o=typeof r.valueOf=="function"?r.valueOf():r;r=Nt(o)?o+"":o}if(typeof r!="string")return r===0?r:+r;r=Mu(r);var c=Jp.test(r);return c||tm.test(r)?Im(r.slice(2),c?2:8):Zp.test(r)?Gt:+r}function uh(r){return yn(r,De(r))}function bx(r){return r?mi(ct(r),-Dt,Dt):r===0?r:0}function kt(r){return r==null?"":We(r)}var vx=Gi(function(r,o){if(Fr(o)||ke(o)){yn(o,ee(o),r);return}for(var c in o)Mt.call(o,c)&&Or(r,c,o[c])}),fh=Gi(function(r,o){yn(o,De(o),r)}),ho=Gi(function(r,o,c,d){yn(o,De(o),r,d)}),xx=Gi(function(r,o,c,d){yn(o,ee(o),r,d)}),yx=Rn($a);function wx(r,o){var c=ji(r);return o==null?c:$u(c,o)}var Sx=ft(function(r,o){r=Ot(r);var c=-1,d=o.length,m=d>2?o[2]:e;for(m&&ve(o[0],o[1],m)&&(d=1);++c<d;)for(var x=o[c],C=De(x),M=-1,A=C.length;++M<A;){var z=C[M],N=r[z];(N===e||hn(N,Xi[z])&&!Mt.call(r,z))&&(r[z]=x[z])}return r}),Cx=ft(function(r){return r.push(e,Tf),Fe(hh,e,r)});function kx(r,o){return Su(r,Z(o,3),xn)}function Dx(r,o){return Su(r,Z(o,3),Ua)}function Mx(r,o){return r==null?r:Ya(r,Z(o,3),De)}function Tx(r,o){return r==null?r:Ku(r,Z(o,3),De)}function Ax(r,o){return r&&xn(r,Z(o,3))}function Ox(r,o){return r&&Ua(r,Z(o,3))}function Ex(r){return r==null?[]:Ks(r,ee(r))}function Ix(r){return r==null?[]:Ks(r,De(r))}function wl(r,o,c){var d=r==null?e:_i(r,o);return d===e?c:d}function Px(r,o){return r!=null&&Ef(r,o,nb)}function Sl(r,o){return r!=null&&Ef(r,o,ib)}var Lx=Sf(function(r,o,c){o!=null&&typeof o.toString!="function"&&(o=Ls.call(o)),r[o]=c},kl(Me)),Rx=Sf(function(r,o,c){o!=null&&typeof o.toString!="function"&&(o=Ls.call(o)),Mt.call(r,o)?r[o].push(c):r[o]=[c]},Z),Fx=ft(Ir);function ee(r){return ke(r)?Nu(r):qa(r)}function De(r){return ke(r)?Nu(r,!0):db(r)}function Bx(r,o){var c={};return o=Z(o,3),xn(r,function(d,m,x){Pn(c,o(d,m,x),d)}),c}function Wx(r,o){var c={};return o=Z(o,3),xn(r,function(d,m,x){Pn(c,m,o(d,m,x))}),c}var zx=Gi(function(r,o,c){qs(r,o,c)}),hh=Gi(function(r,o,c,d){qs(r,o,c,d)}),Nx=Rn(function(r,o){var c={};if(r==null)return c;var d=!1;o=Wt(o,function(x){return x=ei(x,r),d||(d=x.length>1),x}),yn(r,ll(r),c),d&&(c=je(c,p|_|b,Lb));for(var m=o.length;m--;)tl(c,o[m]);return c});function Hx(r,o){return dh(r,co(Z(o)))}var $x=Rn(function(r,o){return r==null?{}:pb(r,o)});function dh(r,o){if(r==null)return{};var c=Wt(ll(r),function(d){return[d]});return o=Z(o),rf(r,c,function(d,m){return o(d,m[0])})}function Yx(r,o,c){o=ei(o,r);var d=-1,m=o.length;for(m||(m=1,r=e);++d<m;){var x=r==null?e:r[wn(o[d])];x===e&&(d=m,x=c),r=Bn(x)?x.call(r):x}return r}function Ux(r,o,c){return r==null?r:Lr(r,o,c)}function Vx(r,o,c,d){return d=typeof d=="function"?d:e,r==null?r:Lr(r,o,c,d)}var gh=Df(ee),ph=Df(De);function Xx(r,o,c){var d=ot(r),m=d||ii(r)||Qi(r);if(o=Z(o,4),c==null){var x=r&&r.constructor;m?c=d?new x:[]:Nt(r)?c=Bn(x)?ji(Bs(r)):{}:c={}}return(m?Xe:xn)(r,function(C,M,A){return o(c,C,M,A)}),c}function Kx(r,o){return r==null?!0:tl(r,o)}function qx(r,o,c){return r==null?r:cf(r,o,il(c))}function jx(r,o,c,d){return d=typeof d=="function"?d:e,r==null?r:cf(r,o,il(c),d)}function tr(r){return r==null?[]:Ra(r,ee(r))}function Gx(r){return r==null?[]:Ra(r,De(r))}function Zx(r,o,c){return c===e&&(c=o,o=e),c!==e&&(c=Je(c),c=c===c?c:0),o!==e&&(o=Je(o),o=o===o?o:0),mi(Je(r),o,c)}function Jx(r,o,c){return o=Wn(o),c===e?(c=o,o=0):c=Wn(c),r=Je(r),rb(r,o,c)}function Qx(r,o,c){if(c&&typeof c!="boolean"&&ve(r,o,c)&&(o=c=e),c===e&&(typeof o=="boolean"?(c=o,o=e):typeof r=="boolean"&&(c=r,r=e)),r===e&&o===e?(r=0,o=1):(r=Wn(r),o===e?(o=r,r=0):o=Wn(o)),r>o){var d=r;r=o,o=d}if(c||r%1||o%1){var m=Wu();return de(r+m*(o-r+Em("1e-"+((m+"").length-1))),o)}return Za(r,o)}var ty=Zi(function(r,o,c){return o=o.toLowerCase(),r+(c?mh(o):o)});function mh(r){return Cl(kt(r).toLowerCase())}function _h(r){return r=kt(r),r&&r.replace(nm,Um).replace(ym,"")}function ey(r,o,c){r=kt(r),o=We(o);var d=r.length;c=c===e?d:mi(ct(c),0,d);var m=c;return c-=o.length,c>=0&&r.slice(c,m)==o}function ny(r){return r=kt(r),r&&Fp.test(r)?r.replace(Kc,Vm):r}function iy(r){return r=kt(r),r&&$p.test(r)?r.replace(va,"\\$&"):r}var ry=Zi(function(r,o,c){return r+(c?"-":"")+o.toLowerCase()}),sy=Zi(function(r,o,c){return r+(c?" ":"")+o.toLowerCase()}),oy=xf("toLowerCase");function ay(r,o,c){r=kt(r),o=ct(o);var d=o?Ui(r):0;if(!o||d>=o)return r;var m=(o-d)/2;return to(Hs(m),c)+r+to(Ns(m),c)}function ly(r,o,c){r=kt(r),o=ct(o);var d=o?Ui(r):0;return o&&d<o?r+to(o-d,c):r}function cy(r,o,c){r=kt(r),o=ct(o);var d=o?Ui(r):0;return o&&d<o?to(o-d,c)+r:r}function uy(r,o,c){return c||o==null?o=0:o&&(o=+o),__(kt(r).replace(xa,""),o||0)}function fy(r,o,c){return(c?ve(r,o,c):o===e)?o=1:o=ct(o),Ja(kt(r),o)}function hy(){var r=arguments,o=kt(r[0]);return r.length<3?o:o.replace(r[1],r[2])}var dy=Zi(function(r,o,c){return r+(c?"_":"")+o.toLowerCase()});function gy(r,o,c){return c&&typeof c!="number"&&ve(r,o,c)&&(o=c=e),c=c===e?vt:c>>>0,c?(r=kt(r),r&&(typeof o=="string"||o!=null&&!yl(o))&&(o=We(o),!o&&Yi(r))?ni(un(r),0,c):r.split(o,c)):[]}var py=Zi(function(r,o,c){return r+(c?" ":"")+Cl(o)});function my(r,o,c){return r=kt(r),c=c==null?0:mi(ct(c),0,r.length),o=We(o),r.slice(c,c+o.length)==o}function _y(r,o,c){var d=v.templateSettings;c&&ve(r,o,c)&&(o=e),r=kt(r),o=ho({},o,d,Mf);var m=ho({},o.imports,d.imports,Mf),x=ee(m),C=Ra(m,x),M,A,z=0,N=o.interpolate||ks,$="__p += '",V=Ba((o.escape||ks).source+"|"+N.source+"|"+(N===qc?Gp:ks).source+"|"+(o.evaluate||ks).source+"|$","g"),G="//# sourceURL="+(Mt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Dm+"]")+`
`;r.replace(V,function(Q,gt,_t,Ne,xe,He){return _t||(_t=Ne),$+=r.slice(z,He).replace(im,Xm),gt&&(M=!0,$+=`' +
__e(`+gt+`) +
'`),xe&&(A=!0,$+=`';
`+xe+`;
__p += '`),_t&&($+=`' +
((__t = (`+_t+`)) == null ? '' : __t) +
'`),z=He+Q.length,Q}),$+=`';
`;var J=Mt.call(o,"variable")&&o.variable;if(!J)$=`with (obj) {
`+$+`
}
`;else if(qp.test(J))throw new nt(u);$=(A?$.replace(Ip,""):$).replace(Pp,"$1").replace(Lp,"$1;"),$="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$+`return __p
}`;var ut=vh(function(){return wt(x,G+"return "+$).apply(e,C)});if(ut.source=$,xl(ut))throw ut;return ut}function by(r){return kt(r).toLowerCase()}function vy(r){return kt(r).toUpperCase()}function xy(r,o,c){if(r=kt(r),r&&(c||o===e))return Mu(r);if(!r||!(o=We(o)))return r;var d=un(r),m=un(o),x=Tu(d,m),C=Au(d,m)+1;return ni(d,x,C).join("")}function yy(r,o,c){if(r=kt(r),r&&(c||o===e))return r.slice(0,Eu(r)+1);if(!r||!(o=We(o)))return r;var d=un(r),m=Au(d,un(o))+1;return ni(d,0,m).join("")}function wy(r,o,c){if(r=kt(r),r&&(c||o===e))return r.replace(xa,"");if(!r||!(o=We(o)))return r;var d=un(r),m=Tu(d,un(o));return ni(d,m).join("")}function Sy(r,o){var c=X,d=Y;if(Nt(o)){var m="separator"in o?o.separator:m;c="length"in o?ct(o.length):c,d="omission"in o?We(o.omission):d}r=kt(r);var x=r.length;if(Yi(r)){var C=un(r);x=C.length}if(c>=x)return r;var M=c-Ui(d);if(M<1)return d;var A=C?ni(C,0,M).join(""):r.slice(0,M);if(m===e)return A+d;if(C&&(M+=A.length-M),yl(m)){if(r.slice(M).search(m)){var z,N=A;for(m.global||(m=Ba(m.source,kt(jc.exec(m))+"g")),m.lastIndex=0;z=m.exec(N);)var $=z.index;A=A.slice(0,$===e?M:$)}}else if(r.indexOf(We(m),M)!=M){var V=A.lastIndexOf(m);V>-1&&(A=A.slice(0,V))}return A+d}function Cy(r){return r=kt(r),r&&Rp.test(r)?r.replace(Xc,Qm):r}var ky=Zi(function(r,o,c){return r+(c?" ":"")+o.toUpperCase()}),Cl=xf("toUpperCase");function bh(r,o,c){return r=kt(r),o=c?e:o,o===e?qm(r)?n_(r):zm(r):r.match(o)||[]}var vh=ft(function(r,o){try{return Fe(r,e,o)}catch(c){return xl(c)?c:new nt(c)}}),Dy=Rn(function(r,o){return Xe(o,function(c){c=wn(c),Pn(r,c,bl(r[c],r))}),r});function My(r){var o=r==null?0:r.length,c=Z();return r=o?Wt(r,function(d){if(typeof d[1]!="function")throw new Ke(l);return[c(d[0]),d[1]]}):[],ft(function(d){for(var m=-1;++m<o;){var x=r[m];if(Fe(x[0],this,d))return Fe(x[1],this,d)}})}function Ty(r){return Q_(je(r,p))}function kl(r){return function(){return r}}function Ay(r,o){return r==null||r!==r?o:r}var Oy=wf(),Ey=wf(!0);function Me(r){return r}function Dl(r){return Zu(typeof r=="function"?r:je(r,p))}function Iy(r){return Qu(je(r,p))}function Py(r,o){return tf(r,je(o,p))}var Ly=ft(function(r,o){return function(c){return Ir(c,r,o)}}),Ry=ft(function(r,o){return function(c){return Ir(r,c,o)}});function Ml(r,o,c){var d=ee(o),m=Ks(o,d);c==null&&!(Nt(o)&&(m.length||!d.length))&&(c=o,o=r,r=this,m=Ks(o,ee(o)));var x=!(Nt(c)&&"chain"in c)||!!c.chain,C=Bn(r);return Xe(m,function(M){var A=o[M];r[M]=A,C&&(r.prototype[M]=function(){var z=this.__chain__;if(x||z){var N=r(this.__wrapped__),$=N.__actions__=Ce(this.__actions__);return $.push({func:A,args:arguments,thisArg:r}),N.__chain__=z,N}return A.apply(r,Gn([this.value()],arguments))})}),r}function Fy(){return se._===this&&(se._=l_),this}function Tl(){}function By(r){return r=ct(r),ft(function(o){return ef(o,r)})}var Wy=sl(Wt),zy=sl(wu),Ny=sl(Oa);function xh(r){return hl(r)?Ea(wn(r)):mb(r)}function Hy(r){return function(o){return r==null?e:_i(r,o)}}var $y=Cf(),Yy=Cf(!0);function Al(){return[]}function Ol(){return!1}function Uy(){return{}}function Vy(){return""}function Xy(){return!0}function Ky(r,o){if(r=ct(r),r<1||r>Dt)return[];var c=vt,d=de(r,vt);o=Z(o),r-=vt;for(var m=La(d,o);++c<r;)o(c);return m}function qy(r){return ot(r)?Wt(r,wn):ze(r)?[r]:Ce(Nf(kt(r)))}function jy(r){var o=++o_;return kt(r)+o}var Gy=Qs(function(r,o){return r+o},0),Zy=ol("ceil"),Jy=Qs(function(r,o){return r/o},1),Qy=ol("floor");function t1(r){return r&&r.length?Xs(r,Me,Va):e}function e1(r,o){return r&&r.length?Xs(r,Z(o,2),Va):e}function n1(r){return ku(r,Me)}function i1(r,o){return ku(r,Z(o,2))}function r1(r){return r&&r.length?Xs(r,Me,ja):e}function s1(r,o){return r&&r.length?Xs(r,Z(o,2),ja):e}var o1=Qs(function(r,o){return r*o},1),a1=ol("round"),l1=Qs(function(r,o){return r-o},0);function c1(r){return r&&r.length?Pa(r,Me):0}function u1(r,o){return r&&r.length?Pa(r,Z(o,2)):0}return v.after=Iv,v.ary=Zf,v.assign=vx,v.assignIn=fh,v.assignInWith=ho,v.assignWith=xx,v.at=yx,v.before=Jf,v.bind=bl,v.bindAll=Dy,v.bindKey=Qf,v.castArray=Uv,v.chain=qf,v.chunk=Qb,v.compact=t0,v.concat=e0,v.cond=My,v.conforms=Ty,v.constant=kl,v.countBy=cv,v.create=wx,v.curry=th,v.curryRight=eh,v.debounce=nh,v.defaults=Sx,v.defaultsDeep=Cx,v.defer=Pv,v.delay=Lv,v.difference=n0,v.differenceBy=i0,v.differenceWith=r0,v.drop=s0,v.dropRight=o0,v.dropRightWhile=a0,v.dropWhile=l0,v.fill=c0,v.filter=fv,v.flatMap=gv,v.flatMapDeep=pv,v.flatMapDepth=mv,v.flatten=Uf,v.flattenDeep=u0,v.flattenDepth=f0,v.flip=Rv,v.flow=Oy,v.flowRight=Ey,v.fromPairs=h0,v.functions=Ex,v.functionsIn=Ix,v.groupBy=_v,v.initial=g0,v.intersection=p0,v.intersectionBy=m0,v.intersectionWith=_0,v.invert=Lx,v.invertBy=Rx,v.invokeMap=vv,v.iteratee=Dl,v.keyBy=xv,v.keys=ee,v.keysIn=De,v.map=oo,v.mapKeys=Bx,v.mapValues=Wx,v.matches=Iy,v.matchesProperty=Py,v.memoize=lo,v.merge=zx,v.mergeWith=hh,v.method=Ly,v.methodOf=Ry,v.mixin=Ml,v.negate=co,v.nthArg=By,v.omit=Nx,v.omitBy=Hx,v.once=Fv,v.orderBy=yv,v.over=Wy,v.overArgs=Bv,v.overEvery=zy,v.overSome=Ny,v.partial=vl,v.partialRight=ih,v.partition=wv,v.pick=$x,v.pickBy=dh,v.property=xh,v.propertyOf=Hy,v.pull=y0,v.pullAll=Xf,v.pullAllBy=w0,v.pullAllWith=S0,v.pullAt=C0,v.range=$y,v.rangeRight=Yy,v.rearg=Wv,v.reject=kv,v.remove=k0,v.rest=zv,v.reverse=ml,v.sampleSize=Mv,v.set=Ux,v.setWith=Vx,v.shuffle=Tv,v.slice=D0,v.sortBy=Ev,v.sortedUniq=P0,v.sortedUniqBy=L0,v.split=gy,v.spread=Nv,v.tail=R0,v.take=F0,v.takeRight=B0,v.takeRightWhile=W0,v.takeWhile=z0,v.tap=tv,v.throttle=Hv,v.thru=so,v.toArray=lh,v.toPairs=gh,v.toPairsIn=ph,v.toPath=qy,v.toPlainObject=uh,v.transform=Xx,v.unary=$v,v.union=N0,v.unionBy=H0,v.unionWith=$0,v.uniq=Y0,v.uniqBy=U0,v.uniqWith=V0,v.unset=Kx,v.unzip=_l,v.unzipWith=Kf,v.update=qx,v.updateWith=jx,v.values=tr,v.valuesIn=Gx,v.without=X0,v.words=bh,v.wrap=Yv,v.xor=K0,v.xorBy=q0,v.xorWith=j0,v.zip=G0,v.zipObject=Z0,v.zipObjectDeep=J0,v.zipWith=Q0,v.entries=gh,v.entriesIn=ph,v.extend=fh,v.extendWith=ho,Ml(v,v),v.add=Gy,v.attempt=vh,v.camelCase=ty,v.capitalize=mh,v.ceil=Zy,v.clamp=Zx,v.clone=Vv,v.cloneDeep=Kv,v.cloneDeepWith=qv,v.cloneWith=Xv,v.conformsTo=jv,v.deburr=_h,v.defaultTo=Ay,v.divide=Jy,v.endsWith=ey,v.eq=hn,v.escape=ny,v.escapeRegExp=iy,v.every=uv,v.find=hv,v.findIndex=$f,v.findKey=kx,v.findLast=dv,v.findLastIndex=Yf,v.findLastKey=Dx,v.floor=Qy,v.forEach=jf,v.forEachRight=Gf,v.forIn=Mx,v.forInRight=Tx,v.forOwn=Ax,v.forOwnRight=Ox,v.get=wl,v.gt=Gv,v.gte=Zv,v.has=Px,v.hasIn=Sl,v.head=Vf,v.identity=Me,v.includes=bv,v.indexOf=d0,v.inRange=Jx,v.invoke=Fx,v.isArguments=xi,v.isArray=ot,v.isArrayBuffer=Jv,v.isArrayLike=ke,v.isArrayLikeObject=Xt,v.isBoolean=Qv,v.isBuffer=ii,v.isDate=tx,v.isElement=ex,v.isEmpty=nx,v.isEqual=ix,v.isEqualWith=rx,v.isError=xl,v.isFinite=sx,v.isFunction=Bn,v.isInteger=rh,v.isLength=uo,v.isMap=sh,v.isMatch=ox,v.isMatchWith=ax,v.isNaN=lx,v.isNative=cx,v.isNil=fx,v.isNull=ux,v.isNumber=oh,v.isObject=Nt,v.isObjectLike=Yt,v.isPlainObject=Wr,v.isRegExp=yl,v.isSafeInteger=hx,v.isSet=ah,v.isString=fo,v.isSymbol=ze,v.isTypedArray=Qi,v.isUndefined=dx,v.isWeakMap=gx,v.isWeakSet=px,v.join=b0,v.kebabCase=ry,v.last=Ze,v.lastIndexOf=v0,v.lowerCase=sy,v.lowerFirst=oy,v.lt=mx,v.lte=_x,v.max=t1,v.maxBy=e1,v.mean=n1,v.meanBy=i1,v.min=r1,v.minBy=s1,v.stubArray=Al,v.stubFalse=Ol,v.stubObject=Uy,v.stubString=Vy,v.stubTrue=Xy,v.multiply=o1,v.nth=x0,v.noConflict=Fy,v.noop=Tl,v.now=ao,v.pad=ay,v.padEnd=ly,v.padStart=cy,v.parseInt=uy,v.random=Qx,v.reduce=Sv,v.reduceRight=Cv,v.repeat=fy,v.replace=hy,v.result=Yx,v.round=a1,v.runInContext=T,v.sample=Dv,v.size=Av,v.snakeCase=dy,v.some=Ov,v.sortedIndex=M0,v.sortedIndexBy=T0,v.sortedIndexOf=A0,v.sortedLastIndex=O0,v.sortedLastIndexBy=E0,v.sortedLastIndexOf=I0,v.startCase=py,v.startsWith=my,v.subtract=l1,v.sum=c1,v.sumBy=u1,v.template=_y,v.times=Ky,v.toFinite=Wn,v.toInteger=ct,v.toLength=ch,v.toLower=by,v.toNumber=Je,v.toSafeInteger=bx,v.toString=kt,v.toUpper=vy,v.trim=xy,v.trimEnd=yy,v.trimStart=wy,v.truncate=Sy,v.unescape=Cy,v.uniqueId=jy,v.upperCase=ky,v.upperFirst=Cl,v.each=jf,v.eachRight=Gf,v.first=Vf,Ml(v,function(){var r={};return xn(v,function(o,c){Mt.call(v.prototype,c)||(r[c]=o)}),r}(),{chain:!1}),v.VERSION=i,Xe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){v[r].placeholder=v}),Xe(["drop","take"],function(r,o){pt.prototype[r]=function(c){c=c===e?1:Jt(ct(c),0);var d=this.__filtered__&&!o?new pt(this):this.clone();return d.__filtered__?d.__takeCount__=de(c,d.__takeCount__):d.__views__.push({size:de(c,vt),type:r+(d.__dir__<0?"Right":"")}),d},pt.prototype[r+"Right"]=function(c){return this.reverse()[r](c).reverse()}}),Xe(["filter","map","takeWhile"],function(r,o){var c=o+1,d=c==ht||c==dt;pt.prototype[r]=function(m){var x=this.clone();return x.__iteratees__.push({iteratee:Z(m,3),type:c}),x.__filtered__=x.__filtered__||d,x}}),Xe(["head","last"],function(r,o){var c="take"+(o?"Right":"");pt.prototype[r]=function(){return this[c](1).value()[0]}}),Xe(["initial","tail"],function(r,o){var c="drop"+(o?"":"Right");pt.prototype[r]=function(){return this.__filtered__?new pt(this):this[c](1)}}),pt.prototype.compact=function(){return this.filter(Me)},pt.prototype.find=function(r){return this.filter(r).head()},pt.prototype.findLast=function(r){return this.reverse().find(r)},pt.prototype.invokeMap=ft(function(r,o){return typeof r=="function"?new pt(this):this.map(function(c){return Ir(c,r,o)})}),pt.prototype.reject=function(r){return this.filter(co(Z(r)))},pt.prototype.slice=function(r,o){r=ct(r);var c=this;return c.__filtered__&&(r>0||o<0)?new pt(c):(r<0?c=c.takeRight(-r):r&&(c=c.drop(r)),o!==e&&(o=ct(o),c=o<0?c.dropRight(-o):c.take(o-r)),c)},pt.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},pt.prototype.toArray=function(){return this.take(vt)},xn(pt.prototype,function(r,o){var c=/^(?:filter|find|map|reject)|While$/.test(o),d=/^(?:head|last)$/.test(o),m=v[d?"take"+(o=="last"?"Right":""):o],x=d||/^find/.test(o);m&&(v.prototype[o]=function(){var C=this.__wrapped__,M=d?[1]:arguments,A=C instanceof pt,z=M[0],N=A||ot(C),$=function(gt){var _t=m.apply(v,Gn([gt],M));return d&&V?_t[0]:_t};N&&c&&typeof z=="function"&&z.length!=1&&(A=N=!1);var V=this.__chain__,G=!!this.__actions__.length,J=x&&!V,ut=A&&!G;if(!x&&N){C=ut?C:new pt(this);var Q=r.apply(C,M);return Q.__actions__.push({func:so,args:[$],thisArg:e}),new qe(Q,V)}return J&&ut?r.apply(this,M):(Q=this.thru($),J?d?Q.value()[0]:Q.value():Q)})}),Xe(["pop","push","shift","sort","splice","unshift"],function(r){var o=Es[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",d=/^(?:pop|shift)$/.test(r);v.prototype[r]=function(){var m=arguments;if(d&&!this.__chain__){var x=this.value();return o.apply(ot(x)?x:[],m)}return this[c](function(C){return o.apply(ot(C)?C:[],m)})}}),xn(pt.prototype,function(r,o){var c=v[o];if(c){var d=c.name+"";Mt.call(qi,d)||(qi[d]=[]),qi[d].push({name:o,func:c})}}),qi[Js(e,k).name]=[{name:"wrapper",func:e}],pt.prototype.clone=C_,pt.prototype.reverse=k_,pt.prototype.value=D_,v.prototype.at=ev,v.prototype.chain=nv,v.prototype.commit=iv,v.prototype.next=rv,v.prototype.plant=ov,v.prototype.reverse=av,v.prototype.toJSON=v.prototype.valueOf=v.prototype.value=lv,v.prototype.first=v.prototype.head,kr&&(v.prototype[kr]=sv),v},Vi=i_();hi?((hi.exports=Vi)._=Vi,Da._=Vi):se._=Vi}).call(Ow)}(Vr,Vr.exports)),Vr.exports}Ew();async function Iw(n,t){try{console.log(`開始抓取股票 ${n} 的資料...`);const e=await fg.get(`data/${n}/all.json`);if(e.data){let i=e.data;if(t&&(i=e.data.filter(h=>Pt(h.date,"YYYYMMDD").isAfter(Pt(t)))),!i||i.length===0)return console.warn(`股票 ${n} 無新資料`),null;let s=Pt().format("YYYY-MM-DD HH:mm:ss"),a=null,l=null;const u=i[i.length-1];a=Pt(u[0],"YYYYMMDD").format("YYYY-MM-DD"),l=u[4];const f={fetchedAt:s,lastPrice:l,lastPriceDate:a,newDailyData:i};return console.log(`成功抓取股票 ${n} 資料`,f),f}return console.warn(`股票 ${n} 無資料回傳`),null}catch(e){return console.error(`抓取股票 ${n} 失敗:`,e),null}}F1().catch(console.error);async function Pw(){return await B1("user-stock-info")}async function po(n){return await Sc("user-stock-info",n)}async function Lw(n){return await z1("user-stock-info",n)}async function Rw(n){return await W1("user-stock-info",n)}const Fw=()=>new Worker(new URL("/iKDx/assets/calc-weekly-policy-worker-CngIjzYL.js",import.meta.url),{type:"module"}),Bw=()=>new Worker(new URL("/iKDx/assets/calc-trade-worker-CrgyXrUO.js",import.meta.url),{type:"module"}),Ww=()=>new Worker(new URL("/iKDx/assets/calc-trend-chart-worker-CcvYD_4Q.js",import.meta.url),{type:"module"}),zw=kc.getPool("policy",Fw,4),Nw=kc.getPool("trade",Bw,4),Hw=kc.getPool("trend",Ww,4),Mc=N1("userStockList",()=>{const n=Ht([]);function t(b){const S=n.value.findIndex(w=>w.id===b);return{foundStock:S!==-1?n.value[S]:null,foundStockIndex:S}}async function e(b=null,S={}){const{updateIndexedDB:w=!0}=S;let y=[],k=[];if(b===null)y=n.value,k=n.value.map((P,F)=>F);else if(typeof b=="string"){const{foundStock:P,foundStockIndex:F}=t(b);if(!P){console.warn(`找不到股票 ${b}`);return}y=[P],k=[F]}else if(Array.isArray(b))y=[],k=[],b.forEach(P=>{const{foundStock:F,foundStockIndex:D}=t(P);F&&(y.push(F),k.push(D))});else{console.warn("stockIds 參數格式錯誤");return}if(y.length===0){console.log("無股票需要更新價格");return}console.log(`開始更新 ${y.length} 支股票價格...`);const O=y.map(async(P,F)=>{try{const D=await Iw(P.id,P.lastPriceDate);if(D){const L=k[F],E=await i(P.id,D,({symbol:W,step:X,totalSteps:Y,message:K})=>{console.log(`股票 ${W}: ${K} (${X}/${Y})`)});let R={...n.value[L],fetchedAt:D.fetchedAt,lastPrice:D.lastPrice,lastPriceDate:D.lastPriceDate};if(E&&(R={...R,data:{weekly:E.policyResult?.weekly||[],weeklyKdj:E.policyResult?.weeklyKdj||[],weeklyRsi:E.policyResult?.weeklyRsi||[]}}),typeof b=="string"&&w){const W=JSON.parse(JSON.stringify(R));po(W).catch(X=>{console.error(`儲存股票 ${P.id} 到 IndexedDB 失敗:`,X)})}n.value[L]=R}}catch(D){console.error(`股票 ${P.id} 更新失敗:`,D)}});await Promise.all(O),typeof b!="string"&&w&&await g(),console.log(`${y.length} 支股票更新完成`)}async function i(b,S,w=()=>{}){try{w({symbol:b,step:1,totalSteps:3,message:"計算週線與技術指標..."});const[y,k]=await Promise.all([zw.executeTask("processPolicy",{newDailyData:S.newDailyData||[],stockId:b,type:"priceChange"}),Nw.executeTask("calculateTrade",{stockData:S.newDailyData||[],tradeParams:{}})]);console.log("policyResult",y),w({symbol:b,step:2,totalSteps:3,message:"平行計算完成，開始計算訊號..."});const O=await Hw.executeTask("calculateTrend",{stockData:S.newDailyData||[],trendParams:{policyResult:y,tradeResult:k}});return w({symbol:b,step:3,totalSteps:3,message:"計算完成"}),{stockId:b,policyResult:y}}catch(y){return console.error(`股票 ${b} Worker 計算失敗:`,y),null}}async function s(){try{console.log("開始載入使用者股票清單...");const b=await Pw();return console.log("從 IndexedDB 載入的股票:",b),b&&b.length>0&&(n.value=b),n.value}catch(b){return console.error("載入使用者股票清單失敗:",b),n.value}}async function a(b){if(console.log("開始新增股票:",b),n.value.find(k=>k.id===b.id))return console.log("股票已存在，取消新增"),{success:!1,message:"股票已存在於清單中"};let w=1e3;n.value.length>0&&(w=Math.max(...n.value.map(O=>O.order||0))+1e3);const y={...b,industryCategory:Array.from(b.industryCategory||[]),addedAt:Pt().format("YYYY-MM-DD HH:mm:ss"),order:w};console.log("新增股票到 Pinia store:",y),n.value.push(y);try{return console.log("準備儲存股票到 user-stock-info:",y),await po(y),console.log("股票已成功儲存到 user-stock-info"),e(b.id).catch(k=>{console.error(`背景更新股票 ${b.id} 價格失敗:`,k)}),{success:!0,message:"股票已新增至清單"}}catch(k){return console.error("儲存股票失敗:",k),n.value=n.value.filter(O=>O.id!==b.id),{success:!1,message:"新增失敗，請稍後再試"}}}async function l(b){try{return await Rw(b),n.value=n.value.filter(S=>S.id!==b),{success:!0,message:"股票已從清單中移除"}}catch(S){return console.error("移除股票失敗:",S),{success:!1,message:"移除失敗，請稍後再試"}}}function u(b){return n.value.some(S=>S.id===b)}async function f(b,S){const w=n.value.find(y=>y.id===b);if(w){w.order=S,n.value.sort((y,k)=>(y.order||0)-(k.order||0));try{const y=JSON.parse(JSON.stringify(w));await po(y),console.log(`股票 ${b} 排序已更新, order: ${S}`)}catch(y){console.error(`儲存股票 ${b} 排序失敗:`,y)}}}async function h(b){b.forEach((S,w)=>{S.order=(w+1)*1e3}),n.value=b,console.log("000");try{for(const S of n.value){const w=JSON.parse(JSON.stringify(S));await po(w)}}catch(S){console.error("儲存股票排序失敗:",S)}}async function g(){try{console.log("111");const b=n.value.map(S=>JSON.parse(JSON.stringify(S)));console.log("pureList",b),await Lw(b)}catch(b){console.error("儲存股票排序失敗:",b)}}async function p(b){const S=await Tw(b);S&&(n.value.find(y=>y.id===S.id)||n.value.push(S))}async function _(b){const S=n.value.find(w=>w.id===b);S&&await Aw(S)}return{userStockList:n,loadUserStockList:s,addStockToList:a,removeStockFromList:l,isStockInList:u,updateStockList:h,updateSingleStockOrder:f,loadStockToList:p,saveStockToList:_,updateStockListPrices:e}}),$w={style:{display:"flex","flex-direction":"column",gap:"0"}},Yw={style:{margin:"16px 0 0 0"}},Uw={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},Vw=["onClick"],Xw={key:0,style:{"margin-top":"12px"}},Kw={key:0},qw={key:0,style:{background:"#d3d3d3","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",opacity:"0.6"}},jw={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Gw={style:{"font-size":"16px",color:"#333",flex:"1"}},Zw=["onClick"],Jw={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Qw={style:{"font-size":"16px",color:"#333",flex:"1"}},tS={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},eS={__name:"StockSearch",setup(n){const t=Mc(),e=hg("stock-search"),i=Ht(!1);dr(()=>{e.on(w=>{i.value=w})}),dg(()=>{e.reset()});const s=Ht(),a=Ht(""),l=Ht([]),u=["台積電","鴻海","聯發科","長榮","中鋼"],f={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},h={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function g(w){return a.value===w?{...f,...h}:f}function p(){_n(()=>{const w=s.value?.$el?.querySelector("input");w&&w.focus()})}fs(()=>i.value,w=>{w&&setTimeout(()=>{p()},300)}),fs(()=>a.value,async w=>{if(console.log("localSearch 更新:",w),!w||w.length<1){l.value=[];return}console.log("觸發 getAllStocks");try{const y=await Mw();console.log("getAllStocks 執行成功",y),l.value=y.filter(k=>k.name.includes(w)||k.id.includes(w)),console.log("搜尋結果:",l.value)}catch(y){console.error("getAllStocks 執行失敗:",y)}});function _(w){}function b(w){console.log("點擊熱門標籤:",w),a.value=w}async function S(w){const y=await t.addStockToList(w);Di({message:y.message,type:y.success?"success":"fail"})}return(w,y)=>(Ee(),gg(Oe(vg),{show:i.value,"onUpdate:show":y[3]||(y[3]=k=>i.value=k),"cancel-text":"離開",title:"股票搜尋",onSelect:S,style:{height:"80vh",maxHeight:"80vh"},"body-style":"height:80vh;max-height:80vh;overflow-y:auto;"},{description:pn(()=>[mt("div",$w,[j(Oe(ww),{ref_key:"searchInputRef",ref:s,modelValue:a.value,"onUpdate:modelValue":y[0]||(y[0]=k=>a.value=k),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:_},null,8,["modelValue"]),mt("div",Yw,[y[5]||(y[5]=mt("div",{style:{"font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px","margin-bottom":"8px","margin-left":"8px","text-align":"left"}}," | 熱門股票 ",-1)),mt("div",Uw,[(Ee(),rn(Pl,null,Sh(u,k=>mt("span",{key:k,onClick:O=>b(k),style:pg(g(k))},Ie(k),13,Vw)),64))]),a.value&&a.value.length>=1?(Ee(),rn("div",Xw,[l.value.length?(Ee(),rn("div",Kw,[(Ee(!0),rn(Pl,null,Sh(l.value,k=>(Ee(),rn(Pl,{key:k.id},[Oe(t).isStockInList(k.id)?(Ee(),rn("div",qw,[mt("div",jw,Ie(k.id),1),mt("div",Gw,Ie(k.name),1),y[4]||(y[4]=mt("div",{style:{"margin-left":"12px","min-width":"60px",height:"40px",background:"#e0e0e0",color:"#666","font-weight":"bold","font-size":"16px","border-radius":"8px",width:"64px",display:"flex","align-items":"center","justify-content":"center"}}," 已新增 ",-1))])):(Ee(),rn("div",{key:1,onClick:O=>S(k),style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",cursor:"pointer",transition:"all 0.2s ease"},onMouseenter:y[1]||(y[1]=O=>O.target.style.background="#eff3f6"),onMouseleave:y[2]||(y[2]=O=>O.target.style.background="#fff")},[mt("div",Jw,Ie(k.id),1),mt("div",Qw,Ie(k.name),1)],40,Zw))],64))),128))])):(Ee(),rn("div",tS," 查無資料 "))])):H1("",!0)])])]),_:1},8,["show"]))}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ys(n){return n+.5|0}const ai=(n,t,e)=>Math.max(Math.min(n,e),t);function Xr(n){return ai(ys(n*2.55),0,255)}function ui(n){return ai(ys(n*255),0,255)}function Un(n){return ai(ys(n/2.55)/100,0,1)}function Oh(n){return ai(ys(n*100),0,100)}const en={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ac=[..."0123456789ABCDEF"],nS=n=>ac[n&15],iS=n=>ac[(n&240)>>4]+ac[n&15],mo=n=>(n&240)>>4===(n&15),rS=n=>mo(n.r)&&mo(n.g)&&mo(n.b)&&mo(n.a);function sS(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&en[n[1]]*17,g:255&en[n[2]]*17,b:255&en[n[3]]*17,a:t===5?en[n[4]]*17:255}:(t===7||t===9)&&(e={r:en[n[1]]<<4|en[n[2]],g:en[n[3]]<<4|en[n[4]],b:en[n[5]]<<4|en[n[6]],a:t===9?en[n[7]]<<4|en[n[8]]:255})),e}const oS=(n,t)=>n<255?t(n):"";function aS(n){var t=rS(n)?nS:iS;return n?"#"+t(n.r)+t(n.g)+t(n.b)+oS(n.a,t):void 0}const lS=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function wg(n,t,e){const i=t*Math.min(e,1-e),s=(a,l=(a+n/30)%12)=>e-i*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function cS(n,t,e){const i=(s,a=(s+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function uS(n,t,e){const i=wg(n,1,.5);let s;for(t+e>1&&(s=1/(t+e),t*=s,e*=s),s=0;s<3;s++)i[s]*=1-t-e,i[s]+=t;return i}function fS(n,t,e,i,s){return n===s?(t-e)/i+(t<e?6:0):t===s?(e-n)/i+2:(n-t)/i+4}function Tc(n){const e=n.r/255,i=n.g/255,s=n.b/255,a=Math.max(e,i,s),l=Math.min(e,i,s),u=(a+l)/2;let f,h,g;return a!==l&&(g=a-l,h=u>.5?g/(2-a-l):g/(a+l),f=fS(e,i,s,g,a),f=f*60+.5),[f|0,h||0,u]}function Ac(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ui)}function Oc(n,t,e){return Ac(wg,n,t,e)}function hS(n,t,e){return Ac(uS,n,t,e)}function dS(n,t,e){return Ac(cS,n,t,e)}function Sg(n){return(n%360+360)%360}function gS(n){const t=lS.exec(n);let e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Xr(+t[5]):ui(+t[5]));const s=Sg(+t[2]),a=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?i=hS(s,a,l):t[1]==="hsv"?i=dS(s,a,l):i=Oc(s,a,l),{r:i[0],g:i[1],b:i[2],a:e}}function pS(n,t){var e=Tc(n);e[0]=Sg(e[0]+t),e=Oc(e),n.r=e[0],n.g=e[1],n.b=e[2]}function mS(n){if(!n)return;const t=Tc(n),e=t[0],i=Oh(t[1]),s=Oh(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${s}%, ${Un(n.a)})`:`hsl(${e}, ${i}%, ${s}%)`}const Eh={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ih={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _S(){const n={},t=Object.keys(Ih),e=Object.keys(Eh);let i,s,a,l,u;for(i=0;i<t.length;i++){for(l=u=t[i],s=0;s<e.length;s++)a=e[s],u=u.replace(a,Eh[a]);a=parseInt(Ih[l],16),n[u]=[a>>16&255,a>>8&255,a&255]}return n}let _o;function bS(n){_o||(_o=_S(),_o.transparent=[0,0,0,0]);const t=_o[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const vS=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function xS(n){const t=vS.exec(n);let e=255,i,s,a;if(t){if(t[7]!==i){const l=+t[7];e=t[8]?Xr(l):ai(l*255,0,255)}return i=+t[1],s=+t[3],a=+t[5],i=255&(t[2]?Xr(i):ai(i,0,255)),s=255&(t[4]?Xr(s):ai(s,0,255)),a=255&(t[6]?Xr(a):ai(a,0,255)),{r:i,g:s,b:a,a:e}}}function yS(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Un(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Bl=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ir=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function wS(n,t,e){const i=ir(Un(n.r)),s=ir(Un(n.g)),a=ir(Un(n.b));return{r:ui(Bl(i+e*(ir(Un(t.r))-i))),g:ui(Bl(s+e*(ir(Un(t.g))-s))),b:ui(Bl(a+e*(ir(Un(t.b))-a))),a:n.a+e*(t.a-n.a)}}function bo(n,t,e){if(n){let i=Tc(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Oc(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function Cg(n,t){return n&&Object.assign(t||{},n)}function Ph(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ui(n[3]))):(t=Cg(n,{r:0,g:0,b:0,a:1}),t.a=ui(t.a)),t}function SS(n){return n.charAt(0)==="r"?xS(n):gS(n)}class ds{constructor(t){if(t instanceof ds)return t;const e=typeof t;let i;e==="object"?i=Ph(t):e==="string"&&(i=sS(t)||bS(t)||SS(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Cg(this._rgb);return t&&(t.a=Un(t.a)),t}set rgb(t){this._rgb=Ph(t)}rgbString(){return this._valid?yS(this._rgb):void 0}hexString(){return this._valid?aS(this._rgb):void 0}hslString(){return this._valid?mS(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let a;const l=e===a?.5:e,u=2*l-1,f=i.a-s.a,h=((u*f===-1?u:(u+f)/(1+u*f))+1)/2;a=1-h,i.r=255&h*i.r+a*s.r+.5,i.g=255&h*i.g+a*s.g+.5,i.b=255&h*i.b+a*s.b+.5,i.a=l*i.a+(1-l)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=wS(this._rgb,t._rgb,e)),this}clone(){return new ds(this.rgb)}alpha(t){return this._rgb.a=ui(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=ys(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return bo(this._rgb,2,t),this}darken(t){return bo(this._rgb,2,-t),this}saturate(t){return bo(this._rgb,1,t),this}desaturate(t){return bo(this._rgb,1,-t),this}rotate(t){return pS(this._rgb,t),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Hn(){}const CS=(()=>{let n=0;return()=>n++})();function Lt(n){return n==null}function ie(n){if(Array.isArray&&Array.isArray(n))return!0;const t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ct(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function an(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Sn(n,t){return an(n)?n:t}function bt(n,t){return typeof n>"u"?t:n}const kS=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Bt(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function Tt(n,t,e,i){let s,a,l;if(ie(n))for(a=n.length,s=0;s<a;s++)t.call(e,n[s],s);else if(Ct(n))for(l=Object.keys(n),a=l.length,s=0;s<a;s++)t.call(e,n[l[s]],l[s])}function qo(n,t){let e,i,s,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(s=n[e],a=t[e],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function jo(n){if(ie(n))return n.map(jo);if(Ct(n)){const t=Object.create(null),e=Object.keys(n),i=e.length;let s=0;for(;s<i;++s)t[e[s]]=jo(n[e[s]]);return t}return n}function kg(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function DS(n,t,e,i){if(!kg(n))return;const s=t[n],a=e[n];Ct(s)&&Ct(a)?gs(s,a,i):t[n]=jo(a)}function gs(n,t,e){const i=ie(t)?t:[t],s=i.length;if(!Ct(n))return n;e=e||{};const a=e.merger||DS;let l;for(let u=0;u<s;++u){if(l=i[u],!Ct(l))continue;const f=Object.keys(l);for(let h=0,g=f.length;h<g;++h)a(f[h],n,l,e)}return n}function Qr(n,t){return gs(n,t,{merger:MS})}function MS(n,t,e){if(!kg(n))return;const i=t[n],s=e[n];Ct(i)&&Ct(s)?Qr(i,s):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=jo(s))}const Lh={"":n=>n,x:n=>n.x,y:n=>n.y};function TS(n){const t=n.split("."),e=[];let i="";for(const s of t)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function AS(n){const t=TS(n);return e=>{for(const i of t){if(i==="")break;e=e&&e[i]}return e}}function Go(n,t){return(Lh[t]||(Lh[t]=AS(t)))(n)}function Ec(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Zo=n=>typeof n<"u",fi=n=>typeof n=="function",Rh=(n,t)=>{if(n.size!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0};function OS(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const re=Math.PI,Mn=2*re,ES=Mn+re,Jo=Number.POSITIVE_INFINITY,IS=re/180,bn=re/2,yi=re/4,Fh=re*2/3,Dg=Math.log10,gr=Math.sign;function ts(n,t,e){return Math.abs(n-t)<e}function Bh(n){const t=Math.round(n);n=ts(n,t,n/1e3)?t:n;const e=Math.pow(10,Math.floor(Dg(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function PS(n){const t=[],e=Math.sqrt(n);let i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((s,a)=>s-a).pop(),t}function LS(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function ps(n){return!LS(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function RS(n,t){const e=Math.round(n);return e-t<=n&&e+t>=n}function FS(n,t,e){let i,s,a;for(i=0,s=n.length;i<s;i++)a=n[i][e],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function Oi(n){return n*(re/180)}function BS(n){return n*(180/re)}function Wh(n){if(!an(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function WS(n,t){const e=t.x-n.x,i=t.y-n.y,s=Math.sqrt(e*e+i*i);let a=Math.atan2(i,e);return a<-.5*re&&(a+=Mn),{angle:a,distance:s}}function lc(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function zS(n,t){return(n-t+ES)%Mn-re}function ri(n){return(n%Mn+Mn)%Mn}function Mg(n,t,e,i){const s=ri(n),a=ri(t),l=ri(e),u=ri(a-s),f=ri(l-s),h=ri(s-a),g=ri(s-l);return s===a||s===l||i&&a===l||u>f&&h<g}function sn(n,t,e){return Math.max(t,Math.min(e,n))}function NS(n){return sn(n,-32768,32767)}function Kr(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function Ic(n,t,e){e=e||(l=>n[l]<t);let i=n.length-1,s=0,a;for(;i-s>1;)a=s+i>>1,e(a)?s=a:i=a;return{lo:s,hi:i}}const Ei=(n,t,e,i)=>Ic(n,e,i?s=>{const a=n[s][t];return a<e||a===e&&n[s+1][t]===e}:s=>n[s][t]<e),HS=(n,t,e)=>Ic(n,e,i=>n[i][t]>=e);function $S(n,t,e){let i=0,s=n.length;for(;i<s&&n[i]<t;)i++;for(;s>i&&n[s-1]>e;)s--;return i>0||s<n.length?n.slice(i,s):n}const Tg=["push","pop","shift","splice","unshift"];function YS(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Tg.forEach(e=>{const i="_onData"+Ec(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){const l=s.apply(this,a);return n._chartjs.listeners.forEach(u=>{typeof u[i]=="function"&&u[i](...a)}),l}})})}function zh(n,t){const e=n._chartjs;if(!e)return;const i=e.listeners,s=i.indexOf(t);s!==-1&&i.splice(s,1),!(i.length>0)&&(Tg.forEach(a=>{delete n[a]}),delete n._chartjs)}function US(n){const t=new Set(n);return t.size===n.length?n:Array.from(t)}const Ag=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Og(n,t){let e=[],i=!1;return function(...s){e=s,i||(i=!0,Ag.call(window,()=>{i=!1,n.apply(t,e)}))}}function VS(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}const Pc=n=>n==="start"?"left":n==="end"?"right":"center",me=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,XS=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function KS(n,t,e){const i=t.length;let s=0,a=i;if(n._sorted){const{iScale:l,vScale:u,_parsed:f}=n,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,g=l.axis,{min:p,max:_,minDefined:b,maxDefined:S}=l.getUserBounds();if(b){if(s=Math.min(Ei(f,g,p).lo,e?i:Ei(t,g,l.getPixelForValue(p)).lo),h){const w=f.slice(0,s+1).reverse().findIndex(y=>!Lt(y[u.axis]));s-=Math.max(0,w)}s=sn(s,0,i-1)}if(S){let w=Math.max(Ei(f,l.axis,_,!0).hi+1,e?0:Ei(t,g,l.getPixelForValue(_),!0).hi+1);if(h){const y=f.slice(w-1).findIndex(k=>!Lt(k[u.axis]));w+=Math.max(0,y)}a=sn(w,s,i)-s}else a=i-s}return{start:s,count:a}}function qS(n){const{xScale:t,yScale:e,_scaleRanges:i}=n,s={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=s,!0;const a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,s),a}const vo=n=>n===0||n===1,Nh=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Mn/e)),Hh=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Mn/e)+1,es={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*bn)+1,easeOutSine:n=>Math.sin(n*bn),easeInOutSine:n=>-.5*(Math.cos(re*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>vo(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>vo(n)?n:Nh(n,.075,.3),easeOutElastic:n=>vo(n)?n:Hh(n,.075,.3),easeInOutElastic(n){return vo(n)?n:n<.5?.5*Nh(n*2,.1125,.45):.5+.5*Hh(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-es.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?es.easeInBounce(n*2)*.5:es.easeOutBounce(n*2-1)*.5+.5};function Lc(n){if(n&&typeof n=="object"){const t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function $h(n){return Lc(n)?n:new ds(n)}function Wl(n){return Lc(n)?n:new ds(n).saturate(.5).darken(.1).hexString()}const jS=["x","y","borderWidth","radius","tension"],GS=["color","borderColor","backgroundColor"];function ZS(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:GS},numbers:{type:"number",properties:jS}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function JS(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Yh=new Map;function QS(n,t){t=t||{};const e=n+JSON.stringify(t);let i=Yh.get(e);return i||(i=new Intl.NumberFormat(n,t),Yh.set(e,i)),i}function Eg(n,t,e){return QS(t,e).format(n)}const tC={values(n){return ie(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";const i=this.chart.options.locale;let s,a=n;if(e.length>1){const h=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(h<1e-4||h>1e15)&&(s="scientific"),a=eC(n,e)}const l=Dg(Math.abs(a)),u=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),f={notation:s,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(f,this.options.ticks.format),Eg(n,i,f)}};function eC(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Ig={formatters:tC};function nC(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ig.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Pi=Object.create(null),cc=Object.create(null);function ns(n,t){if(!t)return n;const e=t.split(".");for(let i=0,s=e.length;i<s;++i){const a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function zl(n,t,e){return typeof t=="string"?gs(ns(n,t),e):gs(ns(n,""),t)}class iC{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>Wl(s.backgroundColor),this.hoverBorderColor=(i,s)=>Wl(s.borderColor),this.hoverColor=(i,s)=>Wl(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return zl(this,t,e)}get(t){return ns(this,t)}describe(t,e){return zl(cc,t,e)}override(t,e){return zl(Pi,t,e)}route(t,e,i,s){const a=ns(this,t),l=ns(this,i),u="_"+e;Object.defineProperties(a,{[u]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){const f=this[u],h=l[s];return Ct(f)?Object.assign({},h,f):bt(f,h)},set(f){this[u]=f}}})}apply(t){t.forEach(e=>e(this))}}var qt=new iC({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[ZS,JS,nC]);function rC(n){return!n||Lt(n.size)||Lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Uh(n,t,e,i,s){let a=t[s];return a||(a=t[s]=n.measureText(s).width,e.push(s)),a>i&&(i=a),i}function wi(n,t,e){const i=n.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((t-s)*i)/i+s}function Vh(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function uc(n,t,e,i){Pg(n,t,e,i,null)}function Pg(n,t,e,i,s){let a,l,u,f,h,g,p,_;const b=t.pointStyle,S=t.rotation,w=t.radius;let y=(S||0)*IS;if(b&&typeof b=="object"&&(a=b.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(y),n.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),n.restore();return}if(!(isNaN(w)||w<=0)){switch(n.beginPath(),b){default:s?n.ellipse(e,i,s/2,w,0,0,Mn):n.arc(e,i,w,0,Mn),n.closePath();break;case"triangle":g=s?s/2:w,n.moveTo(e+Math.sin(y)*g,i-Math.cos(y)*w),y+=Fh,n.lineTo(e+Math.sin(y)*g,i-Math.cos(y)*w),y+=Fh,n.lineTo(e+Math.sin(y)*g,i-Math.cos(y)*w),n.closePath();break;case"rectRounded":h=w*.516,f=w-h,l=Math.cos(y+yi)*f,p=Math.cos(y+yi)*(s?s/2-h:f),u=Math.sin(y+yi)*f,_=Math.sin(y+yi)*(s?s/2-h:f),n.arc(e-p,i-u,h,y-re,y-bn),n.arc(e+_,i-l,h,y-bn,y),n.arc(e+p,i+u,h,y,y+bn),n.arc(e-_,i+l,h,y+bn,y+re),n.closePath();break;case"rect":if(!S){f=Math.SQRT1_2*w,g=s?s/2:f,n.rect(e-g,i-f,2*g,2*f);break}y+=yi;case"rectRot":p=Math.cos(y)*(s?s/2:w),l=Math.cos(y)*w,u=Math.sin(y)*w,_=Math.sin(y)*(s?s/2:w),n.moveTo(e-p,i-u),n.lineTo(e+_,i-l),n.lineTo(e+p,i+u),n.lineTo(e-_,i+l),n.closePath();break;case"crossRot":y+=yi;case"cross":p=Math.cos(y)*(s?s/2:w),l=Math.cos(y)*w,u=Math.sin(y)*w,_=Math.sin(y)*(s?s/2:w),n.moveTo(e-p,i-u),n.lineTo(e+p,i+u),n.moveTo(e+_,i-l),n.lineTo(e-_,i+l);break;case"star":p=Math.cos(y)*(s?s/2:w),l=Math.cos(y)*w,u=Math.sin(y)*w,_=Math.sin(y)*(s?s/2:w),n.moveTo(e-p,i-u),n.lineTo(e+p,i+u),n.moveTo(e+_,i-l),n.lineTo(e-_,i+l),y+=yi,p=Math.cos(y)*(s?s/2:w),l=Math.cos(y)*w,u=Math.sin(y)*w,_=Math.sin(y)*(s?s/2:w),n.moveTo(e-p,i-u),n.lineTo(e+p,i+u),n.moveTo(e+_,i-l),n.lineTo(e-_,i+l);break;case"line":l=s?s/2:Math.cos(y)*w,u=Math.sin(y)*w,n.moveTo(e-l,i-u),n.lineTo(e+l,i+u);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(y)*(s?s/2:w),i+Math.sin(y)*w);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ms(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Rc(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Fc(n){n.restore()}function sC(n,t,e,i,s){if(!t)return n.lineTo(e.x,e.y);if(s==="middle"){const a=(t.x+e.x)/2;n.lineTo(a,t.y),n.lineTo(a,e.y)}else s==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function oC(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function aC(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Lt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function lC(n,t,e,i,s){if(s.strikethrough||s.underline){const a=n.measureText(i),l=t-a.actualBoundingBoxLeft,u=t+a.actualBoundingBoxRight,f=e-a.actualBoundingBoxAscent,h=e+a.actualBoundingBoxDescent,g=s.strikethrough?(f+h)/2:h;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,g),n.lineTo(u,g),n.stroke()}}function cC(n,t){const e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function _s(n,t,e,i,s,a={}){const l=ie(t)?t:[t],u=a.strokeWidth>0&&a.strokeColor!=="";let f,h;for(n.save(),n.font=s.string,aC(n,a),f=0;f<l.length;++f)h=l[f],a.backdrop&&cC(n,a.backdrop),u&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),Lt(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(h,e,i,a.maxWidth)),n.fillText(h,e,i,a.maxWidth),lC(n,e,i,h,a),i+=Number(s.lineHeight);n.restore()}function fc(n,t){const{x:e,y:i,w:s,h:a,radius:l}=t;n.arc(e+l.topLeft,i+l.topLeft,l.topLeft,1.5*re,re,!0),n.lineTo(e,i+a-l.bottomLeft),n.arc(e+l.bottomLeft,i+a-l.bottomLeft,l.bottomLeft,re,bn,!0),n.lineTo(e+s-l.bottomRight,i+a),n.arc(e+s-l.bottomRight,i+a-l.bottomRight,l.bottomRight,bn,0,!0),n.lineTo(e+s,i+l.topRight),n.arc(e+s-l.topRight,i+l.topRight,l.topRight,0,-bn,!0),n.lineTo(e+l.topLeft,i)}const uC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fC=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function hC(n,t){const e=(""+n).match(uC);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}const dC=n=>+n||0;function Lg(n,t){const e={},i=Ct(t),s=i?Object.keys(t):t,a=Ct(n)?i?l=>bt(n[l],n[t[l]]):l=>n[l]:()=>n;for(const l of s)e[l]=dC(a(l));return e}function gC(n){return Lg(n,{top:"y",right:"x",bottom:"y",left:"x"})}function is(n){return Lg(n,["topLeft","topRight","bottomLeft","bottomRight"])}function ln(n){const t=gC(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function _e(n,t){n=n||{},t=t||qt.font;let e=bt(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=bt(n.style,t.style);i&&!(""+i).match(fC)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:bt(n.family,t.family),lineHeight:hC(bt(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:bt(n.weight,t.weight),string:""};return s.string=rC(s),s}function xo(n,t,e,i){let s,a,l;for(s=0,a=n.length;s<a;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function pC(n,t,e){const{min:i,max:s}=n,a=kS(t,(s-i)/2),l=(u,f)=>e&&u===0?0:u+f;return{min:l(i,-Math.abs(a)),max:l(s,a)}}function Fi(n,t){return Object.assign(Object.create(n),t)}function Bc(n,t=[""],e,i,s=()=>n[0]){const a=e||n;typeof i>"u"&&(i=Wg("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:i,_getTarget:s,override:u=>Bc([u,...n],t,a,i)};return new Proxy(l,{deleteProperty(u,f){return delete u[f],delete u._keys,delete n[0][f],!0},get(u,f){return Fg(u,f,()=>SC(f,t,n,u))},getOwnPropertyDescriptor(u,f){return Reflect.getOwnPropertyDescriptor(u._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(u,f){return Kh(u).includes(f)},ownKeys(u){return Kh(u)},set(u,f,h){const g=u._storage||(u._storage=s());return u[f]=g[f]=h,delete u._keys,!0}})}function pr(n,t,e,i){const s={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:Rg(n,i),setContext:a=>pr(n,a,e,i),override:a=>pr(n.override(a),t,e,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete n[l],!0},get(a,l,u){return Fg(a,l,()=>_C(a,l,u))},getOwnPropertyDescriptor(a,l){return a._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(a,l,u){return n[l]=u,delete a[l],!0}})}function Rg(n,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:s=t.allKeys}=n;return{allKeys:s,scriptable:e,indexable:i,isScriptable:fi(e)?e:()=>e,isIndexable:fi(i)?i:()=>i}}const mC=(n,t)=>n?n+Ec(t):t,Wc=(n,t)=>Ct(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Fg(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];const i=e();return n[t]=i,i}function _C(n,t,e){const{_proxy:i,_context:s,_subProxy:a,_descriptors:l}=n;let u=i[t];return fi(u)&&l.isScriptable(t)&&(u=bC(t,u,n,e)),ie(u)&&u.length&&(u=vC(t,u,n,l.isIndexable)),Wc(t,u)&&(u=pr(u,s,a&&a[t],l)),u}function bC(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_stack:u}=e;if(u.has(n))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+n);u.add(n);let f=t(a,l||i);return u.delete(n),Wc(n,f)&&(f=zc(s._scopes,s,n,f)),f}function vC(n,t,e,i){const{_proxy:s,_context:a,_subProxy:l,_descriptors:u}=e;if(typeof a.index<"u"&&i(n))return t[a.index%t.length];if(Ct(t[0])){const f=t,h=s._scopes.filter(g=>g!==f);t=[];for(const g of f){const p=zc(h,s,n,g);t.push(pr(p,a,l&&l[n],u))}}return t}function Bg(n,t,e){return fi(n)?n(t,e):n}const xC=(n,t)=>n===!0?t:typeof n=="string"?Go(t,n):void 0;function yC(n,t,e,i,s){for(const a of t){const l=xC(e,a);if(l){n.add(l);const u=Bg(l._fallback,e,s);if(typeof u<"u"&&u!==e&&u!==i)return u}else if(l===!1&&typeof i<"u"&&e!==i)return null}return!1}function zc(n,t,e,i){const s=t._rootScopes,a=Bg(t._fallback,e,i),l=[...n,...s],u=new Set;u.add(i);let f=Xh(u,l,e,a||e,i);return f===null||typeof a<"u"&&a!==e&&(f=Xh(u,l,a,f,i),f===null)?!1:Bc(Array.from(u),[""],s,a,()=>wC(t,e,i))}function Xh(n,t,e,i,s){for(;e;)e=yC(n,t,e,i,s);return e}function wC(n,t,e){const i=n._getTarget();t in i||(i[t]={});const s=i[t];return ie(s)&&Ct(e)?e:s||{}}function SC(n,t,e,i){let s;for(const a of t)if(s=Wg(mC(a,n),e),typeof s<"u")return Wc(n,s)?zc(e,i,n,s):s}function Wg(n,t){for(const e of t){if(!e)continue;const i=e[n];if(typeof i<"u")return i}}function Kh(n){let t=n._keys;return t||(t=n._keys=CC(n._scopes)),t}function CC(n){const t=new Set;for(const e of n)for(const i of Object.keys(e).filter(s=>!s.startsWith("_")))t.add(i);return Array.from(t)}const kC=Number.EPSILON||1e-14,mr=(n,t)=>t<n.length&&!n[t].skip&&n[t],zg=n=>n==="x"?"y":"x";function DC(n,t,e,i){const s=n.skip?t:n,a=t,l=e.skip?t:e,u=lc(a,s),f=lc(l,a);let h=u/(u+f),g=f/(u+f);h=isNaN(h)?0:h,g=isNaN(g)?0:g;const p=i*h,_=i*g;return{previous:{x:a.x-p*(l.x-s.x),y:a.y-p*(l.y-s.y)},next:{x:a.x+_*(l.x-s.x),y:a.y+_*(l.y-s.y)}}}function MC(n,t,e){const i=n.length;let s,a,l,u,f,h=mr(n,0);for(let g=0;g<i-1;++g)if(f=h,h=mr(n,g+1),!(!f||!h)){if(ts(t[g],0,kC)){e[g]=e[g+1]=0;continue}s=e[g]/t[g],a=e[g+1]/t[g],u=Math.pow(s,2)+Math.pow(a,2),!(u<=9)&&(l=3/Math.sqrt(u),e[g]=s*l*t[g],e[g+1]=a*l*t[g])}}function TC(n,t,e="x"){const i=zg(e),s=n.length;let a,l,u,f=mr(n,0);for(let h=0;h<s;++h){if(l=u,u=f,f=mr(n,h+1),!u)continue;const g=u[e],p=u[i];l&&(a=(g-l[e])/3,u[`cp1${e}`]=g-a,u[`cp1${i}`]=p-a*t[h]),f&&(a=(f[e]-g)/3,u[`cp2${e}`]=g+a,u[`cp2${i}`]=p+a*t[h])}}function AC(n,t="x"){const e=zg(t),i=n.length,s=Array(i).fill(0),a=Array(i);let l,u,f,h=mr(n,0);for(l=0;l<i;++l)if(u=f,f=h,h=mr(n,l+1),!!f){if(h){const g=h[t]-f[t];s[l]=g!==0?(h[e]-f[e])/g:0}a[l]=u?h?gr(s[l-1])!==gr(s[l])?0:(s[l-1]+s[l])/2:s[l-1]:s[l]}MC(n,s,a),TC(n,a,t)}function yo(n,t,e){return Math.max(Math.min(n,e),t)}function OC(n,t){let e,i,s,a,l,u=ms(n[0],t);for(e=0,i=n.length;e<i;++e)l=a,a=u,u=e<i-1&&ms(n[e+1],t),a&&(s=n[e],l&&(s.cp1x=yo(s.cp1x,t.left,t.right),s.cp1y=yo(s.cp1y,t.top,t.bottom)),u&&(s.cp2x=yo(s.cp2x,t.left,t.right),s.cp2y=yo(s.cp2y,t.top,t.bottom)))}function EC(n,t,e,i,s){let a,l,u,f;if(t.spanGaps&&(n=n.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")AC(n,s);else{let h=i?n[n.length-1]:n[0];for(a=0,l=n.length;a<l;++a)u=n[a],f=DC(h,u,n[Math.min(a+1,l-(i?0:1))%l],t.tension),u.cp1x=f.previous.x,u.cp1y=f.previous.y,u.cp2x=f.next.x,u.cp2y=f.next.y,h=u}t.capBezierPoints&&OC(n,e)}function Nc(){return typeof window<"u"&&typeof document<"u"}function Hc(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Qo(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}const oa=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function IC(n,t){return oa(n).getPropertyValue(t)}const PC=["top","right","bottom","left"];function Ii(n,t,e){const i={};e=e?"-"+e:"";for(let s=0;s<4;s++){const a=PC[s];i[a]=parseFloat(n[t+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const LC=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function RC(n,t){const e=n.touches,i=e&&e.length?e[0]:n,{offsetX:s,offsetY:a}=i;let l=!1,u,f;if(LC(s,a,n.target))u=s,f=a;else{const h=t.getBoundingClientRect();u=i.clientX-h.left,f=i.clientY-h.top,l=!0}return{x:u,y:f,box:l}}function Mi(n,t){if("native"in n)return n;const{canvas:e,currentDevicePixelRatio:i}=t,s=oa(e),a=s.boxSizing==="border-box",l=Ii(s,"padding"),u=Ii(s,"border","width"),{x:f,y:h,box:g}=RC(n,e),p=l.left+(g&&u.left),_=l.top+(g&&u.top);let{width:b,height:S}=t;return a&&(b-=l.width+u.width,S-=l.height+u.height),{x:Math.round((f-p)/b*e.width/i),y:Math.round((h-_)/S*e.height/i)}}function FC(n,t,e){let i,s;if(t===void 0||e===void 0){const a=n&&Hc(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{const l=a.getBoundingClientRect(),u=oa(a),f=Ii(u,"border","width"),h=Ii(u,"padding");t=l.width-h.width-f.width,e=l.height-h.height-f.height,i=Qo(u.maxWidth,a,"clientWidth"),s=Qo(u.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:i||Jo,maxHeight:s||Jo}}const wo=n=>Math.round(n*10)/10;function BC(n,t,e,i){const s=oa(n),a=Ii(s,"margin"),l=Qo(s.maxWidth,n,"clientWidth")||Jo,u=Qo(s.maxHeight,n,"clientHeight")||Jo,f=FC(n,t,e);let{width:h,height:g}=f;if(s.boxSizing==="content-box"){const _=Ii(s,"border","width"),b=Ii(s,"padding");h-=b.width+_.width,g-=b.height+_.height}return h=Math.max(0,h-a.width),g=Math.max(0,i?h/i:g-a.height),h=wo(Math.min(h,l,f.maxWidth)),g=wo(Math.min(g,u,f.maxHeight)),h&&!g&&(g=wo(h/2)),(t!==void 0||e!==void 0)&&i&&f.height&&g>f.height&&(g=f.height,h=wo(Math.floor(g*i))),{width:h,height:g}}function qh(n,t,e){const i=t||1,s=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(e||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||l.height!==s||l.width!==a?(n.currentDevicePixelRatio=i,l.height=s,l.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}const WC=function(){let n=!1;try{const t={get passive(){return n=!0,!1}};Nc()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function jh(n,t){const e=IC(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ti(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function zC(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function NC(n,t,e,i){const s={x:n.cp2x,y:n.cp2y},a={x:t.cp1x,y:t.cp1y},l=Ti(n,s,e),u=Ti(s,a,e),f=Ti(a,t,e),h=Ti(l,u,e),g=Ti(u,f,e);return Ti(h,g,e)}const HC=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},$C=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function fr(n,t,e){return n?HC(t,e):$C()}function Ng(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function Hg(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function $g(n){return n==="angle"?{between:Mg,compare:zS,normalize:ri}:{between:Kr,compare:(t,e)=>t-e,normalize:t=>t}}function Gh({start:n,end:t,count:e,loop:i,style:s}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:s}}function YC(n,t,e){const{property:i,start:s,end:a}=e,{between:l,normalize:u}=$g(i),f=t.length;let{start:h,end:g,loop:p}=n,_,b;if(p){for(h+=f,g+=f,_=0,b=f;_<b&&l(u(t[h%f][i]),s,a);++_)h--,g--;h%=f,g%=f}return g<h&&(g+=f),{start:h,end:g,loop:p,style:n.style}}function UC(n,t,e){if(!e)return[n];const{property:i,start:s,end:a}=e,l=t.length,{compare:u,between:f,normalize:h}=$g(i),{start:g,end:p,loop:_,style:b}=YC(n,t,e),S=[];let w=!1,y=null,k,O,P;const F=()=>f(s,P,k)&&u(s,P)!==0,D=()=>u(a,k)===0||f(a,P,k),L=()=>w||F(),E=()=>!w||D();for(let R=g,W=g;R<=p;++R)O=t[R%l],!O.skip&&(k=h(O[i]),k!==P&&(w=f(k,s,a),y===null&&L()&&(y=u(k,s)===0?R:W),y!==null&&E()&&(S.push(Gh({start:y,end:R,loop:_,count:l,style:b})),y=null),W=R,P=k));return y!==null&&S.push(Gh({start:y,end:p,loop:_,count:l,style:b})),S}function VC(n,t){const e=[],i=n.segments;for(let s=0;s<i.length;s++){const a=UC(i[s],n.points,t);a.length&&e.push(...a)}return e}function XC(n,t,e,i){let s=0,a=t-1;if(e&&!i)for(;s<t&&!n[s].skip;)s++;for(;s<t&&n[s].skip;)s++;for(s%=t,e&&(a+=s);a>s&&n[a%t].skip;)a--;return a%=t,{start:s,end:a}}function KC(n,t,e,i){const s=n.length,a=[];let l=t,u=n[t],f;for(f=t+1;f<=e;++f){const h=n[f%s];h.skip||h.stop?u.skip||(i=!1,a.push({start:t%s,end:(f-1)%s,loop:i}),t=l=h.stop?f:null):(l=f,u.skip&&(t=f)),u=h}return l!==null&&a.push({start:t%s,end:l%s,loop:i}),a}function qC(n,t){const e=n.points,i=n.options.spanGaps,s=e.length;if(!s)return[];const a=!!n._loop,{start:l,end:u}=XC(e,s,a,i);if(i===!0)return Zh(n,[{start:l,end:u,loop:a}],e,t);const f=u<l?u+s:u,h=!!n._fullLoop&&l===0&&u===s-1;return Zh(n,KC(e,l,f,h),e,t)}function Zh(n,t,e,i){return!i||!i.setContext||!e?t:jC(n,t,e,i)}function jC(n,t,e,i){const s=n._chart.getContext(),a=Jh(n.options),{_datasetIndex:l,options:{spanGaps:u}}=n,f=e.length,h=[];let g=a,p=t[0].start,_=p;function b(S,w,y,k){const O=u?-1:1;if(S!==w){for(S+=f;e[S%f].skip;)S-=O;for(;e[w%f].skip;)w+=O;S%f!==w%f&&(h.push({start:S%f,end:w%f,loop:y,style:k}),g=k,p=w%f)}}for(const S of t){p=u?p:S.start;let w=e[p%f],y;for(_=p+1;_<=S.end;_++){const k=e[_%f];y=Jh(i.setContext(Fi(s,{type:"segment",p0:w,p1:k,p0DataIndex:(_-1)%f,p1DataIndex:_%f,datasetIndex:l}))),GC(y,g)&&b(p,_-1,S.loop,g),w=k,g=y}p<_-1&&b(p,_-1,S.loop,g)}return h}function Jh(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function GC(n,t){if(!t)return!1;const e=[],i=function(s,a){return Lc(a)?(e.includes(a)||e.push(a),e.indexOf(a)):a};return JSON.stringify(n,i)!==JSON.stringify(t,i)}function So(n,t,e){return n.options.clip?n[e]:t[e]}function ZC(n,t){const{xScale:e,yScale:i}=n;return e&&i?{left:So(e,t,"left"),right:So(e,t,"right"),top:So(i,t,"top"),bottom:So(i,t,"bottom")}:t}function JC(n,t){const e=t._clip;if(e.disabled)return!1;const i=ZC(t,n.chartArea);return{left:e.left===!1?0:i.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:i.right+(e.right===!0?0:e.right),top:e.top===!1?0:i.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:i.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class QC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const a=e.listeners[s],l=e.duration;a.forEach(u=>u({chart:t,initial:e.initial,numSteps:l,currentStep:Math.min(i-e.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=Ag.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const a=i.items;let l=a.length-1,u=!1,f;for(;l>=0;--l)f=a[l],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(t),u=!0):(a[l]=a[a.length-1],a.pop());u&&(s.draw(),this._notify(s,i,t,"progress")),a.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var $n=new QC;const Qh="transparent",tk={boolean(n,t,e){return e>.5?t:n},color(n,t,e){const i=$h(n||Qh),s=i.valid&&$h(t||Qh);return s&&s.valid?s.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}};class ek{constructor(t,e,i,s){const a=e[i];s=xo([t.to,s,a,t.from]);const l=xo([t.from,a,s]);this._active=!0,this._fn=t.fn||tk[t.type||typeof l],this._easing=es[t.easing]||es.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],a=i-this._start,l=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=xo([t.to,e,s,t.from]),this._from=xo([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,a=this._from,l=this._loop,u=this._to;let f;if(this._active=a!==u&&(l||e<i),!this._active){this._target[s]=u,this._notify(!0);return}if(e<0){this._target[s]=a;return}f=e/i%2,f=l&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[s]=this._fn(a,u,f)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Yg{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ct(t))return;const e=Object.keys(qt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const a=t[s];if(!Ct(a))return;const l={};for(const u of e)l[u]=a[u];(ie(a.properties)&&a.properties||[s]).forEach(u=>{(u===s||!i.has(u))&&i.set(u,l)})})}_animateOptions(t,e){const i=e.options,s=ik(t,i);if(!s)return[];const a=this._createAnimations(s,i);return i.$shared&&nk(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,e){const i=this._properties,s=[],a=t.$animations||(t.$animations={}),l=Object.keys(e),u=Date.now();let f;for(f=l.length-1;f>=0;--f){const h=l[f];if(h.charAt(0)==="$")continue;if(h==="options"){s.push(...this._animateOptions(t,e));continue}const g=e[h];let p=a[h];const _=i.get(h);if(p)if(_&&p.active()){p.update(_,g,u);continue}else p.cancel();if(!_||!_.duration){t[h]=g;continue}a[h]=p=new ek(_,t,h,g),s.push(p)}return s}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const i=this._createAnimations(t,e);if(i.length)return $n.add(this._chart,i),!0}}function nk(n,t){const e=[],i=Object.keys(t);for(let s=0;s<i.length;s++){const a=n[i[s]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function ik(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function td(n,t){const e=n&&n.options||{},i=e.reverse,s=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:i?a:s,end:i?s:a}}function rk(n,t,e){if(e===!1)return!1;const i=td(n,e),s=td(t,e);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function sk(n){let t,e,i,s;return Ct(n)?(t=n.top,e=n.right,i=n.bottom,s=n.left):t=e=i=s=n,{top:t,right:e,bottom:i,left:s,disabled:n===!1}}function Ug(n,t){const e=[],i=n._getSortedDatasetMetas(t);let s,a;for(s=0,a=i.length;s<a;++s)e.push(i[s].index);return e}function ed(n,t,e,i={}){const s=n.keys,a=i.mode==="single";let l,u,f,h;if(t===null)return;let g=!1;for(l=0,u=s.length;l<u;++l){if(f=+s[l],f===e){if(g=!0,i.all)continue;break}h=n.values[f],an(h)&&(a||t===0||gr(t)===gr(h))&&(t+=h)}return!g&&!i.all?0:t}function ok(n,t){const{iScale:e,vScale:i}=t,s=e.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",l=Object.keys(n),u=new Array(l.length);let f,h,g;for(f=0,h=l.length;f<h;++f)g=l[f],u[f]={[s]:g,[a]:n[g]};return u}function Nl(n,t){const e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function ak(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function lk(n){const{min:t,max:e,minDefined:i,maxDefined:s}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function ck(n,t,e){const i=n[t]||(n[t]={});return i[e]||(i[e]={})}function nd(n,t,e,i){for(const s of t.getMatchingVisibleMetas(i).reverse()){const a=n[s.index];if(e&&a>0||!e&&a<0)return s.index}return null}function id(n,t){const{chart:e,_cachedMeta:i}=n,s=e._stacks||(e._stacks={}),{iScale:a,vScale:l,index:u}=i,f=a.axis,h=l.axis,g=ak(a,l,i),p=t.length;let _;for(let b=0;b<p;++b){const S=t[b],{[f]:w,[h]:y}=S,k=S._stacks||(S._stacks={});_=k[h]=ck(s,g,w),_[u]=y,_._top=nd(_,l,!0,i.type),_._bottom=nd(_,l,!1,i.type);const O=_._visualValues||(_._visualValues={});O[u]=y}}function Hl(n,t){const e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function uk(n,t){return Fi(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function fk(n,t,e){return Fi(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Nr(n,t){const e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(const s of t){const a=s._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}const $l=n=>n==="reset"||n==="none",rd=(n,t)=>t?n:Object.assign({},n),hk=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Ug(e,!0),values:null};class Vg{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Nl(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Nr(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(p,_,b,S)=>p==="x"?_:p==="r"?S:b,a=e.xAxisID=bt(i.xAxisID,Hl(t,"x")),l=e.yAxisID=bt(i.yAxisID,Hl(t,"y")),u=e.rAxisID=bt(i.rAxisID,Hl(t,"r")),f=e.indexAxis,h=e.iAxisID=s(f,a,l,u),g=e.vAxisID=s(f,l,a,u);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(l),e.rScale=this.getScaleForId(u),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&zh(this._data,this),t._stacked&&Nr(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(Ct(e)){const s=this._cachedMeta;this._data=ok(e,s)}else if(i!==e){if(i){zh(i,this);const s=this._cachedMeta;Nr(s),s._parsed=[]}e&&Object.isExtensible(e)&&YS(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const a=e._stacked;e._stacked=Nl(e.vScale,e),e.stack!==i.stack&&(s=!0,Nr(e),e.stack=i.stack),this._resyncElements(t),(s||a!==e._stacked)&&(id(this,e._parsed),e._stacked=Nl(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:a,_stacked:l}=i,u=a.axis;let f=t===0&&e===s.length?!0:i._sorted,h=t>0&&i._parsed[t-1],g,p,_;if(this._parsing===!1)i._parsed=s,i._sorted=!0,_=s;else{ie(s[t])?_=this.parseArrayData(i,s,t,e):Ct(s[t])?_=this.parseObjectData(i,s,t,e):_=this.parsePrimitiveData(i,s,t,e);const b=()=>p[u]===null||h&&p[u]<h[u];for(g=0;g<e;++g)i._parsed[g+t]=p=_[g],f&&(b()&&(f=!1),h=p);i._sorted=f}l&&id(this,_)}parsePrimitiveData(t,e,i,s){const{iScale:a,vScale:l}=t,u=a.axis,f=l.axis,h=a.getLabels(),g=a===l,p=new Array(s);let _,b,S;for(_=0,b=s;_<b;++_)S=_+i,p[_]={[u]:g||a.parse(h[S],S),[f]:l.parse(e[S],S)};return p}parseArrayData(t,e,i,s){const{xScale:a,yScale:l}=t,u=new Array(s);let f,h,g,p;for(f=0,h=s;f<h;++f)g=f+i,p=e[g],u[f]={x:a.parse(p[0],g),y:l.parse(p[1],g)};return u}parseObjectData(t,e,i,s){const{xScale:a,yScale:l}=t,{xAxisKey:u="x",yAxisKey:f="y"}=this._parsing,h=new Array(s);let g,p,_,b;for(g=0,p=s;g<p;++g)_=g+i,b=e[_],h[g]={x:a.parse(Go(b,u),_),y:l.parse(Go(b,f),_)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,a=this._cachedMeta,l=e[t.axis],u={keys:Ug(s,!0),values:e._stacks[t.axis]._visualValues};return ed(u,l,a.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const a=i[e.axis];let l=a===null?NaN:a;const u=s&&i._stacks[e.axis];s&&u&&(s.values=u,l=ed(s,a,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,a=i._sorted&&t===i.iScale,l=s.length,u=this._getOtherScale(t),f=hk(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:p}=lk(u);let _,b;function S(){b=s[_];const w=b[u.axis];return!an(b[t.axis])||g>w||p<w}for(_=0;_<l&&!(!S()&&(this.updateRangeFromParsed(h,t,b,f),a));++_);if(a){for(_=l-1;_>=0;--_)if(!S()){this.updateRangeFromParsed(h,t,b,f);break}}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,a,l;for(s=0,a=e.length;s<a;++s)l=e[s][t.axis],an(l)&&i.push(l);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=sk(bt(this.options.clip,rk(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],a=e.chartArea,l=[],u=this._drawStart||0,f=this._drawCount||s.length-u,h=this.options.drawActiveElementsOnTop;let g;for(i.dataset&&i.dataset.draw(t,a,u,f),g=u;g<u+f;++g){const p=s[g];p.hidden||(p.active&&h?l.push(p):p.draw(t,a))}for(g=0;g<l.length;++g)l[g].draw(t,a)}getStyle(t,e){const i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let a;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];a=l.$context||(l.$context=fk(this.getContext(),t,l)),a.parsed=this.getParsed(t),a.raw=s.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=uk(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s=e==="active",a=this._cachedDataOpts,l=t+"-"+e,u=a[l],f=this.enableOptionSharing&&Zo(i);if(u)return rd(u,f);const h=this.chart.config,g=h.datasetElementScopeKeys(this._type,t),p=s?[`${t}Hover`,"hover",t,""]:[t,""],_=h.getOptionScopes(this.getDataset(),g),b=Object.keys(qt.elements[t]),S=()=>this.getContext(i,s,e),w=h.resolveNamedOptions(_,b,S,p);return w.$shared&&(w.$shared=f,a[l]=Object.freeze(rd(w,f))),w}_resolveAnimations(t,e,i){const s=this.chart,a=this._cachedDataOpts,l=`animation-${e}`,u=a[l];if(u)return u;let f;if(s.options.animation!==!1){const g=this.chart.config,p=g.datasetAnimationScopeKeys(this._type,e),_=g.getOptionScopes(this.getDataset(),p);f=g.createResolver(_,this.getContext(t,i,e))}const h=new Yg(s,f&&f.animations);return f&&f._cacheable&&(a[l]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||$l(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,a=this.getSharedOptions(i),l=this.includeOptions(e,a)||a!==s;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:l}}updateElement(t,e,i,s){$l(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!$l(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const a=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[u,f,h]of this._syncList)this[u](f,h);this._syncList=[];const s=i.length,a=e.length,l=Math.min(a,s);l&&this.parse(0,l),a>s?this._insertElements(s,a-s,t):a<s&&this._removeElements(a,s-a)}_insertElements(t,e,i=!0){const s=this._cachedMeta,a=s.data,l=t+e;let u;const f=h=>{for(h.length+=e,u=h.length-1;u>=l;u--)h[u]=h[u-e]};for(f(a),u=t;u<l;++u)a[u]=new this.dataElementType;this._parsing&&f(s._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Nr(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class dk extends Vg{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:a}=e,l=this.chart._animationsDisabled;let{start:u,count:f}=KS(e,s,l);this._drawStart=u,this._drawCount=f,qS(e)&&(u=0,f=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=s;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!l,options:h},t),this.updateElements(s,u,f,t)}updateElements(t,e,i,s){const a=s==="reset",{iScale:l,vScale:u,_stacked:f,_dataset:h}=this._cachedMeta,{sharedOptions:g,includeOptions:p}=this._getSharedOptions(e,s),_=l.axis,b=u.axis,{spanGaps:S,segment:w}=this.options,y=ps(S)?S:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||a||s==="none",O=e+i,P=t.length;let F=e>0&&this.getParsed(e-1);for(let D=0;D<P;++D){const L=t[D],E=k?L:{};if(D<e||D>=O){E.skip=!0;continue}const R=this.getParsed(D),W=Lt(R[b]),X=E[_]=l.getPixelForValue(R[_],D),Y=E[b]=a||W?u.getBasePixel():u.getPixelForValue(f?this.applyStack(u,R,f):R[b],D);E.skip=isNaN(X)||isNaN(Y)||W,E.stop=D>0&&Math.abs(R[_]-F[_])>y,w&&(E.parsed=R,E.raw=h.data[D]),p&&(E.options=g||this.resolveDataElementOptions(D,L.active?"active":s)),k||this.updateElement(L,D,E,s),F=R}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const a=s[0].size(this.resolveDataElementOptions(0)),l=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,a,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}function Si(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $c{static override(t){Object.assign($c.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Si()}parse(){return Si()}format(){return Si()}add(){return Si()}diff(){return Si()}startOf(){return Si()}endOf(){return Si()}}var Xg={_date:$c};function gk(n,t,e,i){const{controller:s,data:a,_sorted:l}=n,u=s._cachedMeta.iScale,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(u&&t===u.axis&&t!=="r"&&l&&a.length){const h=u._reversePixels?HS:Ei;if(i){if(s._sharedOptions){const g=a[0],p=typeof g.getRange=="function"&&g.getRange(t);if(p){const _=h(a,t,e-p),b=h(a,t,e+p);return{lo:_.lo,hi:b.hi}}}}else{const g=h(a,t,e);if(f){const{vScale:p}=s._cachedMeta,{_parsed:_}=n,b=_.slice(0,g.lo+1).reverse().findIndex(w=>!Lt(w[p.axis]));g.lo-=Math.max(0,b);const S=_.slice(g.hi).findIndex(w=>!Lt(w[p.axis]));g.hi+=Math.max(0,S)}return g}}return{lo:0,hi:a.length-1}}function aa(n,t,e,i,s){const a=n.getSortedVisibleDatasetMetas(),l=e[t];for(let u=0,f=a.length;u<f;++u){const{index:h,data:g}=a[u],{lo:p,hi:_}=gk(a[u],t,l,s);for(let b=p;b<=_;++b){const S=g[b];S.skip||i(S,h,b)}}}function pk(n){const t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,s){const a=t?Math.abs(i.x-s.x):0,l=e?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}function Yl(n,t,e,i,s){const a=[];return!s&&!n.isPointInArea(t)||aa(n,e,t,function(u,f,h){!s&&!ms(u,n.chartArea,0)||u.inRange(t.x,t.y,i)&&a.push({element:u,datasetIndex:f,index:h})},!0),a}function mk(n,t,e,i){let s=[];function a(l,u,f){const{startAngle:h,endAngle:g}=l.getProps(["startAngle","endAngle"],i),{angle:p}=WS(l,{x:t.x,y:t.y});Mg(p,h,g)&&s.push({element:l,datasetIndex:u,index:f})}return aa(n,e,t,a),s}function _k(n,t,e,i,s,a){let l=[];const u=pk(e);let f=Number.POSITIVE_INFINITY;function h(g,p,_){const b=g.inRange(t.x,t.y,s);if(i&&!b)return;const S=g.getCenterPoint(s);if(!(!!a||n.isPointInArea(S))&&!b)return;const y=u(t,S);y<f?(l=[{element:g,datasetIndex:p,index:_}],f=y):y===f&&l.push({element:g,datasetIndex:p,index:_})}return aa(n,e,t,h),l}function Ul(n,t,e,i,s,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!i?mk(n,t,e,s):_k(n,t,e,i,s,a)}function sd(n,t,e,i,s){const a=[],l=e==="x"?"inXRange":"inYRange";let u=!1;return aa(n,e,t,(f,h,g)=>{f[l]&&f[l](t[e],s)&&(a.push({element:f,datasetIndex:h,index:g}),u=u||f.inRange(t.x,t.y,s))}),i&&!u?[]:a}var bk={modes:{index(n,t,e,i){const s=Mi(t,n),a=e.axis||"x",l=e.includeInvisible||!1,u=e.intersect?Yl(n,s,a,i,l):Ul(n,s,a,!1,i,l),f=[];return u.length?(n.getSortedVisibleDatasetMetas().forEach(h=>{const g=u[0].index,p=h.data[g];p&&!p.skip&&f.push({element:p,datasetIndex:h.index,index:g})}),f):[]},dataset(n,t,e,i){const s=Mi(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;let u=e.intersect?Yl(n,s,a,i,l):Ul(n,s,a,!1,i,l);if(u.length>0){const f=u[0].datasetIndex,h=n.getDatasetMeta(f).data;u=[];for(let g=0;g<h.length;++g)u.push({element:h[g],datasetIndex:f,index:g})}return u},point(n,t,e,i){const s=Mi(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return Yl(n,s,a,i,l)},nearest(n,t,e,i){const s=Mi(t,n),a=e.axis||"xy",l=e.includeInvisible||!1;return Ul(n,s,a,e.intersect,i,l)},x(n,t,e,i){const s=Mi(t,n);return sd(n,s,"x",e.intersect,i)},y(n,t,e,i){const s=Mi(t,n);return sd(n,s,"y",e.intersect,i)}}};const Kg=["left","top","right","bottom"];function Hr(n,t){return n.filter(e=>e.pos===t)}function od(n,t){return n.filter(e=>Kg.indexOf(e.pos)===-1&&e.box.axis===t)}function $r(n,t){return n.sort((e,i)=>{const s=t?i:e,a=t?e:i;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function vk(n){const t=[];let e,i,s,a,l,u;for(e=0,i=(n||[]).length;e<i;++e)s=n[e],{position:a,options:{stack:l,stackWeight:u=1}}=s,t.push({index:e,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&a+l,stackWeight:u});return t}function xk(n){const t={};for(const e of n){const{stack:i,pos:s,stackWeight:a}=e;if(!i||!Kg.includes(s))continue;const l=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=a}return t}function yk(n,t){const e=xk(n),{vBoxMaxWidth:i,hBoxMaxHeight:s}=t;let a,l,u;for(a=0,l=n.length;a<l;++a){u=n[a];const{fullSize:f}=u.box,h=e[u.stack],g=h&&u.stackWeight/h.weight;u.horizontal?(u.width=g?g*i:f&&t.availableWidth,u.height=s):(u.width=i,u.height=g?g*s:f&&t.availableHeight)}return e}function wk(n){const t=vk(n),e=$r(t.filter(h=>h.box.fullSize),!0),i=$r(Hr(t,"left"),!0),s=$r(Hr(t,"right")),a=$r(Hr(t,"top"),!0),l=$r(Hr(t,"bottom")),u=od(t,"x"),f=od(t,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:s.concat(f).concat(l).concat(u),chartArea:Hr(t,"chartArea"),vertical:i.concat(s).concat(f),horizontal:a.concat(l).concat(u)}}function ad(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function qg(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Sk(n,t,e,i){const{pos:s,box:a}=e,l=n.maxPadding;if(!Ct(s)){e.size&&(n[s]-=e.size);const p=i[e.stack]||{size:0,count:1};p.size=Math.max(p.size,e.horizontal?a.height:a.width),e.size=p.size/p.count,n[s]+=e.size}a.getPadding&&qg(l,a.getPadding());const u=Math.max(0,t.outerWidth-ad(l,n,"left","right")),f=Math.max(0,t.outerHeight-ad(l,n,"top","bottom")),h=u!==n.w,g=f!==n.h;return n.w=u,n.h=f,e.horizontal?{same:h,other:g}:{same:g,other:h}}function Ck(n){const t=n.maxPadding;function e(i){const s=Math.max(t[i]-n[i],0);return n[i]+=s,s}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function kk(n,t){const e=t.maxPadding;function i(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{a[l]=Math.max(t[l],e[l])}),a}return i(n?["left","right"]:["top","bottom"])}function qr(n,t,e,i){const s=[];let a,l,u,f,h,g;for(a=0,l=n.length,h=0;a<l;++a){u=n[a],f=u.box,f.update(u.width||t.w,u.height||t.h,kk(u.horizontal,t));const{same:p,other:_}=Sk(t,e,u,i);h|=p&&s.length,g=g||_,f.fullSize||s.push(u)}return h&&qr(s,t,e,i)||g}function Co(n,t,e,i,s){n.top=e,n.left=t,n.right=t+i,n.bottom=e+s,n.width=i,n.height=s}function ld(n,t,e,i){const s=e.padding;let{x:a,y:l}=t;for(const u of n){const f=u.box,h=i[u.stack]||{placed:0,weight:1},g=u.stackWeight/h.weight||1;if(u.horizontal){const p=t.w*g,_=h.size||f.height;Zo(h.start)&&(l=h.start),f.fullSize?Co(f,s.left,l,e.outerWidth-s.right-s.left,_):Co(f,t.left+h.placed,l,p,_),h.start=l,h.placed+=p,l=f.bottom}else{const p=t.h*g,_=h.size||f.width;Zo(h.start)&&(a=h.start),f.fullSize?Co(f,a,s.top,_,e.outerHeight-s.bottom-s.top):Co(f,a,t.top+h.placed,_,p),h.start=a,h.placed+=p,a=f.right}}t.x=a,t.y=l}var on={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){const e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;const s=ln(n.options.layout.padding),a=Math.max(t-s.width,0),l=Math.max(e-s.height,0),u=wk(n.boxes),f=u.vertical,h=u.horizontal;Tt(n.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const g=f.reduce((w,y)=>y.box.options&&y.box.options.display===!1?w:w+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:e,padding:s,availableWidth:a,availableHeight:l,vBoxMaxWidth:a/2/g,hBoxMaxHeight:l/2}),_=Object.assign({},s);qg(_,ln(i));const b=Object.assign({maxPadding:_,w:a,h:l,x:s.left,y:s.top},s),S=yk(f.concat(h),p);qr(u.fullSize,b,p,S),qr(f,b,p,S),qr(h,b,p,S)&&qr(f,b,p,S),Ck(b),ld(u.leftAndTop,b,p,S),b.x+=b.w,b.y+=b.h,ld(u.rightAndBottom,b,p,S),n.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},Tt(u.chartArea,w=>{const y=w.box;Object.assign(y,n.chartArea),y.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class jg{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class Dk extends jg{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ro="$chartjs",Mk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},cd=n=>n===null||n==="";function Tk(n,t){const e=n.style,i=n.getAttribute("height"),s=n.getAttribute("width");if(n[Ro]={initial:{height:i,width:s,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",cd(s)){const a=jh(n,"width");a!==void 0&&(n.width=a)}if(cd(i))if(n.style.height==="")n.height=n.width/(t||2);else{const a=jh(n,"height");a!==void 0&&(n.height=a)}return n}const Gg=WC?{passive:!0}:!1;function Ak(n,t,e){n&&n.addEventListener(t,e,Gg)}function Ok(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,Gg)}function Ek(n,t){const e=Mk[n.type]||n.type,{x:i,y:s}=Mi(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:s!==void 0?s:null}}function ta(n,t){for(const e of n)if(e===t||e.contains(t))return!0}function Ik(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||ta(u.addedNodes,i),l=l&&!ta(u.removedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}function Pk(n,t,e){const i=n.canvas,s=new MutationObserver(a=>{let l=!1;for(const u of a)l=l||ta(u.removedNodes,i),l=l&&!ta(u.addedNodes,i);l&&e()});return s.observe(document,{childList:!0,subtree:!0}),s}const bs=new Map;let ud=0;function Zg(){const n=window.devicePixelRatio;n!==ud&&(ud=n,bs.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Lk(n,t){bs.size||window.addEventListener("resize",Zg),bs.set(n,t)}function Rk(n){bs.delete(n),bs.size||window.removeEventListener("resize",Zg)}function Fk(n,t,e){const i=n.canvas,s=i&&Hc(i);if(!s)return;const a=Og((u,f)=>{const h=s.clientWidth;e(u,f),h<s.clientWidth&&e()},window),l=new ResizeObserver(u=>{const f=u[0],h=f.contentRect.width,g=f.contentRect.height;h===0&&g===0||a(h,g)});return l.observe(s),Lk(n,a),l}function Vl(n,t,e){e&&e.disconnect(),t==="resize"&&Rk(n)}function Bk(n,t,e){const i=n.canvas,s=Og(a=>{n.ctx!==null&&e(Ek(a,n))},n);return Ak(i,t,s),s}class Wk extends jg{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Tk(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Ro])return!1;const i=e[Ro].initial;["height","width"].forEach(a=>{const l=i[a];Lt(l)?e.removeAttribute(a):e.setAttribute(a,l)});const s=i.style||{};return Object.keys(s).forEach(a=>{e.style[a]=s[a]}),e.width=e.width,delete e[Ro],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),l={attach:Ik,detach:Pk,resize:Fk}[e]||Bk;s[e]=l(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Vl,detach:Vl,resize:Vl}[e]||Ok)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return BC(t,e,i,s)}isAttached(t){const e=t&&Hc(t);return!!(e&&e.isConnected)}}function zk(n){return!Nc()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Dk:Wk}class Bi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return ps(this.x)&&ps(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach(a=>{s[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),s}}function Nk(n,t){const e=n.options.ticks,i=Hk(n),s=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?Yk(t):[],l=a.length,u=a[0],f=a[l-1],h=[];if(l>s)return Uk(t,h,a,l/s),h;const g=$k(a,t,s);if(l>0){let p,_;const b=l>1?Math.round((f-u)/(l-1)):null;for(ko(t,h,g,Lt(b)?0:u-b,u),p=0,_=l-1;p<_;p++)ko(t,h,g,a[p],a[p+1]);return ko(t,h,g,f,Lt(b)?t.length:f+b),h}return ko(t,h,g),h}function Hk(n){const t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),s=n._maxLength/e;return Math.floor(Math.min(i,s))}function $k(n,t,e){const i=Vk(n),s=t.length/e;if(!i)return Math.max(s,1);const a=PS(i);for(let l=0,u=a.length-1;l<u;l++){const f=a[l];if(f>s)return f}return Math.max(s,1)}function Yk(n){const t=[];let e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Uk(n,t,e,i){let s=0,a=e[0],l;for(i=Math.ceil(i),l=0;l<n.length;l++)l===a&&(t.push(n[l]),s++,a=e[s*i])}function ko(n,t,e,i,s){const a=bt(i,0),l=Math.min(bt(s,n.length),n.length);let u=0,f,h,g;for(e=Math.ceil(e),s&&(f=s-i,e=f/Math.floor(f/e)),g=a;g<0;)u++,g=Math.round(a+u*e);for(h=Math.max(a,0);h<l;h++)h===g&&(t.push(n[h]),u++,g=Math.round(a+u*e))}function Vk(n){const t=n.length;let e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}const Xk=n=>n==="left"?"right":n==="right"?"left":n,fd=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,hd=(n,t)=>Math.min(t||n,n);function dd(n,t){const e=[],i=n.length/t,s=n.length;let a=0;for(;a<s;a+=i)e.push(n[Math.floor(a)]);return e}function Kk(n,t,e){const i=n.ticks.length,s=Math.min(t,i-1),a=n._startPixel,l=n._endPixel,u=1e-6;let f=n.getPixelForTick(s),h;if(!(e&&(i===1?h=Math.max(f-a,l-f):t===0?h=(n.getPixelForTick(1)-f)/2:h=(f-n.getPixelForTick(s-1))/2,f+=s<t?h:-h,f<a-u||f>l+u)))return f}function qk(n,t){Tt(n,e=>{const i=e.gc,s=i.length/2;let a;if(s>t){for(a=0;a<s;++a)delete e.data[i[a]];i.splice(0,s)}})}function Yr(n){return n.drawTicks?n.tickLength:0}function gd(n,t){if(!n.display)return 0;const e=_e(n.font,t),i=ln(n.padding);return(ie(n.text)?n.text.length:1)*e.lineHeight+i.height}function jk(n,t){return Fi(n,{scale:t,type:"scale"})}function Gk(n,t,e){return Fi(n,{tick:e,index:t,type:"tick"})}function Zk(n,t,e){let i=Pc(n);return(e&&t!=="right"||!e&&t==="right")&&(i=Xk(i)),i}function Jk(n,t,e,i){const{top:s,left:a,bottom:l,right:u,chart:f}=n,{chartArea:h,scales:g}=f;let p=0,_,b,S;const w=l-s,y=u-a;if(n.isHorizontal()){if(b=me(i,a,u),Ct(e)){const k=Object.keys(e)[0],O=e[k];S=g[k].getPixelForValue(O)+w-t}else e==="center"?S=(h.bottom+h.top)/2+w-t:S=fd(n,e,t);_=u-a}else{if(Ct(e)){const k=Object.keys(e)[0],O=e[k];b=g[k].getPixelForValue(O)-y+t}else e==="center"?b=(h.left+h.right)/2-y+t:b=fd(n,e,t);S=me(i,l,s),p=e==="left"?-bn:bn}return{titleX:b,titleY:S,maxWidth:_,rotation:p}}class vr extends Bi{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=Sn(t,Number.POSITIVE_INFINITY),e=Sn(e,Number.NEGATIVE_INFINITY),i=Sn(i,Number.POSITIVE_INFINITY),s=Sn(s,Number.NEGATIVE_INFINITY),{min:Sn(t,i),max:Sn(e,s),minDefined:an(t),maxDefined:an(e)}}getMinMax(t){let{min:e,max:i,minDefined:s,maxDefined:a}=this.getUserBounds(),l;if(s&&a)return{min:e,max:i};const u=this.getMatchingVisibleMetas();for(let f=0,h=u.length;f<h;++f)l=u[f].controller.getMinMax(this,t),s||(e=Math.min(e,l.min)),a||(i=Math.max(i,l.max));return e=a&&e>i?i:e,i=s&&e>i?e:i,{min:Sn(e,Sn(i,e)),max:Sn(i,Sn(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Bt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:a,ticks:l}=this.options,u=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pC(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=u<this.ticks.length;this._convertTicksToLabels(f?dd(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Nk(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Bt(this.options.afterUpdate,[this])}beforeSetDimensions(){Bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Bt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Bt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,a;for(i=0,s=t.length;i<s;i++)a=t[i],a.label=Bt(e.callback,[a.value,i,t],this)}afterTickToLabelConversion(){Bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=hd(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,a=e.maxRotation;let l=s,u,f,h;if(!this._isVisible()||!e.display||s>=a||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const g=this._getLabelSizes(),p=g.widest.width,_=g.highest.height,b=sn(this.chart.width-p,0,this.maxWidth);u=t.offset?this.maxWidth/i:b/(i-1),p+6>u&&(u=b/(i-(t.offset?.5:1)),f=this.maxHeight-Yr(t.grid)-e.padding-gd(t.title,this.chart.options.font),h=Math.sqrt(p*p+_*_),l=BS(Math.min(Math.asin(sn((g.highest.height+6)/u,-1,1)),Math.asin(sn(f/h,-1,1))-Math.asin(sn(_/h,-1,1)))),l=Math.max(s,Math.min(a,l))),this.labelRotation=l}afterCalculateLabelRotation(){Bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Bt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:a}}=this,l=this._isVisible(),u=this.isHorizontal();if(l){const f=gd(s,e.options.font);if(u?(t.width=this.maxWidth,t.height=Yr(a)+f):(t.height=this.maxHeight,t.width=Yr(a)+f),i.display&&this.ticks.length){const{first:h,last:g,widest:p,highest:_}=this._getLabelSizes(),b=i.padding*2,S=Oi(this.labelRotation),w=Math.cos(S),y=Math.sin(S);if(u){const k=i.mirror?0:y*p.width+w*_.height;t.height=Math.min(this.maxHeight,t.height+k+b)}else{const k=i.mirror?0:w*p.width+y*_.height;t.width=Math.min(this.maxWidth,t.width+k+b)}this._calculatePadding(h,g,y,w)}}this._handleMargins(),u?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:a,padding:l},position:u}=this.options,f=this.labelRotation!==0,h=u!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,b=0;f?h?(_=s*t.width,b=i*e.height):(_=i*t.height,b=s*e.width):a==="start"?b=e.width:a==="end"?_=t.width:a!=="inner"&&(_=t.width/2,b=e.width/2),this.paddingLeft=Math.max((_-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((b-p+l)*this.width/(this.width-p),0)}else{let g=e.height/2,p=t.height/2;a==="start"?(g=0,p=t.height):a==="end"&&(g=e.height,p=0),this.paddingTop=g+l,this.paddingBottom=p+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Bt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)Lt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=dd(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:a}=this,l=[],u=[],f=Math.floor(e/hd(e,i));let h=0,g=0,p,_,b,S,w,y,k,O,P,F,D;for(p=0;p<e;p+=f){if(S=t[p].label,w=this._resolveTickFontOptions(p),s.font=y=w.string,k=a[y]=a[y]||{data:{},gc:[]},O=w.lineHeight,P=F=0,!Lt(S)&&!ie(S))P=Uh(s,k.data,k.gc,P,S),F=O;else if(ie(S))for(_=0,b=S.length;_<b;++_)D=S[_],!Lt(D)&&!ie(D)&&(P=Uh(s,k.data,k.gc,P,D),F+=O);l.push(P),u.push(F),h=Math.max(P,h),g=Math.max(F,g)}qk(a,e);const L=l.indexOf(h),E=u.indexOf(g),R=W=>({width:l[W]||0,height:u[W]||0});return{first:R(0),last:R(e-1),widest:R(L),highest:R(E),widths:l,heights:u}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return NS(this._alignToPixels?wi(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=Gk(this.getContext(),t,i))}return this.$context||(this.$context=jk(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Oi(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),a=this._getLabelSizes(),l=t.autoSkipPadding||0,u=a?a.widest.width+l:0,f=a?a.highest.height+l:0;return this.isHorizontal()?f*i>u*s?u/i:f/s:f*s<u*i?f/i:u/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:a,position:l,border:u}=s,f=a.offset,h=this.isHorizontal(),p=this.ticks.length+(f?1:0),_=Yr(a),b=[],S=u.setContext(this.getContext()),w=S.display?S.width:0,y=w/2,k=function(dt){return wi(i,dt,w)};let O,P,F,D,L,E,R,W,X,Y,K,it;if(l==="top")O=k(this.bottom),E=this.bottom-_,W=O-y,Y=k(t.top)+y,it=t.bottom;else if(l==="bottom")O=k(this.top),Y=t.top,it=k(t.bottom)-y,E=O+y,W=this.top+_;else if(l==="left")O=k(this.right),L=this.right-_,R=O-y,X=k(t.left)+y,K=t.right;else if(l==="right")O=k(this.left),X=t.left,K=k(t.right)-y,L=O+y,R=this.left+_;else if(e==="x"){if(l==="center")O=k((t.top+t.bottom)/2+.5);else if(Ct(l)){const dt=Object.keys(l)[0],yt=l[dt];O=k(this.chart.scales[dt].getPixelForValue(yt))}Y=t.top,it=t.bottom,E=O+y,W=E+_}else if(e==="y"){if(l==="center")O=k((t.left+t.right)/2);else if(Ct(l)){const dt=Object.keys(l)[0],yt=l[dt];O=k(this.chart.scales[dt].getPixelForValue(yt))}L=O-y,R=L-_,X=t.left,K=t.right}const ht=bt(s.ticks.maxTicksLimit,p),lt=Math.max(1,Math.ceil(p/ht));for(P=0;P<p;P+=lt){const dt=this.getContext(P),yt=a.setContext(dt),Dt=u.setContext(dt),te=yt.lineWidth,Gt=yt.color,vt=Dt.dash||[],le=Dt.dashOffset,we=yt.tickWidth,Re=yt.tickColor,ce=yt.tickBorderDash||[],ue=yt.tickBorderDashOffset;F=Kk(this,P,f),F!==void 0&&(D=wi(i,F,te),h?L=R=X=K=D:E=W=Y=it=D,b.push({tx1:L,ty1:E,tx2:R,ty2:W,x1:X,y1:Y,x2:K,y2:it,width:te,color:Gt,borderDash:vt,borderDashOffset:le,tickWidth:we,tickColor:Re,tickBorderDash:ce,tickBorderDashOffset:ue}))}return this._ticksLength=p,this._borderValue=O,b}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:a}=i,l=this.isHorizontal(),u=this.ticks,{align:f,crossAlign:h,padding:g,mirror:p}=a,_=Yr(i.grid),b=_+g,S=p?-g:b,w=-Oi(this.labelRotation),y=[];let k,O,P,F,D,L,E,R,W,X,Y,K,it="middle";if(s==="top")L=this.bottom-S,E=this._getXAxisLabelAlignment();else if(s==="bottom")L=this.top+S,E=this._getXAxisLabelAlignment();else if(s==="left"){const lt=this._getYAxisLabelAlignment(_);E=lt.textAlign,D=lt.x}else if(s==="right"){const lt=this._getYAxisLabelAlignment(_);E=lt.textAlign,D=lt.x}else if(e==="x"){if(s==="center")L=(t.top+t.bottom)/2+b;else if(Ct(s)){const lt=Object.keys(s)[0],dt=s[lt];L=this.chart.scales[lt].getPixelForValue(dt)+b}E=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")D=(t.left+t.right)/2-b;else if(Ct(s)){const lt=Object.keys(s)[0],dt=s[lt];D=this.chart.scales[lt].getPixelForValue(dt)}E=this._getYAxisLabelAlignment(_).textAlign}e==="y"&&(f==="start"?it="top":f==="end"&&(it="bottom"));const ht=this._getLabelSizes();for(k=0,O=u.length;k<O;++k){P=u[k],F=P.label;const lt=a.setContext(this.getContext(k));R=this.getPixelForTick(k)+a.labelOffset,W=this._resolveTickFontOptions(k),X=W.lineHeight,Y=ie(F)?F.length:1;const dt=Y/2,yt=lt.color,Dt=lt.textStrokeColor,te=lt.textStrokeWidth;let Gt=E;l?(D=R,E==="inner"&&(k===O-1?Gt=this.options.reverse?"left":"right":k===0?Gt=this.options.reverse?"right":"left":Gt="center"),s==="top"?h==="near"||w!==0?K=-Y*X+X/2:h==="center"?K=-ht.highest.height/2-dt*X+X:K=-ht.highest.height+X/2:h==="near"||w!==0?K=X/2:h==="center"?K=ht.highest.height/2-dt*X:K=ht.highest.height-Y*X,p&&(K*=-1),w!==0&&!lt.showLabelBackdrop&&(D+=X/2*Math.sin(w))):(L=R,K=(1-Y)*X/2);let vt;if(lt.showLabelBackdrop){const le=ln(lt.backdropPadding),we=ht.heights[k],Re=ht.widths[k];let ce=K-le.top,ue=0-le.left;switch(it){case"middle":ce-=we/2;break;case"bottom":ce-=we;break}switch(E){case"center":ue-=Re/2;break;case"right":ue-=Re;break;case"inner":k===O-1?ue-=Re:k>0&&(ue-=Re/2);break}vt={left:ue,top:ce,width:Re+le.width,height:we+le.height,color:lt.backdropColor}}y.push({label:F,font:W,textOffset:K,options:{rotation:w,color:yt,strokeColor:Dt,strokeWidth:te,textAlign:Gt,textBaseline:it,translation:[D,L],backdrop:vt}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Oi(this.labelRotation))return t==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:a}}=this.options,l=this._getLabelSizes(),u=t+a,f=l.widest.width;let h,g;return e==="left"?s?(g=this.right+a,i==="near"?h="left":i==="center"?(h="center",g+=f/2):(h="right",g+=f)):(g=this.right-u,i==="near"?h="right":i==="center"?(h="center",g-=f/2):(h="left",g=this.left)):e==="right"?s?(g=this.left+a,i==="near"?h="right":i==="center"?(h="center",g-=f/2):(h="left",g-=f)):(g=this.left+u,i==="near"?h="left":i==="center"?(h="center",g+=f/2):(h="right",g=this.right)):h="right",{textAlign:h,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:a,height:l}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,a,l),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const s=this.ticks.findIndex(a=>a.value===t);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let a,l;const u=(f,h,g)=>{!g.width||!g.color||(i.save(),i.lineWidth=g.width,i.strokeStyle=g.color,i.setLineDash(g.borderDash||[]),i.lineDashOffset=g.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(e.display)for(a=0,l=s.length;a<l;++a){const f=s[a];e.drawOnChartArea&&u({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),e.drawTicks&&u({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,a=i.setContext(this.getContext()),l=i.display?a.width:0;if(!l)return;const u=s.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let h,g,p,_;this.isHorizontal()?(h=wi(t,this.left,l)-l/2,g=wi(t,this.right,u)+u/2,p=_=f):(p=wi(t,this.top,l)-l/2,_=wi(t,this.bottom,u)+u/2,h=g=f),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(h,p),e.lineTo(g,_),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&Rc(i,s);const a=this.getLabelItems(t);for(const l of a){const u=l.options,f=l.font,h=l.label,g=l.textOffset;_s(i,h,0,g,f,u)}s&&Fc(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const a=_e(i.font),l=ln(i.padding),u=i.align;let f=a.lineHeight/2;e==="bottom"||e==="center"||Ct(e)?(f+=l.bottom,ie(i.text)&&(f+=a.lineHeight*(i.text.length-1))):f+=l.top;const{titleX:h,titleY:g,maxWidth:p,rotation:_}=Jk(this,f,e,u);_s(t,i.text,0,0,a,{color:i.color,maxWidth:p,rotation:_,textAlign:Zk(u,e,s),textBaseline:"middle",translation:[h,g]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=bt(t.grid&&t.grid.z,-1),s=bt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==vr.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let a,l;for(a=0,l=e.length;a<l;++a){const u=e[a];u[i]===this.id&&(!t||u.type===t)&&s.push(u)}return s}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return _e(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Do{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;eD(e)&&(i=this.register(e));const s=this.items,a=t.id,l=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in s||(s[a]=t,Qk(t,l,i),this.override&&qt.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in qt[s]&&(delete qt[s][i],this.override&&delete Pi[i])}}function Qk(n,t,e){const i=gs(Object.create(null),[e?qt.get(e):{},qt.get(t),n.defaults]);qt.set(t,i),n.defaultRoutes&&tD(t,n.defaultRoutes),n.descriptors&&qt.describe(t,n.descriptors)}function tD(n,t){Object.keys(t).forEach(e=>{const i=e.split("."),s=i.pop(),a=[n].concat(i).join("."),l=t[e].split("."),u=l.pop(),f=l.join(".");qt.route(a,s,f,u)})}function eD(n){return"id"in n&&"defaults"in n}class nD{constructor(){this.controllers=new Do(Vg,"datasets",!0),this.elements=new Do(Bi,"elements"),this.plugins=new Do(Object,"plugins"),this.scales=new Do(vr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(s=>{const a=i||this._getRegistryForType(s);i||a.isForType(s)||a===this.plugins&&s.id?this._exec(t,a,s):Tt(s,l=>{const u=i||this._getRegistryForType(l);this._exec(t,u,l)})})}_exec(t,e,i){const s=Ec(t);Bt(i["before"+s],[],i),e[t](i),Bt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var kn=new nD;class iD{constructor(){this._init=[]}notify(t,e,i,s){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const a=s?this._descriptors(t).filter(s):this._descriptors(t),l=this._notify(a,t,e,i);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),l}_notify(t,e,i,s){s=s||{};for(const a of t){const l=a.plugin,u=l[i],f=[e,s,a.options];if(Bt(u,f,l)===!1&&s.cancelable)return!1}return!0}invalidate(){Lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=bt(i.options&&i.options.plugins,{}),a=rD(i);return s===!1&&!e?[]:oD(t,a,s,e)}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(a,l)=>a.filter(u=>!l.some(f=>u.plugin.id===f.plugin.id));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function rD(n){const t={},e=[],i=Object.keys(kn.plugins.items);for(let a=0;a<i.length;a++)e.push(kn.getPlugin(i[a]));const s=n.plugins||[];for(let a=0;a<s.length;a++){const l=s[a];e.indexOf(l)===-1&&(e.push(l),t[l.id]=!0)}return{plugins:e,localIds:t}}function sD(n,t){return!t&&n===!1?null:n===!0?{}:n}function oD(n,{plugins:t,localIds:e},i,s){const a=[],l=n.getContext();for(const u of t){const f=u.id,h=sD(i[f],s);h!==null&&a.push({plugin:u,options:aD(n.config,{plugin:u,local:e[f]},h,l)})}return a}function aD(n,{plugin:t,local:e},i,s){const a=n.pluginScopeKeys(t),l=n.getOptionScopes(i,a);return e&&t.defaults&&l.push(t.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function hc(n,t){const e=qt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function lD(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function cD(n,t){return n===t?"_index_":"_value_"}function pd(n){if(n==="x"||n==="y"||n==="r")return n}function uD(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function dc(n,...t){if(pd(n))return n;for(const e of t){const i=e.axis||uD(e.position)||n.length>1&&pd(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function md(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function fD(n,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return md(n,"x",e[0])||md(n,"y",e[0])}return{}}function hD(n,t){const e=Pi[n.type]||{scales:{}},i=t.scales||{},s=hc(n.type,t),a=Object.create(null);return Object.keys(i).forEach(l=>{const u=i[l];if(!Ct(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const f=dc(l,u,fD(l,n),qt.scales[u.type]),h=cD(f,s),g=e.scales||{};a[l]=Qr(Object.create(null),[{axis:f},u,g[f],g[h]])}),n.data.datasets.forEach(l=>{const u=l.type||n.type,f=l.indexAxis||hc(u,t),g=(Pi[u]||{}).scales||{};Object.keys(g).forEach(p=>{const _=lD(p,f),b=l[_+"AxisID"]||_;a[b]=a[b]||Object.create(null),Qr(a[b],[{axis:_},i[b],g[p]])})}),Object.keys(a).forEach(l=>{const u=a[l];Qr(u,[qt.scales[u.type],qt.scale])}),a}function Jg(n){const t=n.options||(n.options={});t.plugins=bt(t.plugins,{}),t.scales=hD(n,t)}function Qg(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function dD(n){return n=n||{},n.data=Qg(n.data),Jg(n),n}const _d=new Map,tp=new Set;function Mo(n,t){let e=_d.get(n);return e||(e=t(),_d.set(n,e),tp.add(e)),e}const Ur=(n,t,e)=>{const i=Go(t,e);i!==void 0&&n.add(i)};class gD{constructor(t){this._config=dD(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Qg(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Jg(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Mo(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Mo(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Mo(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,i=this.type;return Mo(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return(!s||e)&&(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:a}=this,l=this._cachedScopes(t,i),u=l.get(e);if(u)return u;const f=new Set;e.forEach(g=>{t&&(f.add(t),g.forEach(p=>Ur(f,t,p))),g.forEach(p=>Ur(f,s,p)),g.forEach(p=>Ur(f,Pi[a]||{},p)),g.forEach(p=>Ur(f,qt,p)),g.forEach(p=>Ur(f,cc,p))});const h=Array.from(f);return h.length===0&&h.push(Object.create(null)),tp.has(e)&&l.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Pi[e]||{},qt.datasets[e]||{},{type:e},qt,cc]}resolveNamedOptions(t,e,i,s=[""]){const a={$shared:!0},{resolver:l,subPrefixes:u}=bd(this._resolverCache,t,s);let f=l;if(mD(l,e)){a.$shared=!1,i=fi(i)?i():i;const h=this.createResolver(t,i,u);f=pr(l,i,h)}for(const h of e)a[h]=f[h];return a}createResolver(t,e,i=[""],s){const{resolver:a}=bd(this._resolverCache,t,i);return Ct(e)?pr(a,e,void 0,s):a}}function bd(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));const s=e.join();let a=i.get(s);return a||(a={resolver:Bc(t,e),subPrefixes:e.filter(u=>!u.toLowerCase().includes("hover"))},i.set(s,a)),a}const pD=n=>Ct(n)&&Object.getOwnPropertyNames(n).some(t=>fi(n[t]));function mD(n,t){const{isScriptable:e,isIndexable:i}=Rg(n);for(const s of t){const a=e(s),l=i(s),u=(l||a)&&n[s];if(a&&(fi(u)||pD(u))||l&&ie(u))return!0}return!1}var _D="4.5.0";const bD=["top","bottom","left","right","chartArea"];function vd(n,t){return n==="top"||n==="bottom"||bD.indexOf(n)===-1&&t==="x"}function xd(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function yd(n){const t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Bt(e&&e.onComplete,[n],t)}function vD(n){const t=n.chart,e=t.options.animation;Bt(e&&e.onProgress,[n],t)}function ep(n){return Nc()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Fo={},wd=n=>{const t=ep(n);return Object.values(Fo).filter(e=>e.canvas===t).pop()};function xD(n,t,e){const i=Object.keys(n);for(const s of i){const a=+s;if(a>=t){const l=n[s];delete n[s],(e>0||a>t)&&(n[a+e]=l)}}}function yD(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}let vs=class{static defaults=qt;static instances=Fo;static overrides=Pi;static registry=kn;static version=_D;static getChart=wd;static register(...t){kn.add(...t),Sd()}static unregister(...t){kn.remove(...t),Sd()}constructor(t,e){const i=this.config=new gD(e),s=ep(t),a=wd(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||zk(s)),this.platform.updateConfig(i);const u=this.platform.acquireContext(s,l.aspectRatio),f=u&&u.canvas,h=f&&f.height,g=f&&f.width;if(this.id=CS(),this.ctx=u,this.canvas=f,this.width=g,this.height=h,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=VS(p=>this.update(p),l.resizeDelay||0),this._dataChanges=[],Fo[this.id]=this,!u||!f){console.error("Failed to create chart: can't acquire context from the given item");return}$n.listen(this,"complete",yd),$n.listen(this,"progress",vD),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:a}=this;return Lt(t)?e&&a?a:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qh(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Vh(this.canvas,this.ctx),this}stop(){return $n.stop(this),this}resize(t,e){$n.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,t,e,a),u=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,qh(this,u,!0)&&(this.notifyPlugins("resize",{size:l}),Bt(i.onResize,[this,l],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};Tt(e,(i,s)=>{i.id=s})}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce((l,u)=>(l[u]=!1,l),{});let a=[];e&&(a=a.concat(Object.keys(e).map(l=>{const u=e[l],f=dc(l,u),h=f==="r",g=f==="x";return{options:u,dposition:h?"chartArea":g?"bottom":"left",dtype:h?"radialLinear":g?"category":"linear"}}))),Tt(a,l=>{const u=l.options,f=u.id,h=dc(f,u),g=bt(u.type,l.dtype);(u.position===void 0||vd(u.position,h)!==vd(l.dposition))&&(u.position=l.dposition),s[f]=!0;let p=null;if(f in i&&i[f].type===g)p=i[f];else{const _=kn.getScale(g);p=new _({id:f,type:g,ctx:this.ctx,chart:this}),i[p.id]=p}p.init(u,t)}),Tt(s,(l,u)=>{l||delete i[u]}),Tt(i,l=>{on.configure(this,l,l.options),on.addBox(this,l)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((s,a)=>s.index-a.index),i>e){for(let s=e;s<i;++s)this._destroyDatasetMeta(s);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(xd("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,s)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const a=e[i];let l=this.getDatasetMeta(i);const u=a.type||this.config.type;if(l.type&&l.type!==u&&(this._destroyDatasetMeta(i),l=this.getDatasetMeta(i)),l.type=u,l.indexAxis=a.indexAxis||hc(u,this.options),l.order=a.order||0,l.index=i,l.label=""+a.label,l.visible=this.isDatasetVisible(i),l.controller)l.controller.updateIndex(i),l.controller.linkScales();else{const f=kn.getController(u),{datasetElementType:h,dataElementType:g}=qt.datasets[u];Object.assign(f,{dataElementType:kn.getElement(g),datasetElementType:h&&kn.getElement(h)}),l.controller=new f(this,i),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Tt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let h=0,g=this.data.datasets.length;h<g;h++){const{controller:p}=this.getDatasetMeta(h),_=!s&&a.indexOf(p)===-1;p.buildOrUpdateElements(_),l=Math.max(+p.getMaxOverflow(),l)}l=this._minPadding=i.layout.autoPadding?l:0,this._updateLayout(l),s||Tt(a,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(xd("z","_idx"));const{_active:u,_lastEvent:f}=this;f?this._eventHandler(f,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Tt(this.scales,t=>{on.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Rh(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:a}of e){const l=i==="_removeElements"?-a:a;xD(t,s,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=a=>new Set(t.filter(l=>l[0]===a).map((l,u)=>u+","+l.splice(1).join(","))),s=i(0);for(let a=1;a<e;a++)if(!Rh(s,i(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;on.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],Tt(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,fi(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($n.has(this)?this.attached&&!$n.running(this)&&$n.start(this):(this.draw(),yd({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,a;for(s=0,a=e.length;s<a;++s){const l=e[s];(!t||l.visible)&&i.push(l)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i={meta:t,index:t.index,cancelable:!0},s=JC(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&Rc(e,s),t.controller.draw(),s&&Fc(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return ms(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const a=bk.modes[e];return typeof a=="function"?a(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter(a=>a&&a._dataset===e).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Fi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){const i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",a=this.getDatasetMeta(t),l=a.controller._resolveAnimations(void 0,s);Zo(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),l.update(a,{visible:i}),this.update(u=>u.datasetIndex===t?s:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),$n.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Vh(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Fo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(a,l)=>{e.addEventListener(this,a,l),t[a]=l},s=(a,l,u)=>{a.offsetX=l,a.offsetY=u,this._eventHandler(a)};Tt(this.options.events,a=>i(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(f,h)=>{e.addEventListener(this,f,h),t[f]=h},s=(f,h)=>{t[f]&&(e.removeEventListener(this,f,h),delete t[f])},a=(f,h)=>{this.canvas&&this.resize(f,h)};let l;const u=()=>{s("attach",u),this.attached=!0,this.resize(),i("resize",a),i("detach",l)};l=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),i("attach",u)},e.isAttached(this.canvas)?u():l()}unbindEvents(){Tt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Tt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let a,l,u,f;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),u=0,f=t.length;u<f;++u){l=t[u];const h=l&&this.getDatasetMeta(l.datasetIndex).controller;h&&h[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map(({datasetIndex:a,index:l})=>{const u=this.getDatasetMeta(a);if(!u)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:u.data[l],index:l}});!qo(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){const s=this.options.hover,a=(f,h)=>f.filter(g=>!h.some(p=>g.datasetIndex===p.datasetIndex&&g.index===p.index)),l=a(e,t),u=i?t:a(t,e);l.length&&this.updateHoverStyle(l,s.mode,!1),u.length&&s.mode&&this.updateHoverStyle(u,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const a=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(a||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:a}=this,l=e,u=this._getActiveElements(t,s,i,l),f=OS(t),h=yD(t,this._lastEvent,i,f);i&&(this._lastEvent=null,Bt(a.onHover,[t,u,this],this),f&&Bt(a.onClick,[t,u,this],this));const g=!qo(u,s);return(g||e)&&(this._active=u,this._updateHoverStyles(u,s,e)),this._lastEvent=h,g}_getActiveElements(t,e,i,s){if(t.type==="mouseout")return[];if(!i)return e;const a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,s)}};function Sd(){return Tt(vs.instances,n=>n._plugins.invalidate())}function np(n,t,e=t){n.lineCap=bt(e.borderCapStyle,t.borderCapStyle),n.setLineDash(bt(e.borderDash,t.borderDash)),n.lineDashOffset=bt(e.borderDashOffset,t.borderDashOffset),n.lineJoin=bt(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=bt(e.borderWidth,t.borderWidth),n.strokeStyle=bt(e.borderColor,t.borderColor)}function wD(n,t,e){n.lineTo(e.x,e.y)}function SD(n){return n.stepped?sC:n.tension||n.cubicInterpolationMode==="monotone"?oC:wD}function ip(n,t,e={}){const i=n.length,{start:s=0,end:a=i-1}=e,{start:l,end:u}=t,f=Math.max(s,l),h=Math.min(a,u),g=s<l&&a<l||s>u&&a>u;return{count:i,start:f,loop:t.loop,ilen:h<f&&!g?i+h-f:h-f}}function CD(n,t,e,i){const{points:s,options:a}=t,{count:l,start:u,loop:f,ilen:h}=ip(s,e,i),g=SD(a);let{move:p=!0,reverse:_}=i||{},b,S,w;for(b=0;b<=h;++b)S=s[(u+(_?h-b:b))%l],!S.skip&&(p?(n.moveTo(S.x,S.y),p=!1):g(n,w,S,_,a.stepped),w=S);return f&&(S=s[(u+(_?h:0))%l],g(n,w,S,_,a.stepped)),!!f}function kD(n,t,e,i){const s=t.points,{count:a,start:l,ilen:u}=ip(s,e,i),{move:f=!0,reverse:h}=i||{};let g=0,p=0,_,b,S,w,y,k;const O=F=>(l+(h?u-F:F))%a,P=()=>{w!==y&&(n.lineTo(g,y),n.lineTo(g,w),n.lineTo(g,k))};for(f&&(b=s[O(0)],n.moveTo(b.x,b.y)),_=0;_<=u;++_){if(b=s[O(_)],b.skip)continue;const F=b.x,D=b.y,L=F|0;L===S?(D<w?w=D:D>y&&(y=D),g=(p*g+F)/++p):(P(),n.lineTo(F,D),S=L,p=0,w=y=D),k=D}P()}function gc(n){const t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?kD:CD}function DD(n){return n.stepped?zC:n.tension||n.cubicInterpolationMode==="monotone"?NC:Ti}function MD(n,t,e,i){let s=t._path;s||(s=t._path=new Path2D,t.path(s,e,i)&&s.closePath()),np(n,t.options),n.stroke(s)}function TD(n,t,e,i){const{segments:s,options:a}=t,l=gc(t);for(const u of s)np(n,a,u.style),n.beginPath(),l(n,t,u,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}const AD=typeof Path2D=="function";function OD(n,t,e,i){AD&&!t.options.segment?MD(n,t,e,i):TD(n,t,e,i)}class ED extends Bi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;EC(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qC(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],a=this.points,l=VC(this,{property:e,start:s,end:s});if(!l.length)return;const u=[],f=DD(i);let h,g;for(h=0,g=l.length;h<g;++h){const{start:p,end:_}=l[h],b=a[p],S=a[_];if(b===S){u.push(b);continue}const w=Math.abs((s-b[e])/(S[e]-b[e])),y=f(b,S,w,i.stepped);y[e]=t[e],u.push(y)}return u.length===1?u[0]:u}pathSegment(t,e,i){return gc(this)(t,this,e,i)}path(t,e,i){const s=this.segments,a=gc(this);let l=this._loop;e=e||0,i=i||this.points.length-e;for(const u of s)l&=a(t,this,u,{start:e,end:e+i-1});return!!l}draw(t,e,i,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),OD(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Cd(n,t,e,i){const s=n.options,{[e]:a}=n.getProps([e],i);return Math.abs(t-a)<s.radius+s.hitRadius}class ID extends Bi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:a,y:l}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(e-l,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return Cd(this,t,"x",e)}inYRange(t,e){return Cd(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){const i=this.options;this.skip||i.radius<.1||!ms(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,uc(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}const kd=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},PD=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index;class Dd extends Bi{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Bt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,s)=>t.sort(i,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const i=t.labels,s=_e(i.font),a=s.size,l=this._computeTitleHeight(),{boxWidth:u,itemHeight:f}=kd(i,a);let h,g;e.font=s.string,this.isHorizontal()?(h=this.maxWidth,g=this._fitRows(l,a,u,f)+10):(g=this.maxHeight,h=this._fitCols(l,s,u,f)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(g,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:a,maxWidth:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],h=this.lineWidths=[0],g=s+u;let p=t;a.textAlign="left",a.textBaseline="middle";let _=-1,b=-g;return this.legendItems.forEach((S,w)=>{const y=i+e/2+a.measureText(S.text).width;(w===0||h[h.length-1]+y+2*u>l)&&(p+=g,h[h.length-(w>0?0:1)]=0,b+=g,_++),f[w]={left:0,top:b,row:_,width:y,height:s},h[h.length-1]+=y+u}),p}_fitCols(t,e,i,s){const{ctx:a,maxHeight:l,options:{labels:{padding:u}}}=this,f=this.legendHitBoxes=[],h=this.columnSizes=[],g=l-t;let p=u,_=0,b=0,S=0,w=0;return this.legendItems.forEach((y,k)=>{const{itemWidth:O,itemHeight:P}=LD(i,e,a,y,s);k>0&&b+P+2*u>g&&(p+=_+u,h.push({width:_,height:b}),S+=_+u,w++,_=b=0),f[k]={left:S,top:b,col:w,width:O,height:P},_=Math.max(_,O),b+=P+u}),p+=_,h.push({width:_,height:b}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:a}}=this,l=fr(a,this.left,this.width);if(this.isHorizontal()){let u=0,f=me(i,this.left+s,this.right-this.lineWidths[u]);for(const h of e)u!==h.row&&(u=h.row,f=me(i,this.left+s,this.right-this.lineWidths[u])),h.top+=this.top+t+s,h.left=l.leftForLtr(l.x(f),h.width),f+=h.width+s}else{let u=0,f=me(i,this.top+t+s,this.bottom-this.columnSizes[u].height);for(const h of e)h.col!==u&&(u=h.col,f=me(i,this.top+t+s,this.bottom-this.columnSizes[u].height)),h.top=f,h.left+=this.left+s,h.left=l.leftForLtr(l.x(h.left),h.width),f+=h.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Rc(t,this),this._draw(),Fc(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:a,labels:l}=t,u=qt.color,f=fr(t.rtl,this.left,this.width),h=_e(l.font),{padding:g}=l,p=h.size,_=p/2;let b;this.drawTitle(),s.textAlign=f.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:S,boxHeight:w,itemHeight:y}=kd(l,p),k=function(L,E,R){if(isNaN(S)||S<=0||isNaN(w)||w<0)return;s.save();const W=bt(R.lineWidth,1);if(s.fillStyle=bt(R.fillStyle,u),s.lineCap=bt(R.lineCap,"butt"),s.lineDashOffset=bt(R.lineDashOffset,0),s.lineJoin=bt(R.lineJoin,"miter"),s.lineWidth=W,s.strokeStyle=bt(R.strokeStyle,u),s.setLineDash(bt(R.lineDash,[])),l.usePointStyle){const X={radius:w*Math.SQRT2/2,pointStyle:R.pointStyle,rotation:R.rotation,borderWidth:W},Y=f.xPlus(L,S/2),K=E+_;Pg(s,X,Y,K,l.pointStyleWidth&&S)}else{const X=E+Math.max((p-w)/2,0),Y=f.leftForLtr(L,S),K=is(R.borderRadius);s.beginPath(),Object.values(K).some(it=>it!==0)?fc(s,{x:Y,y:X,w:S,h:w,radius:K}):s.rect(Y,X,S,w),s.fill(),W!==0&&s.stroke()}s.restore()},O=function(L,E,R){_s(s,R.text,L,E+y/2,h,{strikethrough:R.hidden,textAlign:f.textAlign(R.textAlign)})},P=this.isHorizontal(),F=this._computeTitleHeight();P?b={x:me(a,this.left+g,this.right-i[0]),y:this.top+g+F,line:0}:b={x:this.left+g,y:me(a,this.top+F+g,this.bottom-e[0].height),line:0},Ng(this.ctx,t.textDirection);const D=y+g;this.legendItems.forEach((L,E)=>{s.strokeStyle=L.fontColor,s.fillStyle=L.fontColor;const R=s.measureText(L.text).width,W=f.textAlign(L.textAlign||(L.textAlign=l.textAlign)),X=S+_+R;let Y=b.x,K=b.y;f.setWidth(this.width),P?E>0&&Y+X+g>this.right&&(K=b.y+=D,b.line++,Y=b.x=me(a,this.left+g,this.right-i[b.line])):E>0&&K+D>this.bottom&&(Y=b.x=Y+e[b.line].width+g,b.line++,K=b.y=me(a,this.top+F+g,this.bottom-e[b.line].height));const it=f.x(Y);if(k(it,K,L),Y=XS(W,Y+S+_,P?Y+X:this.right,t.rtl),O(f.x(Y),K,L),P)b.x+=X+g;else if(typeof L.text!="string"){const ht=h.lineHeight;b.y+=rp(L,ht)+g}else b.y+=D}),Hg(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=_e(e.font),s=ln(e.padding);if(!e.display)return;const a=fr(t.rtl,this.left,this.width),l=this.ctx,u=e.position,f=i.size/2,h=s.top+f;let g,p=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),g=this.top+h,p=me(t.align,p,this.right-_);else{const S=this.columnSizes.reduce((w,y)=>Math.max(w,y.height),0);g=h+me(t.align,this.top,this.bottom-S-t.labels.padding-this._computeTitleHeight())}const b=me(u,p,p+_);l.textAlign=a.textAlign(Pc(u)),l.textBaseline="middle",l.strokeStyle=e.color,l.fillStyle=e.color,l.font=i.string,_s(l,e.text,b,g,i)}_computeTitleHeight(){const t=this.options.title,e=_e(t.font),i=ln(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,a;if(Kr(t,this.left,this.right)&&Kr(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(s=a[i],Kr(t,s.left,s.left+s.width)&&Kr(e,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(t){const e=this.options;if(!BD(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const s=this._hoveredItem,a=PD(s,i);s&&!a&&Bt(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!a&&Bt(e.onHover,[t,i,this],this)}else i&&Bt(e.onClick,[t,i,this],this)}}function LD(n,t,e,i,s){const a=RD(i,n,t,e),l=FD(s,i,t.lineHeight);return{itemWidth:a,itemHeight:l}}function RD(n,t,e,i){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((a,l)=>a.length>l.length?a:l)),t+e.size/2+i.measureText(s).width}function FD(n,t,e){let i=n;return typeof t.text!="string"&&(i=rp(t,e)),i}function rp(n,t){const e=n.text?n.text.length:0;return t*e}function BD(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var WD={id:"legend",_element:Dd,start(n,t,e){const i=n.legend=new Dd({ctx:n.ctx,options:e,chart:n});on.configure(n,i,e),on.addBox(n,i)},stop(n){on.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){const i=n.legend;on.configure(n,i,e),i.options=e},afterUpdate(n){const t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){const i=t.datasetIndex,s=e.chart;s.isDatasetVisible(i)?(s.hide(i),t.hidden=!0):(s.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:s,color:a,useBorderRadius:l,borderRadius:u}}=n.legend.options;return n._getSortedDatasetMetas().map(f=>{const h=f.controller.getStyle(e?0:void 0),g=ln(h.borderWidth);return{text:t[f.index].label,fillStyle:h.backgroundColor,fontColor:a,hidden:!f.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:s||h.textAlign,borderRadius:l&&(u||h.borderRadius),datasetIndex:f.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class sp extends Bi{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const s=ie(i.text)?i.text.length:1;this._padding=ln(i.padding);const a=s*_e(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:i,bottom:s,right:a,options:l}=this,u=l.align;let f=0,h,g,p;return this.isHorizontal()?(g=me(u,i,a),p=e+t,h=a-i):(l.position==="left"?(g=i+t,p=me(u,s,e),f=re*-.5):(g=a-t,p=me(u,e,s),f=re*.5),h=s-e),{titleX:g,titleY:p,maxWidth:h,rotation:f}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=_e(e.font),a=i.lineHeight/2+this._padding.top,{titleX:l,titleY:u,maxWidth:f,rotation:h}=this._drawArgs(a);_s(t,e.text,0,0,i,{color:e.color,maxWidth:f,rotation:h,textAlign:Pc(e.align),textBaseline:"middle",translation:[l,u]})}}function zD(n,t){const e=new sp({ctx:n.ctx,options:t,chart:n});on.configure(n,e,t),on.addBox(n,e),n.titleBlock=e}var ND={id:"title",_element:sp,start(n,t,e){zD(n,e)},stop(n){const t=n.titleBlock;on.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){const i=n.titleBlock;on.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const jr={average(n){if(!n.length)return!1;let t,e,i=new Set,s=0,a=0;for(t=0,e=n.length;t<e;++t){const u=n[t].element;if(u&&u.hasValue()){const f=u.tooltipPosition();i.add(f.x),s+=f.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((u,f)=>u+f)/i.size,y:s/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,s=Number.POSITIVE_INFINITY,a,l,u;for(a=0,l=n.length;a<l;++a){const f=n[a].element;if(f&&f.hasValue()){const h=f.getCenterPoint(),g=lc(t,h);g<s&&(s=g,u=f)}}if(u){const f=u.tooltipPosition();e=f.x,i=f.y}return{x:e,y:i}}};function Cn(n,t){return t&&(ie(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Yn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function HD(n,t){const{element:e,datasetIndex:i,index:s}=t,a=n.getDatasetMeta(i).controller,{label:l,value:u}=a.getLabelAndValue(s);return{chart:n,label:l,parsed:a.getParsed(s),raw:n.data.datasets[i].data[s],formattedValue:u,dataset:a.getDataset(),dataIndex:s,datasetIndex:i,element:e}}function Md(n,t){const e=n.chart.ctx,{body:i,footer:s,title:a}=n,{boxWidth:l,boxHeight:u}=t,f=_e(t.bodyFont),h=_e(t.titleFont),g=_e(t.footerFont),p=a.length,_=s.length,b=i.length,S=ln(t.padding);let w=S.height,y=0,k=i.reduce((F,D)=>F+D.before.length+D.lines.length+D.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,p&&(w+=p*h.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),k){const F=t.displayColors?Math.max(u,f.lineHeight):f.lineHeight;w+=b*F+(k-b)*f.lineHeight+(k-1)*t.bodySpacing}_&&(w+=t.footerMarginTop+_*g.lineHeight+(_-1)*t.footerSpacing);let O=0;const P=function(F){y=Math.max(y,e.measureText(F).width+O)};return e.save(),e.font=h.string,Tt(n.title,P),e.font=f.string,Tt(n.beforeBody.concat(n.afterBody),P),O=t.displayColors?l+2+t.boxPadding:0,Tt(i,F=>{Tt(F.before,P),Tt(F.lines,P),Tt(F.after,P)}),O=0,e.font=g.string,Tt(n.footer,P),e.restore(),y+=S.width,{width:y,height:w}}function $D(n,t){const{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function YD(n,t,e,i){const{x:s,width:a}=i,l=e.caretSize+e.caretPadding;if(n==="left"&&s+a+l>t.width||n==="right"&&s-a-l<0)return!0}function UD(n,t,e,i){const{x:s,width:a}=e,{width:l,chartArea:{left:u,right:f}}=n;let h="center";return i==="center"?h=s<=(u+f)/2?"left":"right":s<=a/2?h="left":s>=l-a/2&&(h="right"),YD(h,n,t,e)&&(h="center"),h}function Td(n,t,e){const i=e.yAlign||t.yAlign||$D(n,e);return{xAlign:e.xAlign||t.xAlign||UD(n,t,e,i),yAlign:i}}function VD(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function XD(n,t,e){let{y:i,height:s}=n;return t==="top"?i+=e:t==="bottom"?i-=s+e:i-=s/2,i}function Ad(n,t,e,i){const{caretSize:s,caretPadding:a,cornerRadius:l}=n,{xAlign:u,yAlign:f}=e,h=s+a,{topLeft:g,topRight:p,bottomLeft:_,bottomRight:b}=is(l);let S=VD(t,u);const w=XD(t,f,h);return f==="center"?u==="left"?S+=h:u==="right"&&(S-=h):u==="left"?S-=Math.max(g,_)+s:u==="right"&&(S+=Math.max(p,b)+s),{x:sn(S,0,i.width-t.width),y:sn(w,0,i.height-t.height)}}function To(n,t,e){const i=ln(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Od(n){return Cn([],Yn(n))}function KD(n,t,e){return Fi(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Ed(n,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}const op={beforeTitle:Hn,title(n){if(n.length>0){const t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:Hn,beforeBody:Hn,beforeLabel:Hn,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");const e=n.formattedValue;return Lt(e)||(t+=e),t},labelColor(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Hn,afterBody:Hn,beforeFooter:Hn,footer:Hn,afterFooter:Hn};function Te(n,t,e,i){const s=n[t].call(e,i);return typeof s>"u"?op[t].call(e,i):s}class Id extends Bi{static positioners=jr;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,a=new Yg(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=KD(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:i}=e,s=Te(i,"beforeTitle",this,t),a=Te(i,"title",this,t),l=Te(i,"afterTitle",this,t);let u=[];return u=Cn(u,Yn(s)),u=Cn(u,Yn(a)),u=Cn(u,Yn(l)),u}getBeforeBody(t,e){return Od(Te(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return Tt(t,a=>{const l={before:[],lines:[],after:[]},u=Ed(i,a);Cn(l.before,Yn(Te(u,"beforeLabel",this,a))),Cn(l.lines,Te(u,"label",this,a)),Cn(l.after,Yn(Te(u,"afterLabel",this,a))),s.push(l)}),s}getAfterBody(t,e){return Od(Te(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Te(i,"beforeFooter",this,t),a=Te(i,"footer",this,t),l=Te(i,"afterFooter",this,t);let u=[];return u=Cn(u,Yn(s)),u=Cn(u,Yn(a)),u=Cn(u,Yn(l)),u}_createItems(t){const e=this._active,i=this.chart.data,s=[],a=[],l=[];let u=[],f,h;for(f=0,h=e.length;f<h;++f)u.push(HD(this.chart,e[f]));return t.filter&&(u=u.filter((g,p,_)=>t.filter(g,p,_,i))),t.itemSort&&(u=u.sort((g,p)=>t.itemSort(g,p,i))),Tt(u,g=>{const p=Ed(t.callbacks,g);s.push(Te(p,"labelColor",this,g)),a.push(Te(p,"labelPointStyle",this,g)),l.push(Te(p,"labelTextColor",this,g))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=l,this.dataPoints=u,u}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let a,l=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const u=jr[i.position].call(this,s,this._eventPosition);l=this._createItems(i),this.title=this.getTitle(l,i),this.beforeBody=this.getBeforeBody(l,i),this.body=this.getBody(l,i),this.afterBody=this.getAfterBody(l,i),this.footer=this.getFooter(l,i);const f=this._size=Md(this,i),h=Object.assign({},u,f),g=Td(this.chart,i,h),p=Ad(i,h,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,a={opacity:1,x:p.x,y:p.y,width:f.width,height:f.height,caretX:u.x,caretY:u.y}}this._tooltipItems=l,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const a=this.getCaretPosition(t,i,s);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:a}=this,{caretSize:l,cornerRadius:u}=i,{topLeft:f,topRight:h,bottomLeft:g,bottomRight:p}=is(u),{x:_,y:b}=t,{width:S,height:w}=e;let y,k,O,P,F,D;return a==="center"?(F=b+w/2,s==="left"?(y=_,k=y-l,P=F+l,D=F-l):(y=_+S,k=y+l,P=F-l,D=F+l),O=y):(s==="left"?k=_+Math.max(f,g)+l:s==="right"?k=_+S-Math.max(h,p)-l:k=this.caretX,a==="top"?(P=b,F=P-l,y=k-l,O=k+l):(P=b+w,F=P+l,y=k+l,O=k-l),D=P),{x1:y,x2:k,x3:O,y1:P,y2:F,y3:D}}drawTitle(t,e,i){const s=this.title,a=s.length;let l,u,f;if(a){const h=fr(i.rtl,this.x,this.width);for(t.x=To(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",l=_e(i.titleFont),u=i.titleSpacing,e.fillStyle=i.titleColor,e.font=l.string,f=0;f<a;++f)e.fillText(s[f],h.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+u,f+1===a&&(t.y+=i.titleMarginBottom-u)}}_drawColorBox(t,e,i,s,a){const l=this.labelColors[i],u=this.labelPointStyles[i],{boxHeight:f,boxWidth:h}=a,g=_e(a.bodyFont),p=To(this,"left",a),_=s.x(p),b=f<g.lineHeight?(g.lineHeight-f)/2:0,S=e.y+b;if(a.usePointStyle){const w={radius:Math.min(h,f)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},y=s.leftForLtr(_,h)+h/2,k=S+f/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,uc(t,w,y,k),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,uc(t,w,y,k)}else{t.lineWidth=Ct(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const w=s.leftForLtr(_,h),y=s.leftForLtr(s.xPlus(_,1),h-2),k=is(l.borderRadius);Object.values(k).some(O=>O!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,fc(t,{x:w,y:S,w:h,h:f,radius:k}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),fc(t,{x:y,y:S+1,w:h-2,h:f-2,radius:k}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(w,S,h,f),t.strokeRect(w,S,h,f),t.fillStyle=l.backgroundColor,t.fillRect(y,S+1,h-2,f-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:a,bodyAlign:l,displayColors:u,boxHeight:f,boxWidth:h,boxPadding:g}=i,p=_e(i.bodyFont);let _=p.lineHeight,b=0;const S=fr(i.rtl,this.x,this.width),w=function(R){e.fillText(R,S.x(t.x+b),t.y+_/2),t.y+=_+a},y=S.textAlign(l);let k,O,P,F,D,L,E;for(e.textAlign=l,e.textBaseline="middle",e.font=p.string,t.x=To(this,y,i),e.fillStyle=i.bodyColor,Tt(this.beforeBody,w),b=u&&y!=="right"?l==="center"?h/2+g:h+2+g:0,F=0,L=s.length;F<L;++F){for(k=s[F],O=this.labelTextColors[F],e.fillStyle=O,Tt(k.before,w),P=k.lines,u&&P.length&&(this._drawColorBox(e,t,F,S,i),_=Math.max(p.lineHeight,f)),D=0,E=P.length;D<E;++D)w(P[D]),_=p.lineHeight;Tt(k.after,w)}b=0,_=p.lineHeight,Tt(this.afterBody,w),t.y-=a}drawFooter(t,e,i){const s=this.footer,a=s.length;let l,u;if(a){const f=fr(i.rtl,this.x,this.width);for(t.x=To(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=f.textAlign(i.footerAlign),e.textBaseline="middle",l=_e(i.footerFont),e.fillStyle=i.footerColor,e.font=l.string,u=0;u<a;++u)e.fillText(s[u],f.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:a,yAlign:l}=this,{x:u,y:f}=t,{width:h,height:g}=i,{topLeft:p,topRight:_,bottomLeft:b,bottomRight:S}=is(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(u+p,f),l==="top"&&this.drawCaret(t,e,i,s),e.lineTo(u+h-_,f),e.quadraticCurveTo(u+h,f,u+h,f+_),l==="center"&&a==="right"&&this.drawCaret(t,e,i,s),e.lineTo(u+h,f+g-S),e.quadraticCurveTo(u+h,f+g,u+h-S,f+g),l==="bottom"&&this.drawCaret(t,e,i,s),e.lineTo(u+b,f+g),e.quadraticCurveTo(u,f+g,u,f+g-b),l==="center"&&a==="left"&&this.drawCaret(t,e,i,s),e.lineTo(u,f+p),e.quadraticCurveTo(u,f,u+p,f),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,a=i&&i.y;if(s||a){const l=jr[t.position].call(this,this._active,this._eventPosition);if(!l)return;const u=this._size=Md(this,t),f=Object.assign({},l,this._size),h=Td(e,t,f),g=Ad(t,f,h,e);(s._to!==g.x||a._to!==g.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=u.width,this.height=u.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const l=ln(e.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&u&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,s,e),Ng(t,e.textDirection),a.y+=l.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),Hg(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map(({datasetIndex:u,index:f})=>{const h=this.chart.getDatasetMeta(u);if(!h)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:h.data[f],index:f}}),a=!qo(i,s),l=this._positionChanged(s,e);(a||l)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],l=this._getActiveElements(t,a,e,i),u=this._positionChanged(l,t),f=e||!qo(l,a)||u;return f&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),f}_getActiveElements(t,e,i,s){const a=this.options;if(t.type==="mouseout")return[];if(!s)return e.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&l.reverse(),l}_positionChanged(t,e){const{caretX:i,caretY:s,options:a}=this,l=jr[a.position].call(this,t,e);return l!==!1&&(i!==l.x||s!==l.y)}}var qD={id:"tooltip",_element:Id,positioners:jr,afterInit(n,t,e){e&&(n.tooltip=new Id({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){const t=n.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){const e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:op},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const jD=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function GD(n,t,e,i){const s=n.indexOf(t);if(s===-1)return jD(n,t,e,i);const a=n.lastIndexOf(t);return s!==a?e:s}const ZD=(n,t)=>n===null?null:sn(Math.round(n),0,t);function Pd(n){const t=this.getLabels();return n>=0&&n<t.length?t[n]:n}class JD extends vr{static id="category";static defaults={ticks:{callback:Pd}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const i=this.getLabels();for(const{index:s,label:a}of e)i[s]===a&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Lt(t))return null;const i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:GD(i,t,bt(e,t),this._addedLabels),ZD(e,i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let l=t;l<=e;l++)s.push({value:l});return s}getLabelForValue(t){return Pd.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function QD(n,t){const e=[],{bounds:s,step:a,min:l,max:u,precision:f,count:h,maxTicks:g,maxDigits:p,includeBounds:_}=n,b=a||1,S=g-1,{min:w,max:y}=t,k=!Lt(l),O=!Lt(u),P=!Lt(h),F=(y-w)/(p+1);let D=Bh((y-w)/S/b)*b,L,E,R,W;if(D<1e-14&&!k&&!O)return[{value:w},{value:y}];W=Math.ceil(y/D)-Math.floor(w/D),W>S&&(D=Bh(W*D/S/b)*b),Lt(f)||(L=Math.pow(10,f),D=Math.ceil(D*L)/L),s==="ticks"?(E=Math.floor(w/D)*D,R=Math.ceil(y/D)*D):(E=w,R=y),k&&O&&a&&RS((u-l)/a,D/1e3)?(W=Math.round(Math.min((u-l)/D,g)),D=(u-l)/W,E=l,R=u):P?(E=k?l:E,R=O?u:R,W=h-1,D=(R-E)/W):(W=(R-E)/D,ts(W,Math.round(W),D/1e3)?W=Math.round(W):W=Math.ceil(W));const X=Math.max(Wh(D),Wh(E));L=Math.pow(10,Lt(f)?X:f),E=Math.round(E*L)/L,R=Math.round(R*L)/L;let Y=0;for(k&&(_&&E!==l?(e.push({value:l}),E<l&&Y++,ts(Math.round((E+Y*D)*L)/L,l,Ld(l,F,n))&&Y++):E<l&&Y++);Y<W;++Y){const K=Math.round((E+Y*D)*L)/L;if(O&&K>u)break;e.push({value:K})}return O&&_&&R!==u?e.length&&ts(e[e.length-1].value,u,Ld(u,F,n))?e[e.length-1].value=u:e.push({value:u}):(!O||R===u)&&e.push({value:R}),e}function Ld(n,t,{horizontal:e,minRotation:i}){const s=Oi(i),a=(e?Math.sin(s):Math.cos(s))||.001,l=.75*t*(""+n).length;return Math.min(t/a,l)}class tM extends vr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Lt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:a}=this;const l=f=>s=e?s:f,u=f=>a=i?a:f;if(t){const f=gr(s),h=gr(a);f<0&&h<0?u(0):f>0&&h>0&&l(0)}if(s===a){let f=a===0?1:Math.abs(a*.05);u(a+f),t||l(s-f)}this.min=s,this.max=a}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:i}=t,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,l=QD(s,a);return t.bounds==="ticks"&&FS(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Eg(t,this.chart.options.locale,this.options.ticks.format)}}class eM extends tM{static id="linear";static defaults={ticks:{callback:Ig.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=an(t)?t:0,this.max=an(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Oi(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const la={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Le=Object.keys(la);function Rd(n,t){return n-t}function Fd(n,t){if(Lt(t))return null;const e=n._adapter,{parser:i,round:s,isoWeekday:a}=n._parseOpts;let l=t;return typeof i=="function"&&(l=i(l)),an(l)||(l=typeof i=="string"?e.parse(l,i):e.parse(l)),l===null?null:(s&&(l=s==="week"&&(ps(a)||a===!0)?e.startOf(l,"isoWeek",a):e.startOf(l,s)),+l)}function Bd(n,t,e,i){const s=Le.length;for(let a=Le.indexOf(n);a<s-1;++a){const l=la[Le[a]],u=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((e-t)/(u*l.size))<=i)return Le[a]}return Le[s-1]}function nM(n,t,e,i,s){for(let a=Le.length-1;a>=Le.indexOf(e);a--){const l=Le[a];if(la[l].common&&n._adapter.diff(s,i,l)>=t-1)return l}return Le[e?Le.indexOf(e):0]}function iM(n){for(let t=Le.indexOf(n)+1,e=Le.length;t<e;++t)if(la[Le[t]].common)return Le[t]}function Wd(n,t,e){if(!e)n[t]=!0;else if(e.length){const{lo:i,hi:s}=Ic(e,t),a=e[i]>=t?e[i]:e[s];n[a]=!0}}function rM(n,t,e,i){const s=n._adapter,a=+s.startOf(t[0].value,i),l=t[t.length-1].value;let u,f;for(u=a;u<=l;u=+s.add(u,1,i))f=e[u],f>=0&&(t[f].major=!0);return t}function zd(n,t,e){const i=[],s={},a=t.length;let l,u;for(l=0;l<a;++l)u=t[l],s[u]=l,i.push({value:u,major:!1});return a===0||!e?i:rM(n,i,s,e)}class pc extends vr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Xg._date(t.adapters.date);s.init(e),Qr(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Fd(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:a,minDefined:l,maxDefined:u}=this.getUserBounds();function f(h){!l&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!u&&!isNaN(h.max)&&(a=Math.max(a,h.max))}(!l||!u)&&(f(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&f(this.getMinMax(!1))),s=an(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),a=an(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,l=this.max,u=$S(s,a,l);return this._unit=e.unit||(i.autoSkip?Bd(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):nM(this,u.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:iM(this._unit),this.initOffsets(s),t.reverse&&u.reverse(),zd(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,s,a;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?e=1-s:e=(this.getDecimalForValue(t[1])-s)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;e=sn(e,0,l),i=sn(i,0,l),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,a=s.time,l=a.unit||Bd(a.minUnit,e,i,this._getLabelCapacity(e)),u=bt(s.ticks.stepSize,1),f=l==="week"?a.isoWeekday:!1,h=ps(f)||f===!0,g={};let p=e,_,b;if(h&&(p=+t.startOf(p,"isoWeek",f)),p=+t.startOf(p,h?"day":l),t.diff(i,e,l)>1e5*u)throw new Error(e+" and "+i+" are too far apart with stepSize of "+u+" "+l);const S=s.ticks.source==="data"&&this.getDataTimestamps();for(_=p,b=0;_<i;_=+t.add(_,u,l),b++)Wd(g,_,S);return(_===i||s.bounds==="ticks"||b===1)&&Wd(g,_,S),Object.keys(g).sort(Rd).map(w=>+w)}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const s=this.options.time.displayFormats,a=this._unit,l=e||s[a];return this._adapter.format(t,l)}_tickFormatFunction(t,e,i,s){const a=this.options,l=a.ticks.callback;if(l)return Bt(l,[t,e,i],this);const u=a.time.displayFormats,f=this._unit,h=this._majorUnit,g=f&&u[f],p=h&&u[h],_=i[e],b=h&&p&&_&&_.major;return this._adapter.format(t,s||(b?p:g))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Oi(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(s),l=Math.sin(s),u=this._resolveTickFontOptions(0).size;return{w:i*a+u*l,h:i*l+u*a}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,a=this._tickFormatFunction(t,0,zd(this,[t],this._majorUnit),s),l=this._getLabelSize(a),u=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return u>0?u:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,i=s.length;e<i;++e)t=t.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Fd(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return US(t.sort(Rd))}}function Ao(n,t,e){let i=0,s=n.length-1,a,l,u,f;e?(t>=n[i].pos&&t<=n[s].pos&&({lo:i,hi:s}=Ei(n,"pos",t)),{pos:a,time:u}=n[i],{pos:l,time:f}=n[s]):(t>=n[i].time&&t<=n[s].time&&({lo:i,hi:s}=Ei(n,"time",t)),{time:a,pos:u}=n[i],{time:l,pos:f}=n[s]);const h=l-a;return h?u+(f-u)*(t-a)/h:u}class eA extends pc{static id="timeseries";static defaults=pc.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ao(e,this.min),this._tableRange=Ao(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],a=[];let l,u,f,h,g;for(l=0,u=t.length;l<u;++l)h=t[l],h>=e&&h<=i&&s.push(h);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(l=0,u=s.length;l<u;++l)g=s[l+1],f=s[l-1],h=s[l],Math.round((g+f)/2)!==h&&a.push({time:h,pos:l/(u-1)});return a}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((s,a)=>s-a)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Ao(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Ao(this._table,i*this._tableRange+this._minPos,!0)}}const ap={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},sM={ariaLabel:{type:String},ariaDescribedby:{type:String}},oM={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...ap,...sM},aM=$1[0]==="2"?(n,t)=>Object.assign(n,{attrs:t}):(n,t)=>Object.assign(n,t);function rr(n){return _g(n)?sc(n):n}function lM(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n;return _g(t)?new Proxy(n,{}):n}function cM(n,t){const e=n.options;e&&t&&Object.assign(e,t)}function lp(n,t){n.labels=t}function cp(n,t,e){const i=[];n.datasets=t.map(s=>{const a=n.datasets.find(l=>l[e]===s[e]);return!a||!s.data||i.includes(a)?{...s}:(i.push(a),Object.assign(a,s),a)})}function uM(n,t){const e={labels:[],datasets:[]};return lp(e,n.labels),cp(e,n.datasets,t),e}const fM=On({props:oM,setup(n,t){let{expose:e,slots:i}=t;const s=Ht(null),a=mg(null);e({chart:a});const l=()=>{if(!s.value)return;const{type:h,data:g,options:p,plugins:_,datasetIdKey:b}=n,S=uM(g,b),w=lM(S,g);a.value=new vs(s.value,{type:h,data:w,options:{...p},plugins:_})},u=()=>{const h=sc(a.value);h&&(n.destroyDelay>0?setTimeout(()=>{h.destroy(),a.value=null},n.destroyDelay):(h.destroy(),a.value=null))},f=h=>{h.update(n.updateMode)};return dr(l),dg(u),fs([()=>n.options,()=>n.data],(h,g)=>{let[p,_]=h,[b,S]=g;const w=sc(a.value);if(!w)return;let y=!1;if(p){const k=rr(p),O=rr(b);k&&k!==O&&(cM(w,k),y=!0)}if(_){const k=rr(_.labels),O=rr(S.labels),P=rr(_.datasets),F=rr(S.datasets);k!==O&&(lp(w.config.data,k),y=!0),P&&P!==F&&(cp(w.config.data,P,n.datasetIdKey),y=!0)}y&&_n(()=>{f(w)})},{deep:!0}),()=>hs("canvas",{role:"img",ariaLabel:n.ariaLabel,ariaDescribedby:n.ariaDescribedby,ref:s},[hs("p",{},[i.default?i.default():""])])}});function hM(n,t){return vs.register(t),On({props:ap,setup(e,i){let{expose:s}=i;const a=mg(null),l=u=>{a.value=u?.chart};return s({chart:a}),()=>hs(fM,aM({ref:l},{type:n,...e}))}})}const dM=hM("line",dk);var Bo={exports:{}},gM=Bo.exports,Nd;function pM(){return Nd||(Nd=1,function(n,t){(function(e,i){n.exports=i()})(gM,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,s=/\d/,a=/\d\d/,l=/\d\d?/,u=/\d*[^-_:/,()\s\d]+/,f={},h=function(y){return(y=+y)+(y>68?1900:2e3)},g=function(y){return function(k){this[y]=+k}},p=[/[+-]\d\d:?(\d\d)?|Z/,function(y){(this.zone||(this.zone={})).offset=function(k){if(!k||k==="Z")return 0;var O=k.match(/([+-]|\d\d)/g),P=60*O[1]+(+O[2]||0);return P===0?0:O[0]==="+"?-P:P}(y)}],_=function(y){var k=f[y];return k&&(k.indexOf?k:k.s.concat(k.f))},b=function(y,k){var O,P=f.meridiem;if(P){for(var F=1;F<=24;F+=1)if(y.indexOf(P(F,0,k))>-1){O=F>12;break}}else O=y===(k?"pm":"PM");return O},S={A:[u,function(y){this.afternoon=b(y,!1)}],a:[u,function(y){this.afternoon=b(y,!0)}],Q:[s,function(y){this.month=3*(y-1)+1}],S:[s,function(y){this.milliseconds=100*+y}],SS:[a,function(y){this.milliseconds=10*+y}],SSS:[/\d{3}/,function(y){this.milliseconds=+y}],s:[l,g("seconds")],ss:[l,g("seconds")],m:[l,g("minutes")],mm:[l,g("minutes")],H:[l,g("hours")],h:[l,g("hours")],HH:[l,g("hours")],hh:[l,g("hours")],D:[l,g("day")],DD:[a,g("day")],Do:[u,function(y){var k=f.ordinal,O=y.match(/\d+/);if(this.day=O[0],k)for(var P=1;P<=31;P+=1)k(P).replace(/\[|\]/g,"")===y&&(this.day=P)}],w:[l,g("week")],ww:[a,g("week")],M:[l,g("month")],MM:[a,g("month")],MMM:[u,function(y){var k=_("months"),O=(_("monthsShort")||k.map(function(P){return P.slice(0,3)})).indexOf(y)+1;if(O<1)throw new Error;this.month=O%12||O}],MMMM:[u,function(y){var k=_("months").indexOf(y)+1;if(k<1)throw new Error;this.month=k%12||k}],Y:[/[+-]?\d+/,g("year")],YY:[a,function(y){this.year=h(y)}],YYYY:[/\d{4}/,g("year")],Z:p,ZZ:p};function w(y){var k,O;k=y,O=f&&f.formats;for(var P=(y=k.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(X,Y,K){var it=K&&K.toUpperCase();return Y||O[K]||e[K]||O[it].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ht,lt,dt){return lt||dt.slice(1)})})).match(i),F=P.length,D=0;D<F;D+=1){var L=P[D],E=S[L],R=E&&E[0],W=E&&E[1];P[D]=W?{regex:R,parser:W}:L.replace(/^\[|\]$/g,"")}return function(X){for(var Y={},K=0,it=0;K<F;K+=1){var ht=P[K];if(typeof ht=="string")it+=ht.length;else{var lt=ht.regex,dt=ht.parser,yt=X.slice(it),Dt=lt.exec(yt)[0];dt.call(Y,Dt),X=X.replace(Dt,"")}}return function(te){var Gt=te.afternoon;if(Gt!==void 0){var vt=te.hours;Gt?vt<12&&(te.hours+=12):vt===12&&(te.hours=0),delete te.afternoon}}(Y),Y}}return function(y,k,O){O.p.customParseFormat=!0,y&&y.parseTwoDigitYear&&(h=y.parseTwoDigitYear);var P=k.prototype,F=P.parse;P.parse=function(D){var L=D.date,E=D.utc,R=D.args;this.$u=E;var W=R[1];if(typeof W=="string"){var X=R[2]===!0,Y=R[3]===!0,K=X||Y,it=R[2];Y&&(it=R[2]),f=this.$locale(),!X&&it&&(f=O.Ls[it]),this.$d=function(yt,Dt,te,Gt){try{if(["x","X"].indexOf(Dt)>-1)return new Date((Dt==="X"?1e3:1)*yt);var vt=w(Dt)(yt),le=vt.year,we=vt.month,Re=vt.day,ce=vt.hours,ue=vt.minutes,H=vt.seconds,rt=vt.milliseconds,st=vt.zone,Et=vt.week,Rt=new Date,fe=Re||(le||we?1:Rt.getDate()),Se=le||Rt.getFullYear(),At=0;le&&!we||(At=we>0?we-1:Rt.getMonth());var $t,vn=ce||0,he=ue||0,Wi=H||0,xr=rt||0;return st?new Date(Date.UTC(Se,At,fe,vn,he,Wi,xr+60*st.offset*1e3)):te?new Date(Date.UTC(Se,At,fe,vn,he,Wi,xr)):($t=new Date(Se,At,fe,vn,he,Wi,xr),Et&&($t=Gt($t).week(Et).toDate()),$t)}catch{return new Date("")}}(L,W,E,O),this.init(),it&&it!==!0&&(this.$L=this.locale(it).$L),K&&L!=this.format(W)&&(this.$d=new Date("")),f={}}else if(W instanceof Array)for(var ht=W.length,lt=1;lt<=ht;lt+=1){R[1]=W[lt-1];var dt=O.apply(this,R);if(dt.isValid()){this.$d=dt.$d,this.$L=dt.$L,this.init();break}lt===ht&&(this.$d=new Date(""))}else F.call(this,D)}}})}(Bo)),Bo.exports}var mM=pM();const _M=xs(mM);var Wo={exports:{}},bM=Wo.exports,Hd;function vM(){return Hd||(Hd=1,function(n,t){(function(e,i){n.exports=i()})(bM,function(){return function(e,i){var s=i.prototype,a=s.format;s.format=function(l){var u=this,f=this.$locale();if(!this.isValid())return a.bind(this)(l);var h=this.$utils(),g=(l||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(p){switch(p){case"Q":return Math.ceil((u.$M+1)/3);case"Do":return f.ordinal(u.$D);case"gggg":return u.weekYear();case"GGGG":return u.isoWeekYear();case"wo":return f.ordinal(u.week(),"W");case"w":case"ww":return h.s(u.week(),p==="w"?1:2,"0");case"W":case"WW":return h.s(u.isoWeek(),p==="W"?1:2,"0");case"k":case"kk":return h.s(String(u.$H===0?24:u.$H),p==="k"?1:2,"0");case"X":return Math.floor(u.$d.getTime()/1e3);case"x":return u.$d.getTime();case"z":return"["+u.offsetName()+"]";case"zzz":return"["+u.offsetName("long")+"]";default:return p}});return a.bind(this)(g)}}})}(Wo)),Wo.exports}var xM=vM();const yM=xs(xM);var zo={exports:{}},wM=zo.exports,$d;function SM(){return $d||($d=1,function(n,t){(function(e,i){n.exports=i()})(wM,function(){var e="month",i="quarter";return function(s,a){var l=a.prototype;l.quarter=function(h){return this.$utils().u(h)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(h-1))};var u=l.add;l.add=function(h,g){return h=Number(h),this.$utils().p(g)===i?this.add(3*h,e):u.bind(this)(h,g)};var f=l.startOf;l.startOf=function(h,g){var p=this.$utils(),_=!!p.u(g)||g;if(p.p(h)===i){var b=this.quarter()-1;return _?this.month(3*b).startOf(e).startOf("day"):this.month(3*b+2).endOf(e).endOf("day")}return f.bind(this)(h,g)}}})}(zo)),zo.exports}var CM=SM();const kM=xs(CM);var No={exports:{}},DM=No.exports,Yd;function MM(){return Yd||(Yd=1,function(n,t){(function(e,i){n.exports=i()})(DM,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(i,s,a){var l=s.prototype,u=l.format;a.en.formats=e,l.format=function(f){f===void 0&&(f="YYYY-MM-DDTHH:mm:ssZ");var h=this.$locale().formats,g=function(p,_){return p.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(b,S,w){var y=w&&w.toUpperCase();return S||_[w]||e[w]||_[y].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(k,O,P){return O||P.slice(1)})})}(f,h===void 0?{}:h);return u.call(this,g)}}})}(No)),No.exports}var TM=MM();const AM=xs(TM);var Ho={exports:{}},OM=Ho.exports,Ud;function EM(){return Ud||(Ud=1,function(n,t){(function(e,i){n.exports=i()})(OM,function(){var e="day";return function(i,s,a){var l=function(h){return h.add(4-h.isoWeekday(),e)},u=s.prototype;u.isoWeekYear=function(){return l(this).year()},u.isoWeek=function(h){if(!this.$utils().u(h))return this.add(7*(h-this.isoWeek()),e);var g,p,_,b,S=l(this),w=(g=this.isoWeekYear(),p=this.$u,_=(p?a.utc:a)().year(g).startOf("year"),b=4-_.isoWeekday(),_.isoWeekday()>4&&(b+=7),_.add(b,e));return S.diff(w,"week")+1},u.isoWeekday=function(h){return this.$utils().u(h)?this.day()||7:this.day(this.day()%7?h:h-7)};var f=u.startOf;u.startOf=function(h,g){var p=this.$utils(),_=!!p.u(g)||g;return p.p(h)==="isoweek"?_?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):f.bind(this)(h,g)}}})}(Ho)),Ho.exports}var IM=EM();const PM=xs(IM);Pt.extend(yM);Pt.extend(kM);Pt.extend(AM);Pt.extend(_M);Pt.extend(PM);var LM={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Xg._date.override({formats:function(){return LM},parse:function(t,e){var i=typeof t;return t===null||i==="undefined"?null:i==="string"&&typeof e=="string"?Pt(t,e).isValid()?Pt(t,e).valueOf():null:t instanceof Pt?null:Pt(t).isValid()?Pt(t).valueOf():null},format:function(t,e){return Pt(t).format(e)},add:function(t,e,i){return Pt(t).add(e,i).valueOf()},diff:function(t,e,i){return Pt(t).diff(Pt(e),i)},startOf:function(t,e,i){if(e==="isoWeek"){var s=typeof i=="number"&&i>0&&i<7?i:1;return Pt(t).isoWeekday(s).startOf("day").valueOf()}return Pt(t).startOf(e).valueOf()},endOf:function(t,e){return Pt(t).endOf(e).valueOf()}});const RM={key:1,class:"error-placeholder"},FM={__name:"KdjChart",props:{stockId:{type:String,required:!0},width:{type:Number,default:200},height:{type:Number,default:100}},emits:["kdjClick"],setup(n,{emit:t}){vs.register(JD,eM,ID,ED,ND,qD,WD,pc);const e={id:"kdjDisplay",afterDatasetsDraw:(p,_,b)=>{if(!b.enabled||!b.lastKdj)return;const{ctx:S,chartArea:w}=p,{lastKdj:y}=b,O=p.scales.y.getPixelForValue(0),P=w.right-97,F=O+15,D=O+30;S.save(),console.log("Drawing KDJ values:",{k:y.k,d:y.d,xStart:P,yK:F,yD:D,zeroY:O,chartArea:w}),S.font="bold 12px Arial",S.textAlign="left",S.fillStyle="#4286f5";const L=`K: ${y.k}`;S.fillText(L,P,F);const E=S.measureText(L).width;S.fillStyle="#e75c9a";const R=` D: ${y.d}`,W=P+E;console.log("Drawing D value:",R,"at same line position:",W,F),S.fillText(R,W,F),S.restore()}};vs.register(e);const i=n,s=t,a=Mc(),l=Ht(null),u=ne(()=>{const p=a.userStockList.find(_=>_.id===i.stockId);return p?.data?.weeklyKdj?p.data.weeklyKdj.filter(_=>_&&Array.isArray(_)&&_.length>=4&&typeof _[1]=="number"&&!isNaN(_[1])&&typeof _[2]=="number"&&!isNaN(_[2])&&typeof _[3]=="number"&&!isNaN(_[3])).map(_=>({x:Pt(_[0],"YYYYMMDD").toDate(),k:_[1],d:_[2],j:_[3]})):[]}),f=ne(()=>{const p=u.value;if(!p||p.length===0)return{datasets:[]};const _=p.map(S=>({x:S.x,y:S.k})),b=p.map(S=>({x:S.x,y:S.d}));return{datasets:[{label:"K",data:_,borderColor:"#4286f5",backgroundColor:"rgba(66, 134, 245, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#4286f5",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2},{label:"D",data:b,borderColor:"#e75c9a",backgroundColor:"rgba(231, 92, 154, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#e75c9a",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2}]}}),h=ne(()=>{const p=u.value;return p&&p.length>0?p[p.length-1]:null}),g=ne(()=>{const p=h.value;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#333",bodyColor:"#333",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,cornerRadius:6,displayColors:!1,padding:8,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:function(_){const b=_[0].parsed.x;return Pt(b).format("YYYY-MM-DD(dd)")},label:function(_){const b=_.dataset.label,S=_.parsed.y.toFixed(2);return`${b}: ${S}`},afterLabel:function(_){const b=_.dataIndex,S=u.value;if(S&&S[b]){const w=S[b];if(_.datasetIndex===0)return[`K: ${w.k.toFixed(2)}`,`D: ${w.d.toFixed(2)}`,`J: ${w.j.toFixed(2)}`]}return[]}}},kdjDisplay:{enabled:!!p,lastKdj:p?{k:p.k.toFixed(2),d:p.d.toFixed(2),j:p.j.toFixed(2),date:Pt(p.x).format("YYYY/MM/DD")}:null}},scales:{x:{type:"time",time:{unit:"week",displayFormats:{week:"MM/DD"}},display:!1,grid:{display:!1},ticks:{display:!1},offset:!1,bounds:"data"},y:{type:"linear",position:"right",display:!0,min:-20,max:100,border:{display:!1},grid:{drawTicks:!1,color:_=>{const b=_.tick.value;return[0,20,50,80,100].includes(b)?"rgba(200, 200, 200, 0.3)":"transparent"}},ticks:{stepSize:10,autoSkip:!1,color:"#888",font:{size:12},padding:-15,callback:_=>_===20||_===50||_===80?_:""}}},animation:!1,interaction:{mode:"nearest",intersect:!1,includeInvisible:!1},hover:{mode:"nearest",intersect:!1,animationDuration:200},onClick:(_,b,S)=>{console.log("Chart onClick triggered"),console.log("Event object:",_);const w=S.canvas.getBoundingClientRect();let y,k;if(_.native)y=_.native.offsetX||_.native.clientX-w.left,k=_.native.offsetY||_.native.clientY-w.top;else if(_.offsetX!==void 0)y=_.offsetX,k=_.offsetY;else if(_.clientX!==void 0)y=_.clientX-w.left,k=_.clientY-w.top;else{console.log("Cannot determine click position");return}console.log("Click position:",{x:y,y:k}),console.log("Canvas rect:",w);const O=S.chartArea,F=S.scales.y.getPixelForValue(0),D={left:O.right-120,right:O.right-5,top:F+5,bottom:F+20};if(console.log("KDJ area:",D),y>=D.left&&y<=D.right&&k>=D.top&&k<=D.bottom){console.log("Clicked in KDJ area");const L=h.value;L&&(console.log("Emitting kdjClick event:",L),s("kdjClick",{k:L.k.toFixed(2),d:L.d.toFixed(2),j:L.j.toFixed(2),date:Pt(L.x).format("YYYY/MM/DD")}))}else console.log("Clicked outside KDJ area")}}});return(p,_)=>(Ee(),rn("div",{ref_key:"chartContainer",ref:l,class:"kdj-chart",style:{width:"100%",height:"100%"}},[f.value.datasets.length>0?(Ee(),gg(Oe(dM),{key:0,data:f.value,options:g.value},null,8,["data","options"])):(Ee(),rn("div",RM,"KDJ 圖表暫不可用"))],512))}},BM=Cc(FM,[["__scopeId","data-v-7b9bfd80"]]),WM={class:"stock-name"},zM={class:"stock-name-main"},NM={class:"stock-name-left"},HM={class:"name highlight"},$M={class:"code"},YM={class:"stock-name-right"},UM={class:"stock-progress-bar"},VM={class:"progress-text"},XM={__name:"StockName",props:{name:String,code:String,price:[String,Number],change:[String,Number],changePercent:[String,Number],priceClass:String,progress:Number,progressText:String},setup(n){return(t,e)=>(Ee(),rn("div",WM,[mt("div",zM,[mt("div",NM,[mt("div",HM,Ie(n.name),1),mt("div",$M,Ie(n.code),1),e[0]||(e[0]=mt("div",{class:"star-area"},[mt("span",{class:"star"},"★")],-1))]),mt("div",YM,[mt("div",{class:oc(["price",n.priceClass])},Ie(n.price),3),mt("div",{class:oc(["change",n.priceClass])},Ie(n.change>0?"+":"")+Ie(n.change)+" ("+Ie(n.changePercent)+"%) ",3)])]),mt("div",UM,[mt("div",{class:"stock-progress-inner",style:pg({width:(n.progress||0)+"%"})},[mt("span",VM,Ie(n.progressText||(n.progress||0)+"%"),1)],4)])]))}},KM=Cc(XM,[["__scopeId","data-v-e4a25520"]]);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Vd(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function An(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Vd(Object(e),!0).forEach(function(i){qM(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Vd(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function $o(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$o=function(t){return typeof t}:$o=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$o(n)}function qM(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Kn(){return Kn=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Kn.apply(this,arguments)}function jM(n,t){if(n==null)return{};var e={},i=Object.keys(n),s,a;for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&(e[s]=n[s]);return e}function GM(n,t){if(n==null)return{};var e=jM(n,t),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)i=a[s],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}var ZM="1.14.0";function Xn(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var qn=Xn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ws=Xn(/Edge/i),Xd=Xn(/firefox/i),rs=Xn(/safari/i)&&!Xn(/chrome/i)&&!Xn(/android/i),up=Xn(/iP(ad|od|hone)/i),JM=Xn(/chrome/i)&&Xn(/android/i),fp={capture:!1,passive:!1};function St(n,t,e){n.addEventListener(t,e,!qn&&fp)}function xt(n,t,e){n.removeEventListener(t,e,!qn&&fp)}function ea(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function QM(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Dn(n,t,e,i){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&ea(n,t):ea(n,t))||i&&n===e)return n;if(n===e)break}while(n=QM(n))}return null}var Kd=/\s+/g;function $e(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var i=(" "+n.className+" ").replace(Kd," ").replace(" "+t+" "," ");n.className=(i+(e?" "+t:"")).replace(Kd," ")}}function tt(n,t,e){var i=n&&n.style;if(i){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=e+(typeof e=="string"?"":"px")}}function hr(n,t){var e="";if(typeof n=="string")e=n;else do{var i=tt(n,"transform");i&&i!=="none"&&(e=i+" "+e)}while(!t&&(n=n.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(e)}function hp(n,t,e){if(n){var i=n.getElementsByTagName(t),s=0,a=i.length;if(e)for(;s<a;s++)e(i[s],s);return i}return[]}function Tn(){var n=document.scrollingElement;return n||document.documentElement}function Qt(n,t,e,i,s){if(!(!n.getBoundingClientRect&&n!==window)){var a,l,u,f,h,g,p;if(n!==window&&n.parentNode&&n!==Tn()?(a=n.getBoundingClientRect(),l=a.top,u=a.left,f=a.bottom,h=a.right,g=a.height,p=a.width):(l=0,u=0,f=window.innerHeight,h=window.innerWidth,g=window.innerHeight,p=window.innerWidth),(t||e)&&n!==window&&(s=s||n.parentNode,!qn))do if(s&&s.getBoundingClientRect&&(tt(s,"transform")!=="none"||e&&tt(s,"position")!=="static")){var _=s.getBoundingClientRect();l-=_.top+parseInt(tt(s,"border-top-width")),u-=_.left+parseInt(tt(s,"border-left-width")),f=l+a.height,h=u+a.width;break}while(s=s.parentNode);if(i&&n!==window){var b=hr(s||n),S=b&&b.a,w=b&&b.d;b&&(l/=w,u/=S,p/=S,g/=w,f=l+g,h=u+p)}return{top:l,left:u,bottom:f,right:h,width:p,height:g}}}function qd(n,t,e){for(var i=li(n,!0),s=Qt(n)[t];i;){var a=Qt(i)[e],l=void 0;if(l=s>=a,!l)return i;if(i===Tn())break;i=li(i,!1)}return!1}function _r(n,t,e,i){for(var s=0,a=0,l=n.children;a<l.length;){if(l[a].style.display!=="none"&&l[a]!==et.ghost&&(i||l[a]!==et.dragged)&&Dn(l[a],e.draggable,n,!1)){if(s===t)return l[a];s++}a++}return null}function Yc(n,t){for(var e=n.lastElementChild;e&&(e===et.ghost||tt(e,"display")==="none"||t&&!ea(e,t));)e=e.previousElementSibling;return e||null}function nn(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==et.clone&&(!t||ea(n,t))&&e++;return e}function jd(n){var t=0,e=0,i=Tn();if(n)do{var s=hr(n),a=s.a,l=s.d;t+=n.scrollLeft*a,e+=n.scrollTop*l}while(n!==i&&(n=n.parentNode));return[t,e]}function tT(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n[e][i])return Number(e)}return-1}function li(n,t){if(!n||!n.getBoundingClientRect)return Tn();var e=n,i=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var s=tt(e);if(e.clientWidth<e.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return Tn();if(i||t)return e;i=!0}}while(e=e.parentNode);return Tn()}function eT(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Xl(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var ss;function dp(n,t){return function(){if(!ss){var e=arguments,i=this;e.length===1?n.call(i,e[0]):n.apply(i,e),ss=setTimeout(function(){ss=void 0},t)}}}function nT(){clearTimeout(ss),ss=void 0}function gp(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function pp(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}var Ue="Sortable"+new Date().getTime();function iT(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(s){if(!(tt(s,"display")==="none"||s===et.ghost)){n.push({target:s,rect:Qt(s)});var a=An({},n[n.length-1].rect);if(s.thisAnimationDuration){var l=hr(s,!0);l&&(a.top-=l.f,a.left-=l.e)}s.fromRect=a}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(tT(n,{target:i}),1)},animateAll:function(i){var s=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var a=!1,l=0;n.forEach(function(u){var f=0,h=u.target,g=h.fromRect,p=Qt(h),_=h.prevFromRect,b=h.prevToRect,S=u.rect,w=hr(h,!0);w&&(p.top-=w.f,p.left-=w.e),h.toRect=p,h.thisAnimationDuration&&Xl(_,p)&&!Xl(g,p)&&(S.top-p.top)/(S.left-p.left)===(g.top-p.top)/(g.left-p.left)&&(f=sT(S,_,b,s.options)),Xl(p,g)||(h.prevFromRect=g,h.prevToRect=p,f||(f=s.options.animation),s.animate(h,S,p,f)),f&&(a=!0,l=Math.max(l,f),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},f),h.thisAnimationDuration=f)}),clearTimeout(t),a?t=setTimeout(function(){typeof i=="function"&&i()},l):typeof i=="function"&&i(),n=[]},animate:function(i,s,a,l){if(l){tt(i,"transition",""),tt(i,"transform","");var u=hr(this.el),f=u&&u.a,h=u&&u.d,g=(s.left-a.left)/(f||1),p=(s.top-a.top)/(h||1);i.animatingX=!!g,i.animatingY=!!p,tt(i,"transform","translate3d("+g+"px,"+p+"px,0)"),this.forRepaintDummy=rT(i),tt(i,"transition","transform "+l+"ms"+(this.options.easing?" "+this.options.easing:"")),tt(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){tt(i,"transition",""),tt(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},l)}}}}function rT(n){return n.offsetWidth}function sT(n,t,e,i){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*i.animation}var sr=[],Kl={initializeByDefault:!0},Ss={mount:function(t){for(var e in Kl)Kl.hasOwnProperty(e)&&!(e in t)&&(t[e]=Kl[e]);sr.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),sr.push(t)},pluginEvent:function(t,e,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var a=t+"Global";sr.forEach(function(l){e[l.pluginName]&&(e[l.pluginName][a]&&e[l.pluginName][a](An({sortable:e},i)),e.options[l.pluginName]&&e[l.pluginName][t]&&e[l.pluginName][t](An({sortable:e},i)))})},initializePlugins:function(t,e,i,s){sr.forEach(function(u){var f=u.pluginName;if(!(!t.options[f]&&!u.initializeByDefault)){var h=new u(t,e,t.options);h.sortable=t,h.options=t.options,t[f]=h,Kn(i,h.defaults)}});for(var a in t.options)if(t.options.hasOwnProperty(a)){var l=this.modifyOption(t,a,t.options[a]);typeof l<"u"&&(t.options[a]=l)}},getEventProperties:function(t,e){var i={};return sr.forEach(function(s){typeof s.eventProperties=="function"&&Kn(i,s.eventProperties.call(e[s.pluginName],t))}),i},modifyOption:function(t,e,i){var s;return sr.forEach(function(a){t[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[e]=="function"&&(s=a.optionListeners[e].call(t[a.pluginName],i))}),s}};function oT(n){var t=n.sortable,e=n.rootEl,i=n.name,s=n.targetEl,a=n.cloneEl,l=n.toEl,u=n.fromEl,f=n.oldIndex,h=n.newIndex,g=n.oldDraggableIndex,p=n.newDraggableIndex,_=n.originalEvent,b=n.putSortable,S=n.extraEventProperties;if(t=t||e&&e[Ue],!!t){var w,y=t.options,k="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!qn&&!ws?w=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(i,!0,!0)),w.to=l||e,w.from=u||e,w.item=s||e,w.clone=a,w.oldIndex=f,w.newIndex=h,w.oldDraggableIndex=g,w.newDraggableIndex=p,w.originalEvent=_,w.pullMode=b?b.lastPutMode:void 0;var O=An(An({},S),Ss.getEventProperties(i,t));for(var P in O)w[P]=O[P];e&&e.dispatchEvent(w),y[k]&&y[k].call(t,w)}}var aT=["evt"],Ae=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.evt,a=GM(i,aT);Ss.pluginEvent.bind(et)(t,e,An({dragEl:U,parentEl:Ut,ghostEl:at,rootEl:zt,nextEl:Ai,lastDownEl:Yo,cloneEl:Vt,cloneHidden:oi,dragStarted:Gr,putSortable:ae,activeSortable:et.active,originalEvent:s,oldIndex:cr,oldDraggableIndex:os,newIndex:Ye,newDraggableIndex:si,hideGhostForTarget:vp,unhideGhostForTarget:xp,cloneNowHidden:function(){oi=!0},cloneNowShown:function(){oi=!1},dispatchSortableEvent:function(u){ye({sortable:e,name:u,originalEvent:s})}},a))};function ye(n){oT(An({putSortable:ae,cloneEl:Vt,targetEl:U,rootEl:zt,oldIndex:cr,oldDraggableIndex:os,newIndex:Ye,newDraggableIndex:si},n))}var U,Ut,at,zt,Ai,Yo,Vt,oi,cr,Ye,os,si,Oo,ae,ar=!1,na=!1,ia=[],Ci,gn,ql,jl,Gd,Zd,Gr,or,as,ls=!1,Eo=!1,Uo,pe,Gl=[],mc=!1,ra=[],ca=typeof document<"u",Io=up,Jd=ws||qn?"cssFloat":"float",lT=ca&&!JM&&!up&&"draggable"in document.createElement("div"),mp=function(){if(ca){if(qn)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),_p=function(t,e){var i=tt(t),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),a=_r(t,0,e),l=_r(t,1,e),u=a&&tt(a),f=l&&tt(l),h=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Qt(a).width,g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Qt(l).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&u.float&&u.float!=="none"){var p=u.float==="left"?"left":"right";return l&&(f.clear==="both"||f.clear===p)?"vertical":"horizontal"}return a&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||h>=s&&i[Jd]==="none"||l&&i[Jd]==="none"&&h+g>s)?"vertical":"horizontal"},cT=function(t,e,i){var s=i?t.left:t.top,a=i?t.right:t.bottom,l=i?t.width:t.height,u=i?e.left:e.top,f=i?e.right:e.bottom,h=i?e.width:e.height;return s===u||a===f||s+l/2===u+h/2},uT=function(t,e){var i;return ia.some(function(s){var a=s[Ue].options.emptyInsertThreshold;if(!(!a||Yc(s))){var l=Qt(s),u=t>=l.left-a&&t<=l.right+a,f=e>=l.top-a&&e<=l.bottom+a;if(u&&f)return i=s}}),i},bp=function(t){function e(a,l){return function(u,f,h,g){var p=u.options.group.name&&f.options.group.name&&u.options.group.name===f.options.group.name;if(a==null&&(l||p))return!0;if(a==null||a===!1)return!1;if(l&&a==="clone")return a;if(typeof a=="function")return e(a(u,f,h,g),l)(u,f,h,g);var _=(l?u:f).options.group.name;return a===!0||typeof a=="string"&&a===_||a.join&&a.indexOf(_)>-1}}var i={},s=t.group;(!s||$o(s)!="object")&&(s={name:s}),i.name=s.name,i.checkPull=e(s.pull,!0),i.checkPut=e(s.put),i.revertClone=s.revertClone,t.group=i},vp=function(){!mp&&at&&tt(at,"display","none")},xp=function(){!mp&&at&&tt(at,"display","")};ca&&document.addEventListener("click",function(n){if(na)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),na=!1,!1},!0);var ki=function(t){if(U){t=t.touches?t.touches[0]:t;var e=uT(t.clientX,t.clientY);if(e){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[Ue]._onDragOver(i)}}},fT=function(t){U&&U.parentNode[Ue]._isOutsideThisEl(t.target)};function et(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=Kn({},t),n[Ue]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _p(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(l,u){l.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:et.supportPointer!==!1&&"PointerEvent"in window&&!rs,emptyInsertThreshold:5};Ss.initializePlugins(this,n,e);for(var i in e)!(i in t)&&(t[i]=e[i]);bp(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:lT,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?St(n,"pointerdown",this._onTapStart):(St(n,"mousedown",this._onTapStart),St(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(St(n,"dragover",this),St(n,"dragenter",this)),ia.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Kn(this,iT())}et.prototype={constructor:et,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(or=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,U):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,s=this.options,a=s.preventOnFilter,l=t.type,u=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,f=(u||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||f,g=s.filter;if(vT(i),!U&&!(/mousedown|pointerdown/.test(l)&&t.button!==0||s.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&rs&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=Dn(f,s.draggable,i,!1),!(f&&f.animated)&&Yo!==f)){if(cr=nn(f),os=nn(f,s.draggable),typeof g=="function"){if(g.call(this,t,f,this)){ye({sortable:e,rootEl:h,name:"filter",targetEl:f,toEl:i,fromEl:i}),Ae("filter",e,{evt:t}),a&&t.cancelable&&t.preventDefault();return}}else if(g&&(g=g.split(",").some(function(p){if(p=Dn(h,p.trim(),i,!1),p)return ye({sortable:e,rootEl:p,name:"filter",targetEl:f,fromEl:i,toEl:i}),Ae("filter",e,{evt:t}),!0}),g)){a&&t.cancelable&&t.preventDefault();return}s.handle&&!Dn(h,s.handle,i,!1)||this._prepareDragStart(t,u,f)}}},_prepareDragStart:function(t,e,i){var s=this,a=s.el,l=s.options,u=a.ownerDocument,f;if(i&&!U&&i.parentNode===a){var h=Qt(i);if(zt=a,U=i,Ut=U.parentNode,Ai=U.nextSibling,Yo=i,Oo=l.group,et.dragged=U,Ci={target:U,clientX:(e||t).clientX,clientY:(e||t).clientY},Gd=Ci.clientX-h.left,Zd=Ci.clientY-h.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,U.style["will-change"]="all",f=function(){if(Ae("delayEnded",s,{evt:t}),et.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Xd&&s.nativeDraggable&&(U.draggable=!0),s._triggerDragStart(t,e),ye({sortable:s,name:"choose",originalEvent:t}),$e(U,l.chosenClass,!0)},l.ignore.split(",").forEach(function(g){hp(U,g.trim(),Zl)}),St(u,"dragover",ki),St(u,"mousemove",ki),St(u,"touchmove",ki),St(u,"mouseup",s._onDrop),St(u,"touchend",s._onDrop),St(u,"touchcancel",s._onDrop),Xd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),Ae("delayStart",this,{evt:t}),l.delay&&(!l.delayOnTouchOnly||e)&&(!this.nativeDraggable||!(ws||qn))){if(et.eventCanceled){this._onDrop();return}St(u,"mouseup",s._disableDelayedDrag),St(u,"touchend",s._disableDelayedDrag),St(u,"touchcancel",s._disableDelayedDrag),St(u,"mousemove",s._delayedDragTouchMoveHandler),St(u,"touchmove",s._delayedDragTouchMoveHandler),l.supportPointer&&St(u,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(f,l.delay)}else f()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&Zl(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;xt(t,"mouseup",this._disableDelayedDrag),xt(t,"touchend",this._disableDelayedDrag),xt(t,"touchcancel",this._disableDelayedDrag),xt(t,"mousemove",this._delayedDragTouchMoveHandler),xt(t,"touchmove",this._delayedDragTouchMoveHandler),xt(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?St(document,"pointermove",this._onTouchMove):e?St(document,"touchmove",this._onTouchMove):St(document,"mousemove",this._onTouchMove):(St(U,"dragend",this),St(zt,"dragstart",this._onDragStart));try{document.selection?Vo(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(ar=!1,zt&&U){Ae("dragStarted",this,{evt:e}),this.nativeDraggable&&St(document,"dragover",fT);var i=this.options;!t&&$e(U,i.dragClass,!1),$e(U,i.ghostClass,!0),et.active=this,t&&this._appendGhost(),ye({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(gn){this._lastX=gn.clientX,this._lastY=gn.clientY,vp();for(var t=document.elementFromPoint(gn.clientX,gn.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(gn.clientX,gn.clientY),t!==e);)e=t;if(U.parentNode[Ue]._isOutsideThisEl(t),e)do{if(e[Ue]){var i=void 0;if(i=e[Ue]._onDragOver({clientX:gn.clientX,clientY:gn.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);xp()}},_onTouchMove:function(t){if(Ci){var e=this.options,i=e.fallbackTolerance,s=e.fallbackOffset,a=t.touches?t.touches[0]:t,l=at&&hr(at,!0),u=at&&l&&l.a,f=at&&l&&l.d,h=Io&&pe&&jd(pe),g=(a.clientX-Ci.clientX+s.x)/(u||1)+(h?h[0]-Gl[0]:0)/(u||1),p=(a.clientY-Ci.clientY+s.y)/(f||1)+(h?h[1]-Gl[1]:0)/(f||1);if(!et.active&&!ar){if(i&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(at){l?(l.e+=g-(ql||0),l.f+=p-(jl||0)):l={a:1,b:0,c:0,d:1,e:g,f:p};var _="matrix(".concat(l.a,",").concat(l.b,",").concat(l.c,",").concat(l.d,",").concat(l.e,",").concat(l.f,")");tt(at,"webkitTransform",_),tt(at,"mozTransform",_),tt(at,"msTransform",_),tt(at,"transform",_),ql=g,jl=p,gn=a}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!at){var t=this.options.fallbackOnBody?document.body:zt,e=Qt(U,!0,Io,!0,t),i=this.options;if(Io){for(pe=t;tt(pe,"position")==="static"&&tt(pe,"transform")==="none"&&pe!==document;)pe=pe.parentNode;pe!==document.body&&pe!==document.documentElement?(pe===document&&(pe=Tn()),e.top+=pe.scrollTop,e.left+=pe.scrollLeft):pe=Tn(),Gl=jd(pe)}at=U.cloneNode(!0),$e(at,i.ghostClass,!1),$e(at,i.fallbackClass,!0),$e(at,i.dragClass,!0),tt(at,"transition",""),tt(at,"transform",""),tt(at,"box-sizing","border-box"),tt(at,"margin",0),tt(at,"top",e.top),tt(at,"left",e.left),tt(at,"width",e.width),tt(at,"height",e.height),tt(at,"opacity","0.8"),tt(at,"position",Io?"absolute":"fixed"),tt(at,"zIndex","100000"),tt(at,"pointerEvents","none"),et.ghost=at,t.appendChild(at),tt(at,"transform-origin",Gd/parseInt(at.style.width)*100+"% "+Zd/parseInt(at.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,s=t.dataTransfer,a=i.options;if(Ae("dragStart",this,{evt:t}),et.eventCanceled){this._onDrop();return}Ae("setupClone",this),et.eventCanceled||(Vt=pp(U),Vt.draggable=!1,Vt.style["will-change"]="",this._hideClone(),$e(Vt,this.options.chosenClass,!1),et.clone=Vt),i.cloneId=Vo(function(){Ae("clone",i),!et.eventCanceled&&(i.options.removeCloneOnHide||zt.insertBefore(Vt,U),i._hideClone(),ye({sortable:i,name:"clone"}))}),!e&&$e(U,a.dragClass,!0),e?(na=!0,i._loopId=setInterval(i._emulateDragOver,50)):(xt(document,"mouseup",i._onDrop),xt(document,"touchend",i._onDrop),xt(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",a.setData&&a.setData.call(i,s,U)),St(document,"drop",i),tt(U,"transform","translateZ(0)")),ar=!0,i._dragStartId=Vo(i._dragStarted.bind(i,e,t)),St(document,"selectstart",i),Gr=!0,rs&&tt(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,i=t.target,s,a,l,u=this.options,f=u.group,h=et.active,g=Oo===f,p=u.sort,_=ae||h,b,S=this,w=!1;if(mc)return;function y(Dt,te){Ae(Dt,S,An({evt:t,isOwner:g,axis:b?"vertical":"horizontal",revert:l,dragRect:s,targetRect:a,canSort:p,fromSortable:_,target:i,completed:O,onMove:function(vt,le){return Po(zt,e,U,s,vt,Qt(vt),t,le)},changed:P},te))}function k(){y("dragOverAnimationCapture"),S.captureAnimationState(),S!==_&&_.captureAnimationState()}function O(Dt){return y("dragOverCompleted",{insertion:Dt}),Dt&&(g?h._hideClone():h._showClone(S),S!==_&&($e(U,ae?ae.options.ghostClass:h.options.ghostClass,!1),$e(U,u.ghostClass,!0)),ae!==S&&S!==et.active?ae=S:S===et.active&&ae&&(ae=null),_===S&&(S._ignoreWhileAnimating=i),S.animateAll(function(){y("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==_&&(_.animateAll(),_._ignoreWhileAnimating=null)),(i===U&&!U.animated||i===e&&!i.animated)&&(or=null),!u.dragoverBubble&&!t.rootEl&&i!==document&&(U.parentNode[Ue]._isOutsideThisEl(t.target),!Dt&&ki(t)),!u.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),w=!0}function P(){Ye=nn(U),si=nn(U,u.draggable),ye({sortable:S,name:"change",toEl:e,newIndex:Ye,newDraggableIndex:si,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=Dn(i,u.draggable,e,!0),y("dragOver"),et.eventCanceled)return w;if(U.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||S._ignoreWhileAnimating===i)return O(!1);if(na=!1,h&&!u.disabled&&(g?p||(l=Ut!==zt):ae===this||(this.lastPutMode=Oo.checkPull(this,h,U,t))&&f.checkPut(this,h,U,t))){if(b=this._getDirection(t,i)==="vertical",s=Qt(U),y("dragOverValid"),et.eventCanceled)return w;if(l)return Ut=zt,k(),this._hideClone(),y("revert"),et.eventCanceled||(Ai?zt.insertBefore(U,Ai):zt.appendChild(U)),O(!0);var F=Yc(e,u.draggable);if(!F||pT(t,b,this)&&!F.animated){if(F===U)return O(!1);if(F&&e===t.target&&(i=F),i&&(a=Qt(i)),Po(zt,e,U,s,i,a,t,!!i)!==!1)return k(),e.appendChild(U),Ut=e,P(),O(!0)}else if(F&&gT(t,b,this)){var D=_r(e,0,u,!0);if(D===U)return O(!1);if(i=D,a=Qt(i),Po(zt,e,U,s,i,a,t,!1)!==!1)return k(),e.insertBefore(U,D),Ut=e,P(),O(!0)}else if(i.parentNode===e){a=Qt(i);var L=0,E,R=U.parentNode!==e,W=!cT(U.animated&&U.toRect||s,i.animated&&i.toRect||a,b),X=b?"top":"left",Y=qd(i,"top","top")||qd(U,"top","top"),K=Y?Y.scrollTop:void 0;or!==i&&(E=a[X],ls=!1,Eo=!W&&u.invertSwap||R),L=mT(t,i,a,b,W?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Eo,or===i);var it;if(L!==0){var ht=nn(U);do ht-=L,it=Ut.children[ht];while(it&&(tt(it,"display")==="none"||it===at))}if(L===0||it===i)return O(!1);or=i,as=L;var lt=i.nextElementSibling,dt=!1;dt=L===1;var yt=Po(zt,e,U,s,i,a,t,dt);if(yt!==!1)return(yt===1||yt===-1)&&(dt=yt===1),mc=!0,setTimeout(dT,30),k(),dt&&!lt?e.appendChild(U):i.parentNode.insertBefore(U,dt?lt:i),Y&&gp(Y,0,K-Y.scrollTop),Ut=U.parentNode,E!==void 0&&!Eo&&(Uo=Math.abs(E-Qt(i)[X])),P(),O(!0)}if(e.contains(U))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xt(document,"mousemove",this._onTouchMove),xt(document,"touchmove",this._onTouchMove),xt(document,"pointermove",this._onTouchMove),xt(document,"dragover",ki),xt(document,"mousemove",ki),xt(document,"touchmove",ki)},_offUpEvents:function(){var t=this.el.ownerDocument;xt(t,"mouseup",this._onDrop),xt(t,"touchend",this._onDrop),xt(t,"pointerup",this._onDrop),xt(t,"touchcancel",this._onDrop),xt(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;if(Ye=nn(U),si=nn(U,i.draggable),Ae("drop",this,{evt:t}),Ut=U&&U.parentNode,Ye=nn(U),si=nn(U,i.draggable),et.eventCanceled){this._nulling();return}ar=!1,Eo=!1,ls=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_c(this.cloneId),_c(this._dragStartId),this.nativeDraggable&&(xt(document,"drop",this),xt(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),rs&&tt(document.body,"user-select",""),tt(U,"transform",""),t&&(Gr&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),at&&at.parentNode&&at.parentNode.removeChild(at),(zt===Ut||ae&&ae.lastPutMode!=="clone")&&Vt&&Vt.parentNode&&Vt.parentNode.removeChild(Vt),U&&(this.nativeDraggable&&xt(U,"dragend",this),Zl(U),U.style["will-change"]="",Gr&&!ar&&$e(U,ae?ae.options.ghostClass:this.options.ghostClass,!1),$e(U,this.options.chosenClass,!1),ye({sortable:this,name:"unchoose",toEl:Ut,newIndex:null,newDraggableIndex:null,originalEvent:t}),zt!==Ut?(Ye>=0&&(ye({rootEl:Ut,name:"add",toEl:Ut,fromEl:zt,originalEvent:t}),ye({sortable:this,name:"remove",toEl:Ut,originalEvent:t}),ye({rootEl:Ut,name:"sort",toEl:Ut,fromEl:zt,originalEvent:t}),ye({sortable:this,name:"sort",toEl:Ut,originalEvent:t})),ae&&ae.save()):Ye!==cr&&Ye>=0&&(ye({sortable:this,name:"update",toEl:Ut,originalEvent:t}),ye({sortable:this,name:"sort",toEl:Ut,originalEvent:t})),et.active&&((Ye==null||Ye===-1)&&(Ye=cr,si=os),ye({sortable:this,name:"end",toEl:Ut,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Ae("nulling",this),zt=U=Ut=at=Ai=Vt=Yo=oi=Ci=gn=Gr=Ye=si=cr=os=or=as=ae=Oo=et.dragged=et.ghost=et.clone=et.active=null,ra.forEach(function(t){t.checked=!0}),ra.length=ql=jl=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":U&&(this._onDragOver(t),hT(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,i=this.el.children,s=0,a=i.length,l=this.options;s<a;s++)e=i[s],Dn(e,l.draggable,this.el,!1)&&t.push(e.getAttribute(l.dataIdAttr)||bT(e));return t},sort:function(t,e){var i={},s=this.el;this.toArray().forEach(function(a,l){var u=s.children[l];Dn(u,this.options.draggable,s,!1)&&(i[a]=u)},this),e&&this.captureAnimationState(),t.forEach(function(a){i[a]&&(s.removeChild(i[a]),s.appendChild(i[a]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Dn(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(e===void 0)return i[t];var s=Ss.modifyOption(this,t,e);typeof s<"u"?i[t]=s:i[t]=e,t==="group"&&bp(i)},destroy:function(){Ae("destroy",this);var t=this.el;t[Ue]=null,xt(t,"mousedown",this._onTapStart),xt(t,"touchstart",this._onTapStart),xt(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(xt(t,"dragover",this),xt(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ia.splice(ia.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!oi){if(Ae("hideClone",this),et.eventCanceled)return;tt(Vt,"display","none"),this.options.removeCloneOnHide&&Vt.parentNode&&Vt.parentNode.removeChild(Vt),oi=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(oi){if(Ae("showClone",this),et.eventCanceled)return;U.parentNode==zt&&!this.options.group.revertClone?zt.insertBefore(Vt,U):Ai?zt.insertBefore(Vt,Ai):zt.appendChild(Vt),this.options.group.revertClone&&this.animate(U,Vt),tt(Vt,"display",""),oi=!1}}};function hT(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Po(n,t,e,i,s,a,l,u){var f,h=n[Ue],g=h.options.onMove,p;return window.CustomEvent&&!qn&&!ws?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=t,f.from=n,f.dragged=e,f.draggedRect=i,f.related=s||t,f.relatedRect=a||Qt(t),f.willInsertAfter=u,f.originalEvent=l,n.dispatchEvent(f),g&&(p=g.call(h,f,l)),p}function Zl(n){n.draggable=!1}function dT(){mc=!1}function gT(n,t,e){var i=Qt(_r(e.el,0,e.options,!0)),s=10;return t?n.clientX<i.left-s||n.clientY<i.top&&n.clientX<i.right:n.clientY<i.top-s||n.clientY<i.bottom&&n.clientX<i.left}function pT(n,t,e){var i=Qt(Yc(e.el,e.options.draggable)),s=10;return t?n.clientX>i.right+s||n.clientX<=i.right&&n.clientY>i.bottom&&n.clientX>=i.left:n.clientX>i.right&&n.clientY>i.top||n.clientX<=i.right&&n.clientY>i.bottom+s}function mT(n,t,e,i,s,a,l,u){var f=i?n.clientY:n.clientX,h=i?e.height:e.width,g=i?e.top:e.left,p=i?e.bottom:e.right,_=!1;if(!l){if(u&&Uo<h*s){if(!ls&&(as===1?f>g+h*a/2:f<p-h*a/2)&&(ls=!0),ls)_=!0;else if(as===1?f<g+Uo:f>p-Uo)return-as}else if(f>g+h*(1-s)/2&&f<p-h*(1-s)/2)return _T(t)}return _=_||l,_&&(f<g+h*a/2||f>p-h*a/2)?f>g+h/2?1:-1:0}function _T(n){return nn(U)<nn(n)?1:-1}function bT(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,i=0;e--;)i+=t.charCodeAt(e);return i.toString(36)}function vT(n){ra.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var i=t[e];i.checked&&ra.push(i)}}function Vo(n){return setTimeout(n,0)}function _c(n){return clearTimeout(n)}ca&&St(document,"touchmove",function(n){(et.active||ar)&&n.cancelable&&n.preventDefault()});et.utils={on:St,off:xt,css:tt,find:hp,is:function(t,e){return!!Dn(t,e,t,!1)},extend:eT,throttle:dp,closest:Dn,toggleClass:$e,clone:pp,index:nn,nextTick:Vo,cancelNextTick:_c,detectDirection:_p,getChild:_r};et.get=function(n){return n[Ue]};et.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(et.utils=An(An({},et.utils),i.utils)),Ss.mount(i)})};et.create=function(n,t){return new et(n,t)};et.version=ZM;var jt=[],Zr,bc,vc=!1,Jl,Ql,sa,Jr;function xT(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var i=e.originalEvent;this.sortable.nativeDraggable?St(document,"dragover",this._handleAutoScroll):this.options.supportPointer?St(document,"pointermove",this._handleFallbackAutoScroll):i.touches?St(document,"touchmove",this._handleFallbackAutoScroll):St(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var i=e.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?xt(document,"dragover",this._handleAutoScroll):(xt(document,"pointermove",this._handleFallbackAutoScroll),xt(document,"touchmove",this._handleFallbackAutoScroll),xt(document,"mousemove",this._handleFallbackAutoScroll)),Qd(),Xo(),nT()},nulling:function(){sa=bc=Zr=vc=Jr=Jl=Ql=null,jt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,i){var s=this,a=(e.touches?e.touches[0]:e).clientX,l=(e.touches?e.touches[0]:e).clientY,u=document.elementFromPoint(a,l);if(sa=e,i||this.options.forceAutoScrollFallback||ws||qn||rs){tc(e,this.options,u,i);var f=li(u,!0);vc&&(!Jr||a!==Jl||l!==Ql)&&(Jr&&Qd(),Jr=setInterval(function(){var h=li(document.elementFromPoint(a,l),!0);h!==f&&(f=h,Xo()),tc(e,s.options,h,i)},10),Jl=a,Ql=l)}else{if(!this.options.bubbleScroll||li(u,!0)===Tn()){Xo();return}tc(e,this.options,li(u,!1),!1)}}},Kn(n,{pluginName:"scroll",initializeByDefault:!0})}function Xo(){jt.forEach(function(n){clearInterval(n.pid)}),jt=[]}function Qd(){clearInterval(Jr)}var tc=dp(function(n,t,e,i){if(t.scroll){var s=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,l=t.scrollSensitivity,u=t.scrollSpeed,f=Tn(),h=!1,g;bc!==e&&(bc=e,Xo(),Zr=t.scroll,g=t.scrollFn,Zr===!0&&(Zr=li(e,!0)));var p=0,_=Zr;do{var b=_,S=Qt(b),w=S.top,y=S.bottom,k=S.left,O=S.right,P=S.width,F=S.height,D=void 0,L=void 0,E=b.scrollWidth,R=b.scrollHeight,W=tt(b),X=b.scrollLeft,Y=b.scrollTop;b===f?(D=P<E&&(W.overflowX==="auto"||W.overflowX==="scroll"||W.overflowX==="visible"),L=F<R&&(W.overflowY==="auto"||W.overflowY==="scroll"||W.overflowY==="visible")):(D=P<E&&(W.overflowX==="auto"||W.overflowX==="scroll"),L=F<R&&(W.overflowY==="auto"||W.overflowY==="scroll"));var K=D&&(Math.abs(O-s)<=l&&X+P<E)-(Math.abs(k-s)<=l&&!!X),it=L&&(Math.abs(y-a)<=l&&Y+F<R)-(Math.abs(w-a)<=l&&!!Y);if(!jt[p])for(var ht=0;ht<=p;ht++)jt[ht]||(jt[ht]={});(jt[p].vx!=K||jt[p].vy!=it||jt[p].el!==b)&&(jt[p].el=b,jt[p].vx=K,jt[p].vy=it,clearInterval(jt[p].pid),(K!=0||it!=0)&&(h=!0,jt[p].pid=setInterval((function(){i&&this.layer===0&&et.active._onTouchMove(sa);var lt=jt[this.layer].vy?jt[this.layer].vy*u:0,dt=jt[this.layer].vx?jt[this.layer].vx*u:0;typeof g=="function"&&g.call(et.dragged.parentNode[Ue],dt,lt,n,sa,jt[this.layer].el)!=="continue"||gp(jt[this.layer].el,dt,lt)}).bind({layer:p}),24))),p++}while(t.bubbleScroll&&_!==f&&(_=li(_,!1)));vc=h}},30),yp=function(t){var e=t.originalEvent,i=t.putSortable,s=t.dragEl,a=t.activeSortable,l=t.dispatchSortableEvent,u=t.hideGhostForTarget,f=t.unhideGhostForTarget;if(e){var h=i||a;u();var g=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,p=document.elementFromPoint(g.clientX,g.clientY);f(),h&&!h.el.contains(p)&&(l("spill"),this.onSpill({dragEl:s,putSortable:i}))}};function Uc(){}Uc.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=_r(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(e,s):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:yp};Kn(Uc,{pluginName:"revertOnSpill"});function Vc(){}Vc.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,s=i||this.sortable;s.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),s.animateAll()},drop:yp};Kn(Vc,{pluginName:"removeOnSpill"});et.mount(new xT);et.mount(Vc,Uc);function ec(n){n.parentElement!==null&&n.parentElement.removeChild(n)}function tg(n,t,e){const i=e===0?n.children[0]:n.children[e-1].nextSibling;n.insertBefore(t,i)}function yT(){return typeof window<"u"?window.console:global.console}const wT=yT();function ST(n){const t=Object.create(null);return function(i){return t[i]||(t[i]=n(i))}}const CT=/-(\w)/g,kT=ST(n=>n.replace(CT,(t,e)=>e.toUpperCase())),wp=["Start","Add","Remove","Update","End"],Sp=["Choose","Unchoose","Sort","Filter","Clone"],Cp=["Move"],DT=[Cp,wp,Sp].flatMap(n=>n).map(n=>`on${n}`),xc={manage:Cp,manageAndEmit:wp,emit:Sp};function MT(n){return DT.indexOf(n)!==-1}const TT=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function AT(n){return TT.includes(n)}function OT(n){return["transition-group","TransitionGroup"].includes(n)}function kp(n){return["id","class","role","style"].includes(n)||n.startsWith("data-")||n.startsWith("aria-")||n.startsWith("on")}function Dp(n){return n.reduce((t,[e,i])=>(t[e]=i,t),{})}function ET({$attrs:n,componentData:t={}}){return{...Dp(Object.entries(n).filter(([i,s])=>kp(i))),...t}}function IT({$attrs:n,callBackBuilder:t}){const e=Dp(Mp(n));Object.entries(t).forEach(([s,a])=>{xc[s].forEach(l=>{e[`on${l}`]=a(l)})});const i=`[data-draggable]${e.draggable||""}`;return{...e,draggable:i}}function Mp(n){return Object.entries(n).filter(([t,e])=>!kp(t)).map(([t,e])=>[kT(t),e]).filter(([t,e])=>!MT(t))}const eg=({el:n})=>n,PT=(n,t)=>n.__draggable_context=t,ng=n=>n.__draggable_context;class LT{constructor({nodes:{header:t,default:e,footer:i},root:s,realList:a}){this.defaultNodes=e,this.children=[...t,...e,...i],this.externalComponent=s.externalComponent,this.rootTransition=s.transition,this.tag=s.tag,this.realList=a}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(t,e){const{tag:i,children:s,_isRootComponent:a}=this;return t(i,e,a?{default:()=>s}:s)}updated(){const{defaultNodes:t,realList:e}=this;t.forEach((i,s)=>{PT(eg(i),{element:e[s],index:s})})}getUnderlyingVm(t){return ng(t)}getVmIndexFromDomIndex(t,e){const{defaultNodes:i}=this,{length:s}=i,a=e.children,l=a.item(t);if(l===null)return s;const u=ng(l);if(u)return u.index;if(s===0)return 0;const f=eg(i[0]),h=[...a].findIndex(g=>g===f);return t<h?0:s}}function RT(n,t){const e=n[t];return e?e():[]}function FT({$slots:n,realList:t,getKey:e}){const i=t||[],[s,a]=["header","footer"].map(f=>RT(n,f)),{item:l}=n;if(!l)throw new Error("draggable element must have an item slot");const u=i.flatMap((f,h)=>l({element:f,index:h}).map(g=>(g.key=e(f),g.props={...g.props||{},"data-draggable":!0},g)));if(u.length!==i.length)throw new Error("Item slot must have only one child");return{header:s,footer:a,default:u}}function BT(n){const t=OT(n),e=!AT(n)&&!t;return{transition:t,externalComponent:e,tag:e?Y1(n):t?U1:n}}function WT({$slots:n,tag:t,realList:e,getKey:i}){const s=FT({$slots:n,realList:e,getKey:i}),a=BT(t);return new LT({nodes:s,root:a,realList:e})}function Tp(n,t){_n(()=>this.$emit(n.toLowerCase(),t))}function Ap(n){return(t,e)=>{if(this.realList!==null)return this[`onDrag${n}`](t,e)}}function zT(n){const t=Ap.call(this,n);return(e,i)=>{t.call(this,e,i),Tp.call(this,n,e)}}let nc=null;const NT={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:n=>n},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},HT=["update:modelValue","change",...[...xc.manageAndEmit,...xc.emit].map(n=>n.toLowerCase())],$T=On({name:"draggable",inheritAttrs:!1,props:NT,emits:HT,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:n,$attrs:t,tag:e,componentData:i,realList:s,getKey:a}=this,l=WT({$slots:n,tag:e,realList:s,getKey:a});this.componentStructure=l;const u=ET({$attrs:t,componentData:i});return l.render(hs,u)}catch(n){return this.error=!0,hs("pre",{style:{color:"red"}},n.stack)}},created(){this.list!==null&&this.modelValue!==null&&wT.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:n,$el:t,componentStructure:e}=this;e.updated();const i=IT({$attrs:n,callBackBuilder:{manageAndEmit:a=>zT.call(this,a),emit:a=>Tp.bind(this,a),manage:a=>Ap.call(this,a)}}),s=t.nodeType===1?t:t.parentElement;this._sortable=new et(s,i),this.targetDomElement=s,s.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList(){const{list:n}=this;return n||this.modelValue},getKey(){const{itemKey:n}=this;return typeof n=="function"?n:t=>t[n]}},watch:{$attrs:{handler(n){const{_sortable:t}=this;t&&Mp(n).forEach(([e,i])=>{t.option(e,i)})},deep:!0}},methods:{getUnderlyingVm(n){return this.componentStructure.getUnderlyingVm(n)||null},getUnderlyingPotencialDraggableComponent(n){return n.__draggable_component__},emitChanges(n){_n(()=>this.$emit("change",n))},alterList(n){if(this.list){n(this.list);return}const t=[...this.modelValue];n(t),this.$emit("update:modelValue",t)},spliceList(){const n=t=>t.splice(...arguments);this.alterList(n)},updatePosition(n,t){const e=i=>i.splice(t,0,i.splice(n,1)[0]);this.alterList(e)},getRelatedContextFromMoveEvent({to:n,related:t}){const e=this.getUnderlyingPotencialDraggableComponent(n);if(!e)return{component:e};const i=e.realList,s={list:i,component:e};return n!==t&&i?{...e.getUnderlyingVm(t)||{},...s}:s},getVmIndexFromDomIndex(n){return this.componentStructure.getVmIndexFromDomIndex(n,this.targetDomElement)},onDragStart(n){this.context=this.getUnderlyingVm(n.item),n.item._underlying_vm_=this.clone(this.context.element),nc=n.item},onDragAdd(n){const t=n.item._underlying_vm_;if(t===void 0)return;ec(n.item);const e=this.getVmIndexFromDomIndex(n.newIndex);this.spliceList(e,0,t);const i={element:t,newIndex:e};this.emitChanges({added:i})},onDragRemove(n){if(tg(this.$el,n.item,n.oldIndex),n.pullMode==="clone"){ec(n.clone);return}const{index:t,element:e}=this.context;this.spliceList(t,1);const i={element:e,oldIndex:t};this.emitChanges({removed:i})},onDragUpdate(n){ec(n.item),tg(n.from,n.item,n.oldIndex);const t=this.context.index,e=this.getVmIndexFromDomIndex(n.newIndex);this.updatePosition(t,e);const i={element:this.context.element,oldIndex:t,newIndex:e};this.emitChanges({moved:i})},computeFutureIndex(n,t){if(!n.element)return 0;const e=[...t.to.children].filter(l=>l.style.display!=="none"),i=e.indexOf(t.related),s=n.component.getVmIndexFromDomIndex(i);return e.indexOf(nc)!==-1||!t.willInsertAfter?s:s+1},onDragMove(n,t){const{move:e,realList:i}=this;if(!e||!i)return!0;const s=this.getRelatedContextFromMoveEvent(n),a=this.computeFutureIndex(s,n),l={...this.context,futureIndex:a},u={...n,relatedContext:s,draggedContext:l};return e(u,t)},onDragEnd(){nc=null}}}),YT={class:"stock-page"},UT={class:"action-buttons"},VT={class:"stock-content"},XT={class:"stock-indicator"},KT={class:"kd-indicator"},qT={class:"rsi-indicator"},jT={class:"rsi-value"},GT={__name:"Stock",setup(n){const t=Mc(),e=hg("stock-search");Ht(null),Ht(null),Ht(0);const i=Ht(!1),s=Ht(null);dr(async()=>{try{t.loadUserStockList()}catch(D){console.error("初始化資料庫失敗:",D)}});const a=ne({get(){return t.userStockList},set(){}});function l(D){if(D.moved){const{element:L,newIndex:E,oldIndex:R}=D.moved;console.log("[onDragChange] 事件",{movedStock:L,newIndex:E,oldIndex:R,evt:D,userStockList:t.userStockList.map(Y=>({id:Y.id,order:Y.order}))});const W=t.userStockList.filter(Y=>Y.id!==L.id);let X;if(E===0){const Y=W[0]?.order||2e3;if(X=Math.floor(Y/2),Y<100){console.log("[onDragChange] 第一位間隔太小，觸發重新排序",{movedStock:L,firstOrder:Y,newOrder:X,originalList:W.map(K=>({id:K.id,order:K.order}))}),t.updateStockList(t.userStockList);return}console.log("[onDragChange] 移到第一位",{movedStock:L,firstOrder:Y,newOrder:X,originalList:W.map(K=>({id:K.id,order:K.order}))})}else if(E===W.length){const Y=W[W.length-1]?.order||0;X=Y+1e3,console.log("[onDragChange] 移到最後一位",{movedStock:L,lastOrder:Y,newOrder:X,originalList:W.map(K=>({id:K.id,order:K.order}))})}else{const Y=W[E-1]?.order||0,K=W[E]?.order||Y+2e3,it=Math.floor((Y+K)/2);if(console.log("[onDragChange] 移到中間",{movedStock:L,prevOrder:Y,nextOrder:K,midOrder:it,originalList:W.map(ht=>({id:ht.id,order:ht.order}))}),K-Y<100){console.log("[onDragChange] 間隔太小，觸發重新排序",{movedStock:L,prevOrder:Y,nextOrder:K,originalList:W.map(ht=>({id:ht.id,order:ht.order}))}),t.updateStockList(t.userStockList);return}X=it}console.log("[onDragChange] 最終更新",{movedStock:L,newOrder:X}),t.updateSingleStockOrder(L.id,X)}}function u(){e.emit(!0)}function f(D,L){console.log(`Stock ${L} indicator changed to ${D}`)}function h(D){return D>0?"price-up":D<0?"price-down":"price-flat"}const g=ne(()=>s.value?[{name:`K 值: ${s.value.k}`,subname:"快線指標 (敏感度高)",color:"#4286f5"},{name:`D 值: ${s.value.d}`,subname:"慢線指標 (敏感度低)",color:"#e75c9a"},{name:`J 值: ${s.value.j}`,subname:"超買超賣指標",color:"#666"},{name:`更新時間: ${s.value.date}`,subname:"週線資料最後更新",color:"#999"}]:[]);function p(D){s.value=D,i.value=!0}function _(D){console.log("KDJ ActionSheet 選擇:",D.name),i.value=!1,D.name.includes("K 值")?Di("K 值反映股價短期波動"):D.name.includes("D 值")?Di("D 值是 K 值的移動平均"):D.name.includes("J 值")&&Di("J 值 > 80 超買，< 20 超賣")}function b(D){return D>70?"rsi-overbought":D<30?"rsi-oversold":"rsi-normal"}function S(D){return D>70?"超買":D<30?"超賣":"正常"}function w(){}function y(D){Di(`買賣 ${D.name}`)}function k(D){Di(`${D.name} 策略設定`)}function O(D){Di(`${D.name} 其他功能`)}function P(D){setTimeout(()=>{const L=document.querySelector(".stock-row.sortable-chosen");if(L){const E=L.querySelector("canvas"),R=document.querySelector(".stock-row.sortable-drag");if(E&&R){const W=R.querySelector("canvas");if(W&&E.width&&E.height){W.width=E.width,W.height=E.height;const X=W.getContext("2d");X.clearRect(0,0,W.width,W.height),X.drawImage(E,0,0)}}}},0)}function F(D){console.log("拖曳結束",D)}return V1(document,"visibilitychange",()=>{}),dr(()=>{}),(D,L)=>(Ee(),rn("div",YT,[j(Oe($T),{modelValue:a.value,"onUpdate:modelValue":L[1]||(L[1]=E=>a.value=E),"item-key":"id",delay:200,animation:200,"ghost-class":"stock-row-ghost",onStart:P,onEnd:F,onChange:l},{item:pn(({element:E,index:R})=>[mt("div",{class:"stock-row",onContextmenu:L[0]||(L[0]=X1(()=>{},["prevent"]))},[j(Oe(Dw),{"left-width":200,onClickLeft:w},{left:pn(()=>[mt("div",UT,[j(Oe(Ll),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:W=>y(E)},{default:pn(()=>L[3]||(L[3]=[mt("div",null,"交 易",-1),mt("div",null,"記 錄",-1)])),_:2,__:[3]},1032,["onClick"]),j(Oe(Ll),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:W=>k(E)},{default:pn(()=>L[4]||(L[4]=[rc("策 略",-1)])),_:2,__:[4]},1032,["onClick"]),j(Oe(Ll),{type:"default",size:"small",class:"action-btn other-btn",onClick:W=>O(E)},{default:pn(()=>L[5]||(L[5]=[rc("更 多",-1)])),_:2,__:[5]},1032,["onClick"])])]),default:pn(()=>[mt("div",VT,[j(KM,{name:E.name,code:E.code,price:E.price,change:E.change,"change-percent":E.changePercent,"price-class":h(E.change),progress:E.progress,"progress-text":E.progressText},null,8,["name","code","price","change","change-percent","price-class","progress","progress-text"]),mt("div",XT,[j(Oe(K1),{"show-indicators":!1,loop:!1,autoplay:0,onChange:W=>f(W,R)},{default:pn(()=>[j(Oe(Ch),{class:"indicator-content"},{default:pn(()=>[mt("div",KT,[j(BM,{width:120,height:60,"stock-id":E.id,onKdjClick:p},null,8,["stock-id"])])]),_:2},1024),j(Oe(Ch),{class:"indicator-content"},{default:pn(()=>[mt("div",qT,[mt("div",jT,Ie(E.rsi),1),mt("div",{class:oc(["rsi-trend",b(E.rsi)])},Ie(S(E.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],32)]),_:1},8,["modelValue"]),j(Oe(_w),{axis:"xy",magnetic:"x",gap:{x:20,y:80},style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"rgba(255, 224, 102, 0.9)","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:u},{default:pn(()=>L[6]||(L[6]=[mt("div",{class:"bubble-content",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[mt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24"},[mt("path",{fill:"#322b0d","fill-rule":"evenodd",d:"M13 13v7a1 1 0 0 1-2 0v-7H4a1 1 0 0 1 0-2h7V4a1 1 0 0 1 2 0v7h7a1 1 0 0 1 0 2z"})]),mt("span",{class:"bubble-label",style:{color:"#322b0d","font-size":"14px"}},"新增")],-1)])),_:1,__:[6]}),j(eS),j(Oe(vg),{show:i.value,"onUpdate:show":L[2]||(L[2]=E=>i.value=E),actions:g.value,"cancel-text":"取消",title:"KDJ 指標詳情",onSelect:_},null,8,["show","actions"])]))}},nA=Cc(GT,[["__scopeId","data-v-59e5395c"]]);export{nA as default};
