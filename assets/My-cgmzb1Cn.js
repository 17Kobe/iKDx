import{aW as W,k as r,aX as U,x as C,an as z,o as h,z as M,aY as S,a2 as P,a9 as f,a5 as g,a7 as s,ae as n,ab as T,ac as A,ao as D,ad as $,a as _,a8 as y,a6 as V,aZ as B}from"./index-CMtmB14S.js";import{A as x}from"./index-BnTC3KXM.js";const j=W("theme",()=>{const u=r(0),t=r(!1),i=U();return C([u,i],()=>{u.value===0?t.value=i.value:u.value===1?t.value=!1:t.value=!0,document.body.classList.toggle("dark",t.value)},{immediate:!0}),{mode:u,isDark:t}}),q={class:"worker-monitor"},F={class:"monitor-header"},L={class:"total-cpu"},O={class:"pool-stats"},I={class:"pool-name"},N={class:"pool-info"},E={class:"stat-item"},Q={class:"value"},X={class:"stat-item"},Y={class:"value busy"},Z={class:"stat-item"},G={class:"value queue"},H={class:"stat-item"},J={class:"value utilization"},K={class:"progress-bar"},R={class:"overall-stats"},ss={class:"stat-box"},es={class:"stat-value"},ts={class:"stat-box"},as={class:"stat-value"},os={class:"stat-box"},ls={class:"stat-value"},ns={__name:"WorkerMonitor",setup(u){const t=r({}),i=r(navigator.hardwareConcurrency||4),d=h(()=>Object.values(t.value).reduce((l,e)=>l+e.busyWorkers,0)),p=h(()=>Object.values(t.value).reduce((l,e)=>l+e.queuedTasks,0)),b=h(()=>{const l=Object.values(t.value);return l.length===0?"0.0":(l.reduce((c,w)=>{const v=parseFloat(w.utilization)||0;return c+v},0)/l.length).toFixed(1)}),k=(l,e,o)=>{t.value={...o}};return M(()=>{S.onAllStatusChange(k),t.value=S.getAllStatus()}),P(()=>{}),(l,e)=>(g(),f("div",q,[s("div",F,[e[0]||(e[0]=s("h3",null,"Worker Pool 監控",-1)),s("span",L,"CPU 核心數: "+n(i.value),1)]),s("div",O,[(g(!0),f(T,null,A(t.value,(o,c)=>(g(),f("div",{key:c,class:D(["pool-card",{"pool-busy":o.busyWorkers>0}])},[s("div",I,n(c),1),s("div",N,[s("div",E,[e[1]||(e[1]=s("span",{class:"label"},"可用:",-1)),s("span",Q,n(o.availableWorkers)+"/"+n(o.totalWorkers),1)]),s("div",X,[e[2]||(e[2]=s("span",{class:"label"},"使用中:",-1)),s("span",Y,n(o.busyWorkers),1)]),s("div",Z,[e[3]||(e[3]=s("span",{class:"label"},"排隊:",-1)),s("span",G,n(o.queuedTasks),1)]),s("div",H,[e[4]||(e[4]=s("span",{class:"label"},"使用率:",-1)),s("span",J,n(o.utilization)+"%",1)])]),s("div",K,[s("div",{class:"progress-fill",style:$({width:o.utilization+"%"})},null,4)])],2))),128))]),s("div",R,[s("div",ss,[s("div",es,n(d.value),1),e[5]||(e[5]=s("div",{class:"stat-label"},"總使用中",-1))]),s("div",ts,[s("div",as,n(p.value),1),e[6]||(e[6]=s("div",{class:"stat-label"},"總排隊",-1))]),s("div",os,[s("div",ls,n(b.value)+"%",1),e[7]||(e[7]=s("div",{class:"stat-label"},"整體使用率",-1))])])]))}},is=z(ns,[["__scopeId","data-v-4aea0f26"]]),rs={class:"my-page"},us={class:"setting-list"},ds={class:"setting-right"},cs={class:"setting-value"},vs={style:{padding:"20px"}},ps={__name:"My",setup(u){const t=j(),i=r(!1),d=r(!1),p=r(!1),b=h(()=>{switch(t.mode){case 0:return"跟隨系統";case 1:return"亮";case 2:return"暗";default:return"跟隨系統"}}),k=[{name:"跟隨系統",value:0},{name:"亮",value:1},{name:"暗",value:2}],l=[{name:"Worker Pool 監控",value:"worker"},{name:"應用資訊",value:"info"},{name:"清除快取",value:"clear"}];function e(){i.value=!0}function o(){d.value=!0}function c(v){t.mode=v.value,i.value=!1}function w(v){switch(d.value=!1,v.value){case"worker":p.value=!0;break;case"info":console.log("顯示應用資訊");break;case"clear":console.log("清除快取");break}}return(v,a)=>(g(),f("div",rs,[s("div",us,[s("div",{class:"setting-item",onClick:e},[a[4]||(a[4]=s("div",{class:"setting-left"},[s("span",{class:"setting-title"},"主題")],-1)),s("div",ds,[s("span",cs,n(b.value),1),a[3]||(a[3]=s("span",{class:"arrow"},">",-1))])]),s("div",{class:"setting-item",onClick:o},a[5]||(a[5]=[s("div",{class:"setting-left"},[s("span",{class:"setting-title"},"開發者")],-1),s("div",{class:"setting-right"},[s("span",{class:"arrow"},">")],-1)]))]),_(y(x),{show:i.value,"onUpdate:show":a[0]||(a[0]=m=>i.value=m),actions:k,title:"選擇主題","cancel-text":"取消",onSelect:c},null,8,["show"]),_(y(x),{show:d.value,"onUpdate:show":a[1]||(a[1]=m=>d.value=m),actions:l,title:"開發者選項","cancel-text":"取消",onSelect:w},null,8,["show"]),_(y(B),{show:p.value,"onUpdate:show":a[2]||(a[2]=m=>p.value=m),position:"bottom",style:{height:"70%"},round:""},{default:V(()=>[s("div",vs,[a[6]||(a[6]=s("div",{style:{"text-align":"center","margin-bottom":"20px","font-size":"18px","font-weight":"bold"}}," Worker Pool 監控 ",-1)),_(is)])]),_:1},8,["show"])]))}},hs=z(ps,[["__scopeId","data-v-12a79421"]]);export{hs as default};
