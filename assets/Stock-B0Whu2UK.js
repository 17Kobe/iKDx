import{d as He,t as Be,m as Re,n as st,c as qe,r as G,a as At,u as Pt,b as yo,e as oe,f as rn,w as De,g as bo,o as Ye,h as Bn,i as wo,j as Rn,k as Yn,l as Mt,p as B,q as fn,s as Se,v as vt,x as dt,y as yt,z as bt,A as sn,B as Ge,C as So,D as _o,E as hn,F as gn,G as Do,H as xo,I as Eo,J as Hn,T as To,K as Ln,L as Kt,M as Co,N as $o,O as ko,P as Io,Q as Oo,R as Ao,S as Po,U as Mo,V as No,W as Wn,X as pn,Y as Fo,Z as Bo,_ as Un,$ as Ro,a0 as Yo,a1 as Ho,a2 as Lo,a3 as Wo,a4 as Ft,a5 as Uo,a6 as zo,a7 as Vo,a8 as jo,a9 as Xo,aa as zn,ab as qo,ac as Go,ad as Ko,ae as me,af as ce,ag as U,ah as ne,ai as we,aj as Zo,ak as mn,al as vn,am as Vn,an as fe,ao as Zt,ap as Ue,aq as ln,ar as Jo,as as Jt,at as Qo,au as ea,av as yn,aw as ta,ax as na}from"./index-HxKHKsMR.js";import{S as oa,B as wt}from"./index-CkSSC-1t.js";function bn(e,t){return e.reduce((n,o)=>Math.abs(n-t)<Math.abs(o-t)?n:o)}const[jn,ft]=qe("swipe"),aa={loop:Be,width:st,height:st,vertical:Boolean,autoplay:Re(0),duration:Re(500),touchable:Be,lazyRender:Boolean,initialSwipe:Re(0),indicatorColor:String,showIndicators:Be,stopPropagation:Be},Xn=Symbol(jn);var ia=He({name:jn,props:aa,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:n}){const o=G(),a=G(),i=At({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let r=!1;const s=Pt(),{children:l,linkChildren:u}=yo(Xn),d=oe(()=>l.length),f=oe(()=>i[e.vertical?"height":"width"]),c=oe(()=>e.vertical?s.deltaY.value:s.deltaX.value),h=oe(()=>i.rect?(e.vertical?i.rect.height:i.rect.width)-f.value*d.value:0),g=oe(()=>f.value?Math.ceil(Math.abs(h.value)/f.value):d.value),p=oe(()=>d.value*f.value),D=oe(()=>(i.active+d.value)%d.value),v=oe(()=>{const x=e.vertical?"vertical":"horizontal";return s.direction.value===x}),$=oe(()=>{const x={transitionDuration:`${i.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+i.offset.toFixed(2)}px)`};if(f.value){const R=e.vertical?"height":"width",L=e.vertical?"width":"height";x[R]=`${p.value}px`,x[L]=e[L]?`${e[L]}px`:""}return x}),T=x=>{const{active:R}=i;return x?e.loop?vt(R+x,-1,d.value):vt(R+x,0,g.value):R},S=(x,R=0)=>{let L=x*f.value;e.loop||(L=Math.min(L,-h.value));let j=R-L;return e.loop||(j=vt(j,h.value,0)),j},y=({pace:x=0,offset:R=0,emitChange:L})=>{if(d.value<=1)return;const{active:j}=i,X=T(x),ge=S(X,R);if(e.loop){if(l[0]&&ge!==h.value){const ve=ge<h.value;l[0].setOffset(ve?p.value:0)}if(l[d.value-1]&&ge!==0){const ve=ge>0;l[d.value-1].setOffset(ve?-p.value:0)}}i.active=X,i.offset=ge,L&&X!==j&&t("change",D.value)},F=()=>{i.swiping=!0,i.active<=-1?y({pace:d.value}):i.active>=d.value&&y({pace:-d.value})},W=()=>{F(),s.reset(),dt(()=>{i.swiping=!1,y({pace:-1,emitChange:!0})})},I=()=>{F(),s.reset(),dt(()=>{i.swiping=!1,y({pace:1,emitChange:!0})})};let P;const H=()=>clearTimeout(P),k=()=>{H(),+e.autoplay>0&&d.value>1&&(P=setTimeout(()=>{I(),k()},+e.autoplay))},K=(x=+e.initialSwipe)=>{if(!o.value)return;const R=()=>{var L,j;if(!fn(o)){const X={width:o.value.offsetWidth,height:o.value.offsetHeight};i.rect=X,i.width=+((L=e.width)!=null?L:X.width),i.height=+((j=e.height)!=null?j:X.height)}d.value&&(x=Math.min(d.value-1,x),x===-1&&(x=d.value-1)),i.active=x,i.swiping=!0,i.offset=S(x),l.forEach(X=>{X.setOffset(0)}),k()};fn(o)?Se().then(R):R()},ee=()=>K(i.active);let C;const _=x=>{!e.touchable||x.touches.length>1||(s.start(x),r=!1,C=Date.now(),H(),F())},m=x=>{e.touchable&&i.swiping&&(s.move(x),v.value&&(!e.loop&&(i.active===0&&c.value>0||i.active===d.value-1&&c.value<0)||(sn(x,e.stopPropagation),y({offset:c.value}),r||(t("dragStart",{index:D.value}),r=!0))))},E=()=>{if(!e.touchable||!i.swiping)return;const x=Date.now()-C,R=c.value/x;if((Math.abs(R)>.25||Math.abs(c.value)>f.value/2)&&v.value){const j=e.vertical?s.offsetY.value:s.offsetX.value;let X=0;e.loop?X=j>0?c.value>0?-1:1:0:X=-Math[c.value>0?"ceil":"floor"](c.value/f.value),y({pace:X,emitChange:!0})}else c.value&&y({pace:0});r=!1,i.swiping=!1,t("dragEnd",{index:D.value}),k()},w=(x,R={})=>{F(),s.reset(),dt(()=>{let L;e.loop&&x===d.value?L=i.active===0?0:x:L=x%d.value,R.immediate?dt(()=>{i.swiping=!1}):i.swiping=!1,y({pace:L-i.active,emitChange:!0})})},M=(x,R)=>{const L=R===D.value,j=L?{backgroundColor:e.indicatorColor}:void 0;return B("i",{style:j,class:ft("indicator",{active:L})},null)},N=()=>{if(n.indicator)return n.indicator({active:D.value,total:d.value});if(e.showIndicators&&d.value>1)return B("div",{class:ft("indicators",{vertical:e.vertical})},[Array(d.value).fill("").map(M)])};return rn({prev:W,next:I,state:i,resize:ee,swipeTo:w}),u({size:f,props:e,count:d,activeIndicator:D}),De(()=>e.initialSwipe,x=>K(+x)),De(d,()=>K(i.active)),De(()=>e.autoplay,k),De([yt,bt,()=>e.width,()=>e.height],ee),De(bo(),x=>{x==="visible"?k():H()}),Ye(K),Bn(()=>K(i.active)),wo(()=>K(i.active)),Rn(H),Yn(H),Mt("touchmove",m,{target:a}),()=>{var x;return B("div",{ref:o,class:ft()},[B("div",{ref:a,style:$.value,class:ft("track",{vertical:e.vertical}),onTouchstartPassive:_,onTouchend:E,onTouchcancel:E},[(x=n.default)==null?void 0:x.call(n)]),N()])}}});const ra=Ge(ia),[sa,la]=qe("swipe-item");var ca=He({name:sa,setup(e,{slots:t}){let n;const o=At({offset:0,inited:!1,mounted:!1}),{parent:a,index:i}=So(Xn);if(!a)return;const r=oe(()=>{const u={},{vertical:d}=a.props;return a.size.value&&(u[d?"height":"width"]=`${a.size.value}px`),o.offset&&(u.transform=`translate${d?"Y":"X"}(${o.offset}px)`),u}),s=oe(()=>{const{loop:u,lazyRender:d}=a.props;if(!d||n)return!0;if(!o.mounted)return!1;const f=a.activeIndicator.value,c=a.count.value-1,h=f===0&&u?c:f-1,g=f===c&&u?0:f+1;return n=i.value===f||i.value===h||i.value===g,n}),l=u=>{o.offset=u};return Ye(()=>{Se(()=>{o.mounted=!0})}),rn({setOffset:l}),()=>{var u;return B("div",{class:la(),style:r.value},[s.value?(u=t.default)==null?void 0:u.call(t):null])}}});const wn=Ge(ca),ua={gap:{type:[Number,Object],default:24},icon:String,axis:_o("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[da,Sn]=qe("floating-bubble");var fa=He({name:da,inheritAttrs:!1,props:ua,emits:["click","update:offset","offsetChange"],setup(e,{slots:t,emit:n,attrs:o}){const a=G(),i=G({x:0,y:0,width:0,height:0}),r=oe(()=>hn(e.gap)?e.gap.x:e.gap),s=oe(()=>hn(e.gap)?e.gap.y:e.gap),l=oe(()=>({top:s.value,right:yt.value-i.value.width-r.value,bottom:bt.value-i.value.height-s.value,left:r.value})),u=G(!1);let d=!1;const f=oe(()=>{const y={},F=gn(i.value.x),W=gn(i.value.y);return y.transform=`translate3d(${F}, ${W}, 0)`,(u.value||!d)&&(y.transition="none"),y}),c=()=>{if(!S.value)return;const{width:y,height:F}=Ln(a.value),{offset:W}=e;i.value={x:W?W.x:yt.value-y-r.value,y:W?W.y:bt.value-F-s.value,width:y,height:F}},h=Pt();let g=0,p=0;const D=y=>{h.start(y),u.value=!0,g=i.value.x,p=i.value.y};Mt("touchmove",y=>{if(y.preventDefault(),h.move(y),e.axis!=="lock"&&!h.isTap.value){if(e.axis==="x"||e.axis==="xy"){let W=g+h.deltaX.value;W<l.value.left&&(W=l.value.left),W>l.value.right&&(W=l.value.right),i.value.x=W}if(e.axis==="y"||e.axis==="xy"){let W=p+h.deltaY.value;W<l.value.top&&(W=l.value.top),W>l.value.bottom&&(W=l.value.bottom),i.value.y=W}const F=Kt(i.value,["x","y"]);n("update:offset",F)}},{target:a});const $=()=>{u.value=!1,Se(()=>{if(e.magnetic==="x"){const y=bn([l.value.left,l.value.right],i.value.x);i.value.x=y}if(e.magnetic==="y"){const y=bn([l.value.top,l.value.bottom],i.value.y);i.value.y=y}if(!h.isTap.value){const y=Kt(i.value,["x","y"]);n("update:offset",y),(g!==y.x||p!==y.y)&&n("offsetChange",y)}})},T=y=>{h.isTap.value?n("click",y):y.stopPropagation()};Ye(()=>{c(),Se(()=>{d=!0})}),De([yt,bt,r,s,()=>e.offset],c,{deep:!0});const S=G(!0);return Bn(()=>{S.value=!0}),Rn(()=>{e.teleport&&(S.value=!1)}),()=>{const y=Do(B("div",Hn({class:Sn(),ref:a,onTouchstartPassive:D,onTouchend:$,onTouchcancel:$,onClickCapture:T,style:f.value},o),[t.default?t.default():B(Eo,{name:e.icon,class:Sn("icon")},null)]),[[xo,S.value]]);return e.teleport?B(To,{to:e.teleport},{default:()=>[y]}):y}}});const ha=Ge(fa),[ga,Je,pa]=qe("pull-refresh"),qn=50,ma=["pulling","loosing","success"],va={disabled:Boolean,modelValue:Boolean,headHeight:Re(qn),successText:String,pullingText:String,loosingText:String,loadingText:String,pullDistance:st,successDuration:Re(500),animationDuration:Re(300)};var ya=He({name:ga,props:va,emits:["change","refresh","update:modelValue"],setup(e,{emit:t,slots:n}){let o;const a=G(),i=G(),r=Co(a),s=At({status:"normal",distance:0,duration:0}),l=Pt(),u=()=>{if(e.headHeight!==qn)return{height:`${e.headHeight}px`}},d=()=>s.status!=="loading"&&s.status!=="success"&&!e.disabled,f=S=>{const y=+(e.pullDistance||e.headHeight);return S>y&&(S<y*2?S=y+(S-y)/2:S=y*1.5+(S-y*2)/4),Math.round(S)},c=(S,y)=>{const F=+(e.pullDistance||e.headHeight);s.distance=S,y?s.status="loading":S===0?s.status="normal":S<F?s.status="pulling":s.status="loosing",t("change",{status:s.status,distance:S})},h=()=>{const{status:S}=s;return S==="normal"?"":e[`${S}Text`]||pa(S)},g=()=>{const{status:S,distance:y}=s;if(n[S])return n[S]({distance:y});const F=[];return ma.includes(S)&&F.push(B("div",{class:Je("text")},[h()])),S==="loading"&&F.push(B($o,{class:Je("loading")},{default:h})),F},p=()=>{s.status="success",setTimeout(()=>{c(0)},+e.successDuration)},D=S=>{o=ko(r.value)===0,o&&(s.duration=0,l.start(S))},v=S=>{d()&&D(S)},$=S=>{if(d()){o||D(S);const{deltaY:y}=l;l.move(S),o&&y.value>=0&&l.isVertical()&&(sn(S),c(f(y.value)))}},T=()=>{o&&l.deltaY.value&&d()&&(s.duration=+e.animationDuration,s.status==="loosing"?(c(+e.headHeight,!0),t("update:modelValue",!0),Se(()=>t("refresh"))):c(0))};return De(()=>e.modelValue,S=>{s.duration=+e.animationDuration,S?c(+e.headHeight,!0):n.success||e.successText?p():c(0,!1)}),Mt("touchmove",$,{target:i}),()=>{var S;const y={transitionDuration:`${s.duration}ms`,transform:s.distance?`translate3d(0,${s.distance}px, 0)`:""};return B("div",{ref:a,class:Je()},[B("div",{ref:i,class:Je("track"),style:y,onTouchstartPassive:v,onTouchend:T,onTouchcancel:T},[B("div",{class:Je("head"),style:u()},[g()]),(S=n.default)==null?void 0:S.call(n)])])}}});const ba=Ge(ya),wa=e=>e?.includes("/"),Sa=[...Oo,"round","closeOnPopstate","safeAreaInsetBottom"],_a={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[Da,ye,xa]=qe("share-sheet"),Ea=Io({},Po,{title:String,round:Be,options:Mo(),cancelText:String,description:String,closeOnPopstate:Be,safeAreaInsetBottom:Be});var Ta=He({name:Da,props:Ea,emits:["cancel","select","update:show"],setup(e,{emit:t,slots:n}){const o=c=>t("update:show",c),a=()=>{o(!1),t("cancel")},i=(c,h)=>t("select",c,h),r=()=>{const c=n.title?n.title():e.title,h=n.description?n.description():e.description;if(c||h)return B("div",{class:ye("header")},[c&&B("h2",{class:ye("title")},[c]),h&&B("span",{class:ye("description")},[h])])},s=c=>wa(c)?B("img",{src:c,class:ye("image-icon")},null):B("div",{class:ye("icon",[c])},[B(Wn,{name:_a[c]||c},null)]),l=(c,h)=>{const{name:g,icon:p,className:D,description:v}=c;return B("div",{role:"button",tabindex:0,class:[ye("option"),D,No],onClick:()=>i(c,h)},[s(p),g&&B("span",{class:ye("name")},[g]),v&&B("span",{class:ye("option-description")},[v])])},u=(c,h)=>B("div",{class:ye("options",{border:h})},[c.map(l)]),d=()=>{const{options:c}=e;return Array.isArray(c[0])?c.map((h,g)=>u(h,g!==0)):u(c)},f=()=>{var c;const h=(c=e.cancelText)!=null?c:xa("cancel");if(n.cancel||h)return B("button",{type:"button",class:ye("cancel"),onClick:a},[n.cancel?n.cancel():h])};return()=>B(Ao,Hn({class:ye(),position:"bottom","onUpdate:show":o},Kt(e,Sa)),{default:()=>[r(),d(),f()]})}});const Ca=Ge(Ta),[$a,Bt]=qe("swipe-cell"),ka={name:Re(""),disabled:Boolean,leftWidth:st,rightWidth:st,beforeClose:Function,stopPropagation:Boolean};var Ia=He({name:$a,props:ka,emits:["open","close","click"],setup(e,{emit:t,slots:n}){let o,a,i,r;const s=G(),l=G(),u=G(),d=At({offset:0,dragging:!1}),f=Pt(),c=I=>I.value?Ln(I).width:0,h=oe(()=>pn(e.leftWidth)?+e.leftWidth:c(l)),g=oe(()=>pn(e.rightWidth)?+e.rightWidth:c(u)),p=I=>{d.offset=I==="left"?h.value:-g.value,o||(o=!0,t("open",{name:e.name,position:I}))},D=I=>{d.offset=0,o&&(o=!1,t("close",{name:e.name,position:I}))},v=I=>{const P=Math.abs(d.offset),H=.15,k=o?1-H:H,K=I==="left"?h.value:g.value;K&&P>K*k?p(I):D(I)},$=I=>{e.disabled||(i=d.offset,f.start(I))},T=I=>{if(e.disabled)return;const{deltaX:P}=f;f.move(I),f.isHorizontal()&&(a=!0,d.dragging=!0,(!o||P.value*i<0)&&sn(I,e.stopPropagation),d.offset=vt(P.value+i,-g.value,h.value))},S=()=>{d.dragging&&(d.dragging=!1,v(d.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},y=(I="outside",P)=>{r||(t("click",I),o&&!a&&(r=!0,Bo(e.beforeClose,{args:[{event:P,name:e.name,position:I}],done:()=>{r=!1,D(I)},canceled:()=>r=!1,error:()=>r=!1})))},F=I=>P=>{(a||o)&&P.stopPropagation(),!a&&y(I,P)},W=(I,P)=>{const H=n[I];if(H)return B("div",{ref:P,class:Bt(I),onClick:F(I)},[H()])};return rn({open:p,close:D}),Fo(s,I=>y("outside",I),{eventName:"touchstart"}),Mt("touchmove",T,{target:s}),()=>{var I;const P={transform:`translate3d(${d.offset}px, 0, 0)`,transitionDuration:d.dragging?"0s":".6s"};return B("div",{ref:s,class:Bt(),onClick:F("cell"),onTouchstartPassive:$,onTouchend:S,onTouchcancel:S},[B("div",{class:Bt("wrapper"),style:P},[W("left",l),(I=n.default)==null?void 0:I.call(n),W("right",u)])])}}});const Oa=Ge(Ia);function Aa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var St={exports:{}},Pa=St.exports,_n;function Ma(){return _n||(_n=1,function(e,t){(function(n,o){e.exports=o()})(Pa,function(){var n=1e3,o=6e4,a=36e5,i="millisecond",r="second",s="minute",l="hour",u="day",d="week",f="month",c="quarter",h="year",g="date",p="Invalid Date",D=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(C){var _=["th","st","nd","rd"],m=C%100;return"["+C+(_[(m-20)%10]||_[m]||_[0])+"]"}},T=function(C,_,m){var E=String(C);return!E||E.length>=_?C:""+Array(_+1-E.length).join(m)+C},S={s:T,z:function(C){var _=-C.utcOffset(),m=Math.abs(_),E=Math.floor(m/60),w=m%60;return(_<=0?"+":"-")+T(E,2,"0")+":"+T(w,2,"0")},m:function C(_,m){if(_.date()<m.date())return-C(m,_);var E=12*(m.year()-_.year())+(m.month()-_.month()),w=_.clone().add(E,f),M=m-w<0,N=_.clone().add(E+(M?-1:1),f);return+(-(E+(m-w)/(M?w-N:N-w))||0)},a:function(C){return C<0?Math.ceil(C)||0:Math.floor(C)},p:function(C){return{M:f,y:h,w:d,d:u,D:g,h:l,m:s,s:r,ms:i,Q:c}[C]||String(C||"").toLowerCase().replace(/s$/,"")},u:function(C){return C===void 0}},y="en",F={};F[y]=$;var W="$isDayjsObject",I=function(C){return C instanceof K||!(!C||!C[W])},P=function C(_,m,E){var w;if(!_)return y;if(typeof _=="string"){var M=_.toLowerCase();F[M]&&(w=M),m&&(F[M]=m,w=M);var N=_.split("-");if(!w&&N.length>1)return C(N[0])}else{var x=_.name;F[x]=_,w=x}return!E&&w&&(y=w),w||!E&&y},H=function(C,_){if(I(C))return C.clone();var m=typeof _=="object"?_:{};return m.date=C,m.args=arguments,new K(m)},k=S;k.l=P,k.i=I,k.w=function(C,_){return H(C,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var K=function(){function C(m){this.$L=P(m.locale,null,!0),this.parse(m),this.$x=this.$x||m.x||{},this[W]=!0}var _=C.prototype;return _.parse=function(m){this.$d=function(E){var w=E.date,M=E.utc;if(w===null)return new Date(NaN);if(k.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var N=w.match(D);if(N){var x=N[2]-1||0,R=(N[7]||"0").substring(0,3);return M?new Date(Date.UTC(N[1],x,N[3]||1,N[4]||0,N[5]||0,N[6]||0,R)):new Date(N[1],x,N[3]||1,N[4]||0,N[5]||0,N[6]||0,R)}}return new Date(w)}(m),this.init()},_.init=function(){var m=this.$d;this.$y=m.getFullYear(),this.$M=m.getMonth(),this.$D=m.getDate(),this.$W=m.getDay(),this.$H=m.getHours(),this.$m=m.getMinutes(),this.$s=m.getSeconds(),this.$ms=m.getMilliseconds()},_.$utils=function(){return k},_.isValid=function(){return this.$d.toString()!==p},_.isSame=function(m,E){var w=H(m);return this.startOf(E)<=w&&w<=this.endOf(E)},_.isAfter=function(m,E){return H(m)<this.startOf(E)},_.isBefore=function(m,E){return this.endOf(E)<H(m)},_.$g=function(m,E,w){return k.u(m)?this[E]:this.set(w,m)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(m,E){var w=this,M=!!k.u(E)||E,N=k.p(m),x=function(Pe,se){var ke=k.w(w.$u?Date.UTC(w.$y,se,Pe):new Date(w.$y,se,Pe),w);return M?ke:ke.endOf(u)},R=function(Pe,se){return k.w(w.toDate()[Pe].apply(w.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(se)),w)},L=this.$W,j=this.$M,X=this.$D,ge="set"+(this.$u?"UTC":"");switch(N){case h:return M?x(1,0):x(31,11);case f:return M?x(1,j):x(0,j+1);case d:var ve=this.$locale().weekStart||0,Ke=(L<ve?L+7:L)-ve;return x(M?X-Ke:X+(6-Ke),j);case u:case g:return R(ge+"Hours",0);case l:return R(ge+"Minutes",1);case s:return R(ge+"Seconds",2);case r:return R(ge+"Milliseconds",3);default:return this.clone()}},_.endOf=function(m){return this.startOf(m,!1)},_.$set=function(m,E){var w,M=k.p(m),N="set"+(this.$u?"UTC":""),x=(w={},w[u]=N+"Date",w[g]=N+"Date",w[f]=N+"Month",w[h]=N+"FullYear",w[l]=N+"Hours",w[s]=N+"Minutes",w[r]=N+"Seconds",w[i]=N+"Milliseconds",w)[M],R=M===u?this.$D+(E-this.$W):E;if(M===f||M===h){var L=this.clone().set(g,1);L.$d[x](R),L.init(),this.$d=L.set(g,Math.min(this.$D,L.daysInMonth())).$d}else x&&this.$d[x](R);return this.init(),this},_.set=function(m,E){return this.clone().$set(m,E)},_.get=function(m){return this[k.p(m)]()},_.add=function(m,E){var w,M=this;m=Number(m);var N=k.p(E),x=function(j){var X=H(M);return k.w(X.date(X.date()+Math.round(j*m)),M)};if(N===f)return this.set(f,this.$M+m);if(N===h)return this.set(h,this.$y+m);if(N===u)return x(1);if(N===d)return x(7);var R=(w={},w[s]=o,w[l]=a,w[r]=n,w)[N]||1,L=this.$d.getTime()+m*R;return k.w(L,this)},_.subtract=function(m,E){return this.add(-1*m,E)},_.format=function(m){var E=this,w=this.$locale();if(!this.isValid())return w.invalidDate||p;var M=m||"YYYY-MM-DDTHH:mm:ssZ",N=k.z(this),x=this.$H,R=this.$m,L=this.$M,j=w.weekdays,X=w.months,ge=w.meridiem,ve=function(se,ke,Ze,ut){return se&&(se[ke]||se(E,M))||Ze[ke].slice(0,ut)},Ke=function(se){return k.s(x%12||12,se,"0")},Pe=ge||function(se,ke,Ze){var ut=se<12?"AM":"PM";return Ze?ut.toLowerCase():ut};return M.replace(v,function(se,ke){return ke||function(Ze){switch(Ze){case"YY":return String(E.$y).slice(-2);case"YYYY":return k.s(E.$y,4,"0");case"M":return L+1;case"MM":return k.s(L+1,2,"0");case"MMM":return ve(w.monthsShort,L,X,3);case"MMMM":return ve(X,L);case"D":return E.$D;case"DD":return k.s(E.$D,2,"0");case"d":return String(E.$W);case"dd":return ve(w.weekdaysMin,E.$W,j,2);case"ddd":return ve(w.weekdaysShort,E.$W,j,3);case"dddd":return j[E.$W];case"H":return String(x);case"HH":return k.s(x,2,"0");case"h":return Ke(1);case"hh":return Ke(2);case"a":return Pe(x,R,!0);case"A":return Pe(x,R,!1);case"m":return String(R);case"mm":return k.s(R,2,"0");case"s":return String(E.$s);case"ss":return k.s(E.$s,2,"0");case"SSS":return k.s(E.$ms,3,"0");case"Z":return N}return null}(se)||N.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(m,E,w){var M,N=this,x=k.p(E),R=H(m),L=(R.utcOffset()-this.utcOffset())*o,j=this-R,X=function(){return k.m(N,R)};switch(x){case h:M=X()/12;break;case f:M=X();break;case c:M=X()/3;break;case d:M=(j-L)/6048e5;break;case u:M=(j-L)/864e5;break;case l:M=j/a;break;case s:M=j/o;break;case r:M=j/n;break;default:M=j}return w?M:k.a(M)},_.daysInMonth=function(){return this.endOf(f).$D},_.$locale=function(){return F[this.$L]},_.locale=function(m,E){if(!m)return this.$L;var w=this.clone(),M=P(m,E,!0);return M&&(w.$L=M),w},_.clone=function(){return k.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},C}(),ee=K.prototype;return H.prototype=ee,[["$ms",i],["$s",r],["$m",s],["$H",l],["$W",u],["$M",f],["$y",h],["$D",g]].forEach(function(C){ee[C[1]]=function(_){return this.$g(_,C[0],C[1])}}),H.extend=function(C,_){return C.$i||(C(_,K,H),C.$i=!0),H},H.locale=P,H.isDayjs=I,H.unix=function(C){return H(1e3*C)},H.en=F[y],H.Ls=F,H.p={},H})}(St)),St.exports}var Na=Ma();const Qt=Aa(Na);let Rt;async function Fa(){return Rt||(await Un(),Rt=await Ho("ikdx-db",1)),Rt}function Ba(e,t=30){if(!e)return!0;const n=Qt(),o=Qt(e);return n.diff(o,"minute")>t}async function Ra(e){try{console.log(`開始抓取股票 ${e} 的資料...`);const t=await Ro.get(`stocks/${e}/all.json`);if(t.data){const n={stockCode:e,data:t.data,lastUpdated:new Date().toISOString(),fetchedAt:Qt().format("YYYY-MM-DD HH:mm:ss")};return console.log(`成功抓取股票 ${e} 資料`),n}return console.warn(`股票 ${e} 無資料回傳`),null}catch(t){return console.error(`抓取股票 ${e} 失敗:`,t),null}}async function Ya(e){try{const t={id:e.stockCode,daily:e.data,lastUpdated:e.lastUpdated,fetchedAt:e.fetchedAt};await Yo("user-stock-data",t),console.log(`股票 ${e.stockCode} 資料已儲存到 IndexedDB`)}catch(t){console.error(`儲存股票 ${e.stockCode} 資料失敗:`,t)}}async function Dn(e){try{return await(await Fa()).get("user-stock-data",e)||null}catch(t){return console.error(`讀取股票 ${e} 快取資料失敗:`,t),null}}async function Gn(e,t=!1){if(!t){const a=await Dn(e);if(a&&!Ba(a.lastUpdated))return console.log(`使用快取資料: ${e}`),{...a,data:a.daily}}const n=await Ra(e);if(n)return await Ya(n),n;const o=await Dn(e);return o?(console.warn(`API 失敗，使用舊快取資料: ${e}`),o):null}async function Ha(e,t=5,n=!1){if(!e||e.length===0)return[];console.log(`開始批量抓取 ${e.length} 支股票資料，併發數: ${t}`);const o=[],a=[];for(let i=0;i<e.length;i+=t)a.push(e.slice(i,i+t));for(const i of a){const r=i.map(l=>Gn(l,n));(await Promise.allSettled(r)).forEach((l,u)=>{l.status==="fulfilled"&&l.value?o.push(l.value):console.error(`股票 ${i[u]} 抓取失敗:`,l.reason)}),a.indexOf(i)<a.length-1&&await new Promise(l=>setTimeout(l,100))}return console.log(`批量抓取完成，成功: ${o.length}/${e.length}`),o}async function xn(e,t){const n=await Gn(e);if(!n||!n.data)return console.warn(`股票 ${e} 無價格資料`),null;const o=n.data;let a=null,i=0,r=0;if(Array.isArray(o)&&o.length>0){const l=o[o.length-1];if(a=l.close||l.price||l[4],o.length>1){const u=o[o.length-2],d=u.close||u.price||u[4];i=a-d,r=i/d*100}}else typeof o=="object"&&(a=o.price||o.close||o.last,i=o.change||0,r=o.changePercent||0);return{...t,price:a||0,change:Number(i.toFixed(2)),changePercent:Number(r.toFixed(2)),lastUpdated:n.lastUpdated,weeklyKD:Math.floor(Math.random()*100),rsi:Math.floor(Math.random()*100)}}Un().catch(console.error);const Kn=Lo("stock",()=>{const e=G([]);async function t(){try{console.log("開始載入使用者股票清單...");const c=await Wo("user-stock-info");return console.log("從 IndexedDB 載入的股票:",c),c&&c.length>0&&(e.value=c,await u()),e.value}catch(c){return console.error("載入使用者股票清單失敗:",c),e.value}}async function n(c){if(console.log("開始新增股票:",c),e.value.find(D=>D.id===c.id))return console.log("股票已存在，取消新增"),{success:!1,message:"股票已存在於清單中"};const g={id:c.id,name:c.name,industryCategory:c.industryCategory,type:c.type,addedAt:new Date().toISOString()},p={...c,addedAt:g.addedAt,price:0,change:0,changePercent:0,weeklyKD:0,rsi:0};console.log("新增股票到 Pinia store:",p),e.value.push(p);try{return console.log("準備儲存股票到 user-stock-info:",g),await Ft(g),console.log("股票已成功儲存到 user-stock-info"),d(c.id).catch(D=>{console.error(`背景更新股票 ${c.id} 價格失敗:`,D)}),{success:!0,message:"股票已新增至清單"}}catch(D){return console.error("儲存股票失敗:",D),e.value=e.value.filter(v=>v.id!==c.id),{success:!1,message:"新增失敗，請稍後再試"}}}async function o(c){try{return await Uo(c),e.value=e.value.filter(h=>h.id!==c),{success:!0,message:"股票已從清單中移除"}}catch(h){return console.error("移除股票失敗:",h),{success:!1,message:"移除失敗，請稍後再試"}}}function a(c){return e.value.some(h=>h.id===c)}async function i(c){e.value=c,await r()}async function r(){try{await zo("user-stock-info");for(const c of e.value){const h={id:c.id,name:c.name,industryCategory:c.industryCategory,type:c.type,addedAt:c.addedAt};await Ft(h)}}catch(c){console.error("儲存股票排序失敗:",c)}}async function s(c){const h=await Vo(c);h&&(e.value.find(p=>p.id===h.id)||e.value.push(h))}async function l(c){const h=e.value.find(g=>g.id===c);h&&await jo(h)}async function u(){if(e.value.length===0){console.log("無股票需要更新價格");return}console.log(`開始批量更新 ${e.value.length} 支股票價格...`);try{const c=e.value.map(g=>g.id||g.code);(await Promise.all(e.value.map(async g=>{try{return await xn(g.id||g.code,g)}catch(p){return console.error(`更新股票 ${g.id} 價格失敗:`,p),null}}))).forEach((g,p)=>{if(g){const D=e.value[p];e.value[p]={...D,price:g.price,change:g.change,changePercent:g.changePercent,weeklyKD:g.weeklyKD,rsi:g.rsi,lastUpdated:g.lastUpdated}}}),await r(),console.log("所有股票價格更新完成")}catch(c){console.error("批量更新股票價格失敗:",c)}}async function d(c){const h=e.value.findIndex(g=>g.id===c);if(h===-1){console.warn(`找不到股票 ${c}`);return}console.log(`開始更新股票 ${c} 價格...`);try{const g=e.value[h],p=await xn(c,g);if(p){e.value[h]={...g,price:p.price,change:p.change,changePercent:p.changePercent,weeklyKD:p.weeklyKD,rsi:p.rsi,lastUpdated:p.lastUpdated};let D=null,v=null;try{const T=await Xo(c);if(T&&Array.isArray(T.daily)&&T.daily.length>0){const S=T.daily[T.daily.length-1];Array.isArray(S)?(D=S[0],v=S[1]):typeof S=="object"&&(D=S.date||S.Date||S.日期||null,v=S.value||S.close||S.price||null)}}catch(T){console.warn("取得 user-stock-data 最後一筆失敗",T)}const $={id:g.id,name:g.name,industryCategory:g.industryCategory,type:g.type,addedAt:g.addedAt,lastDate:D,lastValue:v};console.log("[user-stock-info] set",$),await Ft($),console.log(`股票 ${c} 價格更新完成`)}}catch(g){console.error(`更新股票 ${c} 價格失敗:`,g)}}async function f(){if(console.log("手動重新整理所有股票價格..."),e.value.length===0)return console.log("無股票需要重新整理"),{success:!0,message:"無股票需要更新"};try{const c=e.value.map(h=>h.id||h.code);return await Ha(c,3,!0),await u(),{success:!0,message:`已更新 ${e.value.length} 支股票價格`}}catch(c){return console.error("手動重新整理股票價格失敗:",c),{success:!1,message:"重新整理失敗，請稍後再試"}}}return{userStocks:e,loadUserStocks:t,addStock:n,removeStock:o,isStockAdded:a,reorderStocks:i,loadStock:s,saveStock:l,updateAllStockPrices:u,updateSingleStockPrice:d,refreshAllStockPrices:f}}),La={style:{display:"flex","flex-direction":"column",height:"100%","min-height":"60vh"}},Wa={style:{flex:"1 1 auto"}},Ua={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},za=["onClick"],Va={key:0,style:{"margin-top":"12px"}},ja={key:0},Xa={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},qa={style:{"font-size":"16px",color:"#333",flex:"1"}},Ga={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},Ka={__name:"StockSearch",setup(e){const t=Kn(),n=zn("stock-search"),o=G(!1);Ye(()=>{n.on(p=>{o.value=p})}),qo(()=>{n.reset()});const a=G(),i=G(""),r=G([]),s=["台積電","鴻海","聯發科","長榮","中鋼"],l={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},u={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function d(p){return i.value===p?{...l,...u}:l}function f(){Se(()=>{const p=a.value?.$el?.querySelector("input");p&&p.focus()})}De(()=>o.value,p=>{p&&setTimeout(()=>{f()},300)}),De(()=>i.value,async p=>{if(console.log("localSearch 更新:",p),!p||p.length<1){r.value=[];return}console.log("觸發 getStocksFromDB");try{const D=await Go();console.log("getStocksFromDB 執行成功"),r.value=D.filter(v=>v.name.includes(p)||v.id.includes(p)),console.log("搜尋結果:",r.value)}catch(D){console.error("getStocksFromDB 執行失敗:",D)}});function c(p){}function h(p){console.log("點擊熱門標籤:",p),i.value=p}async function g(p){const D=await t.addStock(p);Ue({message:D.message,type:D.success?"success":"fail"})}return(p,D)=>(me(),Ko(ne(Ca),{show:o.value,"onUpdate:show":D[1]||(D[1]=v=>ne(n).emit(!1)),"cancel-text":"離開",options:[],style:{"--van-share-sheet-header-padding":"24px 24px 0 24px"}},{title:ce(()=>D[2]||(D[2]=[U("div",{style:{"font-size":"18px","font-weight":"bold","letter-spacing":"1px","text-align":"center","margin-top":"0","margin-bottom":"0",color:"#222","line-height":"1.2"}}," 股票搜尋 ",-1)])),description:ce(()=>[U("div",La,[U("div",Wa,[U("div",null,[B(ne(oa),{ref_key:"searchInputRef",ref:a,modelValue:i.value,"onUpdate:modelValue":D[0]||(D[0]=v=>i.value=v),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:c},null,8,["modelValue"])]),U("div",null,[D[3]||(D[3]=U("div",{style:{display:"flex","align-items":"center",margin:"0 0 10px 0"}},[U("div",{style:{"margin-left":"16px","font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px"}}," | 熱門股票 ")],-1)),U("div",Ua,[(me(),we(mn,null,vn(s,v=>U("span",{key:v,onClick:$=>h(v),style:Vn(d(v))},fe(v),13,za)),64))]),i.value&&i.value.length>=1?(me(),we("div",Va,[r.value.length?(me(),we("div",ja,[(me(!0),we(mn,null,vn(r.value,v=>(me(),we("div",{key:v.id,style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"16px 20px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px"}},[U("div",Xa,fe(v.id),1),U("div",qa,fe(v.name),1),B(ne(wt),{type:ne(t).isStockAdded(v.id)?"default":"primary",size:"small",disabled:ne(t).isStockAdded(v.id),onClick:$=>g(v),style:{"margin-left":"12px","min-width":"60px"}},{default:ce(()=>[Zt(fe(ne(t).isStockAdded(v.id)?"已新增":"新增"),1)]),_:2},1032,["type","disabled","onClick"])]))),128))])):(me(),we("div",Ga," 查無資料 "))])):Zo("",!0)])])])]),_:1},8,["show"]))}},Za={key:0,class:"chart-placeholder"},Ja={__name:"KChart",props:{width:{type:Number,default:200},height:{type:Number,default:100},stockData:{type:Object,required:!0},stockIndex:{type:Number,default:0}},setup(e){const t=e;Ye(()=>{Se(()=>{})});const n=G(null),o=G(null),a=G(!1),i=G(null),{stop:r}=Jo(n,([{isIntersecting:f}])=>{f&&!a.value&&(console.log(`股票 ${t.stockData.name} 的圖表進入視窗，開始渲染...`),a.value=!0,Se(()=>{s()}))},{threshold:.1,rootMargin:"50px"});function s(){if(o.value)try{console.log(`正在為股票 ${t.stockData.name} 創建 K 線圖...`);const f=o.value.getContext("2d"),c=l();u(f,c),console.log(`股票 ${t.stockData.name} 的 K 線圖創建成功`)}catch(f){console.error(`創建股票 ${t.stockData.name} 的圖表時發生錯誤:`,f),d()}}function l(){const c=[],h=30+t.stockIndex*2,g=8+t.stockIndex%3*2;let p=h;for(let D=0;D<6;D++){const v=p,$=(Math.random()-.5)*g,T=v+$,S=Math.max(v,T)+Math.random()*(g*.3),y=Math.min(v,T)-Math.random()*(g*.3);c.push({open:v,high:S,low:y,close:T}),p=T}return c}function u(f,c){const h=o.value,g=h.clientWidth,p=h.clientHeight;h.width=g,h.height=p,f.clearRect(0,0,g,p);const D=10,v=g-D*2,$=p-D*2,T=c.flatMap(P=>[P.open,P.high,P.low,P.close]),S=Math.min(...T),y=Math.max(...T),F=y-S,W=v/c.length,I=W*.6;c.forEach((P,H)=>{const k=D+(H+.5)*W,K=P.close>P.open,ee=K?"#ef5350":"#26a69a",C=D+(y-P.high)/F*$,_=D+(y-P.low)/F*$,m=D+(y-P.open)/F*$,E=D+(y-P.close)/F*$,w=Math.min(m,E),M=Math.max(m,E),N=Math.max(M-w,1);f.strokeStyle=ee,f.lineWidth=1,f.beginPath(),f.moveTo(k,C),f.lineTo(k,_),f.stroke(),f.fillStyle=K?ee:"#fff",f.strokeStyle=ee,f.lineWidth=1,f.fillRect(k-I/2,w,I,N),f.strokeRect(k-I/2,w,I,N)})}function d(){n.value&&(n.value.innerHTML=`
                <div style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    height: 100%;
                    background: #f0f0f0;
                    color: #666;
                    font-size: 12px;
                    border-radius: 6px;
                ">
                    圖表暫不可用
                </div>
            `)}return De(()=>t.stockData,()=>{a.value&&Se(()=>{s()})},{deep:!0}),Yn(()=>{r(),i.value=null}),(f,c)=>(me(),we("div",{ref_key:"chartContainer",ref:n,class:"mini-k-chart",style:{width:"100%",height:"100%"}},[a.value?(me(),we("canvas",{key:1,ref_key:"chartCanvas",ref:o,style:{width:"100%",height:"100%"}},null,512)):(me(),we("div",Za,c[0]||(c[0]=[U("div",{class:"placeholder-content"},"圖表載入中...",-1)])))],512))}},Qa=ln(Ja,[["__scopeId","data-v-1755c118"]]),ei={class:"stock-name"},ti={class:"stock-name-main"},ni={class:"stock-name-left"},oi={class:"name highlight"},ai={class:"code"},ii={class:"stock-name-right"},ri={class:"stock-progress-bar"},si={class:"progress-text"},li={__name:"StockName",props:{name:String,code:String,price:[String,Number],change:[String,Number],changePercent:[String,Number],priceClass:String,progress:Number,progressText:String},setup(e){return(t,n)=>(me(),we("div",ei,[U("div",ti,[U("div",ni,[U("div",oi,fe(e.name),1),U("div",ai,fe(e.code),1),n[0]||(n[0]=U("div",{class:"star-area"},[U("span",{class:"star"},"★")],-1))]),U("div",ii,[U("div",{class:Jt(["price",e.priceClass])},fe(e.price),3),U("div",{class:Jt(["change",e.priceClass])},fe(e.change>0?"+":"")+fe(e.change)+" ("+fe(e.changePercent)+"%) ",3)])]),U("div",ri,[U("div",{class:"stock-progress-inner",style:Vn({width:(e.progress||0)+"%"})},[U("span",si,fe(e.progressText||(e.progress||0)+"%"),1)],4)])]))}},ci=ln(li,[["__scopeId","data-v-c759bb7e"]]);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,o)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?En(Object(n),!0).forEach(function(o){ui(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _t(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(t){return typeof t}:_t=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(e)}function ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(){return Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ce.apply(this,arguments)}function di(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,i;for(i=0;i<o.length;i++)a=o[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function fi(e,t){if(e==null)return{};var n=di(e,t),o,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)o=i[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var hi="1.14.0";function Te(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var $e=Te(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),lt=Te(/Edge/i),Tn=Te(/firefox/i),nt=Te(/safari/i)&&!Te(/chrome/i)&&!Te(/android/i),Zn=Te(/iP(ad|od|hone)/i),gi=Te(/chrome/i)&&Te(/android/i),Jn={capture:!1,passive:!1};function V(e,t,n){e.addEventListener(t,n,!$e&&Jn)}function z(e,t,n){e.removeEventListener(t,n,!$e&&Jn)}function Ct(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function pi(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function _e(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Ct(e,t):Ct(e,t))||o&&e===n)return e;if(e===n)break}while(e=pi(e))}return null}var Cn=/\s+/g;function ue(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(Cn," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(Cn," ")}}function O(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function je(e,t){var n="";if(typeof e=="string")n=e;else do{var o=O(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function Qn(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,i=o.length;if(n)for(;a<i;a++)n(o[a],a);return o}return[]}function xe(){var e=document.scrollingElement;return e||document.documentElement}function te(e,t,n,o,a){if(!(!e.getBoundingClientRect&&e!==window)){var i,r,s,l,u,d,f;if(e!==window&&e.parentNode&&e!==xe()?(i=e.getBoundingClientRect(),r=i.top,s=i.left,l=i.bottom,u=i.right,d=i.height,f=i.width):(r=0,s=0,l=window.innerHeight,u=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!$e))do if(a&&a.getBoundingClientRect&&(O(a,"transform")!=="none"||n&&O(a,"position")!=="static")){var c=a.getBoundingClientRect();r-=c.top+parseInt(O(a,"border-top-width")),s-=c.left+parseInt(O(a,"border-left-width")),l=r+i.height,u=s+i.width;break}while(a=a.parentNode);if(o&&e!==window){var h=je(a||e),g=h&&h.a,p=h&&h.d;h&&(r/=p,s/=g,f/=g,d/=p,l=r+d,u=s+f)}return{top:r,left:s,bottom:l,right:u,width:f,height:d}}}function $n(e,t,n){for(var o=Ae(e,!0),a=te(e)[t];o;){var i=te(o)[n],r=void 0;if(r=a>=i,!r)return o;if(o===xe())break;o=Ae(o,!1)}return!1}function Xe(e,t,n,o){for(var a=0,i=0,r=e.children;i<r.length;){if(r[i].style.display!=="none"&&r[i]!==A.ghost&&(o||r[i]!==A.dragged)&&_e(r[i],n.draggable,e,!1)){if(a===t)return r[i];a++}i++}return null}function cn(e,t){for(var n=e.lastElementChild;n&&(n===A.ghost||O(n,"display")==="none"||t&&!Ct(n,t));)n=n.previousElementSibling;return n||null}function pe(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==A.clone&&(!t||Ct(e,t))&&n++;return n}function kn(e){var t=0,n=0,o=xe();if(e)do{var a=je(e),i=a.a,r=a.d;t+=e.scrollLeft*i,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function mi(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Ae(e,t){if(!e||!e.getBoundingClientRect)return xe();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=O(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return xe();if(o||t)return n;o=!0}}while(n=n.parentNode);return xe()}function vi(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Yt(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var ot;function eo(e,t){return function(){if(!ot){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),ot=setTimeout(function(){ot=void 0},t)}}}function yi(){clearTimeout(ot),ot=void 0}function to(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function no(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var he="Sortable"+new Date().getTime();function bi(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(a){if(!(O(a,"display")==="none"||a===A.ghost)){e.push({target:a,rect:te(a)});var i=Ee({},e[e.length-1].rect);if(a.thisAnimationDuration){var r=je(a,!0);r&&(i.top-=r.f,i.left-=r.e)}a.fromRect=i}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(mi(e,{target:o}),1)},animateAll:function(o){var a=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var i=!1,r=0;e.forEach(function(s){var l=0,u=s.target,d=u.fromRect,f=te(u),c=u.prevFromRect,h=u.prevToRect,g=s.rect,p=je(u,!0);p&&(f.top-=p.f,f.left-=p.e),u.toRect=f,u.thisAnimationDuration&&Yt(c,f)&&!Yt(d,f)&&(g.top-f.top)/(g.left-f.left)===(d.top-f.top)/(d.left-f.left)&&(l=Si(g,c,h,a.options)),Yt(f,d)||(u.prevFromRect=d,u.prevToRect=f,l||(l=a.options.animation),a.animate(u,g,f,l)),l&&(i=!0,r=Math.max(r,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(t),i?t=setTimeout(function(){typeof o=="function"&&o()},r):typeof o=="function"&&o(),e=[]},animate:function(o,a,i,r){if(r){O(o,"transition",""),O(o,"transform","");var s=je(this.el),l=s&&s.a,u=s&&s.d,d=(a.left-i.left)/(l||1),f=(a.top-i.top)/(u||1);o.animatingX=!!d,o.animatingY=!!f,O(o,"transform","translate3d("+d+"px,"+f+"px,0)"),this.forRepaintDummy=wi(o),O(o,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),O(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){O(o,"transition",""),O(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},r)}}}}function wi(e){return e.offsetWidth}function Si(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Le=[],Ht={initializeByDefault:!0},ct={mount:function(t){for(var n in Ht)Ht.hasOwnProperty(n)&&!(n in t)&&(t[n]=Ht[n]);Le.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Le.push(t)},pluginEvent:function(t,n,o){var a=this;this.eventCanceled=!1,o.cancel=function(){a.eventCanceled=!0};var i=t+"Global";Le.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][i]&&n[r.pluginName][i](Ee({sortable:n},o)),n.options[r.pluginName]&&n[r.pluginName][t]&&n[r.pluginName][t](Ee({sortable:n},o)))})},initializePlugins:function(t,n,o,a){Le.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var u=new s(t,n,t.options);u.sortable=t,u.options=t.options,t[l]=u,Ce(o,u.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var r=this.modifyOption(t,i,t.options[i]);typeof r<"u"&&(t.options[i]=r)}},getEventProperties:function(t,n){var o={};return Le.forEach(function(a){typeof a.eventProperties=="function"&&Ce(o,a.eventProperties.call(n[a.pluginName],t))}),o},modifyOption:function(t,n,o){var a;return Le.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(a=i.optionListeners[n].call(t[i.pluginName],o))}),a}};function _i(e){var t=e.sortable,n=e.rootEl,o=e.name,a=e.targetEl,i=e.cloneEl,r=e.toEl,s=e.fromEl,l=e.oldIndex,u=e.newIndex,d=e.oldDraggableIndex,f=e.newDraggableIndex,c=e.originalEvent,h=e.putSortable,g=e.extraEventProperties;if(t=t||n&&n[he],!!t){var p,D=t.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!$e&&!lt?p=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(o,!0,!0)),p.to=r||n,p.from=s||n,p.item=a||n,p.clone=i,p.oldIndex=l,p.newIndex=u,p.oldDraggableIndex=d,p.newDraggableIndex=f,p.originalEvent=c,p.pullMode=h?h.lastPutMode:void 0;var $=Ee(Ee({},g),ct.getEventProperties(o,t));for(var T in $)p[T]=$[T];n&&n.dispatchEvent(p),D[v]&&D[v].call(t,p)}}var Di=["evt"],le=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.evt,i=fi(o,Di);ct.pluginEvent.bind(A)(t,n,Ee({dragEl:b,parentEl:Z,ghostEl:Y,rootEl:q,nextEl:Fe,lastDownEl:Dt,cloneEl:J,cloneHidden:Oe,dragStarted:Qe,putSortable:ae,activeSortable:A.active,originalEvent:a,oldIndex:Ve,oldDraggableIndex:at,newIndex:de,newDraggableIndex:Ie,hideGhostForTarget:ro,unhideGhostForTarget:so,cloneNowHidden:function(){Oe=!0},cloneNowShown:function(){Oe=!1},dispatchSortableEvent:function(s){re({sortable:n,name:s,originalEvent:a})}},i))};function re(e){_i(Ee({putSortable:ae,cloneEl:J,targetEl:b,rootEl:q,oldIndex:Ve,oldDraggableIndex:at,newIndex:de,newDraggableIndex:Ie},e))}var b,Z,Y,q,Fe,Dt,J,Oe,Ve,de,at,Ie,ht,ae,ze=!1,$t=!1,kt=[],Me,be,Lt,Wt,In,On,Qe,We,it,rt=!1,gt=!1,xt,ie,Ut=[],en=!1,It=[],Nt=typeof document<"u",pt=Zn,An=lt||$e?"cssFloat":"float",xi=Nt&&!gi&&!Zn&&"draggable"in document.createElement("div"),oo=function(){if(Nt){if($e)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),ao=function(t,n){var o=O(t),a=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),i=Xe(t,0,n),r=Xe(t,1,n),s=i&&O(i),l=r&&O(r),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+te(i).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+te(r).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return r&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=a&&o[An]==="none"||r&&o[An]==="none"&&u+d>a)?"vertical":"horizontal"},Ei=function(t,n,o){var a=o?t.left:t.top,i=o?t.right:t.bottom,r=o?t.width:t.height,s=o?n.left:n.top,l=o?n.right:n.bottom,u=o?n.width:n.height;return a===s||i===l||a+r/2===s+u/2},Ti=function(t,n){var o;return kt.some(function(a){var i=a[he].options.emptyInsertThreshold;if(!(!i||cn(a))){var r=te(a),s=t>=r.left-i&&t<=r.right+i,l=n>=r.top-i&&n<=r.bottom+i;if(s&&l)return o=a}}),o},io=function(t){function n(i,r){return function(s,l,u,d){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(i==null&&(r||f))return!0;if(i==null||i===!1)return!1;if(r&&i==="clone")return i;if(typeof i=="function")return n(i(s,l,u,d),r)(s,l,u,d);var c=(r?s:l).options.group.name;return i===!0||typeof i=="string"&&i===c||i.join&&i.indexOf(c)>-1}}var o={},a=t.group;(!a||_t(a)!="object")&&(a={name:a}),o.name=a.name,o.checkPull=n(a.pull,!0),o.checkPut=n(a.put),o.revertClone=a.revertClone,t.group=o},ro=function(){!oo&&Y&&O(Y,"display","none")},so=function(){!oo&&Y&&O(Y,"display","")};Nt&&document.addEventListener("click",function(e){if($t)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),$t=!1,!1},!0);var Ne=function(t){if(b){t=t.touches?t.touches[0]:t;var n=Ti(t.clientX,t.clientY);if(n){var o={};for(var a in t)t.hasOwnProperty(a)&&(o[a]=t[a]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[he]._onDragOver(o)}}},Ci=function(t){b&&b.parentNode[he]._isOutsideThisEl(t.target)};function A(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ce({},t),e[he]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ao(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,s){r.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:A.supportPointer!==!1&&"PointerEvent"in window&&!nt,emptyInsertThreshold:5};ct.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);io(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:xi,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?V(e,"pointerdown",this._onTapStart):(V(e,"mousedown",this._onTapStart),V(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(V(e,"dragover",this),V(e,"dragenter",this)),kt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ce(this,bi())}A.prototype={constructor:A,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(We=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,b):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,a=this.options,i=a.preventOnFilter,r=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,d=a.filter;if(Ni(o),!b&&!(/mousedown|pointerdown/.test(r)&&t.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&nt&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=_e(l,a.draggable,o,!1),!(l&&l.animated)&&Dt!==l)){if(Ve=pe(l),at=pe(l,a.draggable),typeof d=="function"){if(d.call(this,t,l,this)){re({sortable:n,rootEl:u,name:"filter",targetEl:l,toEl:o,fromEl:o}),le("filter",n,{evt:t}),i&&t.cancelable&&t.preventDefault();return}}else if(d&&(d=d.split(",").some(function(f){if(f=_e(u,f.trim(),o,!1),f)return re({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:o,toEl:o}),le("filter",n,{evt:t}),!0}),d)){i&&t.cancelable&&t.preventDefault();return}a.handle&&!_e(u,a.handle,o,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,n,o){var a=this,i=a.el,r=a.options,s=i.ownerDocument,l;if(o&&!b&&o.parentNode===i){var u=te(o);if(q=i,b=o,Z=b.parentNode,Fe=b.nextSibling,Dt=o,ht=r.group,A.dragged=b,Me={target:b,clientX:(n||t).clientX,clientY:(n||t).clientY},In=Me.clientX-u.left,On=Me.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,b.style["will-change"]="all",l=function(){if(le("delayEnded",a,{evt:t}),A.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Tn&&a.nativeDraggable&&(b.draggable=!0),a._triggerDragStart(t,n),re({sortable:a,name:"choose",originalEvent:t}),ue(b,r.chosenClass,!0)},r.ignore.split(",").forEach(function(d){Qn(b,d.trim(),zt)}),V(s,"dragover",Ne),V(s,"mousemove",Ne),V(s,"touchmove",Ne),V(s,"mouseup",a._onDrop),V(s,"touchend",a._onDrop),V(s,"touchcancel",a._onDrop),Tn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,b.draggable=!0),le("delayStart",this,{evt:t}),r.delay&&(!r.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(lt||$e))){if(A.eventCanceled){this._onDrop();return}V(s,"mouseup",a._disableDelayedDrag),V(s,"touchend",a._disableDelayedDrag),V(s,"touchcancel",a._disableDelayedDrag),V(s,"mousemove",a._delayedDragTouchMoveHandler),V(s,"touchmove",a._delayedDragTouchMoveHandler),r.supportPointer&&V(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(l,r.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){b&&zt(b),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;z(t,"mouseup",this._disableDelayedDrag),z(t,"touchend",this._disableDelayedDrag),z(t,"touchcancel",this._disableDelayedDrag),z(t,"mousemove",this._delayedDragTouchMoveHandler),z(t,"touchmove",this._delayedDragTouchMoveHandler),z(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?V(document,"pointermove",this._onTouchMove):n?V(document,"touchmove",this._onTouchMove):V(document,"mousemove",this._onTouchMove):(V(b,"dragend",this),V(q,"dragstart",this._onDragStart));try{document.selection?Et(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(ze=!1,q&&b){le("dragStarted",this,{evt:n}),this.nativeDraggable&&V(document,"dragover",Ci);var o=this.options;!t&&ue(b,o.dragClass,!1),ue(b,o.ghostClass,!0),A.active=this,t&&this._appendGhost(),re({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(be){this._lastX=be.clientX,this._lastY=be.clientY,ro();for(var t=document.elementFromPoint(be.clientX,be.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(be.clientX,be.clientY),t!==n);)n=t;if(b.parentNode[he]._isOutsideThisEl(t),n)do{if(n[he]){var o=void 0;if(o=n[he]._onDragOver({clientX:be.clientX,clientY:be.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=n.parentNode);so()}},_onTouchMove:function(t){if(Me){var n=this.options,o=n.fallbackTolerance,a=n.fallbackOffset,i=t.touches?t.touches[0]:t,r=Y&&je(Y,!0),s=Y&&r&&r.a,l=Y&&r&&r.d,u=pt&&ie&&kn(ie),d=(i.clientX-Me.clientX+a.x)/(s||1)+(u?u[0]-Ut[0]:0)/(s||1),f=(i.clientY-Me.clientY+a.y)/(l||1)+(u?u[1]-Ut[1]:0)/(l||1);if(!A.active&&!ze){if(o&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Y){r?(r.e+=d-(Lt||0),r.f+=f-(Wt||0)):r={a:1,b:0,c:0,d:1,e:d,f};var c="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");O(Y,"webkitTransform",c),O(Y,"mozTransform",c),O(Y,"msTransform",c),O(Y,"transform",c),Lt=d,Wt=f,be=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Y){var t=this.options.fallbackOnBody?document.body:q,n=te(b,!0,pt,!0,t),o=this.options;if(pt){for(ie=t;O(ie,"position")==="static"&&O(ie,"transform")==="none"&&ie!==document;)ie=ie.parentNode;ie!==document.body&&ie!==document.documentElement?(ie===document&&(ie=xe()),n.top+=ie.scrollTop,n.left+=ie.scrollLeft):ie=xe(),Ut=kn(ie)}Y=b.cloneNode(!0),ue(Y,o.ghostClass,!1),ue(Y,o.fallbackClass,!0),ue(Y,o.dragClass,!0),O(Y,"transition",""),O(Y,"transform",""),O(Y,"box-sizing","border-box"),O(Y,"margin",0),O(Y,"top",n.top),O(Y,"left",n.left),O(Y,"width",n.width),O(Y,"height",n.height),O(Y,"opacity","0.8"),O(Y,"position",pt?"absolute":"fixed"),O(Y,"zIndex","100000"),O(Y,"pointerEvents","none"),A.ghost=Y,t.appendChild(Y),O(Y,"transform-origin",In/parseInt(Y.style.width)*100+"% "+On/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,a=t.dataTransfer,i=o.options;if(le("dragStart",this,{evt:t}),A.eventCanceled){this._onDrop();return}le("setupClone",this),A.eventCanceled||(J=no(b),J.draggable=!1,J.style["will-change"]="",this._hideClone(),ue(J,this.options.chosenClass,!1),A.clone=J),o.cloneId=Et(function(){le("clone",o),!A.eventCanceled&&(o.options.removeCloneOnHide||q.insertBefore(J,b),o._hideClone(),re({sortable:o,name:"clone"}))}),!n&&ue(b,i.dragClass,!0),n?($t=!0,o._loopId=setInterval(o._emulateDragOver,50)):(z(document,"mouseup",o._onDrop),z(document,"touchend",o._onDrop),z(document,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",i.setData&&i.setData.call(o,a,b)),V(document,"drop",o),O(b,"transform","translateZ(0)")),ze=!0,o._dragStartId=Et(o._dragStarted.bind(o,n,t)),V(document,"selectstart",o),Qe=!0,nt&&O(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,a,i,r,s=this.options,l=s.group,u=A.active,d=ht===l,f=s.sort,c=ae||u,h,g=this,p=!1;if(en)return;function D(w,M){le(w,g,Ee({evt:t,isOwner:d,axis:h?"vertical":"horizontal",revert:r,dragRect:a,targetRect:i,canSort:f,fromSortable:c,target:o,completed:$,onMove:function(x,R){return mt(q,n,b,a,x,te(x),t,R)},changed:T},M))}function v(){D("dragOverAnimationCapture"),g.captureAnimationState(),g!==c&&c.captureAnimationState()}function $(w){return D("dragOverCompleted",{insertion:w}),w&&(d?u._hideClone():u._showClone(g),g!==c&&(ue(b,ae?ae.options.ghostClass:u.options.ghostClass,!1),ue(b,s.ghostClass,!0)),ae!==g&&g!==A.active?ae=g:g===A.active&&ae&&(ae=null),c===g&&(g._ignoreWhileAnimating=o),g.animateAll(function(){D("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==c&&(c.animateAll(),c._ignoreWhileAnimating=null)),(o===b&&!b.animated||o===n&&!o.animated)&&(We=null),!s.dragoverBubble&&!t.rootEl&&o!==document&&(b.parentNode[he]._isOutsideThisEl(t.target),!w&&Ne(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),p=!0}function T(){de=pe(b),Ie=pe(b,s.draggable),re({sortable:g,name:"change",toEl:n,newIndex:de,newDraggableIndex:Ie,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=_e(o,s.draggable,n,!0),D("dragOver"),A.eventCanceled)return p;if(b.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||g._ignoreWhileAnimating===o)return $(!1);if($t=!1,u&&!s.disabled&&(d?f||(r=Z!==q):ae===this||(this.lastPutMode=ht.checkPull(this,u,b,t))&&l.checkPut(this,u,b,t))){if(h=this._getDirection(t,o)==="vertical",a=te(b),D("dragOverValid"),A.eventCanceled)return p;if(r)return Z=q,v(),this._hideClone(),D("revert"),A.eventCanceled||(Fe?q.insertBefore(b,Fe):q.appendChild(b)),$(!0);var S=cn(n,s.draggable);if(!S||Oi(t,h,this)&&!S.animated){if(S===b)return $(!1);if(S&&n===t.target&&(o=S),o&&(i=te(o)),mt(q,n,b,a,o,i,t,!!o)!==!1)return v(),n.appendChild(b),Z=n,T(),$(!0)}else if(S&&Ii(t,h,this)){var y=Xe(n,0,s,!0);if(y===b)return $(!1);if(o=y,i=te(o),mt(q,n,b,a,o,i,t,!1)!==!1)return v(),n.insertBefore(b,y),Z=n,T(),$(!0)}else if(o.parentNode===n){i=te(o);var F=0,W,I=b.parentNode!==n,P=!Ei(b.animated&&b.toRect||a,o.animated&&o.toRect||i,h),H=h?"top":"left",k=$n(o,"top","top")||$n(b,"top","top"),K=k?k.scrollTop:void 0;We!==o&&(W=i[H],rt=!1,gt=!P&&s.invertSwap||I),F=Ai(t,o,i,h,P?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,gt,We===o);var ee;if(F!==0){var C=pe(b);do C-=F,ee=Z.children[C];while(ee&&(O(ee,"display")==="none"||ee===Y))}if(F===0||ee===o)return $(!1);We=o,it=F;var _=o.nextElementSibling,m=!1;m=F===1;var E=mt(q,n,b,a,o,i,t,m);if(E!==!1)return(E===1||E===-1)&&(m=E===1),en=!0,setTimeout(ki,30),v(),m&&!_?n.appendChild(b):o.parentNode.insertBefore(b,m?_:o),k&&to(k,0,K-k.scrollTop),Z=b.parentNode,W!==void 0&&!gt&&(xt=Math.abs(W-te(o)[H])),T(),$(!0)}if(n.contains(b))return $(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){z(document,"mousemove",this._onTouchMove),z(document,"touchmove",this._onTouchMove),z(document,"pointermove",this._onTouchMove),z(document,"dragover",Ne),z(document,"mousemove",Ne),z(document,"touchmove",Ne)},_offUpEvents:function(){var t=this.el.ownerDocument;z(t,"mouseup",this._onDrop),z(t,"touchend",this._onDrop),z(t,"pointerup",this._onDrop),z(t,"touchcancel",this._onDrop),z(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(de=pe(b),Ie=pe(b,o.draggable),le("drop",this,{evt:t}),Z=b&&b.parentNode,de=pe(b),Ie=pe(b,o.draggable),A.eventCanceled){this._nulling();return}ze=!1,gt=!1,rt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),tn(this.cloneId),tn(this._dragStartId),this.nativeDraggable&&(z(document,"drop",this),z(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),nt&&O(document.body,"user-select",""),O(b,"transform",""),t&&(Qe&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(q===Z||ae&&ae.lastPutMode!=="clone")&&J&&J.parentNode&&J.parentNode.removeChild(J),b&&(this.nativeDraggable&&z(b,"dragend",this),zt(b),b.style["will-change"]="",Qe&&!ze&&ue(b,ae?ae.options.ghostClass:this.options.ghostClass,!1),ue(b,this.options.chosenClass,!1),re({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:t}),q!==Z?(de>=0&&(re({rootEl:Z,name:"add",toEl:Z,fromEl:q,originalEvent:t}),re({sortable:this,name:"remove",toEl:Z,originalEvent:t}),re({rootEl:Z,name:"sort",toEl:Z,fromEl:q,originalEvent:t}),re({sortable:this,name:"sort",toEl:Z,originalEvent:t})),ae&&ae.save()):de!==Ve&&de>=0&&(re({sortable:this,name:"update",toEl:Z,originalEvent:t}),re({sortable:this,name:"sort",toEl:Z,originalEvent:t})),A.active&&((de==null||de===-1)&&(de=Ve,Ie=at),re({sortable:this,name:"end",toEl:Z,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){le("nulling",this),q=b=Z=Y=Fe=J=Dt=Oe=Me=be=Qe=de=Ie=Ve=at=We=it=ae=ht=A.dragged=A.ghost=A.clone=A.active=null,It.forEach(function(t){t.checked=!0}),It.length=Lt=Wt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":b&&(this._onDragOver(t),$i(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,a=0,i=o.length,r=this.options;a<i;a++)n=o[a],_e(n,r.draggable,this.el,!1)&&t.push(n.getAttribute(r.dataIdAttr)||Mi(n));return t},sort:function(t,n){var o={},a=this.el;this.toArray().forEach(function(i,r){var s=a.children[r];_e(s,this.options.draggable,a,!1)&&(o[i]=s)},this),n&&this.captureAnimationState(),t.forEach(function(i){o[i]&&(a.removeChild(o[i]),a.appendChild(o[i]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return _e(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var a=ct.modifyOption(this,t,n);typeof a<"u"?o[t]=a:o[t]=n,t==="group"&&io(o)},destroy:function(){le("destroy",this);var t=this.el;t[he]=null,z(t,"mousedown",this._onTapStart),z(t,"touchstart",this._onTapStart),z(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(z(t,"dragover",this),z(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),kt.splice(kt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Oe){if(le("hideClone",this),A.eventCanceled)return;O(J,"display","none"),this.options.removeCloneOnHide&&J.parentNode&&J.parentNode.removeChild(J),Oe=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Oe){if(le("showClone",this),A.eventCanceled)return;b.parentNode==q&&!this.options.group.revertClone?q.insertBefore(J,b):Fe?q.insertBefore(J,Fe):q.appendChild(J),this.options.group.revertClone&&this.animate(b,J),O(J,"display",""),Oe=!1}}};function $i(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function mt(e,t,n,o,a,i,r,s){var l,u=e[he],d=u.options.onMove,f;return window.CustomEvent&&!$e&&!lt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=n,l.draggedRect=o,l.related=a||t,l.relatedRect=i||te(t),l.willInsertAfter=s,l.originalEvent=r,e.dispatchEvent(l),d&&(f=d.call(u,l,r)),f}function zt(e){e.draggable=!1}function ki(){en=!1}function Ii(e,t,n){var o=te(Xe(n.el,0,n.options,!0)),a=10;return t?e.clientX<o.left-a||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-a||e.clientY<o.bottom&&e.clientX<o.left}function Oi(e,t,n){var o=te(cn(n.el,n.options.draggable)),a=10;return t?e.clientX>o.right+a||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+a}function Ai(e,t,n,o,a,i,r,s){var l=o?e.clientY:e.clientX,u=o?n.height:n.width,d=o?n.top:n.left,f=o?n.bottom:n.right,c=!1;if(!r){if(s&&xt<u*a){if(!rt&&(it===1?l>d+u*i/2:l<f-u*i/2)&&(rt=!0),rt)c=!0;else if(it===1?l<d+xt:l>f-xt)return-it}else if(l>d+u*(1-a)/2&&l<f-u*(1-a)/2)return Pi(t)}return c=c||r,c&&(l<d+u*i/2||l>f-u*i/2)?l>d+u/2?1:-1:0}function Pi(e){return pe(b)<pe(e)?1:-1}function Mi(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Ni(e){It.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&It.push(o)}}function Et(e){return setTimeout(e,0)}function tn(e){return clearTimeout(e)}Nt&&V(document,"touchmove",function(e){(A.active||ze)&&e.cancelable&&e.preventDefault()});A.utils={on:V,off:z,css:O,find:Qn,is:function(t,n){return!!_e(t,n,t,!1)},extend:vi,throttle:eo,closest:_e,toggleClass:ue,clone:no,index:pe,nextTick:Et,cancelNextTick:tn,detectDirection:ao,getChild:Xe};A.get=function(e){return e[he]};A.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(A.utils=Ee(Ee({},A.utils),o.utils)),ct.mount(o)})};A.create=function(e,t){return new A(e,t)};A.version=hi;var Q=[],et,nn,on=!1,Vt,jt,Ot,tt;function Fi(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?V(document,"dragover",this._handleAutoScroll):this.options.supportPointer?V(document,"pointermove",this._handleFallbackAutoScroll):o.touches?V(document,"touchmove",this._handleFallbackAutoScroll):V(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):(z(document,"pointermove",this._handleFallbackAutoScroll),z(document,"touchmove",this._handleFallbackAutoScroll),z(document,"mousemove",this._handleFallbackAutoScroll)),Pn(),Tt(),yi()},nulling:function(){Ot=nn=et=on=tt=Vt=jt=null,Q.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var a=this,i=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,r);if(Ot=n,o||this.options.forceAutoScrollFallback||lt||$e||nt){Xt(n,this.options,s,o);var l=Ae(s,!0);on&&(!tt||i!==Vt||r!==jt)&&(tt&&Pn(),tt=setInterval(function(){var u=Ae(document.elementFromPoint(i,r),!0);u!==l&&(l=u,Tt()),Xt(n,a.options,u,o)},10),Vt=i,jt=r)}else{if(!this.options.bubbleScroll||Ae(s,!0)===xe()){Tt();return}Xt(n,this.options,Ae(s,!1),!1)}}},Ce(e,{pluginName:"scroll",initializeByDefault:!0})}function Tt(){Q.forEach(function(e){clearInterval(e.pid)}),Q=[]}function Pn(){clearInterval(tt)}var Xt=eo(function(e,t,n,o){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,r=t.scrollSensitivity,s=t.scrollSpeed,l=xe(),u=!1,d;nn!==n&&(nn=n,Tt(),et=t.scroll,d=t.scrollFn,et===!0&&(et=Ae(n,!0)));var f=0,c=et;do{var h=c,g=te(h),p=g.top,D=g.bottom,v=g.left,$=g.right,T=g.width,S=g.height,y=void 0,F=void 0,W=h.scrollWidth,I=h.scrollHeight,P=O(h),H=h.scrollLeft,k=h.scrollTop;h===l?(y=T<W&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),F=S<I&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):(y=T<W&&(P.overflowX==="auto"||P.overflowX==="scroll"),F=S<I&&(P.overflowY==="auto"||P.overflowY==="scroll"));var K=y&&(Math.abs($-a)<=r&&H+T<W)-(Math.abs(v-a)<=r&&!!H),ee=F&&(Math.abs(D-i)<=r&&k+S<I)-(Math.abs(p-i)<=r&&!!k);if(!Q[f])for(var C=0;C<=f;C++)Q[C]||(Q[C]={});(Q[f].vx!=K||Q[f].vy!=ee||Q[f].el!==h)&&(Q[f].el=h,Q[f].vx=K,Q[f].vy=ee,clearInterval(Q[f].pid),(K!=0||ee!=0)&&(u=!0,Q[f].pid=setInterval((function(){o&&this.layer===0&&A.active._onTouchMove(Ot);var _=Q[this.layer].vy?Q[this.layer].vy*s:0,m=Q[this.layer].vx?Q[this.layer].vx*s:0;typeof d=="function"&&d.call(A.dragged.parentNode[he],m,_,e,Ot,Q[this.layer].el)!=="continue"||to(Q[this.layer].el,m,_)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&c!==l&&(c=Ae(c,!1)));on=u}},30),lo=function(t){var n=t.originalEvent,o=t.putSortable,a=t.dragEl,i=t.activeSortable,r=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(n){var u=o||i;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(d.clientX,d.clientY);l(),u&&!u.el.contains(f)&&(r("spill"),this.onSpill({dragEl:a,putSortable:o}))}};function un(){}un.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var a=Xe(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:lo};Ce(un,{pluginName:"revertOnSpill"});function dn(){}dn.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,a=o||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:lo};Ce(dn,{pluginName:"removeOnSpill"});A.mount(new Fi);A.mount(dn,un);function qt(e){e.parentElement!==null&&e.parentElement.removeChild(e)}function Mn(e,t,n){const o=n===0?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,o)}function Bi(){return typeof window<"u"?window.console:global.console}const Ri=Bi();function Yi(e){const t=Object.create(null);return function(o){return t[o]||(t[o]=e(o))}}const Hi=/-(\w)/g,Li=Yi(e=>e.replace(Hi,(t,n)=>n.toUpperCase())),co=["Start","Add","Remove","Update","End"],uo=["Choose","Unchoose","Sort","Filter","Clone"],fo=["Move"],Wi=[fo,co,uo].flatMap(e=>e).map(e=>`on${e}`),an={manage:fo,manageAndEmit:co,emit:uo};function Ui(e){return Wi.indexOf(e)!==-1}const zi=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Vi(e){return zi.includes(e)}function ji(e){return["transition-group","TransitionGroup"].includes(e)}function ho(e){return["id","class","role","style"].includes(e)||e.startsWith("data-")||e.startsWith("aria-")||e.startsWith("on")}function go(e){return e.reduce((t,[n,o])=>(t[n]=o,t),{})}function Xi({$attrs:e,componentData:t={}}){return{...go(Object.entries(e).filter(([o,a])=>ho(o))),...t}}function qi({$attrs:e,callBackBuilder:t}){const n=go(po(e));Object.entries(t).forEach(([a,i])=>{an[a].forEach(r=>{n[`on${r}`]=i(r)})});const o=`[data-draggable]${n.draggable||""}`;return{...n,draggable:o}}function po(e){return Object.entries(e).filter(([t,n])=>!ho(t)).map(([t,n])=>[Li(t),n]).filter(([t,n])=>!Ui(t))}const Nn=({el:e})=>e,Gi=(e,t)=>e.__draggable_context=t,Fn=e=>e.__draggable_context;class Ki{constructor({nodes:{header:t,default:n,footer:o},root:a,realList:i}){this.defaultNodes=n,this.children=[...t,...n,...o],this.externalComponent=a.externalComponent,this.rootTransition=a.transition,this.tag=a.tag,this.realList=i}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(t,n){const{tag:o,children:a,_isRootComponent:i}=this;return t(o,n,i?{default:()=>a}:a)}updated(){const{defaultNodes:t,realList:n}=this;t.forEach((o,a)=>{Gi(Nn(o),{element:n[a],index:a})})}getUnderlyingVm(t){return Fn(t)}getVmIndexFromDomIndex(t,n){const{defaultNodes:o}=this,{length:a}=o,i=n.children,r=i.item(t);if(r===null)return a;const s=Fn(r);if(s)return s.index;if(a===0)return 0;const l=Nn(o[0]),u=[...i].findIndex(d=>d===l);return t<u?0:a}}function Zi(e,t){const n=e[t];return n?n():[]}function Ji({$slots:e,realList:t,getKey:n}){const o=t||[],[a,i]=["header","footer"].map(l=>Zi(e,l)),{item:r}=e;if(!r)throw new Error("draggable element must have an item slot");const s=o.flatMap((l,u)=>r({element:l,index:u}).map(d=>(d.key=n(l),d.props={...d.props||{},"data-draggable":!0},d)));if(s.length!==o.length)throw new Error("Item slot must have only one child");return{header:a,footer:i,default:s}}function Qi(e){const t=ji(e),n=!Vi(e)&&!t;return{transition:t,externalComponent:n,tag:n?Qo(e):t?ea:e}}function er({$slots:e,tag:t,realList:n,getKey:o}){const a=Ji({$slots:e,realList:n,getKey:o}),i=Qi(t);return new Ki({nodes:a,root:i,realList:n})}function mo(e,t){Se(()=>this.$emit(e.toLowerCase(),t))}function vo(e){return(t,n)=>{if(this.realList!==null)return this[`onDrag${e}`](t,n)}}function tr(e){const t=vo.call(this,e);return(n,o)=>{t.call(this,n,o),mo.call(this,e,n)}}let Gt=null;const nr={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:e=>e},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},or=["update:modelValue","change",...[...an.manageAndEmit,...an.emit].map(e=>e.toLowerCase())],ar=He({name:"draggable",inheritAttrs:!1,props:nr,emits:or,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:e,$attrs:t,tag:n,componentData:o,realList:a,getKey:i}=this,r=er({$slots:e,tag:n,realList:a,getKey:i});this.componentStructure=r;const s=Xi({$attrs:t,componentData:o});return r.render(yn,s)}catch(e){return this.error=!0,yn("pre",{style:{color:"red"}},e.stack)}},created(){this.list!==null&&this.modelValue!==null&&Ri.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:e,$el:t,componentStructure:n}=this;n.updated();const o=qi({$attrs:e,callBackBuilder:{manageAndEmit:i=>tr.call(this,i),emit:i=>mo.bind(this,i),manage:i=>vo.call(this,i)}}),a=t.nodeType===1?t:t.parentElement;this._sortable=new A(a,o),this.targetDomElement=a,a.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList(){const{list:e}=this;return e||this.modelValue},getKey(){const{itemKey:e}=this;return typeof e=="function"?e:t=>t[e]}},watch:{$attrs:{handler(e){const{_sortable:t}=this;t&&po(e).forEach(([n,o])=>{t.option(n,o)})},deep:!0}},methods:{getUnderlyingVm(e){return this.componentStructure.getUnderlyingVm(e)||null},getUnderlyingPotencialDraggableComponent(e){return e.__draggable_component__},emitChanges(e){Se(()=>this.$emit("change",e))},alterList(e){if(this.list){e(this.list);return}const t=[...this.modelValue];e(t),this.$emit("update:modelValue",t)},spliceList(){const e=t=>t.splice(...arguments);this.alterList(e)},updatePosition(e,t){const n=o=>o.splice(t,0,o.splice(e,1)[0]);this.alterList(n)},getRelatedContextFromMoveEvent({to:e,related:t}){const n=this.getUnderlyingPotencialDraggableComponent(e);if(!n)return{component:n};const o=n.realList,a={list:o,component:n};return e!==t&&o?{...n.getUnderlyingVm(t)||{},...a}:a},getVmIndexFromDomIndex(e){return this.componentStructure.getVmIndexFromDomIndex(e,this.targetDomElement)},onDragStart(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),Gt=e.item},onDragAdd(e){const t=e.item._underlying_vm_;if(t===void 0)return;qt(e.item);const n=this.getVmIndexFromDomIndex(e.newIndex);this.spliceList(n,0,t);const o={element:t,newIndex:n};this.emitChanges({added:o})},onDragRemove(e){if(Mn(this.$el,e.item,e.oldIndex),e.pullMode==="clone"){qt(e.clone);return}const{index:t,element:n}=this.context;this.spliceList(t,1);const o={element:n,oldIndex:t};this.emitChanges({removed:o})},onDragUpdate(e){qt(e.item),Mn(e.from,e.item,e.oldIndex);const t=this.context.index,n=this.getVmIndexFromDomIndex(e.newIndex);this.updatePosition(t,n);const o={element:this.context.element,oldIndex:t,newIndex:n};this.emitChanges({moved:o})},computeFutureIndex(e,t){if(!e.element)return 0;const n=[...t.to.children].filter(r=>r.style.display!=="none"),o=n.indexOf(t.related),a=e.component.getVmIndexFromDomIndex(o);return n.indexOf(Gt)!==-1||!t.willInsertAfter?a:a+1},onDragMove(e,t){const{move:n,realList:o}=this;if(!n||!o)return!0;const a=this.getRelatedContextFromMoveEvent(e),i=this.computeFutureIndex(a,e),r={...this.context,futureIndex:i},s={...e,relatedContext:a,draggedContext:r};return n(s,t)},onDragEnd(){Gt=null}}}),ir={class:"stock-page"},rr={class:"action-buttons"},sr={class:"stock-content"},lr={class:"stock-indicator"},cr={class:"kd-indicator"},ur={class:"rsi-indicator"},dr={class:"rsi-value"},fr={class:"bubble-content",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},hr={__name:"Stock",setup(e){const t=Kn(),n=zn("stock-search");G(null),G(null),G(0);const o=G(!1);Ye(async()=>{try{t.loadUserStocks()}catch(v){console.error("初始化資料庫失敗:",v)}});const a=oe({get(){return t.userStocks},set(v){t.reorderStocks(v)}});function i(){n.emit(!0)}async function r(){o.value=!0;try{const v=await t.refreshAllStockPrices();Ue(v.message)}catch(v){console.error("重新整理失敗:",v),Ue("重新整理失敗")}finally{o.value=!1}}function s(v,$){console.log(`Stock ${$} indicator changed to ${v}`)}function l(v){return v>0?"price-up":v<0?"price-down":"price-flat"}function u(v){return v>70?"rsi-overbought":v<30?"rsi-oversold":"rsi-normal"}function d(v){return v>70?"超買":v<30?"超賣":"正常"}function f(){}function c(v){Ue(`買賣 ${v.name}`)}function h(v){Ue(`${v.name} 策略設定`)}function g(v){Ue(`${v.name} 其他功能`)}function p(v){console.log("開始拖曳",v)}function D(v){console.log("拖曳結束",v)}return ta(document,"visibilitychange",()=>{document.visibilityState==="visible"&&t.loadUserStocks()}),Ye(()=>{}),(v,$)=>(me(),we("div",ir,[B(ne(ba),{modelValue:o.value,"onUpdate:modelValue":$[2]||($[2]=T=>o.value=T),onRefresh:r,"pulling-text":"下拉重新整理股票價格","loosing-text":"釋放立即更新","loading-text":"正在更新股票價格..."},{default:ce(()=>[B(ne(ar),{modelValue:a.value,"onUpdate:modelValue":$[1]||($[1]=T=>a.value=T),"item-key":"id",delay:200,animation:200,"ghost-class":"stock-row-ghost",onStart:p,onEnd:D},{item:ce(({element:T,index:S})=>[U("div",{class:"stock-row",onContextmenu:$[0]||($[0]=na(()=>{},["prevent"]))},[B(ne(Oa),{"left-width":200,onClickLeft:f},{left:ce(()=>[U("div",rr,[B(ne(wt),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:y=>c(T)},{default:ce(()=>$[3]||($[3]=[U("div",null,"交 易",-1),U("div",null,"記 錄",-1)])),_:2,__:[3]},1032,["onClick"]),B(ne(wt),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:y=>h(T)},{default:ce(()=>$[4]||($[4]=[Zt(" 策 略 ",-1)])),_:2,__:[4]},1032,["onClick"]),B(ne(wt),{type:"default",size:"small",class:"action-btn other-btn",onClick:y=>g(T)},{default:ce(()=>$[5]||($[5]=[Zt(" 更 多 ",-1)])),_:2,__:[5]},1032,["onClick"])])]),default:ce(()=>[U("div",sr,[B(ci,{name:T.name,code:T.code,price:T.price,change:T.change,"change-percent":T.changePercent,"price-class":l(T.change),progress:T.progress,"progress-text":T.progressText},null,8,["name","code","price","change","change-percent","price-class","progress","progress-text"]),U("div",lr,[B(ne(ra),{"show-indicators":!1,loop:!1,autoplay:0,onChange:y=>s(y,S)},{default:ce(()=>[B(ne(wn),{class:"indicator-content"},{default:ce(()=>[U("div",cr,[B(Qa,{width:120,height:60,"stock-data":T,"stock-index":S},null,8,["stock-data","stock-index"])])]),_:2},1024),B(ne(wn),{class:"indicator-content"},{default:ce(()=>[U("div",ur,[U("div",dr,fe(T.rsi),1),U("div",{class:Jt(["rsi-trend",u(T.rsi)])},fe(d(T.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],32)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),B(ne(ha),{axis:"xy",magnetic:"x",gap:{x:20,y:80},style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"rgba(255, 224, 102, 0.9)","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:i},{default:ce(()=>[U("div",fr,[B(ne(Wn),{name:"plus",size:"22",color:"#322b0d",style:{"margin-bottom":"2px"}}),$[6]||($[6]=U("span",{class:"bubble-label",style:{color:"#322b0d","font-size":"14px"}},"新增",-1))])]),_:1}),B(Ka)]))}},mr=ln(hr,[["__scopeId","data-v-32c08f71"]]);export{mr as default};
