import{d as B,K as w,n as $,c as I,j as O,o as T,aH as R,a as c,w as j,e as q,f,k as h,t as A,aI as N,I as L,T as P,J as E,a4 as J,Y as K,ak as Y,aJ as H,aA as Q,s as X,am as Z,as as y,ao as V,aq as a,ax as v,au as ee,av as ae,aB as te,aw as oe,ap as C,ar as k,X as S}from"./index-DTro3Jl9.js";import{w as U}from"./worker-pool-DHleA5e1.js";const[F,se]=I("radio-group"),le={shape:String,disabled:Boolean,iconSize:$,direction:String,modelValue:w,checkedColor:String},G=Symbol(F);var ne=B({name:F,props:le,emits:["change","update:modelValue"],setup(e,{emit:s,slots:i}){const{linkChildren:o}=O(G),d=l=>s("update:modelValue",l);return T(()=>e.modelValue,l=>s("change",l)),o({props:e,updateValue:d}),R(()=>e.modelValue),()=>{var l;return c("div",{class:se([e.direction]),role:"radiogroup"},[(l=i.default)==null?void 0:l.call(i)])}}});const ie=j(ne),M={name:w,disabled:Boolean,iconSize:$,modelValue:w,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var de=B({props:q({},M,{bem:N(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:A,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:s,slots:i}){const o=f(),d=n=>{if(e.parent&&e.bindGroup)return e.parent.props[n]},l=h(()=>{if(e.parent&&e.bindGroup){const n=d("disabled")||e.disabled;if(e.role==="checkbox"){const _=d("modelValue").length,m=d("max"),g=m&&_>=+m;return n||g&&!e.checked}return n}return e.disabled}),p=h(()=>d("direction")),r=h(()=>{const n=e.checkedColor||d("checkedColor");if(n&&(e.checked||e.indeterminate)&&!l.value)return{borderColor:n,backgroundColor:n}}),t=h(()=>e.shape||d("shape")||"round"),u=n=>{const{target:_}=n,m=o.value,g=m===_||m?.contains(_);!l.value&&(g||!e.labelDisabled)&&s("toggle"),s("click",n)},b=()=>{var n,_;const{bem:m,checked:g,indeterminate:W}=e,x=e.iconSize||d("iconSize");return c("div",{ref:o,class:m("icon",[t.value,{disabled:l.value,checked:g,indeterminate:W}]),style:t.value!=="dot"?{fontSize:P(x)}:{width:P(x),height:P(x),borderColor:(n=r.value)==null?void 0:n.borderColor}},[i.icon?i.icon({checked:g,disabled:l.value}):t.value!=="dot"?c(L,{name:W?"minus":"success",style:r.value},null):c("div",{class:m("icon--dot__icon"),style:{backgroundColor:(_=r.value)==null?void 0:_.backgroundColor}},null)])},D=()=>{const{checked:n}=e;if(i.default)return c("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[i.default({checked:n,disabled:l.value})])};return()=>{const n=e.labelPosition==="left"?[D(),b()]:[b(),D()];return c("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},p.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:u},[n])}}});const re=q({},M,{shape:String}),[ue,ce]=I("radio");var ve=B({name:ue,props:re,emits:["update:modelValue"],setup(e,{emit:s,slots:i}){const{parent:o}=E(G),d=()=>(o?o.props.modelValue:e.modelValue)===e.name,l=()=>{o?o.updateValue(e.name):s("update:modelValue",e.name)};return()=>c(de,K({bem:ce,role:"radio",parent:o,checked:d(),onToggle:l},e),J(i,["default","icon"]))}});const z=j(ve),me=Y("theme",()=>{const e=f(0),s=f(!1),i=H();return T([e,i],()=>{e.value===0?s.value=i.value:e.value===1?s.value=!1:s.value=!0,document.body.classList.toggle("dark",s.value)},{immediate:!0}),{mode:e,isDark:s}}),be={class:"worker-monitor"},_e={class:"monitor-header"},ke={class:"total-cpu"},he={class:"pool-stats"},ge={class:"pool-name"},fe={class:"pool-info"},pe={class:"stat-item"},Ce={class:"value"},Se={class:"stat-item"},ye={class:"value busy"},Ve={class:"stat-item"},xe={class:"value queue"},Pe={class:"stat-item"},ze={class:"value utilization"},we={class:"progress-bar"},Be={class:"overall-stats"},De={class:"stat-box"},We={class:"stat-value"},Ue={class:"stat-box"},$e={class:"stat-value"},Ie={class:"stat-box"},Te={class:"stat-value"},je={__name:"WorkerMonitor",setup(e){const s=f({}),i=f(navigator.hardwareConcurrency||4),o=h(()=>Object.values(s.value).reduce((r,t)=>r+t.busyWorkers,0)),d=h(()=>Object.values(s.value).reduce((r,t)=>r+t.queuedTasks,0)),l=h(()=>{const r=Object.values(s.value);return r.length===0?0:(r.reduce((u,b)=>u+parseFloat(b.utilization),0)/r.length).toFixed(1)}),p=(r,t,u)=>{s.value={...u}};return X(()=>{U.onAllStatusChange(p),s.value=U.getAllStatus()}),Z(()=>{}),(r,t)=>(V(),y("div",be,[a("div",_e,[t[0]||(t[0]=a("h3",null,"Worker Pool 監控",-1)),a("span",ke,"CPU 核心數: "+v(i.value),1)]),a("div",he,[(V(!0),y(ee,null,ae(s.value,(u,b)=>(V(),y("div",{key:b,class:te(["pool-card",{"pool-busy":u.busyWorkers>0}])},[a("div",ge,v(b),1),a("div",fe,[a("div",pe,[t[1]||(t[1]=a("span",{class:"label"},"可用:",-1)),a("span",Ce,v(u.availableWorkers)+"/"+v(u.totalWorkers),1)]),a("div",Se,[t[2]||(t[2]=a("span",{class:"label"},"使用中:",-1)),a("span",ye,v(u.busyWorkers),1)]),a("div",Ve,[t[3]||(t[3]=a("span",{class:"label"},"排隊:",-1)),a("span",xe,v(u.queuedTasks),1)]),a("div",Pe,[t[4]||(t[4]=a("span",{class:"label"},"使用率:",-1)),a("span",ze,v(u.utilization)+"%",1)])]),a("div",we,[a("div",{class:"progress-fill",style:oe({width:u.utilization+"%"})},null,4)])],2))),128))]),a("div",Be,[a("div",De,[a("div",We,v(o.value),1),t[5]||(t[5]=a("div",{class:"stat-label"},"總使用中",-1))]),a("div",Ue,[a("div",$e,v(d.value),1),t[6]||(t[6]=a("div",{class:"stat-label"},"總排隊",-1))]),a("div",Ie,[a("div",Te,v(l.value)+"%",1),t[7]||(t[7]=a("div",{class:"stat-label"},"整體使用率",-1))])])]))}},qe=Q(je,[["__scopeId","data-v-82d9b20f"]]),Fe={style:{padding:"32px"}},Ge={style:{"margin-bottom":"16px"}},Me={style:{"margin-bottom":"24px"}},Ae={__name:"My",setup(e){const s=me();return(i,o)=>(V(),y("div",Fe,[o[5]||(o[5]=a("h2",null,"我的頁面",-1)),a("div",Ge,[c(k(ie),{modelValue:k(s).mode,"onUpdate:modelValue":o[0]||(o[0]=d=>k(s).mode=d),direction:"horizontal"},{default:C(()=>[c(k(z),{name:0},{default:C(()=>o[1]||(o[1]=[S("跟隨系統",-1)])),_:1,__:[1]}),c(k(z),{name:1},{default:C(()=>o[2]||(o[2]=[S("亮",-1)])),_:1,__:[2]}),c(k(z),{name:2},{default:C(()=>o[3]||(o[3]=[S("暗",-1)])),_:1,__:[3]})]),_:1},8,["modelValue"])]),a("div",Me,[o[4]||(o[4]=S(" 目前主題：",-1)),a("b",null,v(k(s).isDark?"暗":"亮"),1)]),c(qe)]))}};export{Ae as default};
