import{d as $,m as H,c as D,r as g,a as S,i as _,w as z,b as B,e as j,u as U,o as F,n as E,f as K,g as L,h as W,j as G,v as J,k as c,s as Q,l as R,T as Z,p as ee,q,t as X,x as te,y as I,z as ae,H as ne,I as oe,A as se,B as le,C as A,D as M,E as d,F as ie}from"./index-CwliFe8_.js";import{u as ce,P as re,p as ue,a as de,S as pe}from"./index-DrRSWh1O.js";function N(e,u){return e.reduce((s,f)=>Math.abs(s-u)<Math.abs(f-u)?s:f)}const fe={gap:{type:[Number,Object],default:24},icon:String,axis:H("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[ve,V]=D("floating-bubble");var xe=$({name:ve,inheritAttrs:!1,props:fe,emits:["click","update:offset","offsetChange"],setup(e,{slots:u,emit:s,attrs:f}){const h=g(),o=g({x:0,y:0,width:0,height:0}),v=S(()=>_(e.gap)?e.gap.x:e.gap),r=S(()=>_(e.gap)?e.gap.y:e.gap),l=S(()=>({top:r.value,right:B.value-o.value.width-v.value,bottom:z.value-o.value.height-r.value,left:v.value})),m=g(!1);let w=!1;const T=S(()=>{const a={},y=j(o.value.x),i=j(o.value.y);return a.transform=`translate3d(${y}, ${i}, 0)`,(m.value||!w)&&(a.transition="none"),a}),t=()=>{if(!k.value)return;const{width:a,height:y}=ee(h.value),{offset:i}=e;o.value={x:i?i.x:B.value-a-v.value,y:i?i.y:z.value-y-r.value,width:a,height:y}},n=ce();let x=0,b=0;const C=a=>{n.start(a),m.value=!0,x=o.value.x,b=o.value.y};U("touchmove",a=>{if(a.preventDefault(),n.move(a),e.axis!=="lock"&&!n.isTap.value){if(e.axis==="x"||e.axis==="xy"){let i=x+n.deltaX.value;i<l.value.left&&(i=l.value.left),i>l.value.right&&(i=l.value.right),o.value.x=i}if(e.axis==="y"||e.axis==="xy"){let i=b+n.deltaY.value;i<l.value.top&&(i=l.value.top),i>l.value.bottom&&(i=l.value.bottom),o.value.y=i}const y=q(o.value,["x","y"]);s("update:offset",y)}},{target:h});const O=()=>{m.value=!1,E(()=>{if(e.magnetic==="x"){const a=N([l.value.left,l.value.right],o.value.x);o.value.x=a}if(e.magnetic==="y"){const a=N([l.value.top,l.value.bottom],o.value.y);o.value.y=a}if(!n.isTap.value){const a=q(o.value,["x","y"]);s("update:offset",a),(x!==a.x||b!==a.y)&&s("offsetChange",a)}})},Y=a=>{n.isTap.value?s("click",a):a.stopPropagation()};F(()=>{t(),E(()=>{w=!0})}),K([B,z,v,r,()=>e.offset],t,{deep:!0});const k=g(!0);return L(()=>{k.value=!0}),W(()=>{e.teleport&&(k.value=!1)}),()=>{const a=G(c("div",R({class:V(),ref:h,onTouchstartPassive:C,onTouchend:O,onTouchcancel:O,onClickCapture:Y,style:T.value},f),[u.default?u.default():c(Q,{name:e.icon,class:V("icon")},null)]),[[J,k.value]]);return e.teleport?c(Z,{to:e.teleport},{default:()=>[a]}):a}}});const he=X(xe),ge=e=>e?.includes("/"),me=[...de,"round","closeOnPopstate","safeAreaInsetBottom"],ye={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[be,p,we]=D("share-sheet"),ke=te({},ue,{title:String,round:I,options:ae(),cancelText:String,description:String,closeOnPopstate:I,safeAreaInsetBottom:I});var Se=$({name:be,props:ke,emits:["cancel","select","update:show"],setup(e,{emit:u,slots:s}){const f=t=>u("update:show",t),h=()=>{f(!1),u("cancel")},o=(t,n)=>u("select",t,n),v=()=>{const t=s.title?s.title():e.title,n=s.description?s.description():e.description;if(t||n)return c("div",{class:p("header")},[t&&c("h2",{class:p("title")},[t]),n&&c("span",{class:p("description")},[n])])},r=t=>ge(t)?c("img",{src:t,class:p("image-icon")},null):c("div",{class:p("icon",[t])},[c(oe,{name:ye[t]||t},null)]),l=(t,n)=>{const{name:x,icon:b,className:C,description:P}=t;return c("div",{role:"button",tabindex:0,class:[p("option"),C,ne],onClick:()=>o(t,n)},[r(b),x&&c("span",{class:p("name")},[x]),P&&c("span",{class:p("option-description")},[P])])},m=(t,n)=>c("div",{class:p("options",{border:n})},[t.map(l)]),w=()=>{const{options:t}=e;return Array.isArray(t[0])?t.map((n,x)=>m(n,x!==0)):m(t)},T=()=>{var t;const n=(t=e.cancelText)!=null?t:we("cancel");if(s.cancel||n)return c("button",{type:"button",class:p("cancel"),onClick:h},[s.cancel?s.cancel():n])};return()=>c(re,R({class:p(),position:"bottom","onUpdate:show":f},q(e,me)),{default:()=>[v(),w(),T()]})}});const Te=X(Se),Ce={style:{padding:"32px"}},Be={__name:"Stock",setup(e){const u=g(!1),s=g(""),f=g();function h(){u.value=!0}function o(v){console.log("搜尋",v)}return(v,r)=>(ie(),se("div",Ce,[r[4]||(r[4]=le(" 自選股頁面324234234234234234324234234234 ",-1)),c(A(he),{icon:"plus",axis:"xy",magnetic:"x",gap:{x:24,y:80},style:{"--van-floating-bubble-size":"48px"},onClick:h}),c(A(Te),{show:u.value,"onUpdate:show":r[1]||(r[1]=l=>u.value=l),options:[],"cancel-text":"",style:{"--van-share-sheet-header-padding":"24px 24px 0 24px","min-height":"60vh"}},{title:M(()=>r[2]||(r[2]=[d("div",{style:{"font-size":"18px","font-weight":"bold","letter-spacing":"1px","text-align":"center","margin-top":"0","margin-bottom":"0",color:"#222","line-height":"1.2"}}," 股票搜尋 ",-1)])),description:M(()=>[d("div",null,[c(A(pe),{ref_key:"searchInputRef",ref:f,modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=l=>s.value=l),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:o},null,8,["modelValue"])]),r[3]||(r[3]=d("div",null,[d("div",{style:{display:"flex","align-items":"center",margin:"0 0 10px 0"}},[d("div",{style:{"margin-left":"16px","font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px"}}," | 熱門股票 ")]),d("div",{style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center"}},[d("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"台積電"),d("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"鴻海"),d("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"聯發科"),d("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"長榮"),d("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"中鋼")])],-1))]),_:1},8,["show"])]))}};export{Be as default};
