import{d as V,m as H,c as D,r as g,a as k,i as $,w as z,b as B,e as j,u as U,o as F,n as q,f as K,g as L,h as W,j as G,v as J,k as c,s as Q,l as R,T as Z,p as ee,q as O,t as X,x as te,y as I,z as ae,H as ne,I as oe,A as se,B as le,C as A,D as E,E as p,F as ie}from"./index-0DwfAgs6.js";import{u as ce,P as re,p as ue,a as de,S as pe}from"./index-BQn0DGLi.js";function M(e,u){return e.reduce((s,v)=>Math.abs(s-u)<Math.abs(v-u)?s:v)}const fe={gap:{type:[Number,Object],default:24},icon:String,axis:H("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[ve,N]=D("floating-bubble");var xe=V({name:ve,inheritAttrs:!1,props:fe,emits:["click","update:offset","offsetChange"],setup(e,{slots:u,emit:s,attrs:v}){const h=g(),o=g({x:0,y:0,width:0,height:0}),d=k(()=>$(e.gap)?e.gap.x:e.gap),r=k(()=>$(e.gap)?e.gap.y:e.gap),l=k(()=>({top:r.value,right:B.value-o.value.width-d.value,bottom:z.value-o.value.height-r.value,left:d.value})),m=g(!1);let w=!1;const T=k(()=>{const a={},y=j(o.value.x),i=j(o.value.y);return a.transform=`translate3d(${y}, ${i}, 0)`,(m.value||!w)&&(a.transition="none"),a}),t=()=>{if(!S.value)return;const{width:a,height:y}=ee(h.value),{offset:i}=e;o.value={x:i?i.x:B.value-a-d.value,y:i?i.y:z.value-y-r.value,width:a,height:y}},n=ce();let x=0,b=0;const C=a=>{n.start(a),m.value=!0,x=o.value.x,b=o.value.y};U("touchmove",a=>{if(a.preventDefault(),n.move(a),e.axis!=="lock"&&!n.isTap.value){if(e.axis==="x"||e.axis==="xy"){let i=x+n.deltaX.value;i<l.value.left&&(i=l.value.left),i>l.value.right&&(i=l.value.right),o.value.x=i}if(e.axis==="y"||e.axis==="xy"){let i=b+n.deltaY.value;i<l.value.top&&(i=l.value.top),i>l.value.bottom&&(i=l.value.bottom),o.value.y=i}const y=O(o.value,["x","y"]);s("update:offset",y)}},{target:h});const _=()=>{m.value=!1,q(()=>{if(e.magnetic==="x"){const a=M([l.value.left,l.value.right],o.value.x);o.value.x=a}if(e.magnetic==="y"){const a=M([l.value.top,l.value.bottom],o.value.y);o.value.y=a}if(!n.isTap.value){const a=O(o.value,["x","y"]);s("update:offset",a),(x!==a.x||b!==a.y)&&s("offsetChange",a)}})},Y=a=>{n.isTap.value?s("click",a):a.stopPropagation()};F(()=>{t(),q(()=>{w=!0})}),K([B,z,d,r,()=>e.offset],t,{deep:!0});const S=g(!0);return L(()=>{S.value=!0}),W(()=>{e.teleport&&(S.value=!1)}),()=>{const a=G(c("div",R({class:N(),ref:h,onTouchstartPassive:C,onTouchend:_,onTouchcancel:_,onClickCapture:Y,style:T.value},v),[u.default?u.default():c(Q,{name:e.icon,class:N("icon")},null)]),[[J,S.value]]);return e.teleport?c(Z,{to:e.teleport},{default:()=>[a]}):a}}});const he=X(xe),ge=e=>e?.includes("/"),me=[...de,"round","closeOnPopstate","safeAreaInsetBottom"],ye={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[be,f,we]=D("share-sheet"),Se=te({},ue,{title:String,round:I,options:ae(),cancelText:String,description:String,closeOnPopstate:I,safeAreaInsetBottom:I});var ke=V({name:be,props:Se,emits:["cancel","select","update:show"],setup(e,{emit:u,slots:s}){const v=t=>u("update:show",t),h=()=>{v(!1),u("cancel")},o=(t,n)=>u("select",t,n),d=()=>{const t=s.title?s.title():e.title,n=s.description?s.description():e.description;if(t||n)return c("div",{class:f("header")},[t&&c("h2",{class:f("title")},[t]),n&&c("span",{class:f("description")},[n])])},r=t=>ge(t)?c("img",{src:t,class:f("image-icon")},null):c("div",{class:f("icon",[t])},[c(oe,{name:ye[t]||t},null)]),l=(t,n)=>{const{name:x,icon:b,className:C,description:P}=t;return c("div",{role:"button",tabindex:0,class:[f("option"),C,ne],onClick:()=>o(t,n)},[r(b),x&&c("span",{class:f("name")},[x]),P&&c("span",{class:f("option-description")},[P])])},m=(t,n)=>c("div",{class:f("options",{border:n})},[t.map(l)]),w=()=>{const{options:t}=e;return Array.isArray(t[0])?t.map((n,x)=>m(n,x!==0)):m(t)},T=()=>{var t;const n=(t=e.cancelText)!=null?t:we("cancel");if(s.cancel||n)return c("button",{type:"button",class:f("cancel"),onClick:h},[s.cancel?s.cancel():n])};return()=>c(re,R({class:f(),position:"bottom","onUpdate:show":v},O(e,me)),{default:()=>[d(),w(),T()]})}});const Te=X(ke),Ce={style:{padding:"32px"}},Be={__name:"Stock",setup(e){const u=g(!1),s=g(""),v=g();function h(){u.value=!0,q(()=>{const d=v.value?.$el?.querySelector("input");d&&d.focus()})}function o(d){console.log("搜尋",d)}return(d,r)=>(ie(),se("div",Ce,[r[4]||(r[4]=le(" 自選股頁面324234234234234234324234234234 ",-1)),c(A(he),{icon:"plus",axis:"xy",magnetic:"x",gap:{x:24,y:80},style:{"--van-floating-bubble-size":"48px"},onClick:h}),c(A(Te),{show:u.value,"onUpdate:show":r[1]||(r[1]=l=>u.value=l),options:[],"cancel-text":"",style:{"--van-share-sheet-header-padding":"24px 24px 0 24px","min-height":"60vh"}},{title:E(()=>r[2]||(r[2]=[p("div",{style:{"font-size":"18px","font-weight":"bold","letter-spacing":"1px","text-align":"center","margin-top":"0","margin-bottom":"0",color:"#222","line-height":"1.2"}}," 股票搜尋 ",-1)])),description:E(()=>[p("div",null,[c(A(pe),{ref_key:"searchInputRef",ref:v,modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=l=>s.value=l),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:o},null,8,["modelValue"])]),r[3]||(r[3]=p("div",null,[p("div",{style:{display:"flex","align-items":"center",margin:"0 0 10px 0"}},[p("div",{style:{"margin-left":"16px","font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px"}}," | 熱門股票 ")]),p("div",{style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center"}},[p("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"台積電"),p("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"鴻海"),p("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"聯發科"),p("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"長榮"),p("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"中鋼")])],-1))]),_:1},8,["show"])]))}};export{Be as default};
