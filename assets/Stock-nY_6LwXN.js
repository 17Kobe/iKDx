import{d as Pe,m as Vt,c as en,r as H,a as le,i as un,w as It,b as Mt,e as dn,u as $n,f as Fn,o as wt,n as Ae,g as ht,h as Co,j as ko,k as To,v as Oo,l as $,s as Io,p as Nn,T as Mo,q as Rn,t as pt,x as tn,y as Wn,z as jn,A as Ao,B as zn,C as fn,D as Yo,E as Po,F as hn,G as Lo,H as $o,I as Fo,J as nn,K as Bn,L as Xn,M as No,N as Hn,O as ee,P as ue,Q as M,R as Q,S as se,U as Ro,V as At,W as pn,X as Vn,Y as te,Z as _e,_ as Kn,$ as Ve,a0 as Wo,a1 as Kt,a2 as qn,a3 as Ke,a4 as z,a5 as on,a6 as qt,a7 as jo,a8 as zo,a9 as Bo,aa as gn,ab as Xo}from"./index-40dnFT7n.js";import{F as Ho,f as Un,C as gt,L as Vo,a as Ko,b as qo,c as Uo,P as Go,d as Jo,p as Zo,e as Qo,g as er,T as tr}from"./chart-WHf2nETT.js";import{u as nr,S as or,a as mn}from"./index-DuV6uuM6.js";import{A as Gn}from"./index-iKA6sjUg.js";import{B as Yt}from"./index-DiLAHEQG.js";import"./index-CNLdg7Yi.js";function vn(t,e){return t.reduce((n,o)=>Math.abs(n-e)<Math.abs(o-e)?n:o)}const rr={gap:{type:[Number,Object],default:24},icon:String,axis:Vt("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[ar,bn]=en("floating-bubble");var ir=Pe({name:ar,inheritAttrs:!1,props:rr,emits:["click","update:offset","offsetChange"],setup(t,{slots:e,emit:n,attrs:o}){const r=H(),a=H({x:0,y:0,width:0,height:0}),i=le(()=>un(t.gap)?t.gap.x:t.gap),s=le(()=>un(t.gap)?t.gap.y:t.gap),l=le(()=>({top:s.value,right:Mt.value-a.value.width-i.value,bottom:It.value-a.value.height-s.value,left:i.value})),c=H(!1);let u=!1;const d=le(()=>{const h={},w=dn(a.value.x),x=dn(a.value.y);return h.transform=`translate3d(${w}, ${x}, 0)`,(c.value||!u)&&(h.transition="none"),h}),f=()=>{if(!T.value)return;const{width:h,height:w}=Rn(r.value),{offset:x}=t;a.value={x:x?x.x:Mt.value-h-i.value,y:x?x.y:It.value-w-s.value,width:h,height:w}},y=$n();let m=0,g=0;const p=h=>{y.start(h),c.value=!0,m=a.value.x,g=a.value.y};Fn("touchmove",h=>{if(h.preventDefault(),y.move(h),t.axis!=="lock"&&!y.isTap.value){if(t.axis==="x"||t.axis==="xy"){let x=m+y.deltaX.value;x<l.value.left&&(x=l.value.left),x>l.value.right&&(x=l.value.right),a.value.x=x}if(t.axis==="y"||t.axis==="xy"){let x=g+y.deltaY.value;x<l.value.top&&(x=l.value.top),x>l.value.bottom&&(x=l.value.bottom),a.value.y=x}const w=pt(a.value,["x","y"]);n("update:offset",w)}},{target:r});const S=()=>{c.value=!1,Ae(()=>{if(t.magnetic==="x"){const h=vn([l.value.left,l.value.right],a.value.x);a.value.x=h}if(t.magnetic==="y"){const h=vn([l.value.top,l.value.bottom],a.value.y);a.value.y=h}if(!y.isTap.value){const h=pt(a.value,["x","y"]);n("update:offset",h),(m!==h.x||g!==h.y)&&n("offsetChange",h)}})},E=h=>{y.isTap.value?n("click",h):h.stopPropagation()};wt(()=>{f(),Ae(()=>{u=!0})}),ht([Mt,It,i,s,()=>t.offset],f,{deep:!0});const T=H(!0);return Co(()=>{T.value=!0}),ko(()=>{t.teleport&&(T.value=!1)}),()=>{const h=To($("div",Nn({class:bn(),ref:r,onTouchstartPassive:p,onTouchend:S,onTouchcancel:S,onClickCapture:E,style:d.value},o),[e.default?e.default():$(Io,{name:t.icon,class:bn("icon")},null)]),[[Oo,T.value]]);return t.teleport?$(Mo,{to:t.teleport},{default:()=>[h]}):h}}});const sr=tn(ir),[lr,Fe,cr]=en("search"),ur=Wn({},Un,{label:String,shape:Vt("square"),leftIcon:Vt("search"),clearable:Ao,actionText:String,background:String,showAction:Boolean});var dr=Pe({name:lr,props:ur,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:n,attrs:o}){const r=nr(),a=H(),i=()=>{n.action||(e("update:modelValue",""),e("cancel"))},s=h=>{h.keyCode===13&&(zn(h),e("search",t.modelValue))},l=()=>t.id||`${r}-input`,c=()=>{if(n.label||t.label)return $("label",{class:Fe("label"),for:l(),"data-allow-mismatch":"attribute"},[n.label?n.label():t.label])},u=()=>{if(t.showAction){const h=t.actionText||cr("cancel");return $("div",{class:Fe("action"),role:"button",tabindex:0,onClick:i},[n.action?n.action():h])}},d=()=>{var h;return(h=a.value)==null?void 0:h.blur()},f=()=>{var h;return(h=a.value)==null?void 0:h.focus()},y=h=>e("blur",h),m=h=>e("focus",h),g=h=>e("clear",h),p=h=>e("clickInput",h),v=h=>e("clickLeftIcon",h),S=h=>e("clickRightIcon",h),E=Object.keys(Un),T=()=>{const h=Wn({},o,pt(t,E),{id:l()}),w=x=>e("update:modelValue",x);return $(Ho,Nn({ref:a,type:"search",class:Fe("field",{"with-message":h.errorMessage}),border:!1,onBlur:y,onFocus:m,onClear:g,onKeypress:s,onClickInput:p,onClickLeftIcon:v,onClickRightIcon:S,"onUpdate:modelValue":w},h),pt(n,["left-icon","right-icon"]))};return jn({focus:f,blur:d}),()=>{var h;return $("div",{class:Fe({"show-action":t.showAction}),style:{background:t.background}},[(h=n.left)==null?void 0:h.call(n),$("div",{class:Fe("content",t.shape)},[c(),T()]),u()])}}});const fr=tn(dr),[hr,Pt]=en("swipe-cell"),pr={name:Yo(""),disabled:Boolean,leftWidth:fn,rightWidth:fn,beforeClose:Function,stopPropagation:Boolean};var gr=Pe({name:hr,props:pr,emits:["open","close","click"],setup(t,{emit:e,slots:n}){let o,r,a,i;const s=H(),l=H(),c=H(),u=Po({offset:0,dragging:!1}),d=$n(),f=_=>_.value?Rn(_).width:0,y=le(()=>hn(t.leftWidth)?+t.leftWidth:f(l)),m=le(()=>hn(t.rightWidth)?+t.rightWidth:f(c)),g=_=>{u.offset=_==="left"?y.value:-m.value,o||(o=!0,e("open",{name:t.name,position:_}))},p=_=>{u.offset=0,o&&(o=!1,e("close",{name:t.name,position:_}))},v=_=>{const D=Math.abs(u.offset),P=.15,I=o?1-P:P,A=_==="left"?y.value:m.value;A&&D>A*I?g(_):p(_)},S=_=>{t.disabled||(a=u.offset,d.start(_))},E=_=>{if(t.disabled)return;const{deltaX:D}=d;d.move(_),d.isHorizontal()&&(r=!0,u.dragging=!0,(!o||D.value*a<0)&&zn(_,t.stopPropagation),u.offset=$o(D.value+a,-m.value,y.value))},T=()=>{u.dragging&&(u.dragging=!1,v(u.offset>0?"left":"right"),setTimeout(()=>{r=!1},0))},h=(_="outside",D)=>{i||(e("click",_),o&&!r&&(i=!0,Fo(t.beforeClose,{args:[{event:D,name:t.name,position:_}],done:()=>{i=!1,p(_)},canceled:()=>i=!1,error:()=>i=!1})))},w=_=>D=>{(r||o)&&D.stopPropagation(),!r&&h(_,D)},x=(_,D)=>{const P=n[_];if(P)return $("div",{ref:D,class:Pt(_),onClick:w(_)},[P()])};return jn({open:g,close:p}),Lo(s,_=>h("outside",_),{eventName:"touchstart"}),Fn("touchmove",E,{target:s}),()=>{var _;const D={transform:`translate3d(${u.offset}px, 0, 0)`,transitionDuration:u.dragging?"0s":".6s"};return $("div",{ref:s,class:Pt(),onClick:w("cell"),onTouchstartPassive:S,onTouchend:T,onTouchcancel:T},[$("div",{class:Pt("wrapper"),style:D},[x("left",l),(_=n.default)==null?void 0:_.call(n),x("right",c)])])}}});const mr=tn(gr),vr={style:{display:"flex","flex-direction":"column",gap:"0"}},br={style:{margin:"16px 0 0 0"}},yr={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},xr=["onClick"],wr={key:0,style:{"margin-top":"12px"}},Sr={key:0},Dr={key:0,style:{background:"#d3d3d3","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",opacity:"0.6"}},_r={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Er={style:{"font-size":"16px",color:"#333",flex:"1"}},Cr=["onClick"],kr={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Tr={style:{"font-size":"16px",color:"#333",flex:"1"}},Or={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},Ir={__name:"StockSearch",setup(t){const e=nn(),n=Bn("stock-search"),o=H(!1);wt(()=>{n.on(g=>{o.value=g})}),Xn(()=>{n.reset()});const r=H(),a=H(""),i=H([]),s=["台積電","鴻海","聯發科","長榮","中鋼"],l={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},c={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function u(g){return a.value===g?{...l,...c}:l}function d(){Ae(()=>{const g=r.value?.$el?.querySelector("input");g&&g.focus()})}ht(()=>o.value,g=>{g&&setTimeout(()=>{d()},300)}),ht(()=>a.value,async g=>{if(console.log("localSearch 更新:",g),!g||g.length<1){i.value=[];return}console.log("觸發 getAllStocks");try{const p=await No();console.log("getAllStocks 執行成功",p),i.value=p.filter(v=>v.name.includes(g)||v.id.includes(g)),console.log("搜尋結果:",i.value)}catch(p){console.error("getAllStocks 執行失敗:",p)}});function f(g){}function y(g){console.log("點擊熱門標籤:",g),a.value=g}async function m(g){const p=await e.addStockToList(g);_e({message:p.message,type:p.success?"success":"fail"})}return(g,p)=>(ee(),Hn(Q(Gn),{show:o.value,"onUpdate:show":p[3]||(p[3]=v=>o.value=v),"cancel-text":"離開",title:"股票搜尋",onSelect:m,style:{height:"80vh",maxHeight:"80vh"},"body-style":"height:80vh;max-height:80vh;overflow-y:auto;"},{description:ue(()=>[M("div",vr,[$(Q(fr),{ref_key:"searchInputRef",ref:r,modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=v=>a.value=v),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:f},null,8,["modelValue"]),M("div",br,[p[5]||(p[5]=M("div",{style:{"font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px","margin-bottom":"8px","margin-left":"8px","text-align":"left"}}," | 熱門股票 ",-1)),M("div",yr,[(ee(),se(At,null,pn(s,v=>M("span",{key:v,onClick:S=>y(v),style:Vn(u(v))},te(v),13,xr)),64))]),a.value&&a.value.length>=1?(ee(),se("div",wr,[i.value.length?(ee(),se("div",Sr,[(ee(!0),se(At,null,pn(i.value,v=>(ee(),se(At,{key:v.id},[Q(e).isStockInList(v.id)?(ee(),se("div",Dr,[M("div",_r,te(v.id),1),M("div",Er,te(v.name),1),p[4]||(p[4]=M("div",{style:{"margin-left":"12px","min-width":"60px",height:"40px",background:"#e0e0e0",color:"#666","font-weight":"bold","font-size":"16px","border-radius":"8px",width:"64px",display:"flex","align-items":"center","justify-content":"center"}}," 已新增 ",-1))])):(ee(),se("div",{key:1,onClick:S=>m(v),style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",cursor:"pointer",transition:"all 0.2s ease"},onMouseenter:p[1]||(p[1]=S=>S.target.style.background="#eff3f6"),onMouseleave:p[2]||(p[2]=S=>S.target.style.background="#fff")},[M("div",kr,te(v.id),1),M("div",Tr,te(v.name),1)],40,Cr))],64))),128))])):(ee(),se("div",Or," 查無資料 "))])):Ro("",!0)])])]),_:1},8,["show"]))}},Jn={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Mr={ariaLabel:{type:String},ariaDescribedby:{type:String}},Ar={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Jn,...Mr},Yr=Wo[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function Ce(t){return qn(t)?Kt(t):t}function Pr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return qn(e)?new Proxy(t,{}):t}function Lr(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Zn(t,e){t.labels=e}function Qn(t,e,n){const o=[];t.datasets=e.map(r=>{const a=t.datasets.find(i=>i[n]===r[n]);return!a||!r.data||o.includes(a)?{...r}:(o.push(a),Object.assign(a,r),a)})}function $r(t,e){const n={labels:[],datasets:[]};return Zn(n,t.labels),Qn(n,t.datasets,e),n}const Fr=Pe({props:Ar,setup(t,e){let{expose:n,slots:o}=e;const r=H(null),a=Kn(null);n({chart:a});const i=()=>{if(!r.value)return;const{type:c,data:u,options:d,plugins:f,datasetIdKey:y}=t,m=$r(u,y),g=Pr(m,u);a.value=new gt(r.value,{type:c,data:g,options:{...d},plugins:f})},s=()=>{const c=Kt(a.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),a.value=null},t.destroyDelay):(c.destroy(),a.value=null))},l=c=>{c.update(t.updateMode)};return wt(i),Xn(s),ht([()=>t.options,()=>t.data],(c,u)=>{let[d,f]=c,[y,m]=u;const g=Kt(a.value);if(!g)return;let p=!1;if(d){const v=Ce(d),S=Ce(y);v&&v!==S&&(Lr(g,v),p=!0)}if(f){const v=Ce(f.labels),S=Ce(m.labels),E=Ce(f.datasets),T=Ce(m.datasets);v!==S&&(Zn(g.config.data,v),p=!0),E&&E!==T&&(Qn(g.config.data,E,t.datasetIdKey),p=!0)}p&&Ae(()=>{l(g)})},{deep:!0}),()=>Ve("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:r},[Ve("p",{},[o.default?o.default():""])])}});function Nr(t,e){return gt.register(e),Pe({props:Jn,setup(n,o){let{expose:r}=o;const a=Kn(null),i=s=>{a.value=s?.chart};return r({chart:a}),()=>Ve(Fr,Yr({ref:i},{type:t,...n}))}})}const Rr=Nr("line",Vo);var ot={exports:{}},Wr=ot.exports,yn;function jr(){return yn||(yn=1,function(t,e){(function(n,o){t.exports=o()})(Wr,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,a=/\d\d/,i=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,l={},c=function(p){return(p=+p)+(p>68?1900:2e3)},u=function(p){return function(v){this[p]=+v}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var S=v.match(/([+-]|\d\d)/g),E=60*S[1]+(+S[2]||0);return E===0?0:S[0]==="+"?-E:E}(p)}],f=function(p){var v=l[p];return v&&(v.indexOf?v:v.s.concat(v.f))},y=function(p,v){var S,E=l.meridiem;if(E){for(var T=1;T<=24;T+=1)if(p.indexOf(E(T,0,v))>-1){S=T>12;break}}else S=p===(v?"pm":"PM");return S},m={A:[s,function(p){this.afternoon=y(p,!1)}],a:[s,function(p){this.afternoon=y(p,!0)}],Q:[r,function(p){this.month=3*(p-1)+1}],S:[r,function(p){this.milliseconds=100*+p}],SS:[a,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[i,u("seconds")],ss:[i,u("seconds")],m:[i,u("minutes")],mm:[i,u("minutes")],H:[i,u("hours")],h:[i,u("hours")],HH:[i,u("hours")],hh:[i,u("hours")],D:[i,u("day")],DD:[a,u("day")],Do:[s,function(p){var v=l.ordinal,S=p.match(/\d+/);if(this.day=S[0],v)for(var E=1;E<=31;E+=1)v(E).replace(/\[|\]/g,"")===p&&(this.day=E)}],w:[i,u("week")],ww:[a,u("week")],M:[i,u("month")],MM:[a,u("month")],MMM:[s,function(p){var v=f("months"),S=(f("monthsShort")||v.map(function(E){return E.slice(0,3)})).indexOf(p)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[s,function(p){var v=f("months").indexOf(p)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[a,function(p){this.year=c(p)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function g(p){var v,S;v=p,S=l&&l.formats;for(var E=(p=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(P,I,A){var F=A&&A.toUpperCase();return I||S[A]||n[A]||S[F].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(R,J,K){return J||K.slice(1)})})).match(o),T=E.length,h=0;h<T;h+=1){var w=E[h],x=m[w],_=x&&x[0],D=x&&x[1];E[h]=D?{regex:_,parser:D}:w.replace(/^\[|\]$/g,"")}return function(P){for(var I={},A=0,F=0;A<T;A+=1){var R=E[A];if(typeof R=="string")F+=R.length;else{var J=R.regex,K=R.parser,pe=P.slice(F),ae=J.exec(pe)[0];K.call(I,ae),P=P.replace(ae,"")}}return function(ge){var Le=ge.afternoon;if(Le!==void 0){var U=ge.hours;Le?U<12&&(ge.hours+=12):U===12&&(ge.hours=0),delete ge.afternoon}}(I),I}}return function(p,v,S){S.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(c=p.parseTwoDigitYear);var E=v.prototype,T=E.parse;E.parse=function(h){var w=h.date,x=h.utc,_=h.args;this.$u=x;var D=_[1];if(typeof D=="string"){var P=_[2]===!0,I=_[3]===!0,A=P||I,F=_[2];I&&(F=_[2]),l=this.$locale(),!P&&F&&(l=S.Ls[F]),this.$d=function(pe,ae,ge,Le){try{if(["x","X"].indexOf(ae)>-1)return new Date((ae==="X"?1e3:1)*pe);var U=g(ae)(pe),$e=U.year,Ge=U.month,wo=U.day,So=U.hours,Do=U.minutes,_o=U.seconds,Eo=U.milliseconds,ln=U.zone,cn=U.week,Dt=new Date,_t=wo||($e||Ge?1:Dt.getDate()),Et=$e||Dt.getFullYear(),Je=0;$e&&!Ge||(Je=Ge>0?Ge-1:Dt.getMonth());var Ze,Ct=So||0,kt=Do||0,Tt=_o||0,Ot=Eo||0;return ln?new Date(Date.UTC(Et,Je,_t,Ct,kt,Tt,Ot+60*ln.offset*1e3)):ge?new Date(Date.UTC(Et,Je,_t,Ct,kt,Tt,Ot)):(Ze=new Date(Et,Je,_t,Ct,kt,Tt,Ot),cn&&(Ze=Le(Ze).week(cn).toDate()),Ze)}catch{return new Date("")}}(w,D,x,S),this.init(),F&&F!==!0&&(this.$L=this.locale(F).$L),A&&w!=this.format(D)&&(this.$d=new Date("")),l={}}else if(D instanceof Array)for(var R=D.length,J=1;J<=R;J+=1){_[1]=D[J-1];var K=S.apply(this,_);if(K.isValid()){this.$d=K.$d,this.$L=K.$L,this.init();break}J===R&&(this.$d=new Date(""))}else T.call(this,h)}}})}(ot)),ot.exports}var zr=jr();const Br=Ke(zr);var rt={exports:{}},Xr=rt.exports,xn;function Hr(){return xn||(xn=1,function(t,e){(function(n,o){t.exports=o()})(Xr,function(){return function(n,o){var r=o.prototype,a=r.format;r.format=function(i){var s=this,l=this.$locale();if(!this.isValid())return a.bind(this)(i);var c=this.$utils(),u=(i||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return l.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return l.ordinal(s.week(),"W");case"w":case"ww":return c.s(s.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(s.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(s.$H===0?24:s.$H),d==="k"?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return d}});return a.bind(this)(u)}}})}(rt)),rt.exports}var Vr=Hr();const Kr=Ke(Vr);var at={exports:{}},qr=at.exports,wn;function Ur(){return wn||(wn=1,function(t,e){(function(n,o){t.exports=o()})(qr,function(){var n="month",o="quarter";return function(r,a){var i=a.prototype;i.quarter=function(c){return this.$utils().u(c)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(c-1))};var s=i.add;i.add=function(c,u){return c=Number(c),this.$utils().p(u)===o?this.add(3*c,n):s.bind(this)(c,u)};var l=i.startOf;i.startOf=function(c,u){var d=this.$utils(),f=!!d.u(u)||u;if(d.p(c)===o){var y=this.quarter()-1;return f?this.month(3*y).startOf(n).startOf("day"):this.month(3*y+2).endOf(n).endOf("day")}return l.bind(this)(c,u)}}})}(at)),at.exports}var Gr=Ur();const Jr=Ke(Gr);var it={exports:{}},Zr=it.exports,Sn;function Qr(){return Sn||(Sn=1,function(t,e){(function(n,o){t.exports=o()})(Zr,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(o,r,a){var i=r.prototype,s=i.format;a.en.formats=n,i.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,u=function(d,f){return d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(y,m,g){var p=g&&g.toUpperCase();return m||f[g]||n[g]||f[p].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,S,E){return S||E.slice(1)})})}(l,c===void 0?{}:c);return s.call(this,u)}}})}(it)),it.exports}var ea=Qr();const ta=Ke(ea);var st={exports:{}},na=st.exports,Dn;function oa(){return Dn||(Dn=1,function(t,e){(function(n,o){t.exports=o()})(na,function(){var n="day";return function(o,r,a){var i=function(c){return c.add(4-c.isoWeekday(),n)},s=r.prototype;s.isoWeekYear=function(){return i(this).year()},s.isoWeek=function(c){if(!this.$utils().u(c))return this.add(7*(c-this.isoWeek()),n);var u,d,f,y,m=i(this),g=(u=this.isoWeekYear(),d=this.$u,f=(d?a.utc:a)().year(u).startOf("year"),y=4-f.isoWeekday(),f.isoWeekday()>4&&(y+=7),f.add(y,n));return m.diff(g,"week")+1},s.isoWeekday=function(c){return this.$utils().u(c)?this.day()||7:this.day(this.day()%7?c:c-7)};var l=s.startOf;s.startOf=function(c,u){var d=this.$utils(),f=!!d.u(u)||u;return d.p(c)==="isoweek"?f?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(c,u)}}})}(st)),st.exports}var ra=oa();const aa=Ke(ra);z.extend(Kr);z.extend(Jr);z.extend(ta);z.extend(Br);z.extend(aa);var ia={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Ko._date.override({formats:function(){return ia},parse:function(e,n){var o=typeof e;return e===null||o==="undefined"?null:o==="string"&&typeof n=="string"?z(e,n).isValid()?z(e,n).valueOf():null:e instanceof z?null:z(e).isValid()?z(e).valueOf():null},format:function(e,n){return z(e).format(n)},add:function(e,n,o){return z(e).add(n,o).valueOf()},diff:function(e,n,o){return z(e).diff(z(n),o)},startOf:function(e,n,o){if(n==="isoWeek"){var r=typeof o=="number"&&o>0&&o<7?o:1;return z(e).isoWeekday(r).startOf("day").valueOf()}return z(e).startOf(n).valueOf()},endOf:function(e,n){return z(e).endOf(n).valueOf()}});const sa={key:1,class:"error-placeholder"},la={__name:"KdjChart",props:{stockId:{type:String,required:!0},width:{type:Number,default:200},height:{type:Number,default:100}},emits:["kdjClick"],setup(t,{emit:e}){gt.register(qo,Uo,Go,Jo,Zo,Qo,er,tr);const n={id:"kdjDisplay",afterDatasetsDraw:(d,f,y)=>{if(!y.enabled||!y.lastKdj)return;const{ctx:m,chartArea:g}=d,{lastKdj:p}=y,S=d.scales.y.getPixelForValue(0),E=g.right-97,T=S+15,h=S+30;m.save(),console.log("Drawing KDJ values:",{k:p.k,d:p.d,xStart:E,yK:T,yD:h,zeroY:S,chartArea:g}),m.font="bold 12px Arial",m.textAlign="left",m.fillStyle="#4286f5";const w=`K: ${p.k}`;m.fillText(w,E,T);const x=m.measureText(w).width;m.fillStyle="#e75c9a";const _=` D: ${p.d}`,D=E+x;console.log("Drawing D value:",_,"at same line position:",D,T),m.fillText(_,D,T),m.restore()}};gt.register(n);const o=t,r=e,a=nn(),i=H(null),s=le(()=>{const d=a.userStockList.find(f=>f.id===o.stockId);return d?.data?.weeklyKdj?d.data.weeklyKdj.filter(f=>f&&Array.isArray(f)&&f.length>=4&&typeof f[1]=="number"&&!isNaN(f[1])&&typeof f[2]=="number"&&!isNaN(f[2])&&typeof f[3]=="number"&&!isNaN(f[3])).map(f=>({x:z(f[0],"YYYYMMDD").toDate(),k:f[1],d:f[2],j:f[3]})):[]}),l=le(()=>{const d=s.value;if(!d||d.length===0)return{datasets:[]};const f=d.map(m=>({x:m.x,y:m.k})),y=d.map(m=>({x:m.x,y:m.d}));return{datasets:[{label:"K",data:f,borderColor:"#4286f5",backgroundColor:"rgba(66, 134, 245, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#4286f5",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2},{label:"D",data:y,borderColor:"#e75c9a",backgroundColor:"rgba(231, 92, 154, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#e75c9a",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2}]}}),c=le(()=>{const d=s.value;return d&&d.length>0?d[d.length-1]:null}),u=le(()=>{const d=c.value;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#333",bodyColor:"#333",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,cornerRadius:6,displayColors:!1,padding:8,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:function(f){const y=f[0].parsed.x;return z(y).format("YYYY-MM-DD(dd)")},label:function(f){const y=f.dataset.label,m=f.parsed.y.toFixed(2);return`${y}: ${m}`},afterLabel:function(f){const y=f.dataIndex,m=s.value;if(m&&m[y]){const g=m[y];if(f.datasetIndex===0)return[`K: ${g.k.toFixed(2)}`,`D: ${g.d.toFixed(2)}`,`J: ${g.j.toFixed(2)}`]}return[]}}},kdjDisplay:{enabled:!!d,lastKdj:d?{k:d.k.toFixed(2),d:d.d.toFixed(2),j:d.j.toFixed(2),date:z(d.x).format("YYYY/MM/DD")}:null}},scales:{x:{type:"time",time:{unit:"week",displayFormats:{week:"MM/DD"}},display:!1,grid:{display:!1},ticks:{display:!1},offset:!1,bounds:"data"},y:{type:"linear",position:"right",display:!0,min:-20,max:100,border:{display:!1},grid:{drawTicks:!1,color:f=>{const y=f.tick.value;return[0,20,50,80,100].includes(y)?"rgba(200, 200, 200, 0.3)":"transparent"}},ticks:{stepSize:10,autoSkip:!1,color:"#888",font:{size:12},padding:-15,callback:f=>f===20||f===50||f===80?f:""}}},animation:!1,interaction:{mode:"nearest",intersect:!1,includeInvisible:!1},hover:{mode:"nearest",intersect:!1,animationDuration:200},onClick:(f,y,m)=>{console.log("Chart onClick triggered"),console.log("Event object:",f);const g=m.canvas.getBoundingClientRect();let p,v;if(f.native)p=f.native.offsetX||f.native.clientX-g.left,v=f.native.offsetY||f.native.clientY-g.top;else if(f.offsetX!==void 0)p=f.offsetX,v=f.offsetY;else if(f.clientX!==void 0)p=f.clientX-g.left,v=f.clientY-g.top;else{console.log("Cannot determine click position");return}console.log("Click position:",{x:p,y:v}),console.log("Canvas rect:",g);const S=m.chartArea,T=m.scales.y.getPixelForValue(0),h={left:S.right-120,right:S.right-5,top:T+5,bottom:T+20};if(console.log("KDJ area:",h),p>=h.left&&p<=h.right&&v>=h.top&&v<=h.bottom){console.log("Clicked in KDJ area");const w=c.value;w&&(console.log("Emitting kdjClick event:",w),r("kdjClick",{k:w.k.toFixed(2),d:w.d.toFixed(2),j:w.j.toFixed(2),date:z(w.x).format("YYYY/MM/DD")}))}else console.log("Clicked outside KDJ area")}}});return(d,f)=>(ee(),se("div",{ref_key:"chartContainer",ref:i,class:"kdj-chart",style:{width:"100%",height:"100%"}},[l.value.datasets.length>0?(ee(),Hn(Q(Rr),{key:0,data:l.value,options:u.value},null,8,["data","options"])):(ee(),se("div",sa,"KDJ 圖表暫不可用"))],512))}},ca=on(la,[["__scopeId","data-v-7b9bfd80"]]),ua={class:"stock-name"},da={class:"stock-name-main"},fa={class:"stock-name-left"},ha={class:"name highlight"},pa={class:"code"},ga={class:"stock-name-right"},ma={class:"stock-progress-bar"},va={class:"progress-text"},ba={__name:"StockName",props:{name:String,code:String,price:[String,Number],change:[String,Number],changePercent:[String,Number],priceClass:String,progress:Number,progressText:String},setup(t){return(e,n)=>(ee(),se("div",ua,[M("div",da,[M("div",fa,[M("div",ha,te(t.name),1),M("div",pa,te(t.code),1),n[0]||(n[0]=M("div",{class:"star-area"},[M("span",{class:"star"},"★")],-1))]),M("div",ga,[M("div",{class:qt(["price",t.priceClass])},te(t.price),3),M("div",{class:qt(["change",t.priceClass])},te(t.change>0?"+":"")+te(t.change)+" ("+te(t.changePercent)+"%) ",3)])]),M("div",ma,[M("div",{class:"stock-progress-inner",style:Vn({width:(t.progress||0)+"%"})},[M("span",va,te(t.progressText||(t.progress||0)+"%"),1)],4)])]))}},ya=on(ba,[["__scopeId","data-v-e4a25520"]]);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function _n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,o)}return n}function he(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_n(Object(n),!0).forEach(function(o){xa(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function lt(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lt=function(e){return typeof e}:lt=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(t)}function xa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ve(){return ve=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ve.apply(this,arguments)}function wa(t,e){if(t==null)return{};var n={},o=Object.keys(t),r,a;for(a=0;a<o.length;a++)r=o[a],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Sa(t,e){if(t==null)return{};var n=wa(t,e),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)o=a[r],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}var Da="1.14.0";function me(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var be=me(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),qe=me(/Edge/i),En=me(/firefox/i),je=me(/safari/i)&&!me(/chrome/i)&&!me(/android/i),eo=me(/iP(ad|od|hone)/i),_a=me(/chrome/i)&&me(/android/i),to={capture:!1,passive:!1};function L(t,e,n){t.addEventListener(e,n,!be&&to)}function Y(t,e,n){t.removeEventListener(e,n,!be&&to)}function mt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function Ea(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function de(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&mt(t,e):mt(t,e))||o&&t===n)return t;if(t===n)break}while(t=Ea(t))}return null}var Cn=/\s+/g;function ne(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(Cn," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(Cn," ")}}function C(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function Me(t,e){var n="";if(typeof t=="string")n=t;else do{var o=C(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function no(t,e,n){if(t){var o=t.getElementsByTagName(e),r=0,a=o.length;if(n)for(;r<a;r++)n(o[r],r);return o}return[]}function fe(){var t=document.scrollingElement;return t||document.documentElement}function X(t,e,n,o,r){if(!(!t.getBoundingClientRect&&t!==window)){var a,i,s,l,c,u,d;if(t!==window&&t.parentNode&&t!==fe()?(a=t.getBoundingClientRect(),i=a.top,s=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(i=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!be))do if(r&&r.getBoundingClientRect&&(C(r,"transform")!=="none"||n&&C(r,"position")!=="static")){var f=r.getBoundingClientRect();i-=f.top+parseInt(C(r,"border-top-width")),s-=f.left+parseInt(C(r,"border-left-width")),l=i+a.height,c=s+a.width;break}while(r=r.parentNode);if(o&&t!==window){var y=Me(r||t),m=y&&y.a,g=y&&y.d;y&&(i/=g,s/=m,d/=m,u/=g,l=i+u,c=s+d)}return{top:i,left:s,bottom:l,right:c,width:d,height:u}}}function kn(t,e,n){for(var o=we(t,!0),r=X(t)[e];o;){var a=X(o)[n],i=void 0;if(i=r>=a,!i)return o;if(o===fe())break;o=we(o,!1)}return!1}function Ye(t,e,n,o){for(var r=0,a=0,i=t.children;a<i.length;){if(i[a].style.display!=="none"&&i[a]!==k.ghost&&(o||i[a]!==k.dragged)&&de(i[a],n.draggable,t,!1)){if(r===e)return i[a];r++}a++}return null}function rn(t,e){for(var n=t.lastElementChild;n&&(n===k.ghost||C(n,"display")==="none"||e&&!mt(n,e));)n=n.previousElementSibling;return n||null}function ie(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==k.clone&&(!e||mt(t,e))&&n++;return n}function Tn(t){var e=0,n=0,o=fe();if(t)do{var r=Me(t),a=r.a,i=r.d;e+=t.scrollLeft*a,n+=t.scrollTop*i}while(t!==o&&(t=t.parentNode));return[e,n]}function Ca(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function we(t,e){if(!t||!t.getBoundingClientRect)return fe();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=C(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return fe();if(o||e)return n;o=!0}}while(n=n.parentNode);return fe()}function ka(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Lt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ze;function oo(t,e){return function(){if(!ze){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),ze=setTimeout(function(){ze=void 0},e)}}}function Ta(){clearTimeout(ze),ze=void 0}function ro(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function ao(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var re="Sortable"+new Date().getTime();function Oa(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(r){if(!(C(r,"display")==="none"||r===k.ghost)){t.push({target:r,rect:X(r)});var a=he({},t[t.length-1].rect);if(r.thisAnimationDuration){var i=Me(r,!0);i&&(a.top-=i.f,a.left-=i.e)}r.fromRect=a}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(Ca(t,{target:o}),1)},animateAll:function(o){var r=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var a=!1,i=0;t.forEach(function(s){var l=0,c=s.target,u=c.fromRect,d=X(c),f=c.prevFromRect,y=c.prevToRect,m=s.rect,g=Me(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&Lt(f,d)&&!Lt(u,d)&&(m.top-d.top)/(m.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=Ma(m,f,y,r.options)),Lt(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=r.options.animation),r.animate(c,m,d,l)),l&&(a=!0,i=Math.max(i,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),a?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),t=[]},animate:function(o,r,a,i){if(i){C(o,"transition",""),C(o,"transform","");var s=Me(this.el),l=s&&s.a,c=s&&s.d,u=(r.left-a.left)/(l||1),d=(r.top-a.top)/(c||1);o.animatingX=!!u,o.animatingY=!!d,C(o,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=Ia(o),C(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),C(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){C(o,"transition",""),C(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function Ia(t){return t.offsetWidth}function Ma(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var ke=[],$t={initializeByDefault:!0},Ue={mount:function(e){for(var n in $t)$t.hasOwnProperty(n)&&!(n in e)&&(e[n]=$t[n]);ke.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ke.push(e)},pluginEvent:function(e,n,o){var r=this;this.eventCanceled=!1,o.cancel=function(){r.eventCanceled=!0};var a=e+"Global";ke.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][a]&&n[i.pluginName][a](he({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](he({sortable:n},o)))})},initializePlugins:function(e,n,o,r){ke.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var c=new s(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,ve(o,c.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,n){var o={};return ke.forEach(function(r){typeof r.eventProperties=="function"&&ve(o,r.eventProperties.call(n[r.pluginName],e))}),o},modifyOption:function(e,n,o){var r;return ke.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(r=a.optionListeners[n].call(e[a.pluginName],o))}),r}};function Aa(t){var e=t.sortable,n=t.rootEl,o=t.name,r=t.targetEl,a=t.cloneEl,i=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,y=t.putSortable,m=t.extraEventProperties;if(e=e||n&&n[re],!!e){var g,p=e.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!be&&!qe?g=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(o,!0,!0)),g.to=i||n,g.from=s||n,g.item=r||n,g.clone=a,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=u,g.newDraggableIndex=d,g.originalEvent=f,g.pullMode=y?y.lastPutMode:void 0;var S=he(he({},m),Ue.getEventProperties(o,e));for(var E in S)g[E]=S[E];n&&n.dispatchEvent(g),p[v]&&p[v].call(e,g)}}var Ya=["evt"],Z=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.evt,a=Sa(o,Ya);Ue.pluginEvent.bind(k)(e,n,he({dragEl:b,parentEl:W,ghostEl:O,rootEl:N,nextEl:Ee,lastDownEl:ct,cloneEl:j,cloneHidden:xe,dragStarted:Ne,putSortable:V,activeSortable:k.active,originalEvent:r,oldIndex:Ie,oldDraggableIndex:Be,newIndex:oe,newDraggableIndex:ye,hideGhostForTarget:co,unhideGhostForTarget:uo,cloneNowHidden:function(){xe=!0},cloneNowShown:function(){xe=!1},dispatchSortableEvent:function(s){G({sortable:n,name:s,originalEvent:r})}},a))};function G(t){Aa(he({putSortable:V,cloneEl:j,targetEl:b,rootEl:N,oldIndex:Ie,oldDraggableIndex:Be,newIndex:oe,newDraggableIndex:ye},t))}var b,W,O,N,Ee,ct,j,xe,Ie,oe,Be,ye,Qe,V,Oe=!1,vt=!1,bt=[],Se,ce,Ft,Nt,On,In,Ne,Te,Xe,He=!1,et=!1,ut,q,Rt=[],Ut=!1,yt=[],St=typeof document<"u",tt=eo,Mn=qe||be?"cssFloat":"float",Pa=St&&!_a&&!eo&&"draggable"in document.createElement("div"),io=function(){if(St){if(be)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),so=function(e,n){var o=C(e),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),a=Ye(e,0,n),i=Ye(e,1,n),s=a&&C(a),l=i&&C(i),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+X(a).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+X(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return a&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=r&&o[Mn]==="none"||i&&o[Mn]==="none"&&c+u>r)?"vertical":"horizontal"},La=function(e,n,o){var r=o?e.left:e.top,a=o?e.right:e.bottom,i=o?e.width:e.height,s=o?n.left:n.top,l=o?n.right:n.bottom,c=o?n.width:n.height;return r===s||a===l||r+i/2===s+c/2},$a=function(e,n){var o;return bt.some(function(r){var a=r[re].options.emptyInsertThreshold;if(!(!a||rn(r))){var i=X(r),s=e>=i.left-a&&e<=i.right+a,l=n>=i.top-a&&n<=i.bottom+a;if(s&&l)return o=r}}),o},lo=function(e){function n(a,i){return function(s,l,c,u){var d=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(a==null&&(i||d))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(s,l,c,u),i)(s,l,c,u);var f=(i?s:l).options.group.name;return a===!0||typeof a=="string"&&a===f||a.join&&a.indexOf(f)>-1}}var o={},r=e.group;(!r||lt(r)!="object")&&(r={name:r}),o.name=r.name,o.checkPull=n(r.pull,!0),o.checkPut=n(r.put),o.revertClone=r.revertClone,e.group=o},co=function(){!io&&O&&C(O,"display","none")},uo=function(){!io&&O&&C(O,"display","")};St&&document.addEventListener("click",function(t){if(vt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),vt=!1,!1},!0);var De=function(e){if(b){e=e.touches?e.touches[0]:e;var n=$a(e.clientX,e.clientY);if(n){var o={};for(var r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[re]._onDragOver(o)}}},Fa=function(e){b&&b.parentNode[re]._isOutsideThisEl(e.target)};function k(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ve({},e),t[re]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return so(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:k.supportPointer!==!1&&"PointerEvent"in window&&!je,emptyInsertThreshold:5};Ue.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);lo(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:Pa,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?L(t,"pointerdown",this._onTapStart):(L(t,"mousedown",this._onTapStart),L(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(L(t,"dragover",this),L(t,"dragenter",this)),bt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ve(this,Oa())}k.prototype={constructor:k,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Te=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,b):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,o=this.el,r=this.options,a=r.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=r.filter;if(Ha(o),!b&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&je&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=de(l,r.draggable,o,!1),!(l&&l.animated)&&ct!==l)){if(Ie=ie(l),Be=ie(l,r.draggable),typeof u=="function"){if(u.call(this,e,l,this)){G({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),Z("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=de(c,d.trim(),o,!1),d)return G({sortable:n,rootEl:d,name:"filter",targetEl:l,fromEl:o,toEl:o}),Z("filter",n,{evt:e}),!0}),u)){a&&e.cancelable&&e.preventDefault();return}r.handle&&!de(c,r.handle,o,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,o){var r=this,a=r.el,i=r.options,s=a.ownerDocument,l;if(o&&!b&&o.parentNode===a){var c=X(o);if(N=a,b=o,W=b.parentNode,Ee=b.nextSibling,ct=o,Qe=i.group,k.dragged=b,Se={target:b,clientX:(n||e).clientX,clientY:(n||e).clientY},On=Se.clientX-c.left,In=Se.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,b.style["will-change"]="all",l=function(){if(Z("delayEnded",r,{evt:e}),k.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!En&&r.nativeDraggable&&(b.draggable=!0),r._triggerDragStart(e,n),G({sortable:r,name:"choose",originalEvent:e}),ne(b,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){no(b,u.trim(),Wt)}),L(s,"dragover",De),L(s,"mousemove",De),L(s,"touchmove",De),L(s,"mouseup",r._onDrop),L(s,"touchend",r._onDrop),L(s,"touchcancel",r._onDrop),En&&this.nativeDraggable&&(this.options.touchStartThreshold=4,b.draggable=!0),Z("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(qe||be))){if(k.eventCanceled){this._onDrop();return}L(s,"mouseup",r._disableDelayedDrag),L(s,"touchend",r._disableDelayedDrag),L(s,"touchcancel",r._disableDelayedDrag),L(s,"mousemove",r._delayedDragTouchMoveHandler),L(s,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&L(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){b&&Wt(b),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Y(e,"mouseup",this._disableDelayedDrag),Y(e,"touchend",this._disableDelayedDrag),Y(e,"touchcancel",this._disableDelayedDrag),Y(e,"mousemove",this._delayedDragTouchMoveHandler),Y(e,"touchmove",this._delayedDragTouchMoveHandler),Y(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?L(document,"pointermove",this._onTouchMove):n?L(document,"touchmove",this._onTouchMove):L(document,"mousemove",this._onTouchMove):(L(b,"dragend",this),L(N,"dragstart",this._onDragStart));try{document.selection?dt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Oe=!1,N&&b){Z("dragStarted",this,{evt:n}),this.nativeDraggable&&L(document,"dragover",Fa);var o=this.options;!e&&ne(b,o.dragClass,!1),ne(b,o.ghostClass,!0),k.active=this,e&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,co();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY),e!==n);)n=e;if(b.parentNode[re]._isOutsideThisEl(e),n)do{if(n[re]){var o=void 0;if(o=n[re]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);uo()}},_onTouchMove:function(e){if(Se){var n=this.options,o=n.fallbackTolerance,r=n.fallbackOffset,a=e.touches?e.touches[0]:e,i=O&&Me(O,!0),s=O&&i&&i.a,l=O&&i&&i.d,c=tt&&q&&Tn(q),u=(a.clientX-Se.clientX+r.x)/(s||1)+(c?c[0]-Rt[0]:0)/(s||1),d=(a.clientY-Se.clientY+r.y)/(l||1)+(c?c[1]-Rt[1]:0)/(l||1);if(!k.active&&!Oe){if(o&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(O){i?(i.e+=u-(Ft||0),i.f+=d-(Nt||0)):i={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");C(O,"webkitTransform",f),C(O,"mozTransform",f),C(O,"msTransform",f),C(O,"transform",f),Ft=u,Nt=d,ce=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!O){var e=this.options.fallbackOnBody?document.body:N,n=X(b,!0,tt,!0,e),o=this.options;if(tt){for(q=e;C(q,"position")==="static"&&C(q,"transform")==="none"&&q!==document;)q=q.parentNode;q!==document.body&&q!==document.documentElement?(q===document&&(q=fe()),n.top+=q.scrollTop,n.left+=q.scrollLeft):q=fe(),Rt=Tn(q)}O=b.cloneNode(!0),ne(O,o.ghostClass,!1),ne(O,o.fallbackClass,!0),ne(O,o.dragClass,!0),C(O,"transition",""),C(O,"transform",""),C(O,"box-sizing","border-box"),C(O,"margin",0),C(O,"top",n.top),C(O,"left",n.left),C(O,"width",n.width),C(O,"height",n.height),C(O,"opacity","0.8"),C(O,"position",tt?"absolute":"fixed"),C(O,"zIndex","100000"),C(O,"pointerEvents","none"),k.ghost=O,e.appendChild(O),C(O,"transform-origin",On/parseInt(O.style.width)*100+"% "+In/parseInt(O.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,r=e.dataTransfer,a=o.options;if(Z("dragStart",this,{evt:e}),k.eventCanceled){this._onDrop();return}Z("setupClone",this),k.eventCanceled||(j=ao(b),j.draggable=!1,j.style["will-change"]="",this._hideClone(),ne(j,this.options.chosenClass,!1),k.clone=j),o.cloneId=dt(function(){Z("clone",o),!k.eventCanceled&&(o.options.removeCloneOnHide||N.insertBefore(j,b),o._hideClone(),G({sortable:o,name:"clone"}))}),!n&&ne(b,a.dragClass,!0),n?(vt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Y(document,"mouseup",o._onDrop),Y(document,"touchend",o._onDrop),Y(document,"touchcancel",o._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(o,r,b)),L(document,"drop",o),C(b,"transform","translateZ(0)")),Oe=!0,o._dragStartId=dt(o._dragStarted.bind(o,n,e)),L(document,"selectstart",o),Ne=!0,je&&C(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,r,a,i,s=this.options,l=s.group,c=k.active,u=Qe===l,d=s.sort,f=V||c,y,m=this,g=!1;if(Ut)return;function p(ae,ge){Z(ae,m,he({evt:e,isOwner:u,axis:y?"vertical":"horizontal",revert:i,dragRect:r,targetRect:a,canSort:d,fromSortable:f,target:o,completed:S,onMove:function(U,$e){return nt(N,n,b,r,U,X(U),e,$e)},changed:E},ge))}function v(){p("dragOverAnimationCapture"),m.captureAnimationState(),m!==f&&f.captureAnimationState()}function S(ae){return p("dragOverCompleted",{insertion:ae}),ae&&(u?c._hideClone():c._showClone(m),m!==f&&(ne(b,V?V.options.ghostClass:c.options.ghostClass,!1),ne(b,s.ghostClass,!0)),V!==m&&m!==k.active?V=m:m===k.active&&V&&(V=null),f===m&&(m._ignoreWhileAnimating=o),m.animateAll(function(){p("dragOverAnimationComplete"),m._ignoreWhileAnimating=null}),m!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(o===b&&!b.animated||o===n&&!o.animated)&&(Te=null),!s.dragoverBubble&&!e.rootEl&&o!==document&&(b.parentNode[re]._isOutsideThisEl(e.target),!ae&&De(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function E(){oe=ie(b),ye=ie(b,s.draggable),G({sortable:m,name:"change",toEl:n,newIndex:oe,newDraggableIndex:ye,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=de(o,s.draggable,n,!0),p("dragOver"),k.eventCanceled)return g;if(b.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||m._ignoreWhileAnimating===o)return S(!1);if(vt=!1,c&&!s.disabled&&(u?d||(i=W!==N):V===this||(this.lastPutMode=Qe.checkPull(this,c,b,e))&&l.checkPut(this,c,b,e))){if(y=this._getDirection(e,o)==="vertical",r=X(b),p("dragOverValid"),k.eventCanceled)return g;if(i)return W=N,v(),this._hideClone(),p("revert"),k.eventCanceled||(Ee?N.insertBefore(b,Ee):N.appendChild(b)),S(!0);var T=rn(n,s.draggable);if(!T||ja(e,y,this)&&!T.animated){if(T===b)return S(!1);if(T&&n===e.target&&(o=T),o&&(a=X(o)),nt(N,n,b,r,o,a,e,!!o)!==!1)return v(),n.appendChild(b),W=n,E(),S(!0)}else if(T&&Wa(e,y,this)){var h=Ye(n,0,s,!0);if(h===b)return S(!1);if(o=h,a=X(o),nt(N,n,b,r,o,a,e,!1)!==!1)return v(),n.insertBefore(b,h),W=n,E(),S(!0)}else if(o.parentNode===n){a=X(o);var w=0,x,_=b.parentNode!==n,D=!La(b.animated&&b.toRect||r,o.animated&&o.toRect||a,y),P=y?"top":"left",I=kn(o,"top","top")||kn(b,"top","top"),A=I?I.scrollTop:void 0;Te!==o&&(x=a[P],He=!1,et=!D&&s.invertSwap||_),w=za(e,o,a,y,D?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,et,Te===o);var F;if(w!==0){var R=ie(b);do R-=w,F=W.children[R];while(F&&(C(F,"display")==="none"||F===O))}if(w===0||F===o)return S(!1);Te=o,Xe=w;var J=o.nextElementSibling,K=!1;K=w===1;var pe=nt(N,n,b,r,o,a,e,K);if(pe!==!1)return(pe===1||pe===-1)&&(K=pe===1),Ut=!0,setTimeout(Ra,30),v(),K&&!J?n.appendChild(b):o.parentNode.insertBefore(b,K?J:o),I&&ro(I,0,A-I.scrollTop),W=b.parentNode,x!==void 0&&!et&&(ut=Math.abs(x-X(o)[P])),E(),S(!0)}if(n.contains(b))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Y(document,"mousemove",this._onTouchMove),Y(document,"touchmove",this._onTouchMove),Y(document,"pointermove",this._onTouchMove),Y(document,"dragover",De),Y(document,"mousemove",De),Y(document,"touchmove",De)},_offUpEvents:function(){var e=this.el.ownerDocument;Y(e,"mouseup",this._onDrop),Y(e,"touchend",this._onDrop),Y(e,"pointerup",this._onDrop),Y(e,"touchcancel",this._onDrop),Y(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(oe=ie(b),ye=ie(b,o.draggable),Z("drop",this,{evt:e}),W=b&&b.parentNode,oe=ie(b),ye=ie(b,o.draggable),k.eventCanceled){this._nulling();return}Oe=!1,et=!1,He=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Gt(this.cloneId),Gt(this._dragStartId),this.nativeDraggable&&(Y(document,"drop",this),Y(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),je&&C(document.body,"user-select",""),C(b,"transform",""),e&&(Ne&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),O&&O.parentNode&&O.parentNode.removeChild(O),(N===W||V&&V.lastPutMode!=="clone")&&j&&j.parentNode&&j.parentNode.removeChild(j),b&&(this.nativeDraggable&&Y(b,"dragend",this),Wt(b),b.style["will-change"]="",Ne&&!Oe&&ne(b,V?V.options.ghostClass:this.options.ghostClass,!1),ne(b,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:W,newIndex:null,newDraggableIndex:null,originalEvent:e}),N!==W?(oe>=0&&(G({rootEl:W,name:"add",toEl:W,fromEl:N,originalEvent:e}),G({sortable:this,name:"remove",toEl:W,originalEvent:e}),G({rootEl:W,name:"sort",toEl:W,fromEl:N,originalEvent:e}),G({sortable:this,name:"sort",toEl:W,originalEvent:e})),V&&V.save()):oe!==Ie&&oe>=0&&(G({sortable:this,name:"update",toEl:W,originalEvent:e}),G({sortable:this,name:"sort",toEl:W,originalEvent:e})),k.active&&((oe==null||oe===-1)&&(oe=Ie,ye=Be),G({sortable:this,name:"end",toEl:W,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Z("nulling",this),N=b=W=O=Ee=j=ct=xe=Se=ce=Ne=oe=ye=Ie=Be=Te=Xe=V=Qe=k.dragged=k.ghost=k.clone=k.active=null,yt.forEach(function(e){e.checked=!0}),yt.length=Ft=Nt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":b&&(this._onDragOver(e),Na(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,r=0,a=o.length,i=this.options;r<a;r++)n=o[r],de(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||Xa(n));return e},sort:function(e,n){var o={},r=this.el;this.toArray().forEach(function(a,i){var s=r.children[i];de(s,this.options.draggable,r,!1)&&(o[a]=s)},this),n&&this.captureAnimationState(),e.forEach(function(a){o[a]&&(r.removeChild(o[a]),r.appendChild(o[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return de(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var r=Ue.modifyOption(this,e,n);typeof r<"u"?o[e]=r:o[e]=n,e==="group"&&lo(o)},destroy:function(){Z("destroy",this);var e=this.el;e[re]=null,Y(e,"mousedown",this._onTapStart),Y(e,"touchstart",this._onTapStart),Y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(e,"dragover",this),Y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bt.splice(bt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!xe){if(Z("hideClone",this),k.eventCanceled)return;C(j,"display","none"),this.options.removeCloneOnHide&&j.parentNode&&j.parentNode.removeChild(j),xe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(xe){if(Z("showClone",this),k.eventCanceled)return;b.parentNode==N&&!this.options.group.revertClone?N.insertBefore(j,b):Ee?N.insertBefore(j,Ee):N.appendChild(j),this.options.group.revertClone&&this.animate(b,j),C(j,"display",""),xe=!1}}};function Na(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function nt(t,e,n,o,r,a,i,s){var l,c=t[re],u=c.options.onMove,d;return window.CustomEvent&&!be&&!qe?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=o,l.related=r||e,l.relatedRect=a||X(e),l.willInsertAfter=s,l.originalEvent=i,t.dispatchEvent(l),u&&(d=u.call(c,l,i)),d}function Wt(t){t.draggable=!1}function Ra(){Ut=!1}function Wa(t,e,n){var o=X(Ye(n.el,0,n.options,!0)),r=10;return e?t.clientX<o.left-r||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-r||t.clientY<o.bottom&&t.clientX<o.left}function ja(t,e,n){var o=X(rn(n.el,n.options.draggable)),r=10;return e?t.clientX>o.right+r||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+r}function za(t,e,n,o,r,a,i,s){var l=o?t.clientY:t.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,f=!1;if(!i){if(s&&ut<c*r){if(!He&&(Xe===1?l>u+c*a/2:l<d-c*a/2)&&(He=!0),He)f=!0;else if(Xe===1?l<u+ut:l>d-ut)return-Xe}else if(l>u+c*(1-r)/2&&l<d-c*(1-r)/2)return Ba(e)}return f=f||i,f&&(l<u+c*a/2||l>d-c*a/2)?l>u+c/2?1:-1:0}function Ba(t){return ie(b)<ie(t)?1:-1}function Xa(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function Ha(t){yt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&yt.push(o)}}function dt(t){return setTimeout(t,0)}function Gt(t){return clearTimeout(t)}St&&L(document,"touchmove",function(t){(k.active||Oe)&&t.cancelable&&t.preventDefault()});k.utils={on:L,off:Y,css:C,find:no,is:function(e,n){return!!de(e,n,e,!1)},extend:ka,throttle:oo,closest:de,toggleClass:ne,clone:ao,index:ie,nextTick:dt,cancelNextTick:Gt,detectDirection:so,getChild:Ye};k.get=function(t){return t[re]};k.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(k.utils=he(he({},k.utils),o.utils)),Ue.mount(o)})};k.create=function(t,e){return new k(t,e)};k.version=Da;var B=[],Re,Jt,Zt=!1,jt,zt,xt,We;function Va(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?L(document,"dragover",this._handleAutoScroll):this.options.supportPointer?L(document,"pointermove",this._handleFallbackAutoScroll):o.touches?L(document,"touchmove",this._handleFallbackAutoScroll):L(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?Y(document,"dragover",this._handleAutoScroll):(Y(document,"pointermove",this._handleFallbackAutoScroll),Y(document,"touchmove",this._handleFallbackAutoScroll),Y(document,"mousemove",this._handleFallbackAutoScroll)),An(),ft(),Ta()},nulling:function(){xt=Jt=Re=Zt=We=jt=zt=null,B.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var r=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(a,i);if(xt=n,o||this.options.forceAutoScrollFallback||qe||be||je){Bt(n,this.options,s,o);var l=we(s,!0);Zt&&(!We||a!==jt||i!==zt)&&(We&&An(),We=setInterval(function(){var c=we(document.elementFromPoint(a,i),!0);c!==l&&(l=c,ft()),Bt(n,r.options,c,o)},10),jt=a,zt=i)}else{if(!this.options.bubbleScroll||we(s,!0)===fe()){ft();return}Bt(n,this.options,we(s,!1),!1)}}},ve(t,{pluginName:"scroll",initializeByDefault:!0})}function ft(){B.forEach(function(t){clearInterval(t.pid)}),B=[]}function An(){clearInterval(We)}var Bt=oo(function(t,e,n,o){if(e.scroll){var r=(t.touches?t.touches[0]:t).clientX,a=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,l=fe(),c=!1,u;Jt!==n&&(Jt=n,ft(),Re=e.scroll,u=e.scrollFn,Re===!0&&(Re=we(n,!0)));var d=0,f=Re;do{var y=f,m=X(y),g=m.top,p=m.bottom,v=m.left,S=m.right,E=m.width,T=m.height,h=void 0,w=void 0,x=y.scrollWidth,_=y.scrollHeight,D=C(y),P=y.scrollLeft,I=y.scrollTop;y===l?(h=E<x&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),w=T<_&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(h=E<x&&(D.overflowX==="auto"||D.overflowX==="scroll"),w=T<_&&(D.overflowY==="auto"||D.overflowY==="scroll"));var A=h&&(Math.abs(S-r)<=i&&P+E<x)-(Math.abs(v-r)<=i&&!!P),F=w&&(Math.abs(p-a)<=i&&I+T<_)-(Math.abs(g-a)<=i&&!!I);if(!B[d])for(var R=0;R<=d;R++)B[R]||(B[R]={});(B[d].vx!=A||B[d].vy!=F||B[d].el!==y)&&(B[d].el=y,B[d].vx=A,B[d].vy=F,clearInterval(B[d].pid),(A!=0||F!=0)&&(c=!0,B[d].pid=setInterval((function(){o&&this.layer===0&&k.active._onTouchMove(xt);var J=B[this.layer].vy?B[this.layer].vy*s:0,K=B[this.layer].vx?B[this.layer].vx*s:0;typeof u=="function"&&u.call(k.dragged.parentNode[re],K,J,t,xt,B[this.layer].el)!=="continue"||ro(B[this.layer].el,K,J)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==l&&(f=we(f,!1)));Zt=c}},30),fo=function(e){var n=e.originalEvent,o=e.putSortable,r=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=o||a;s();var u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(i("spill"),this.onSpill({dragEl:r,putSortable:o}))}};function an(){}an.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var r=Ye(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:fo};ve(an,{pluginName:"revertOnSpill"});function sn(){}sn.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,r=o||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:fo};ve(sn,{pluginName:"removeOnSpill"});k.mount(new Va);k.mount(sn,an);function Xt(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function Yn(t,e,n){const o=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,o)}function Ka(){return typeof window<"u"?window.console:global.console}const qa=Ka();function Ua(t){const e=Object.create(null);return function(o){return e[o]||(e[o]=t(o))}}const Ga=/-(\w)/g,Ja=Ua(t=>t.replace(Ga,(e,n)=>n.toUpperCase())),ho=["Start","Add","Remove","Update","End"],po=["Choose","Unchoose","Sort","Filter","Clone"],go=["Move"],Za=[go,ho,po].flatMap(t=>t).map(t=>`on${t}`),Qt={manage:go,manageAndEmit:ho,emit:po};function Qa(t){return Za.indexOf(t)!==-1}const ei=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ti(t){return ei.includes(t)}function ni(t){return["transition-group","TransitionGroup"].includes(t)}function mo(t){return["id","class","role","style"].includes(t)||t.startsWith("data-")||t.startsWith("aria-")||t.startsWith("on")}function vo(t){return t.reduce((e,[n,o])=>(e[n]=o,e),{})}function oi({$attrs:t,componentData:e={}}){return{...vo(Object.entries(t).filter(([o,r])=>mo(o))),...e}}function ri({$attrs:t,callBackBuilder:e}){const n=vo(bo(t));Object.entries(e).forEach(([r,a])=>{Qt[r].forEach(i=>{n[`on${i}`]=a(i)})});const o=`[data-draggable]${n.draggable||""}`;return{...n,draggable:o}}function bo(t){return Object.entries(t).filter(([e,n])=>!mo(e)).map(([e,n])=>[Ja(e),n]).filter(([e,n])=>!Qa(e))}const Pn=({el:t})=>t,ai=(t,e)=>t.__draggable_context=e,Ln=t=>t.__draggable_context;class ii{constructor({nodes:{header:e,default:n,footer:o},root:r,realList:a}){this.defaultNodes=n,this.children=[...e,...n,...o],this.externalComponent=r.externalComponent,this.rootTransition=r.transition,this.tag=r.tag,this.realList=a}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(e,n){const{tag:o,children:r,_isRootComponent:a}=this;return e(o,n,a?{default:()=>r}:r)}updated(){const{defaultNodes:e,realList:n}=this;e.forEach((o,r)=>{ai(Pn(o),{element:n[r],index:r})})}getUnderlyingVm(e){return Ln(e)}getVmIndexFromDomIndex(e,n){const{defaultNodes:o}=this,{length:r}=o,a=n.children,i=a.item(e);if(i===null)return r;const s=Ln(i);if(s)return s.index;if(r===0)return 0;const l=Pn(o[0]),c=[...a].findIndex(u=>u===l);return e<c?0:r}}function si(t,e){const n=t[e];return n?n():[]}function li({$slots:t,realList:e,getKey:n}){const o=e||[],[r,a]=["header","footer"].map(l=>si(t,l)),{item:i}=t;if(!i)throw new Error("draggable element must have an item slot");const s=o.flatMap((l,c)=>i({element:l,index:c}).map(u=>(u.key=n(l),u.props={...u.props||{},"data-draggable":!0},u)));if(s.length!==o.length)throw new Error("Item slot must have only one child");return{header:r,footer:a,default:s}}function ci(t){const e=ni(t),n=!ti(t)&&!e;return{transition:e,externalComponent:n,tag:n?jo(t):e?zo:t}}function ui({$slots:t,tag:e,realList:n,getKey:o}){const r=li({$slots:t,realList:n,getKey:o}),a=ci(e);return new ii({nodes:r,root:a,realList:n})}function yo(t,e){Ae(()=>this.$emit(t.toLowerCase(),e))}function xo(t){return(e,n)=>{if(this.realList!==null)return this[`onDrag${t}`](e,n)}}function di(t){const e=xo.call(this,t);return(n,o)=>{e.call(this,n,o),yo.call(this,t,n)}}let Ht=null;const fi={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},hi=["update:modelValue","change",...[...Qt.manageAndEmit,...Qt.emit].map(t=>t.toLowerCase())],pi=Pe({name:"draggable",inheritAttrs:!1,props:fi,emits:hi,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:t,$attrs:e,tag:n,componentData:o,realList:r,getKey:a}=this,i=ui({$slots:t,tag:n,realList:r,getKey:a});this.componentStructure=i;const s=oi({$attrs:e,componentData:o});return i.render(Ve,s)}catch(t){return this.error=!0,Ve("pre",{style:{color:"red"}},t.stack)}},created(){this.list!==null&&this.modelValue!==null&&qa.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:t,$el:e,componentStructure:n}=this;n.updated();const o=ri({$attrs:t,callBackBuilder:{manageAndEmit:a=>di.call(this,a),emit:a=>yo.bind(this,a),manage:a=>xo.call(this,a)}}),r=e.nodeType===1?e:e.parentElement;this._sortable=new k(r,o),this.targetDomElement=r,r.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList(){const{list:t}=this;return t||this.modelValue},getKey(){const{itemKey:t}=this;return typeof t=="function"?t:e=>e[t]}},watch:{$attrs:{handler(t){const{_sortable:e}=this;e&&bo(t).forEach(([n,o])=>{e.option(n,o)})},deep:!0}},methods:{getUnderlyingVm(t){return this.componentStructure.getUnderlyingVm(t)||null},getUnderlyingPotencialDraggableComponent(t){return t.__draggable_component__},emitChanges(t){Ae(()=>this.$emit("change",t))},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=o=>o.splice(e,0,o.splice(t,1)[0]);this.alterList(n)},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};const o=n.realList,r={list:o,component:n};return t!==e&&o?{...n.getUnderlyingVm(e)||{},...r}:r},getVmIndexFromDomIndex(t){return this.componentStructure.getVmIndexFromDomIndex(t,this.targetDomElement)},onDragStart(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),Ht=t.item},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;Xt(t.item);const n=this.getVmIndexFromDomIndex(t.newIndex);this.spliceList(n,0,e);const o={element:e,newIndex:n};this.emitChanges({added:o})},onDragRemove(t){if(Yn(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){Xt(t.clone);return}const{index:e,element:n}=this.context;this.spliceList(e,1);const o={element:n,oldIndex:e};this.emitChanges({removed:o})},onDragUpdate(t){Xt(t.item),Yn(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndexFromDomIndex(t.newIndex);this.updatePosition(e,n);const o={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:o})},computeFutureIndex(t,e){if(!t.element)return 0;const n=[...e.to.children].filter(i=>i.style.display!=="none"),o=n.indexOf(e.related),r=t.component.getVmIndexFromDomIndex(o);return n.indexOf(Ht)!==-1||!e.willInsertAfter?r:r+1},onDragMove(t,e){const{move:n,realList:o}=this;if(!n||!o)return!0;const r=this.getRelatedContextFromMoveEvent(t),a=this.computeFutureIndex(r,t),i={...this.context,futureIndex:a},s={...t,relatedContext:r,draggedContext:i};return n(s,e)},onDragEnd(){Ht=null}}}),gi={class:"stock-page"},mi={class:"action-buttons"},vi={class:"stock-content"},bi={class:"stock-indicator"},yi={class:"kd-indicator"},xi={class:"rsi-indicator"},wi={class:"rsi-value"},Si={__name:"Stock",setup(t){const e=nn(),n=Bn("stock-search");H(null),H(null),H(0);const o=H(!1),r=H(null),a=le({get(){return e.userStockList},set(){}});function i(h){if(h.moved){const{element:w,newIndex:x,oldIndex:_}=h.moved;console.log("[onDragChange] 事件",{movedStock:w,newIndex:x,oldIndex:_,evt:h,userStockList:e.userStockList.map(I=>({id:I.id,order:I.order}))});const D=e.userStockList.filter(I=>I.id!==w.id);let P;if(x===0){const I=D[0]?.order||2e3;if(P=Math.floor(I/2),I<100){console.log("[onDragChange] 第一位間隔太小，觸發重新排序",{movedStock:w,firstOrder:I,newOrder:P,originalList:D.map(A=>({id:A.id,order:A.order}))}),e.updateStockList(e.userStockList);return}console.log("[onDragChange] 移到第一位",{movedStock:w,firstOrder:I,newOrder:P,originalList:D.map(A=>({id:A.id,order:A.order}))})}else if(x===D.length){const I=D[D.length-1]?.order||0;P=I+1e3,console.log("[onDragChange] 移到最後一位",{movedStock:w,lastOrder:I,newOrder:P,originalList:D.map(A=>({id:A.id,order:A.order}))})}else{const I=D[x-1]?.order||0,A=D[x]?.order||I+2e3,F=Math.floor((I+A)/2);if(console.log("[onDragChange] 移到中間",{movedStock:w,prevOrder:I,nextOrder:A,midOrder:F,originalList:D.map(R=>({id:R.id,order:R.order}))}),A-I<100){console.log("[onDragChange] 間隔太小，觸發重新排序",{movedStock:w,prevOrder:I,nextOrder:A,originalList:D.map(R=>({id:R.id,order:R.order}))}),e.updateStockList(e.userStockList);return}P=F}console.log("[onDragChange] 最終更新",{movedStock:w,newOrder:P}),e.updateSingleStockOrder(w.id,P)}}function s(){n.emit(!0)}function l(h,w){console.log(`Stock ${w} indicator changed to ${h}`)}function c(h){return h>0?"price-up":h<0?"price-down":"price-flat"}const u=le(()=>r.value?[{name:`K 值: ${r.value.k}`,subname:"快線指標 (敏感度高)",color:"#4286f5"},{name:`D 值: ${r.value.d}`,subname:"慢線指標 (敏感度低)",color:"#e75c9a"},{name:`J 值: ${r.value.j}`,subname:"超買超賣指標",color:"#666"},{name:`更新時間: ${r.value.date}`,subname:"週線資料最後更新",color:"#999"}]:[]);function d(h){r.value=h,o.value=!0}function f(h){console.log("KDJ ActionSheet 選擇:",h.name),o.value=!1,h.name.includes("K 值")?_e("K 值反映股價短期波動"):h.name.includes("D 值")?_e("D 值是 K 值的移動平均"):h.name.includes("J 值")&&_e("J 值 > 80 超買，< 20 超賣")}function y(h){return h>70?"rsi-overbought":h<30?"rsi-oversold":"rsi-normal"}function m(h){return h>70?"超買":h<30?"超賣":"正常"}function g(){}function p(h){_e(`買賣 ${h.name}`)}function v(h){_e(`${h.name} 策略設定`)}function S(h){_e(`${h.name} 其他功能`)}function E(h){setTimeout(()=>{const w=document.querySelector(".stock-row.sortable-chosen");if(w){const x=w.querySelector("canvas"),_=document.querySelector(".stock-row.sortable-drag");if(x&&_){const D=_.querySelector("canvas");if(D&&x.width&&x.height){D.width=x.width,D.height=x.height;const P=D.getContext("2d");P.clearRect(0,0,D.width,D.height),P.drawImage(x,0,0)}}}},0)}function T(h){console.log("拖曳結束",h)}return Bo(document,"visibilitychange",()=>{}),wt(()=>{}),(h,w)=>(ee(),se("div",gi,[$(Q(pi),{modelValue:a.value,"onUpdate:modelValue":w[1]||(w[1]=x=>a.value=x),"item-key":"id",delay:200,animation:200,"ghost-class":"stock-row-ghost",onStart:E,onEnd:T,onChange:i},{item:ue(({element:x,index:_})=>[M("div",{class:"stock-row",onContextmenu:w[0]||(w[0]=Xo(()=>{},["prevent"]))},[$(Q(mr),{"left-width":200,onClickLeft:g},{left:ue(()=>[M("div",mi,[$(Q(Yt),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:D=>p(x)},{default:ue(()=>w[3]||(w[3]=[M("div",null,"交 易",-1),M("div",null,"記 錄",-1)])),_:2,__:[3]},1032,["onClick"]),$(Q(Yt),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:D=>v(x)},{default:ue(()=>w[4]||(w[4]=[gn("策 略",-1)])),_:2,__:[4]},1032,["onClick"]),$(Q(Yt),{type:"default",size:"small",class:"action-btn other-btn",onClick:D=>S(x)},{default:ue(()=>w[5]||(w[5]=[gn("更 多",-1)])),_:2,__:[5]},1032,["onClick"])])]),default:ue(()=>[M("div",vi,[$(ya,{name:x.name,code:x.code,price:x.price,change:x.change,"change-percent":x.changePercent,"price-class":c(x.change),progress:x.progress,"progress-text":x.progressText},null,8,["name","code","price","change","change-percent","price-class","progress","progress-text"]),M("div",bi,[$(Q(or),{"show-indicators":!1,loop:!1,autoplay:0,onChange:D=>l(D,_)},{default:ue(()=>[$(Q(mn),{class:"indicator-content"},{default:ue(()=>[M("div",yi,[$(ca,{width:120,height:60,"stock-id":x.id,onKdjClick:d},null,8,["stock-id"])])]),_:2},1024),$(Q(mn),{class:"indicator-content"},{default:ue(()=>[M("div",xi,[M("div",wi,te(x.rsi),1),M("div",{class:qt(["rsi-trend",y(x.rsi)])},te(m(x.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],32)]),_:1},8,["modelValue"]),$(Q(sr),{axis:"xy",magnetic:"x",gap:{x:20,y:80},style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"rgba(255, 224, 102, 0.9)","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:s},{default:ue(()=>w[6]||(w[6]=[M("div",{class:"bubble-content",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[M("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24"},[M("path",{fill:"#322b0d","fill-rule":"evenodd",d:"M13 13v7a1 1 0 0 1-2 0v-7H4a1 1 0 0 1 0-2h7V4a1 1 0 0 1 2 0v7h7a1 1 0 0 1 0 2z"})]),M("span",{class:"bubble-label",style:{color:"#322b0d","font-size":"14px"}},"新增")],-1)])),_:1,__:[6]}),$(Ir),$(Q(Gn),{show:o.value,"onUpdate:show":w[2]||(w[2]=x=>o.value=x),actions:u.value,"cancel-text":"取消",title:"KDJ 指標詳情",onSelect:f},null,8,["show","actions"])]))}},Ii=on(Si,[["__scopeId","data-v-5d6538e0"]]);export{Ii as default};
