import{d as V,m as H,c as j,r as y,a as k,i as _,w as A,b as B,e as $,u as U,o as F,n as E,f as K,g as R,h as L,j as W,v as G,k as i,s as J,l as D,T as Q,p as Z,q,t as X,x as ee,y as z,z as te,H as ae,I as ne,A as oe,B as se,C as I,D as le,E as f,F as ie}from"./index-dqVj699t.js";import{u as ce,P as re,p as ue,a as de,S as pe}from"./index-CGleVeWh.js";function M(e,r){return e.reduce((s,p)=>Math.abs(s-r)<Math.abs(p-r)?s:p)}const fe={gap:{type:[Number,Object],default:24},icon:String,axis:H("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[ve,N]=j("floating-bubble");var xe=V({name:ve,inheritAttrs:!1,props:fe,emits:["click","update:offset","offsetChange"],setup(e,{slots:r,emit:s,attrs:p}){const v=y(),t=y({x:0,y:0,width:0,height:0}),u=k(()=>_(e.gap)?e.gap.x:e.gap),h=k(()=>_(e.gap)?e.gap.y:e.gap),c=k(()=>({top:h.value,right:B.value-t.value.width-u.value,bottom:A.value-t.value.height-h.value,left:u.value})),g=y(!1);let w=!1;const T=k(()=>{const n={},m=$(t.value.x),l=$(t.value.y);return n.transform=`translate3d(${m}, ${l}, 0)`,(g.value||!w)&&(n.transition="none"),n}),a=()=>{if(!S.value)return;const{width:n,height:m}=Z(v.value),{offset:l}=e;t.value={x:l?l.x:B.value-n-u.value,y:l?l.y:A.value-m-h.value,width:n,height:m}},o=ce();let x=0,b=0;const C=n=>{o.start(n),g.value=!0,x=t.value.x,b=t.value.y};U("touchmove",n=>{if(n.preventDefault(),o.move(n),e.axis!=="lock"&&!o.isTap.value){if(e.axis==="x"||e.axis==="xy"){let l=x+o.deltaX.value;l<c.value.left&&(l=c.value.left),l>c.value.right&&(l=c.value.right),t.value.x=l}if(e.axis==="y"||e.axis==="xy"){let l=b+o.deltaY.value;l<c.value.top&&(l=c.value.top),l>c.value.bottom&&(l=c.value.bottom),t.value.y=l}const m=q(t.value,["x","y"]);s("update:offset",m)}},{target:v});const O=()=>{g.value=!1,E(()=>{if(e.magnetic==="x"){const n=M([c.value.left,c.value.right],t.value.x);t.value.x=n}if(e.magnetic==="y"){const n=M([c.value.top,c.value.bottom],t.value.y);t.value.y=n}if(!o.isTap.value){const n=q(t.value,["x","y"]);s("update:offset",n),(x!==n.x||b!==n.y)&&s("offsetChange",n)}})},Y=n=>{o.isTap.value?s("click",n):n.stopPropagation()};F(()=>{a(),E(()=>{w=!0})}),K([B,A,u,h,()=>e.offset],a,{deep:!0});const S=y(!0);return R(()=>{S.value=!0}),L(()=>{e.teleport&&(S.value=!1)}),()=>{const n=W(i("div",D({class:N(),ref:v,onTouchstartPassive:C,onTouchend:O,onTouchcancel:O,onClickCapture:Y,style:T.value},p),[r.default?r.default():i(J,{name:e.icon,class:N("icon")},null)]),[[G,S.value]]);return e.teleport?i(Q,{to:e.teleport},{default:()=>[n]}):n}}});const he=X(xe),ge=e=>e?.includes("/"),me=[...de,"round","closeOnPopstate","safeAreaInsetBottom"],ye={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[be,d,we]=j("share-sheet"),Se=ee({},ue,{title:String,round:z,options:te(),cancelText:String,description:String,closeOnPopstate:z,safeAreaInsetBottom:z});var ke=V({name:be,props:Se,emits:["cancel","select","update:show"],setup(e,{emit:r,slots:s}){const p=a=>r("update:show",a),v=()=>{p(!1),r("cancel")},t=(a,o)=>r("select",a,o),u=()=>{const a=s.title?s.title():e.title,o=s.description?s.description():e.description;if(a||o)return i("div",{class:d("header")},[a&&i("h2",{class:d("title")},[a]),o&&i("span",{class:d("description")},[o])])},h=a=>ge(a)?i("img",{src:a,class:d("image-icon")},null):i("div",{class:d("icon",[a])},[i(ne,{name:ye[a]||a},null)]),c=(a,o)=>{const{name:x,icon:b,className:C,description:P}=a;return i("div",{role:"button",tabindex:0,class:[d("option"),C,ae],onClick:()=>t(a,o)},[h(b),x&&i("span",{class:d("name")},[x]),P&&i("span",{class:d("option-description")},[P])])},g=(a,o)=>i("div",{class:d("options",{border:o})},[a.map(c)]),w=()=>{const{options:a}=e;return Array.isArray(a[0])?a.map((o,x)=>g(o,x!==0)):g(a)},T=()=>{var a;const o=(a=e.cancelText)!=null?a:we("cancel");if(s.cancel||o)return i("button",{type:"button",class:d("cancel"),onClick:v},[s.cancel?s.cancel():o])};return()=>i(re,D({class:d(),position:"bottom","onUpdate:show":p},q(e,me)),{default:()=>[u(),w(),T()]})}});const Te=X(ke),Ce={style:{padding:"32px"}},Pe={style:{"padding-bottom":"12px"}},ze={__name:"Stock",setup(e){const r=y(!1),s=y("");function p(v){console.log("搜尋",v)}return(v,t)=>(ie(),oe("div",Ce,[t[4]||(t[4]=se(" 自選股頁面324234234234234234324234234234 ",-1)),i(I(he),{icon:"plus",axis:"xy",magnetic:"x",gap:{x:24,y:80},style:{"--van-floating-bubble-size":"48px"},onClick:t[0]||(t[0]=u=>r.value=!0)}),i(I(Te),{show:r.value,"onUpdate:show":t[2]||(t[2]=u=>r.value=u),options:[],title:"搜尋股票","cancel-text":"",style:{"--van-share-sheet-header-padding":"24px 24px 0 24px","min-height":"60vh"}},{description:le(()=>[f("div",Pe,[i(I(pe),{modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=u=>s.value=u),placeholder:"請輸入股票名稱或代碼","show-action":"",onSearch:p},null,8,["modelValue"])]),t[3]||(t[3]=f("div",null,[f("div",{style:{"font-weight":"bold","font-size":"18px",margin:"16px 0 8px 0"}}," 熱門股票 "),f("div",{style:{display:"flex",gap:"8px","flex-wrap":"wrap"}},[f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"台積電"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"鴻海"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"聯發科"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"長榮"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"中鋼")])],-1))]),_:1},8,["show"])]))}};export{ze as default};
