import{d as p,c as ie,f as t,w as q,o as re,g as ue,m as F,C as me,D as fe,r as _,E as le,G as ge,H as ve,n as X,e as ye,I as he,F as K,B as Q,p as z,k as x,q as J,l as L,s as Y,J as be,i as w,h as Z,j as V,x as A}from"./index-B_U1_LjV.js";import{c as xe,B as Se,r as ke,d as Ce,P as we,e as Pe,H as _e,S as ze}from"./index-AD8Nz6r1.js";import{n as h,m as y,c as $,e as D,l as Be,a as M,w as j,I as H,f as ee,o as Te,p as Ie,q as E,r as ce,i as pe,t as W}from"./index-ALnLekCr.js";const[$e,N]=$("loading"),Le=Array(12).fill(null).map((e,n)=>t("i",{class:N("line",String(n+1))},null)),Oe=t("svg",{class:N("circular"),viewBox:"25 25 50 50"},[t("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ee={size:h,type:y("circular"),color:String,vertical:Boolean,textSize:h,textColor:String};var Ne=p({name:$e,props:Ee,setup(e,{slots:n}){const o=ie(()=>D({color:e.color},Be(e.size))),l=()=>{const c=e.type==="spinner"?Le:Oe;return t("span",{class:N("spinner",e.type),style:o.value},[n.icon?n.icon():c])},d=()=>{var c;if(n.default)return t("span",{class:N("text"),style:{fontSize:M(e.textSize),color:(c=e.textColor)!=null?c:e.color}},[n.default()])};return()=>{const{type:c,vertical:u}=e;return t("div",{class:N([c,{vertical:u}]),"aria-live":"polite","aria-busy":!0},[l(),d()])}}});const se=j(Ne),[De,B]=$("button"),je=D({},ke,{tag:y("button"),text:String,icon:String,type:y("default"),size:y("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:y("button"),loadingSize:h,loadingText:String,loadingType:String,iconPosition:y("left")});var Re=p({name:De,props:je,emits:["click"],setup(e,{emit:n,slots:o}){const l=xe(),d=()=>o.loading?o.loading():t(se,{size:e.loadingSize,type:e.loadingType,class:B("loading")},null),c=()=>{if(e.loading)return d();if(o.icon)return t("div",{class:B("icon")},[o.icon()]);if(e.icon)return t(H,{name:e.icon,class:B("icon"),classPrefix:e.iconPrefix},null)},u=()=>{let a;if(e.loading?a=e.loadingText:a=o.default?o.default():e.text,a)return t("span",{class:B("text")},[a])},v=()=>{const{color:a,plain:s}=e;if(a){const i={color:s?a:"white"};return s||(i.background=a),a.includes("gradient")?i.border=0:i.borderColor=a,i}},f=a=>{e.loading?Ce(a):e.disabled||(n("click",a),l())};return()=>{const{tag:a,type:s,size:i,block:m,round:b,plain:S,square:C,loading:r,disabled:k,hairline:P,nativeType:G,iconPosition:R}=e,de=[B([s,i,{plain:S,block:m,round:b,square:C,loading:r,disabled:k,hairline:P}]),{[Se]:P}];return t(a,{type:G,class:de,style:v(),disabled:k,onClick:f},{default:()=>[t("div",{class:B("content")},[R==="left"&&c(),u(),R==="right"&&c()])]})}}});const ne=j(Re);let O=0;function Ve(e){e?(O||document.body.classList.add("van-toast--unclickable"),O++):O&&(O--,O||document.body.classList.remove("van-toast--unclickable"))}const[Ae,T]=$("toast"),Ue=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Me={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:h,iconSize:h,duration:Te(2e3),position:y("middle"),teleport:[String,Object],wordBreak:String,className:ee,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:ee,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:h};var qe=p({name:Ae,props:Me,emits:["update:show"],setup(e,{emit:n,slots:o}){let l,d=!1;const c=()=>{const i=e.show&&e.forbidClick;d!==i&&(d=i,Ve(d))},u=i=>n("update:show",i),v=()=>{e.closeOnClick&&u(!1)},f=()=>clearTimeout(l),a=()=>{const{icon:i,type:m,iconSize:b,iconPrefix:S,loadingType:C}=e;if(i||m==="success"||m==="fail")return t(H,{name:i||m,size:b,class:T("icon"),classPrefix:S},null);if(m==="loading")return t(se,{class:T("loading"),size:b,type:C},null)},s=()=>{const{type:i,message:m}=e;if(o.message)return t("div",{class:T("text")},[o.message()]);if(E(m)&&m!=="")return i==="html"?t("div",{key:0,class:T("text"),innerHTML:String(m)},null):t("div",{class:T("text")},[m])};return q(()=>[e.show,e.forbidClick],c),q(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(l=setTimeout(()=>{u(!1)},e.duration))}),re(c),ue(c),()=>t(we,F({class:[T([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:v,onClosed:f,"onUpdate:show":u},Ie(e,Ue)),{default:()=>[a(),s()]})}});function Fe(){const e=fe({show:!1}),n=d=>{e.show=d},o=d=>{D(e,d,{transitionAppear:!0}),n(!0)},l=()=>n(!1);return Pe({open:o,close:l,toggle:n}),{open:o,close:l,state:e,toggle:n}}function He(e){const n=me(e),o=document.createElement("div");return document.body.appendChild(o),{instance:n.mount(o),unmount(){n.unmount(),document.body.removeChild(o)}}}const Ge={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let U=[],Je=!1,te=D({},Ge);const Ke=new Map;function Qe(e){return pe(e)?e:{message:e}}function We(){const{instance:e}=He({setup(){const n=_(""),{open:o,state:l,close:d,toggle:c}=Fe(),u=()=>{},v=()=>t(qe,F(l,{onClosed:u,"onUpdate:show":c}),null);return q(n,f=>{l.message=f}),le().render=v,{open:o,close:d,message:n}}});return e}function Xe(){if(!U.length||Je){const e=We();U.push(e)}return U[U.length-1]}function Ye(e={}){if(!ce)return{};const n=Xe(),o=Qe(e);return n.open(D({},te,Ke.get(o.type||te.type),o)),n}const[Ze,oe]=$("tag"),en={size:String,mark:Boolean,show:W,type:y("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var nn=p({name:Ze,props:en,emits:["close"],setup(e,{slots:n,emit:o}){const l=u=>{u.stopPropagation(),o("close",u)},d=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},c=()=>{var u;const{type:v,mark:f,plain:a,round:s,size:i,closeable:m}=e,b={mark:f,plain:a,round:s};i&&(b[i]=i);const S=m&&t(H,{name:"cross",class:[oe("close"),_e],onClick:l},null);return t("span",{style:d(),class:oe([b,v])},[(u=n.default)==null?void 0:u.call(n),S])};return()=>t(ge,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?c():null]})}});const tn=j(nn),[on,I]=$("image"),an={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:h,height:h,radius:h,lazyLoad:Boolean,iconSize:h,showError:W,errorIcon:y("photo-fail"),iconPrefix:String,showLoading:W,loadingIcon:y("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var rn=p({name:on,props:an,emits:["load","error"],setup(e,{emit:n,slots:o}){const l=_(!1),d=_(!0),c=_(),{$Lazyload:u}=le().proxy,v=ie(()=>{const r={width:M(e.width),height:M(e.height)};return E(e.radius)&&(r.overflow="hidden",r.borderRadius=M(e.radius)),r});q(()=>e.src,()=>{l.value=!1,d.value=!0});const f=r=>{d.value&&(d.value=!1,n("load",r))},a=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:c.value,enumerable:!0}),f(r)},s=r=>{l.value=!0,d.value=!1,n("error",r)},i=(r,k,P)=>P?P():t(H,{name:r,size:e.iconSize,class:k,classPrefix:e.iconPrefix},null),m=()=>{if(d.value&&e.showLoading)return t("div",{class:I("loading")},[i(e.loadingIcon,I("loading-icon"),o.loading)]);if(l.value&&e.showError)return t("div",{class:I("error")},[i(e.errorIcon,I("error-icon"),o.error)])},b=()=>{if(l.value||!e.src)return;const r={alt:e.alt,class:I("img"),decoding:e.decoding,style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?ye(t("img",F({ref:c},r),null),[[he("lazy"),e.src]]):t("img",F({ref:c,src:e.src,onLoad:f,onError:s},r),null)},S=({el:r})=>{const k=()=>{r===c.value&&d.value&&a()};c.value?k():X(k)},C=({el:r})=>{r===c.value&&!l.value&&s()};return u&&ce&&(u.$on("loaded",S),u.$on("error",C),ve(()=>{u.$off("loaded",S),u.$off("error",C)})),re(()=>{X(()=>{var r;(r=c.value)!=null&&r.complete&&!e.lazyLoad&&a()})}),()=>{var r;return t("div",{class:I({round:e.round,block:e.block}),style:v.value},[b(),m(),(r=o.default)==null?void 0:r.call(o)])}}});const ln=j(rn),[cn,g]=$("card"),sn={tag:String,num:h,desc:String,thumb:String,title:String,price:h,centered:Boolean,lazyLoad:Boolean,currency:y("¥"),thumbLink:String,originPrice:h};var dn=p({name:cn,props:sn,emits:["clickThumb"],setup(e,{slots:n,emit:o}){const l=()=>{if(n.title)return n.title();if(e.title)return t("div",{class:[g("title"),"van-multi-ellipsis--l2"]},[e.title])},d=()=>{if(n.tag||e.tag)return t("div",{class:g("tag")},[n.tag?n.tag():t(tn,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},c=()=>n.thumb?n.thumb():t(ln,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),u=()=>{if(n.thumb||e.thumb)return t("a",{href:e.thumbLink,class:g("thumb"),onClick:a=>o("clickThumb",a)},[c(),d()])},v=()=>{if(n.desc)return n.desc();if(e.desc)return t("div",{class:[g("desc"),"van-ellipsis"]},[e.desc])},f=()=>{const a=e.price.toString().split(".");return t("div",null,[t("span",{class:g("price-currency")},[e.currency]),t("span",{class:g("price-integer")},[a[0]]),a.length>1&&t(K,null,[Q("."),t("span",{class:g("price-decimal")},[a[1]])])])};return()=>{var a,s,i;const m=n.num||E(e.num),b=n.price||E(e.price),S=n["origin-price"]||E(e.originPrice),C=m||b||S||n.bottom,r=b&&t("div",{class:g("price")},[n.price?n.price():f()]),k=S&&t("div",{class:g("origin-price")},[n["origin-price"]?n["origin-price"]():`${e.currency} ${e.originPrice}`]),P=m&&t("div",{class:g("num")},[n.num?n.num():`x${e.num}`]),G=n.footer&&t("div",{class:g("footer")},[n.footer()]),R=C&&t("div",{class:g("bottom")},[(a=n["price-top"])==null?void 0:a.call(n),r,k,P,(s=n.bottom)==null?void 0:s.call(n)]);return t("div",{class:g()},[t("div",{class:g("header")},[u(),t("div",{class:g("content",{centered:e.centered})},[t("div",null,[l(),v(),(i=n.tags)==null?void 0:i.call(n)]),R])]),G])}}});const ae=j(dn),un={style:{padding:"16px",background:"#f8f9fa"}},mn={style:{"margin-bottom":"20px"}},fn={key:0,style:{"margin-bottom":"20px"}},gn={style:{display:"flex","justify-content":"space-between","align-items":"center"}},vn={style:{"font-weight":"600","margin-bottom":"4px"}},yn={style:{color:"#666","font-size":"14px"}},hn={key:1},bn={style:{display:"flex","justify-content":"space-between","align-items":"center"}},xn={style:{"font-weight":"600","margin-bottom":"4px"}},Sn={style:{color:"#666","font-size":"14px"}},kn={key:2,style:{"text-align":"center",padding:"40px 0",color:"#999"}},_n={__name:"Add",setup(e){const n=be(),o=_(""),l=_([]),d=_([{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"}]),c=[{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"},{code:"2881",name:"富邦金"},{code:"2303",name:"聯電"},{code:"2308",name:"台達電"},{code:"1303",name:"南亞"}];function u(){if(!o.value.trim()){l.value=[];return}l.value=c.filter(a=>a.code.includes(o.value)||a.name.includes(o.value))}function v(){l.value=[]}function f(a){Ye(`已新增 ${a.name} (${a.code}) 到自選股`),setTimeout(()=>{n.push("/")},1e3)}return(a,s)=>(w(),z("div",un,[x("div",mn,[s[1]||(s[1]=x("h2",{style:{margin:"0 0 16px 0","font-size":"20px","font-weight":"600"}},"新增股票",-1)),t(L(ze),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=i=>o.value=i),placeholder:"搜尋股票代號或名稱",shape:"round",onSearch:u,onClear:v},null,8,["modelValue"])]),l.value.length>0?(w(),z("div",fn,[s[3]||(s[3]=x("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"搜尋結果",-1)),(w(!0),z(K,null,Y(l.value,i=>(w(),Z(L(ae),{key:i.code,style:{"margin-bottom":"8px"}},{default:V(()=>[x("div",gn,[x("div",null,[x("div",vn,A(i.name),1),x("div",yn,A(i.code),1)]),t(L(ne),{type:"primary",size:"small",onClick:m=>f(i)},{default:V(()=>s[2]||(s[2]=[Q(" 新增 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),_:2},1024))),128))])):J("",!0),o.value===""?(w(),z("div",hn,[s[5]||(s[5]=x("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"熱門股票",-1)),(w(!0),z(K,null,Y(d.value,i=>(w(),Z(L(ae),{key:i.code,style:{"margin-bottom":"8px"}},{default:V(()=>[x("div",bn,[x("div",null,[x("div",xn,A(i.name),1),x("div",Sn,A(i.code),1)]),t(L(ne),{type:"primary",size:"small",onClick:m=>f(i)},{default:V(()=>s[4]||(s[4]=[Q(" 新增 ",-1)])),_:2,__:[4]},1032,["onClick"])])]),_:2},1024))),128))])):J("",!0),o.value!==""&&l.value.length===0?(w(),z("div",kn," 查無相關股票 ")):J("",!0)]))}};export{_n as default};
