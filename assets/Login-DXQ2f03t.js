import{a5 as G,ag as C,r as f,S as T,Q as s,l as t,R as a,P as l,a7 as i,af as k,ah as L,ai as z,aj as A,O as P,Z as r}from"./index-BrrQnm3-.js";import{I as p}from"./iconify-DjA7y9Ky.js";import{B as m,s as v}from"./function-call-DeaqWxTt.js";const W={class:"login-page"},D={class:"login-container"},E={class:"logo-section"},I={class:"app-logo"},N={class:"login-section"},S={class:"terms-section"},V={class:"terms-text"},M={class:"loading-content"},O={__name:"Login",setup(R){const c=A(),u=C(),n=f(!1),g=f(!1),d=f(!1);async function h(){try{g.value=!0,n.value=!0;const e=await _();if(e.success)await u.loginWithGoogle(e.token),r.success("Google 登入成功！"),c.push("/");else throw new Error(e.error)}catch(e){console.error("Google 登入失敗:",e),r.fail("Google 登入失敗，請稍後再試")}finally{g.value=!1,n.value=!1}}async function w(){try{d.value=!0,n.value=!0;const e=await y();if(e.success)await u.loginWithFacebook(e.token),r.success("Facebook 登入成功！"),c.push("/");else throw new Error(e.error)}catch(e){console.error("Facebook 登入失敗:",e),r.fail("Facebook 登入失敗，請稍後再試")}finally{d.value=!1,n.value=!1}}function b(){u.setGuestMode(!0),c.push("/")}async function _(){return new Promise(e=>{setTimeout(()=>{e({success:!0,token:"mock-google-token",user:{id:"google-123",name:"測試用戶",email:"test@gmail.com",avatar:""}})},1500)})}async function y(){return new Promise(e=>{setTimeout(()=>{e({success:!0,token:"mock-facebook-token",user:{id:"fb-123",name:"測試用戶",email:"test@facebook.com",avatar:""}})},1500)})}function x(){v({title:"服務條款",message:"這裡是服務條款內容...",showCancelButton:!1,confirmButtonText:"我知道了"})}function B(){v({title:"隱私政策",message:"這裡是隱私政策內容...",showCancelButton:!1,confirmButtonText:"我知道了"})}return(e,o)=>(P(),T("div",W,[s("div",D,[s("div",E,[s("div",I,[t(a(p),{icon:"flowbite:star-solid",width:"60",height:"60",color:"#FFD600"})]),o[1]||(o[1]=s("h1",{class:"app-title"},"iKDx",-1)),o[2]||(o[2]=s("p",{class:"app-subtitle"},"智能股票分析平台",-1))]),s("div",N,[o[6]||(o[6]=s("h2",{class:"login-title"},"歡迎登入",-1)),t(a(m),{class:"login-btn google-btn",size:"large",block:"",loading:g.value,onClick:h},{default:l(()=>[t(a(p),{icon:"logos:google-icon",width:"20",height:"20",style:{"margin-right":"8px"}}),o[3]||(o[3]=i(" 使用 Google 帳號登入 ",-1))]),_:1,__:[3]},8,["loading"]),t(a(m),{class:"login-btn facebook-btn",size:"large",block:"",loading:d.value,onClick:w},{default:l(()=>[t(a(p),{icon:"logos:facebook",width:"20",height:"20",style:{"margin-right":"8px"}}),o[4]||(o[4]=i(" 使用 Facebook 帳號登入 ",-1))]),_:1,__:[4]},8,["loading"]),o[7]||(o[7]=s("div",{class:"divider"},[s("span",null,"或")],-1)),t(a(m),{class:"guest-btn",size:"large",block:"",plain:"",onClick:b},{default:l(()=>o[5]||(o[5]=[i(" 訪客模式繼續 ",-1)])),_:1,__:[5]})]),s("div",S,[s("p",V,[o[8]||(o[8]=i(" 登入即表示您同意我們的 ",-1)),s("a",{href:"#",onClick:k(x,["prevent"])},"服務條款"),o[9]||(o[9]=i(" 和 ",-1)),s("a",{href:"#",onClick:k(B,["prevent"])},"隱私政策")])])]),t(a(z),{show:n.value,"onUpdate:show":o[0]||(o[0]=F=>n.value=F),class:"loading-overlay"},{default:l(()=>[s("div",M,[t(a(L),{size:"24px",vertical:""},{default:l(()=>o[10]||(o[10]=[i("登入中...",-1)])),_:1,__:[10]})])]),_:1},8,["show"])]))}},U=G(O,[["__scopeId","data-v-7d56084d"]]);export{U as default};
