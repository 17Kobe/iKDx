import{d as k,A as P,c as T,r as K,aM as W,aN as Q,l as a,x as N,y as x,aC as U,aO as Y,aD as L,m as v,C as p,an as j,B as G,ah as J,au as X,a as z,z as Z,E as ee,aP as ne,p as M,t as te,aK as oe,e as ae,aH as le,aI as ie,ax as se,aQ as $,as as ce,aR as re,aS as ue,I as de,aT as fe,aU as ge,aV as me}from"./index-JjBT1LCz.js";const[q,F]=T("action-bar"),V=Symbol(q),Be={placeholder:Boolean,safeAreaInsetBottom:P};var be=k({name:q,props:Be,setup(e,{slots:i}){const t=K(),s=W(t,F),{linkChildren:c}=Q(V);c();const f=()=>{var B;return a("div",{ref:t,class:[F(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(B=i.default)==null?void 0:B.call(i)])};return()=>e.placeholder?s(f):f()}});const he=N(be),[ye,C]=T("button"),Ce=x({},L,{tag:v("button"),text:String,icon:String,type:v("default"),size:v("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:v("button"),loadingSize:p,loadingText:String,loadingType:String,iconPosition:v("left")});var ve=k({name:ye,props:Ce,emits:["click"],setup(e,{emit:i,slots:t}){const s=U(),c=()=>t.loading?t.loading():a(J,{size:e.loadingSize,type:e.loadingType,class:C("loading")},null),f=()=>{if(e.loading)return c();if(t.icon)return a("div",{class:C("icon")},[t.icon()]);if(e.icon)return a(j,{name:e.icon,class:C("icon"),classPrefix:e.iconPrefix},null)},B=()=>{let o;if(e.loading?o=e.loadingText:o=t.default?t.default():e.text,o)return a("span",{class:C("text")},[o])},r=()=>{const{color:o,plain:b}=e;if(o){const g={color:b?o:"white"};return b||(g.background=o),o.includes("gradient")?g.border=0:g.borderColor=o,g}},h=o=>{e.loading?G(o):e.disabled||(i("click",o),s())};return()=>{const{tag:o,type:b,size:g,block:w,round:O,plain:D,square:E,loading:_,disabled:n,hairline:l,nativeType:m,iconPosition:u}=e,y=[C([b,g,{plain:D,block:w,round:O,square:E,loading:_,disabled:n,hairline:l}]),{[Y]:l}];return a(o,{type:m,class:y,style:r(),disabled:n,onClick:h},{default:()=>[a("div",{class:C("content")},[u==="left"&&f(),B(),u==="right"&&f()])]})}}});const I=N(ve),[we,xe]=T("action-bar-button"),Se=x({},L,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Pe=k({name:we,props:Se,setup(e,{slots:i}){const t=U(),{parent:s,index:c}=X(V),f=z(()=>{if(s){const r=s.children[c.value-1];return!(r&&"isButton"in r)}}),B=z(()=>{if(s){const r=s.children[c.value+1];return!(r&&"isButton"in r)}});return Z({isButton:!0}),()=>{const{type:r,icon:h,text:o,color:b,loading:g,disabled:w}=e;return a(I,{class:xe([r,{last:B.value,first:f.value}]),size:"large",type:r,icon:h,color:b,loading:g,disabled:w,onClick:t},{default:()=>[i.default?i.default():o]})}}});const H=N(Pe),[ke,d,S]=T("dialog"),Te=x({},ie,{title:String,theme:String,width:p,message:[String,Function],callback:Function,allowHtml:Boolean,className:se,transition:v("van-dialog-bounce"),messageAlign:String,closeOnPopstate:P,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:P,closeOnClickOverlay:Boolean,keyboardEnabled:P,destroyOnClose:Boolean}),Oe=[...oe,"transition","closeOnPopstate","destroyOnClose"];var De=k({name:ke,props:Te,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:i,slots:t}){const s=K(),c=ee({confirm:!1,cancel:!1}),f=n=>i("update:show",n),B=n=>{var l;f(!1),(l=e.callback)==null||l.call(e,n)},r=n=>()=>{e.show&&(i(n),e.beforeClose?(c[n]=!0,de(e.beforeClose,{args:[n],done(){B(n),c[n]=!1},canceled(){c[n]=!1}})):B(n))},h=r("cancel"),o=r("confirm"),b=ne(n=>{var l,m;if(!e.keyboardEnabled||n.target!==((m=(l=s.value)==null?void 0:l.popupRef)==null?void 0:m.value))return;({Enter:e.showConfirmButton?o:$,Escape:e.showCancelButton?h:$})[n.key](),i("keydown",n)},["enter","esc"]),g=()=>{const n=t.title?t.title():e.title;if(n)return a("div",{class:d("header",{isolated:!e.message&&!t.default})},[n])},w=n=>{const{message:l,allowHtml:m,messageAlign:u}=e,y=d("message",{"has-title":n,[u]:u}),A=ce(l)?l():l;return m&&typeof A=="string"?a("div",{class:y,innerHTML:A},null):a("div",{class:y},[A])},O=()=>{if(t.default)return a("div",{class:d("content")},[t.default()]);const{title:n,message:l,allowHtml:m}=e;if(l){const u=!!(n||t.title);return a("div",{key:m?1:0,class:d("content",{isolated:!u})},[w(u)])}},D=()=>a("div",{class:[ue,d("footer")]},[e.showCancelButton&&a(I,{size:"large",text:e.cancelButtonText||S("cancel"),class:d("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(I,{size:"large",text:e.confirmButtonText||S("confirm"),class:[d("confirm"),{[re]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]),E=()=>a(he,{class:d("footer")},{default:()=>[e.showCancelButton&&a(H,{type:"warning",text:e.cancelButtonText||S("cancel"),class:d("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(H,{type:"danger",text:e.confirmButtonText||S("confirm"),class:d("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:o},null)]}),_=()=>t.footer?t.footer():e.theme==="round-button"?E():D();return()=>{const{width:n,title:l,theme:m,message:u,className:y}=e;return a(le,M({ref:s,role:"dialog",class:[d([m]),y],style:{width:ae(n)},tabindex:0,"aria-labelledby":l||u,onKeydown:b,"onUpdate:show":f},te(e,Oe)),{default:()=>[g(),O(),_()]})}}});let R;const Ee={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let _e=x({},Ee);function Ae(){({instance:R}=ge({setup(){const{state:i,toggle:t}=me();return()=>a(De,M(i,{"onUpdate:show":t}),null)}}))}function Re(e){return fe?new Promise((i,t)=>{R||Ae(),R.open(x({},_e,e,{callback:s=>{(s==="confirm"?i:t)(s)}}))}):Promise.resolve(void 0)}export{I as B,Re as s};
