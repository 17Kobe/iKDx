import{d as qe,m as sn,c as gn,r as W,a as ie,i as xn,w as Ht,b as Ut,e as Sn,u as Xn,f as Hn,o as st,n as He,g as Tt,h as To,j as Io,k as Oo,v as Mo,l as L,s as Ao,p as Un,T as Yo,q as qn,t as It,x as mn,y as Kn,z as Gn,A as Po,B as Jn,C as _n,D as $o,E as Lo,F as Dn,G as No,H as Fo,I as Ro,J as vn,K as Zn,L as Qn,M as Wo,N as Lt,O as B,P as te,Q as h,R as X,S as H,U as Qe,V as vt,W as ln,X as eo,Y as j,Z as ee,_ as to,$ as rt,a0 as Vo,a1 as cn,a2 as no,a3 as lt,a4 as J,a5 as Nt,a6 as it,a7 as ze,a8 as jo,a9 as zo,aa as Bo,ab as Xo}from"./index-QGxXJzxy.js";import{F as Ve,f as oo,C as Ot,L as Ho,a as Uo,b as qo,c as Ko,P as Go,d as Jo,p as Zo,e as Qo,g as ea,T as ta}from"./chart-mjvSGhcz.js";import{u as na,S as oa,a as kn}from"./index-Dj6HYPVE.js";import{A as $e}from"./index-CSXH-LaR.js";import{B as Le,s as aa}from"./function-call-BHaYmLgi.js";import"./index-C9VdRJMx.js";function Cn(t,e){return t.reduce((n,o)=>Math.abs(n-e)<Math.abs(o-e)?n:o)}const ra={gap:{type:[Number,Object],default:24},icon:String,axis:sn("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[ia,En]=gn("floating-bubble");var sa=qe({name:ia,inheritAttrs:!1,props:ra,emits:["click","update:offset","offsetChange"],setup(t,{slots:e,emit:n,attrs:o}){const a=W(),r=W({x:0,y:0,width:0,height:0}),i=ie(()=>xn(t.gap)?t.gap.x:t.gap),s=ie(()=>xn(t.gap)?t.gap.y:t.gap),l=ie(()=>({top:s.value,right:Ut.value-r.value.width-i.value,bottom:Ht.value-r.value.height-s.value,left:i.value})),c=W(!1);let d=!1;const f=ie(()=>{const b={},M=Sn(r.value.x),_=Sn(r.value.y);return b.transform=`translate3d(${M}, ${_}, 0)`,(c.value||!d)&&(b.transition="none"),b}),u=()=>{if(!I.value)return;const{width:b,height:M}=qn(a.value),{offset:_}=t;r.value={x:_?_.x:Ut.value-b-i.value,y:_?_.y:Ht.value-M-s.value,width:b,height:M}},g=Xn();let v=0,m=0;const p=b=>{g.start(b),c.value=!0,v=r.value.x,m=r.value.y};Hn("touchmove",b=>{if(b.preventDefault(),g.move(b),t.axis!=="lock"&&!g.isTap.value){if(t.axis==="x"||t.axis==="xy"){let _=v+g.deltaX.value;_<l.value.left&&(_=l.value.left),_>l.value.right&&(_=l.value.right),r.value.x=_}if(t.axis==="y"||t.axis==="xy"){let _=m+g.deltaY.value;_<l.value.top&&(_=l.value.top),_>l.value.bottom&&(_=l.value.bottom),r.value.y=_}const M=It(r.value,["x","y"]);n("update:offset",M)}},{target:a});const k=()=>{c.value=!1,He(()=>{if(t.magnetic==="x"){const b=Cn([l.value.left,l.value.right],r.value.x);r.value.x=b}if(t.magnetic==="y"){const b=Cn([l.value.top,l.value.bottom],r.value.y);r.value.y=b}if(!g.isTap.value){const b=It(r.value,["x","y"]);n("update:offset",b),(v!==b.x||m!==b.y)&&n("offsetChange",b)}})},C=b=>{g.isTap.value?n("click",b):b.stopPropagation()};st(()=>{u(),He(()=>{d=!0})}),Tt([Ut,Ht,i,s,()=>t.offset],u,{deep:!0});const I=W(!0);return To(()=>{I.value=!0}),Io(()=>{t.teleport&&(I.value=!1)}),()=>{const b=Oo(L("div",Un({class:En(),ref:a,onTouchstartPassive:p,onTouchend:k,onTouchcancel:k,onClickCapture:C,style:f.value},o),[e.default?e.default():L(Ao,{name:t.icon,class:En("icon")},null)]),[[Mo,I.value]]);return t.teleport?L(Yo,{to:t.teleport},{default:()=>[b]}):b}}});const la=mn(sa),[ca,Ke,ua]=gn("search"),da=Kn({},oo,{label:String,shape:sn("square"),leftIcon:sn("search"),clearable:Po,actionText:String,background:String,showAction:Boolean});var fa=qe({name:ca,props:da,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:n,attrs:o}){const a=na(),r=W(),i=()=>{n.action||(e("update:modelValue",""),e("cancel"))},s=b=>{b.keyCode===13&&(Jn(b),e("search",t.modelValue))},l=()=>t.id||`${a}-input`,c=()=>{if(n.label||t.label)return L("label",{class:Ke("label"),for:l(),"data-allow-mismatch":"attribute"},[n.label?n.label():t.label])},d=()=>{if(t.showAction){const b=t.actionText||ua("cancel");return L("div",{class:Ke("action"),role:"button",tabindex:0,onClick:i},[n.action?n.action():b])}},f=()=>{var b;return(b=r.value)==null?void 0:b.blur()},u=()=>{var b;return(b=r.value)==null?void 0:b.focus()},g=b=>e("blur",b),v=b=>e("focus",b),m=b=>e("clear",b),p=b=>e("clickInput",b),w=b=>e("clickLeftIcon",b),k=b=>e("clickRightIcon",b),C=Object.keys(oo),I=()=>{const b=Kn({},o,It(t,C),{id:l()}),M=_=>e("update:modelValue",_);return L(Ve,Un({ref:r,type:"search",class:Ke("field",{"with-message":b.errorMessage}),border:!1,onBlur:g,onFocus:v,onClear:m,onKeypress:s,onClickInput:p,onClickLeftIcon:w,onClickRightIcon:k,"onUpdate:modelValue":M},b),It(n,["left-icon","right-icon"]))};return Gn({focus:u,blur:f}),()=>{var b;return L("div",{class:Ke({"show-action":t.showAction}),style:{background:t.background}},[(b=n.left)==null?void 0:b.call(n),L("div",{class:Ke("content",t.shape)},[c(),I()]),d()])}}});const ha=mn(fa),[pa,qt]=gn("swipe-cell"),ga={name:$o(""),disabled:Boolean,leftWidth:_n,rightWidth:_n,beforeClose:Function,stopPropagation:Boolean};var ma=qe({name:pa,props:ga,emits:["open","close","click"],setup(t,{emit:e,slots:n}){let o,a,r,i;const s=W(),l=W(),c=W(),d=Lo({offset:0,dragging:!1}),f=Xn(),u=x=>x.value?qn(x).width:0,g=ie(()=>Dn(t.leftWidth)?+t.leftWidth:u(l)),v=ie(()=>Dn(t.rightWidth)?+t.rightWidth:u(c)),m=x=>{d.offset=x==="left"?g.value:-v.value,o||(o=!0,e("open",{name:t.name,position:x}))},p=x=>{d.offset=0,o&&(o=!1,e("close",{name:t.name,position:x}))},w=x=>{const D=Math.abs(d.offset),z=.15,O=o?1-z:z,N=x==="left"?g.value:v.value;N&&D>N*O?m(x):p(x)},k=x=>{t.disabled||(r=d.offset,f.start(x))},C=x=>{if(t.disabled)return;const{deltaX:D}=f;f.move(x),f.isHorizontal()&&(a=!0,d.dragging=!0,(!o||D.value*r<0)&&Jn(x,t.stopPropagation),d.offset=Fo(D.value+r,-v.value,g.value))},I=()=>{d.dragging&&(d.dragging=!1,w(d.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},b=(x="outside",D)=>{i||(e("click",x),o&&!a&&(i=!0,Ro(t.beforeClose,{args:[{event:D,name:t.name,position:x}],done:()=>{i=!1,p(x)},canceled:()=>i=!1,error:()=>i=!1})))},M=x=>D=>{(a||o)&&D.stopPropagation(),!a&&b(x,D)},_=(x,D)=>{const z=n[x];if(z)return L("div",{ref:D,class:qt(x),onClick:M(x)},[z()])};return Gn({open:m,close:p}),No(s,x=>b("outside",x),{eventName:"touchstart"}),Hn("touchmove",C,{target:s}),()=>{var x;const D={transform:`translate3d(${d.offset}px, 0, 0)`,transitionDuration:d.dragging?"0s":".6s"};return L("div",{ref:s,class:qt(),onClick:M("cell"),onTouchstartPassive:k,onTouchend:I,onTouchcancel:I},[L("div",{class:qt("wrapper"),style:D},[_("left",l),(x=n.default)==null?void 0:x.call(n),_("right",c)])])}}});const va=mn(ma),ba={style:{display:"flex","flex-direction":"column",gap:"0"}},ya={style:{margin:"16px 0 0 0"}},wa={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},xa=["onClick"],Sa={key:0,style:{"margin-top":"12px"}},_a={key:0},Da={key:0,style:{background:"#d3d3d3","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",opacity:"0.6"}},ka={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Ca={style:{"font-size":"16px",color:"#333",flex:"1"}},Ea=["onClick"],Ta={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Ia={style:{"font-size":"16px",color:"#333",flex:"1"}},Oa={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},Ma={__name:"StockSearch",setup(t){const e=vn(),n=Zn("stock-search"),o=W(!1);st(()=>{n.on(m=>{o.value=m})}),Qn(()=>{n.reset()});const a=W(),r=W(""),i=W([]),s=["台積電","鴻海","聯發科","長榮","中鋼"],l={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},c={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function d(m){return r.value===m?{...l,...c}:l}function f(){He(()=>{const m=a.value?.$el?.querySelector("input");m&&m.focus()})}Tt(()=>o.value,m=>{m&&setTimeout(()=>{f()},300)}),Tt(()=>r.value,async m=>{if(console.log("localSearch 更新:",m),!m||m.length<1){i.value=[];return}console.log("觸發 getAllStocks");try{const p=await Wo();console.log("getAllStocks 執行成功",p),i.value=p.filter(w=>w.name.includes(m)||w.id.includes(m)),console.log("搜尋結果:",i.value)}catch(p){console.error("getAllStocks 執行失敗:",p)}});function u(m){}function g(m){console.log("點擊熱門標籤:",m),r.value=m}async function v(m){const p=await e.addStockToList(m);ee({message:p.message,type:p.success?"success":"fail"})}return(m,p)=>(B(),Lt(X($e),{show:o.value,"onUpdate:show":p[3]||(p[3]=w=>o.value=w),"cancel-text":"離開",title:"股票搜尋",onSelect:v,style:{height:"80vh",maxHeight:"80vh"},"body-style":"height:80vh;max-height:80vh;overflow-y:auto;"},{description:te(()=>[h("div",ba,[L(X(ha),{ref_key:"searchInputRef",ref:a,modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=w=>r.value=w),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:u},null,8,["modelValue"]),h("div",ya,[p[5]||(p[5]=h("div",{style:{"font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px","margin-bottom":"8px","margin-left":"8px","text-align":"left"}}," | 熱門股票 ",-1)),h("div",wa,[(B(),H(vt,null,ln(s,w=>h("span",{key:w,onClick:k=>g(w),style:eo(d(w))},j(w),13,xa)),64))]),r.value&&r.value.length>=1?(B(),H("div",Sa,[i.value.length?(B(),H("div",_a,[(B(!0),H(vt,null,ln(i.value,w=>(B(),H(vt,{key:w.id},[X(e).isStockInList(w.id)?(B(),H("div",Da,[h("div",ka,j(w.id),1),h("div",Ca,j(w.name),1),p[4]||(p[4]=h("div",{style:{"margin-left":"12px","min-width":"60px",height:"40px",background:"#e0e0e0",color:"#666","font-weight":"bold","font-size":"16px","border-radius":"8px",width:"64px",display:"flex","align-items":"center","justify-content":"center"}}," 已新增 ",-1))])):(B(),H("div",{key:1,onClick:k=>v(w),style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",cursor:"pointer",transition:"all 0.2s ease"},onMouseenter:p[1]||(p[1]=k=>k.target.style.background="#eff3f6"),onMouseleave:p[2]||(p[2]=k=>k.target.style.background="#fff")},[h("div",Ta,j(w.id),1),h("div",Ia,j(w.name),1)],40,Ea))],64))),128))])):(B(),H("div",Oa," 查無資料 "))])):Qe("",!0)])])]),_:1},8,["show"]))}},ao={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Aa={ariaLabel:{type:String},ariaDescribedby:{type:String}},Ya={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...ao,...Aa},Pa=Vo[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function Fe(t){return no(t)?cn(t):t}function $a(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return no(e)?new Proxy(t,{}):t}function La(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function ro(t,e){t.labels=e}function io(t,e,n){const o=[];t.datasets=e.map(a=>{const r=t.datasets.find(i=>i[n]===a[n]);return!r||!a.data||o.includes(r)?{...a}:(o.push(r),Object.assign(r,a),r)})}function Na(t,e){const n={labels:[],datasets:[]};return ro(n,t.labels),io(n,t.datasets,e),n}const Fa=qe({props:Ya,setup(t,e){let{expose:n,slots:o}=e;const a=W(null),r=to(null);n({chart:r});const i=()=>{if(!a.value)return;const{type:c,data:d,options:f,plugins:u,datasetIdKey:g}=t,v=Na(d,g),m=$a(v,d);r.value=new Ot(a.value,{type:c,data:m,options:{...f},plugins:u})},s=()=>{const c=cn(r.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),r.value=null},t.destroyDelay):(c.destroy(),r.value=null))},l=c=>{c.update(t.updateMode)};return st(i),Qn(s),Tt([()=>t.options,()=>t.data],(c,d)=>{let[f,u]=c,[g,v]=d;const m=cn(r.value);if(!m)return;let p=!1;if(f){const w=Fe(f),k=Fe(g);w&&w!==k&&(La(m,w),p=!0)}if(u){const w=Fe(u.labels),k=Fe(v.labels),C=Fe(u.datasets),I=Fe(v.datasets);w!==k&&(ro(m.config.data,w),p=!0),C&&C!==I&&(io(m.config.data,C,t.datasetIdKey),p=!0)}p&&He(()=>{l(m)})},{deep:!0}),()=>rt("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:a},[rt("p",{},[o.default?o.default():""])])}});function Ra(t,e){return Ot.register(e),qe({props:ao,setup(n,o){let{expose:a}=o;const r=to(null),i=s=>{r.value=s?.chart};return a({chart:r}),()=>rt(Fa,Pa({ref:i},{type:t,...n}))}})}const Wa=Ra("line",Ho);var bt={exports:{}},Va=bt.exports,Tn;function ja(){return Tn||(Tn=1,function(t,e){(function(n,o){t.exports=o()})(Va,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,r=/\d\d/,i=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,l={},c=function(p){return(p=+p)+(p>68?1900:2e3)},d=function(p){return function(w){this[p]=+w}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(w){if(!w||w==="Z")return 0;var k=w.match(/([+-]|\d\d)/g),C=60*k[1]+(+k[2]||0);return C===0?0:k[0]==="+"?-C:C}(p)}],u=function(p){var w=l[p];return w&&(w.indexOf?w:w.s.concat(w.f))},g=function(p,w){var k,C=l.meridiem;if(C){for(var I=1;I<=24;I+=1)if(p.indexOf(C(I,0,w))>-1){k=I>12;break}}else k=p===(w?"pm":"PM");return k},v={A:[s,function(p){this.afternoon=g(p,!1)}],a:[s,function(p){this.afternoon=g(p,!0)}],Q:[a,function(p){this.month=3*(p-1)+1}],S:[a,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[i,d("seconds")],ss:[i,d("seconds")],m:[i,d("minutes")],mm:[i,d("minutes")],H:[i,d("hours")],h:[i,d("hours")],HH:[i,d("hours")],hh:[i,d("hours")],D:[i,d("day")],DD:[r,d("day")],Do:[s,function(p){var w=l.ordinal,k=p.match(/\d+/);if(this.day=k[0],w)for(var C=1;C<=31;C+=1)w(C).replace(/\[|\]/g,"")===p&&(this.day=C)}],w:[i,d("week")],ww:[r,d("week")],M:[i,d("month")],MM:[r,d("month")],MMM:[s,function(p){var w=u("months"),k=(u("monthsShort")||w.map(function(C){return C.slice(0,3)})).indexOf(p)+1;if(k<1)throw new Error;this.month=k%12||k}],MMMM:[s,function(p){var w=u("months").indexOf(p)+1;if(w<1)throw new Error;this.month=w%12||w}],Y:[/[+-]?\d+/,d("year")],YY:[r,function(p){this.year=c(p)}],YYYY:[/\d{4}/,d("year")],Z:f,ZZ:f};function m(p){var w,k;w=p,k=l&&l.formats;for(var C=(p=w.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(z,O,N){var A=N&&N.toUpperCase();return O||k[N]||n[N]||k[A].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(R,Q,U){return Q||U.slice(1)})})).match(o),I=C.length,b=0;b<I;b+=1){var M=C[b],_=v[M],x=_&&_[0],D=_&&_[1];C[b]=D?{regex:x,parser:D}:M.replace(/^\[|\]$/g,"")}return function(z){for(var O={},N=0,A=0;N<I;N+=1){var R=C[N];if(typeof R=="string")A+=R.length;else{var Q=R.regex,U=R.parser,pe=z.slice(A),le=Q.exec(pe)[0];U.call(O,le),z=z.replace(le,"")}}return function(ge){var Oe=ge.afternoon;if(Oe!==void 0){var oe=ge.hours;Oe?oe<12&&(ge.hours+=12):oe===12&&(ge.hours=0),delete ge.afternoon}}(O),O}}return function(p,w,k){k.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(c=p.parseTwoDigitYear);var C=w.prototype,I=C.parse;C.parse=function(b){var M=b.date,_=b.utc,x=b.args;this.$u=_;var D=x[1];if(typeof D=="string"){var z=x[2]===!0,O=x[3]===!0,N=z||O,A=x[2];O&&(A=x[2]),l=this.$locale(),!z&&A&&(l=k.Ls[A]),this.$d=function(pe,le,ge,Oe){try{if(["x","X"].indexOf(le)>-1)return new Date((le==="X"?1e3:1)*pe);var oe=m(le)(pe),Me=oe.year,Ne=oe.month,Rt=oe.day,Wt=oe.hours,P=oe.minutes,y=oe.seconds,$=oe.milliseconds,be=oe.zone,Se=oe.week,me=new Date,_e=Rt||(Me||Ne?1:me.getDate()),Vt=Me||me.getFullYear(),dt=0;Me&&!Ne||(dt=Ne>0?Ne-1:me.getMonth());var ft,jt=Wt||0,zt=P||0,Bt=y||0,Xt=$||0;return be?new Date(Date.UTC(Vt,dt,_e,jt,zt,Bt,Xt+60*be.offset*1e3)):ge?new Date(Date.UTC(Vt,dt,_e,jt,zt,Bt,Xt)):(ft=new Date(Vt,dt,_e,jt,zt,Bt,Xt),Se&&(ft=Oe(ft).week(Se).toDate()),ft)}catch{return new Date("")}}(M,D,_,k),this.init(),A&&A!==!0&&(this.$L=this.locale(A).$L),N&&M!=this.format(D)&&(this.$d=new Date("")),l={}}else if(D instanceof Array)for(var R=D.length,Q=1;Q<=R;Q+=1){x[1]=D[Q-1];var U=k.apply(this,x);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}Q===R&&(this.$d=new Date(""))}else I.call(this,b)}}})}(bt)),bt.exports}var za=ja();const Ba=lt(za);var yt={exports:{}},Xa=yt.exports,In;function Ha(){return In||(In=1,function(t,e){(function(n,o){t.exports=o()})(Xa,function(){return function(n,o){var a=o.prototype,r=a.format;a.format=function(i){var s=this,l=this.$locale();if(!this.isValid())return r.bind(this)(i);var c=this.$utils(),d=(i||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return l.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return l.ordinal(s.week(),"W");case"w":case"ww":return c.s(s.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(s.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(s.$H===0?24:s.$H),f==="k"?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return f}});return r.bind(this)(d)}}})}(yt)),yt.exports}var Ua=Ha();const qa=lt(Ua);var wt={exports:{}},Ka=wt.exports,On;function Ga(){return On||(On=1,function(t,e){(function(n,o){t.exports=o()})(Ka,function(){var n="month",o="quarter";return function(a,r){var i=r.prototype;i.quarter=function(c){return this.$utils().u(c)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(c-1))};var s=i.add;i.add=function(c,d){return c=Number(c),this.$utils().p(d)===o?this.add(3*c,n):s.bind(this)(c,d)};var l=i.startOf;i.startOf=function(c,d){var f=this.$utils(),u=!!f.u(d)||d;if(f.p(c)===o){var g=this.quarter()-1;return u?this.month(3*g).startOf(n).startOf("day"):this.month(3*g+2).endOf(n).endOf("day")}return l.bind(this)(c,d)}}})}(wt)),wt.exports}var Ja=Ga();const Za=lt(Ja);var xt={exports:{}},Qa=xt.exports,Mn;function er(){return Mn||(Mn=1,function(t,e){(function(n,o){t.exports=o()})(Qa,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(o,a,r){var i=a.prototype,s=i.format;r.en.formats=n,i.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,d=function(f,u){return f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(g,v,m){var p=m&&m.toUpperCase();return v||u[m]||n[m]||u[p].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(w,k,C){return k||C.slice(1)})})}(l,c===void 0?{}:c);return s.call(this,d)}}})}(xt)),xt.exports}var tr=er();const nr=lt(tr);var St={exports:{}},or=St.exports,An;function ar(){return An||(An=1,function(t,e){(function(n,o){t.exports=o()})(or,function(){var n="day";return function(o,a,r){var i=function(c){return c.add(4-c.isoWeekday(),n)},s=a.prototype;s.isoWeekYear=function(){return i(this).year()},s.isoWeek=function(c){if(!this.$utils().u(c))return this.add(7*(c-this.isoWeek()),n);var d,f,u,g,v=i(this),m=(d=this.isoWeekYear(),f=this.$u,u=(f?r.utc:r)().year(d).startOf("year"),g=4-u.isoWeekday(),u.isoWeekday()>4&&(g+=7),u.add(g,n));return v.diff(m,"week")+1},s.isoWeekday=function(c){return this.$utils().u(c)?this.day()||7:this.day(this.day()%7?c:c-7)};var l=s.startOf;s.startOf=function(c,d){var f=this.$utils(),u=!!f.u(d)||d;return f.p(c)==="isoweek"?u?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(c,d)}}})}(St)),St.exports}var rr=ar();const ir=lt(rr);J.extend(qa);J.extend(Za);J.extend(nr);J.extend(Ba);J.extend(ir);var sr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Uo._date.override({formats:function(){return sr},parse:function(e,n){var o=typeof e;return e===null||o==="undefined"?null:o==="string"&&typeof n=="string"?J(e,n).isValid()?J(e,n).valueOf():null:e instanceof J?null:J(e).isValid()?J(e).valueOf():null},format:function(e,n){return J(e).format(n)},add:function(e,n,o){return J(e).add(n,o).valueOf()},diff:function(e,n,o){return J(e).diff(J(n),o)},startOf:function(e,n,o){if(n==="isoWeek"){var a=typeof o=="number"&&o>0&&o<7?o:1;return J(e).isoWeekday(a).startOf("day").valueOf()}return J(e).startOf(n).valueOf()},endOf:function(e,n){return J(e).endOf(n).valueOf()}});const lr={key:1,class:"error-placeholder"},cr={__name:"KdjChart",props:{stockId:{type:String,required:!0},width:{type:Number,default:200},height:{type:Number,default:100}},emits:["kdjClick"],setup(t,{emit:e}){Ot.register(qo,Ko,Go,Jo,Zo,Qo,ea,ta);const n={id:"kdjDisplay",afterDatasetsDraw:(f,u,g)=>{if(!g.enabled||!g.lastKdj)return;const{ctx:v,chartArea:m}=f,{lastKdj:p}=g,k=f.scales.y.getPixelForValue(0),C=m.right-97,I=k+15,b=k+30;v.save(),console.log("Drawing KDJ values:",{k:p.k,d:p.d,xStart:C,yK:I,yD:b,zeroY:k,chartArea:m}),v.font="bold 12px Arial",v.textAlign="left",v.fillStyle="#4286f5";const M=`K: ${p.k}`;v.fillText(M,C,I);const _=v.measureText(M).width;v.fillStyle="#e75c9a";const x=` D: ${p.d}`,D=C+_;console.log("Drawing D value:",x,"at same line position:",D,I),v.fillText(x,D,I),v.restore()}};Ot.register(n);const o=t,a=e,r=vn(),i=W(null),s=ie(()=>{const f=r.userStockList.find(u=>u.id===o.stockId);return f?.data?.weeklyKdj?f.data.weeklyKdj.filter(u=>u&&Array.isArray(u)&&u.length>=4&&typeof u[1]=="number"&&!isNaN(u[1])&&typeof u[2]=="number"&&!isNaN(u[2])&&typeof u[3]=="number"&&!isNaN(u[3])).map(u=>({x:J(u[0],"YYYYMMDD").toDate(),k:u[1],d:u[2],j:u[3]})):[]}),l=ie(()=>{const f=s.value;if(!f||f.length===0)return{datasets:[]};const u=f.map(v=>({x:v.x,y:v.k})),g=f.map(v=>({x:v.x,y:v.d}));return{datasets:[{label:"K",data:u,borderColor:"#4286f5",backgroundColor:"rgba(66, 134, 245, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#4286f5",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2},{label:"D",data:g,borderColor:"#e75c9a",backgroundColor:"rgba(231, 92, 154, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#e75c9a",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2}]}}),c=ie(()=>{const f=s.value;return f&&f.length>0?f[f.length-1]:null}),d=ie(()=>{const f=c.value;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#333",bodyColor:"#333",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,cornerRadius:6,displayColors:!1,padding:8,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:function(u){const g=u[0].parsed.x;return J(g).format("YYYY-MM-DD(dd)")},label:function(u){const g=u.dataset.label,v=u.parsed.y.toFixed(2);return`${g}: ${v}`},afterLabel:function(u){const g=u.dataIndex,v=s.value;if(v&&v[g]){const m=v[g];if(u.datasetIndex===0)return[`K: ${m.k.toFixed(2)}`,`D: ${m.d.toFixed(2)}`,`J: ${m.j.toFixed(2)}`]}return[]}}},kdjDisplay:{enabled:!!f,lastKdj:f?{k:f.k.toFixed(2),d:f.d.toFixed(2),j:f.j.toFixed(2),date:J(f.x).format("YYYY/MM/DD")}:null}},scales:{x:{type:"time",time:{unit:"week",displayFormats:{week:"MM/DD"}},display:!1,grid:{display:!1},ticks:{display:!1},offset:!1,bounds:"data"},y:{type:"linear",position:"right",display:!0,min:-20,max:100,border:{display:!1},grid:{drawTicks:!1,color:u=>{const g=u.tick.value;return[0,20,50,80,100].includes(g)?"rgba(200, 200, 200, 0.3)":"transparent"}},ticks:{stepSize:10,autoSkip:!1,color:"#888",font:{size:12},padding:-15,callback:u=>u===20||u===50||u===80?u:""}}},animation:!1,interaction:{mode:"nearest",intersect:!1,includeInvisible:!1},hover:{mode:"nearest",intersect:!1,animationDuration:200},onClick:(u,g,v)=>{console.log("Chart onClick triggered"),console.log("Event object:",u);const m=v.canvas.getBoundingClientRect();let p,w;if(u.native)p=u.native.offsetX||u.native.clientX-m.left,w=u.native.offsetY||u.native.clientY-m.top;else if(u.offsetX!==void 0)p=u.offsetX,w=u.offsetY;else if(u.clientX!==void 0)p=u.clientX-m.left,w=u.clientY-m.top;else{console.log("Cannot determine click position");return}console.log("Click position:",{x:p,y:w}),console.log("Canvas rect:",m);const k=v.chartArea,I=v.scales.y.getPixelForValue(0),b={left:k.right-120,right:k.right-5,top:I+5,bottom:I+20};if(console.log("KDJ area:",b),p>=b.left&&p<=b.right&&w>=b.top&&w<=b.bottom){console.log("Clicked in KDJ area");const M=c.value;M&&(console.log("Emitting kdjClick event:",M),a("kdjClick",{k:M.k.toFixed(2),d:M.d.toFixed(2),j:M.j.toFixed(2),date:J(M.x).format("YYYY/MM/DD")}))}else console.log("Clicked outside KDJ area")}}});return(f,u)=>(B(),H("div",{ref_key:"chartContainer",ref:i,class:"kdj-chart",style:{width:"100%",height:"100%"}},[l.value.datasets.length>0?(B(),Lt(X(Wa),{key:0,data:l.value,options:d.value},null,8,["data","options"])):(B(),H("div",lr,"KDJ 圖表暫不可用"))],512))}},ur=Nt(cr,[["__scopeId","data-v-7b9bfd80"]]),dr={class:"stock-name"},fr={class:"stock-name-main"},hr={class:"stock-name-left"},pr={class:"name highlight"},gr={class:"code"},mr={class:"stock-name-right"},vr={class:"stock-progress-bar"},br={class:"progress-text"},yr={__name:"StockName",props:{name:String,code:String,price:[String,Number],change:[String,Number],changePercent:[String,Number],priceClass:String,progress:Number,progressText:String},setup(t){return(e,n)=>(B(),H("div",dr,[h("div",fr,[h("div",hr,[h("div",pr,j(t.name),1),h("div",gr,j(t.code),1),n[0]||(n[0]=h("div",{class:"star-area"},[h("span",{class:"star"},"★")],-1))]),h("div",mr,[h("div",{class:it(["price",t.priceClass])},j(t.price),3),h("div",{class:it(["change",t.priceClass])},j(t.change>0?"+":"")+j(t.change)+" ("+j(t.changePercent)+"%) ",3)])]),h("div",vr,[h("div",{class:"stock-progress-inner",style:eo({width:(t.progress||0)+"%"})},[h("span",br,j(t.progressText||(t.progress||0)+"%"),1)],4)])]))}},wr=Nt(yr,[["__scopeId","data-v-e4a25520"]]),xr={class:"stock-actions"},Sr={class:"sheet-content"},_r={class:"sheet-header"},Dr={class:"current-price"},kr={class:"add-trade-section"},Cr={class:"trade-list"},Er=["onClick"],Tr={class:"trade-info"},Ir={class:"trade-details"},Or={class:"trade-date"},Mr={class:"trade-amount"},Ar={class:"trade-total"},Yr={class:"total-amount"},Pr={key:0,class:"empty-trades"},$r={key:0,class:"trade-summary"},Lr={class:"summary-item"},Nr={class:"value"},Fr={class:"summary-item"},Rr={class:"value"},Wr={class:"summary-item"},Vr={class:"sheet-content"},jr={class:"sheet-header"},zr={class:"strategy-list"},Br={class:"strategy-status"},Xr={key:0,class:"enabled"},Hr={key:1,class:"disabled"},Ur={class:"strategy-status"},qr={key:0,class:"enabled"},Kr={key:1,class:"disabled"},Gr={class:"strategy-status"},Jr={key:0,class:"enabled"},Zr={key:1,class:"disabled"},Qr={class:"strategy-status"},ei={key:0,class:"enabled"},ti={key:1,class:"disabled"},ni={class:"sheet-content"},oi={class:"more-list"},ai={class:"more-info"},ri={class:"trade-form"},ii={class:"form-actions"},si={__name:"StockActions",props:{stockInfo:{type:Object,required:!0}},setup(t,{expose:e}){const n=t,o=W(!1),a=W(!1),r=W(!1),i=W(!1),s=W(!1),l=W(null),c=W(!1),d=W(!1),f=ie(()=>{if(!n.stockInfo)return 0;const P=n.stockInfo.price;if(typeof P=="string"){const y=parseFloat(P);return isNaN(y)?0:y}return typeof P=="number"?P:0}),u=W({type:"",shares:"",price:"",date:new Date().toISOString().split("T")[0],note:""}),g=W([]),v=W({stopLoss:{enabled:!1,price:0,percentage:10},takeProfit:{enabled:!1,price:0,percentage:15},priceAlert:{enabled:!1,alerts:[]},autoInvest:{enabled:!1,amount:1e4,frequency:"monthly"}}),m=[{name:"買入",value:"buy"},{name:"賣出",value:"sell"}],p=ie(()=>g.value.reduce((P,y)=>y.type==="buy"?P+y.shares:P-y.shares,0)),w=ie(()=>{const P=g.value.filter(be=>be.type==="buy"),y=P.reduce((be,Se)=>be+Se.shares*Se.price,0),$=P.reduce((be,Se)=>be+Se.shares,0);return $>0?y/$:0}),k=ie(()=>{if(!f.value||p.value===0)return 0;const P=p.value*f.value,$=g.value.filter(me=>me.type==="buy").reduce((me,_e)=>me+_e.shares*_e.price,0),Se=g.value.filter(me=>me.type==="sell").reduce((me,_e)=>me+_e.shares*_e.price,0);return P+Se-$});function C(){if(!n.stockInfo)return;const P=n.stockInfo.code||n.stockInfo.id,y=localStorage.getItem(`tradeRecords_${P}`);y?g.value=JSON.parse(y):P==="2330"?g.value=[{id:1,type:"buy",shares:1e3,price:550,date:"2024-01-15",note:"首次買入"},{id:2,type:"buy",shares:500,price:520,date:"2024-02-10",note:"加碼買入"}]:g.value=[]}function I(){if(!n.stockInfo)return;const P=n.stockInfo.code||n.stockInfo.id,y=localStorage.getItem(`strategies_${P}`);y&&(v.value={...v.value,...JSON.parse(y)})}function b(){if(!n.stockInfo)return;const P=n.stockInfo.code||n.stockInfo.id;localStorage.setItem(`tradeRecords_${P}`,JSON.stringify(g.value))}function M(P){return new Date(P).toLocaleDateString("zh-TW")}function _(){C(),o.value=!0}function x(){I(),a.value=!0}function D(){r.value=!0}function z(){l.value=null,u.value={type:"",shares:"",price:f.value>0?f.value.toString():"",date:new Date().toISOString().split("T")[0],note:""},i.value=!0}function O(P){l.value=P,u.value={type:P.type,shares:P.shares.toString(),price:P.price.toString(),date:P.date,note:P.note||""},o.value=!1,i.value=!0}function N(){s.value=!0}function A(P){u.value.type=P.value,s.value=!1}function R(){if(!u.value.type||!u.value.shares||!u.value.price){ee.fail("請填寫必要欄位");return}c.value=!0;try{const P={type:u.value.type,shares:parseInt(u.value.shares),price:parseFloat(u.value.price),date:u.value.date,note:u.value.note};if(l.value){const y=g.value.findIndex($=>$.id===l.value.id);y!==-1&&(g.value[y]={...g.value[y],...P}),ee.success("交易記錄已更新")}else P.id=Date.now(),g.value.push(P),ee.success("交易記錄已新增");i.value=!1,b()}catch{ee.fail("操作失敗")}finally{c.value=!1}}function Q(){aa({title:"確認刪除",message:"確定要刪除這筆交易記錄嗎？",showCancelButton:!0,confirmButtonText:"刪除",cancelButtonText:"取消"}).then(()=>{const P=g.value.findIndex(y=>y.id===l.value.id);P!==-1&&(g.value.splice(P,1),ee.success("交易記錄已刪除"),i.value=!1,b())}).catch(()=>{})}function U(){ee("停損設定功能開發中")}function pe(){ee("停利設定功能開發中")}function le(){ee("價格提醒功能開發中")}function ge(){ee("定期定額功能開發中")}function Oe(){ee("技術分析功能開發中")}function oe(){ee("相關新聞功能開發中")}function Me(){ee("財務報表功能開發中")}function Ne(){d.value=!d.value,ee.success(d.value?"已加入關注":"已移除關注"),r.value=!1}function Rt(){ee("分享功能開發中")}function Wt(){ee("匯出功能開發中")}return e({showTradeSheet:_,showStrategySheet:x,showMoreSheet:D}),st(()=>{C(),I()}),(P,y)=>(B(),H("div",xr,[L(X($e),{show:o.value,"onUpdate:show":y[0]||(y[0]=$=>o.value=$),title:"交易記錄","cancel-text":"關閉",class:"trade-action-sheet"},{default:te(()=>[h("div",Sr,[h("div",_r,[h("h3",null,j(t.stockInfo.name)+" ("+j(t.stockInfo.code)+")",1),h("p",Dr,"現價：NT$ "+j(f.value?f.value.toLocaleString():"--"),1)]),h("div",kr,[L(X(Le),{type:"primary",block:"",onClick:z,icon:"plus"},{default:te(()=>y[10]||(y[10]=[ze(" 新增交易記錄 ",-1)])),_:1,__:[10]})]),h("div",Cr,[(B(!0),H(vt,null,ln(g.value,$=>(B(),H("div",{key:$.id,class:"trade-item",onClick:be=>O($)},[h("div",Tr,[h("div",{class:it(["trade-type",$.type])},j($.type==="buy"?"買入":"賣出"),3),h("div",Ir,[h("p",Or,j(M($.date)),1),h("p",Mr,j($.shares)+"股 @ NT$ "+j($.price),1)])]),h("div",Ar,[h("span",Yr,"NT$ "+j(($.shares*$.price).toLocaleString()),1)])],8,Er))),128)),g.value.length===0?(B(),H("div",Pr,[y[12]||(y[12]=h("p",null,"尚無交易記錄",-1)),L(X(Le),{type:"primary",onClick:z},{default:te(()=>y[11]||(y[11]=[ze("新增第一筆交易",-1)])),_:1,__:[11]})])):Qe("",!0)]),g.value.length>0?(B(),H("div",$r,[h("div",Lr,[y[13]||(y[13]=h("span",{class:"label"},"持有股數",-1)),h("span",Nr,j(p.value)+"股",1)]),h("div",Fr,[y[14]||(y[14]=h("span",{class:"label"},"平均成本",-1)),h("span",Rr,"NT$ "+j(w.value.toFixed(2)),1)]),h("div",Wr,[y[15]||(y[15]=h("span",{class:"label"},"損益",-1)),h("span",{class:it(["value",{profit:k.value>0,loss:k.value<0}])},j(k.value>0?"+":"")+"NT$ "+j(Math.abs(k.value).toLocaleString()),3)])])):Qe("",!0)])]),_:1},8,["show"]),L(X($e),{show:a.value,"onUpdate:show":y[1]||(y[1]=$=>a.value=$),title:"投資策略","cancel-text":"關閉",class:"strategy-action-sheet"},{default:te(()=>[h("div",Vr,[h("div",jr,[h("h3",null,j(t.stockInfo.name)+" 策略設定",1)]),h("div",zr,[h("div",{class:"strategy-item",onClick:U},[y[16]||(y[16]=h("div",{class:"strategy-icon"},"🛡️",-1)),y[17]||(y[17]=h("div",{class:"strategy-info"},[h("h4",null,"停損設定"),h("p",null,"自動停損保護")],-1)),h("div",Br,[v.value.stopLoss.enabled?(B(),H("span",Xr,"已啟用")):(B(),H("span",Hr,"未設定"))])]),h("div",{class:"strategy-item",onClick:pe},[y[18]||(y[18]=h("div",{class:"strategy-icon"},"🎯",-1)),y[19]||(y[19]=h("div",{class:"strategy-info"},[h("h4",null,"停利設定"),h("p",null,"自動獲利了結")],-1)),h("div",Ur,[v.value.takeProfit.enabled?(B(),H("span",qr,"已啟用")):(B(),H("span",Kr,"未設定"))])]),h("div",{class:"strategy-item",onClick:le},[y[20]||(y[20]=h("div",{class:"strategy-icon"},"🔔",-1)),y[21]||(y[21]=h("div",{class:"strategy-info"},[h("h4",null,"價格提醒"),h("p",null,"到價通知提醒")],-1)),h("div",Gr,[v.value.priceAlert.enabled?(B(),H("span",Jr,j(v.value.priceAlert.alerts.length)+"個提醒",1)):(B(),H("span",Zr,"未設定"))])]),h("div",{class:"strategy-item",onClick:ge},[y[22]||(y[22]=h("div",{class:"strategy-icon"},"🔄",-1)),y[23]||(y[23]=h("div",{class:"strategy-info"},[h("h4",null,"定期定額"),h("p",null,"自動投資計劃")],-1)),h("div",Qr,[v.value.autoInvest.enabled?(B(),H("span",ei,"已啟用")):(B(),H("span",ti,"未設定"))])])])])]),_:1},8,["show"]),L(X($e),{show:r.value,"onUpdate:show":y[2]||(y[2]=$=>r.value=$),title:"更多選項","cancel-text":"關閉",class:"more-action-sheet"},{default:te(()=>[h("div",ni,[h("div",oi,[h("div",{class:"more-item",onClick:Oe},y[24]||(y[24]=[h("div",{class:"more-icon"},"📊",-1),h("div",{class:"more-info"},[h("h4",null,"技術分析"),h("p",null,"查看技術指標")],-1)])),h("div",{class:"more-item",onClick:oe},y[25]||(y[25]=[h("div",{class:"more-icon"},"📰",-1),h("div",{class:"more-info"},[h("h4",null,"相關新聞"),h("p",null,"最新財經資訊")],-1)])),h("div",{class:"more-item",onClick:Me},y[26]||(y[26]=[h("div",{class:"more-icon"},"📈",-1),h("div",{class:"more-info"},[h("h4",null,"財務報表"),h("p",null,"財務數據分析")],-1)])),h("div",{class:"more-item",onClick:Ne},[y[27]||(y[27]=h("div",{class:"more-icon"},"⭐",-1)),h("div",ai,[h("h4",null,j(d.value?"移除關注":"加入關注"),1),h("p",null,j(d.value?"從關注清單移除":"加入自選股"),1)])]),h("div",{class:"more-item",onClick:Rt},y[28]||(y[28]=[h("div",{class:"more-icon"},"📤",-1),h("div",{class:"more-info"},[h("h4",null,"分享"),h("p",null,"分享股票資訊")],-1)])),h("div",{class:"more-item",onClick:Wt},y[29]||(y[29]=[h("div",{class:"more-icon"},"💾",-1),h("div",{class:"more-info"},[h("h4",null,"匯出資料"),h("p",null,"匯出交易記錄")],-1)]))])])]),_:1},8,["show"]),L(X($e),{show:i.value,"onUpdate:show":y[8]||(y[8]=$=>i.value=$),title:l.value?"編輯交易":"新增交易記錄","cancel-text":"取消"},{default:te(()=>[h("div",ri,[L(X(Ve),{modelValue:u.value.type,"onUpdate:modelValue":y[3]||(y[3]=$=>u.value.type=$),label:"交易類型",readonly:"",onClick:N,placeholder:u.value.type==="buy"?"買入":u.value.type==="sell"?"賣出":"請選擇"},null,8,["modelValue","placeholder"]),L(X(Ve),{modelValue:u.value.shares,"onUpdate:modelValue":y[4]||(y[4]=$=>u.value.shares=$),label:"股數",type:"number",placeholder:"請輸入股數"},null,8,["modelValue"]),L(X(Ve),{modelValue:u.value.price,"onUpdate:modelValue":y[5]||(y[5]=$=>u.value.price=$),label:"價格",type:"number",placeholder:"請輸入成交價格"},null,8,["modelValue"]),L(X(Ve),{modelValue:u.value.date,"onUpdate:modelValue":y[6]||(y[6]=$=>u.value.date=$),label:"交易日期",type:"date"},null,8,["modelValue"]),L(X(Ve),{modelValue:u.value.note,"onUpdate:modelValue":y[7]||(y[7]=$=>u.value.note=$),label:"備註",placeholder:"選填",type:"textarea",rows:"2"},null,8,["modelValue"]),h("div",ii,[L(X(Le),{type:"primary",size:"large",block:"",onClick:R,loading:c.value},{default:te(()=>[ze(j(l.value?"更新":"新增"),1)]),_:1},8,["loading"]),l.value?(B(),Lt(X(Le),{key:0,type:"danger",size:"large",block:"",plain:"",onClick:Q,style:{"margin-top":"12px"}},{default:te(()=>y[30]||(y[30]=[ze(" 刪除記錄 ",-1)])),_:1,__:[30]})):Qe("",!0)])])]),_:1},8,["show","title"]),L(X($e),{show:s.value,"onUpdate:show":y[9]||(y[9]=$=>s.value=$),title:"選擇交易類型",actions:m,"cancel-text":"取消",onSelect:A},null,8,["show"])]))}},li=Nt(si,[["__scopeId","data-v-f4166fa3"]]);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Yn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function xe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yn(Object(n),!0).forEach(function(o){ci(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function _t(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_t=function(e){return typeof e}:_t=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(t)}function ci(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ke(){return ke=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ke.apply(this,arguments)}function ui(t,e){if(t==null)return{};var n={},o=Object.keys(t),a,r;for(r=0;r<o.length;r++)a=o[r],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function di(t,e){if(t==null)return{};var n=ui(t,e),o,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}var fi="1.14.0";function De(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ce=De(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ct=De(/Edge/i),Pn=De(/firefox/i),et=De(/safari/i)&&!De(/chrome/i)&&!De(/android/i),so=De(/iP(ad|od|hone)/i),hi=De(/chrome/i)&&De(/android/i),lo={capture:!1,passive:!1};function V(t,e,n){t.addEventListener(e,n,!Ce&&lo)}function F(t,e,n){t.removeEventListener(e,n,!Ce&&lo)}function Mt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function pi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function ye(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Mt(t,e):Mt(t,e))||o&&t===n)return t;if(t===n)break}while(t=pi(t))}return null}var $n=/\s+/g;function ue(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace($n," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace($n," ")}}function E(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function Xe(t,e){var n="";if(typeof t=="string")n=t;else do{var o=E(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function co(t,e,n){if(t){var o=t.getElementsByTagName(e),a=0,r=o.length;if(n)for(;a<r;a++)n(o[a],a);return o}return[]}function we(){var t=document.scrollingElement;return t||document.documentElement}function ne(t,e,n,o,a){if(!(!t.getBoundingClientRect&&t!==window)){var r,i,s,l,c,d,f;if(t!==window&&t.parentNode&&t!==we()?(r=t.getBoundingClientRect(),i=r.top,s=r.left,l=r.bottom,c=r.right,d=r.height,f=r.width):(i=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,f=window.innerWidth),(e||n)&&t!==window&&(a=a||t.parentNode,!Ce))do if(a&&a.getBoundingClientRect&&(E(a,"transform")!=="none"||n&&E(a,"position")!=="static")){var u=a.getBoundingClientRect();i-=u.top+parseInt(E(a,"border-top-width")),s-=u.left+parseInt(E(a,"border-left-width")),l=i+r.height,c=s+r.width;break}while(a=a.parentNode);if(o&&t!==window){var g=Xe(a||t),v=g&&g.a,m=g&&g.d;g&&(i/=m,s/=v,f/=v,d/=m,l=i+d,c=s+f)}return{top:i,left:s,bottom:l,right:c,width:f,height:d}}}function Ln(t,e,n){for(var o=Ie(t,!0),a=ne(t)[e];o;){var r=ne(o)[n],i=void 0;if(i=a>=r,!i)return o;if(o===we())break;o=Ie(o,!1)}return!1}function Ue(t,e,n,o){for(var a=0,r=0,i=t.children;r<i.length;){if(i[r].style.display!=="none"&&i[r]!==T.ghost&&(o||i[r]!==T.dragged)&&ye(i[r],n.draggable,t,!1)){if(a===e)return i[r];a++}r++}return null}function bn(t,e){for(var n=t.lastElementChild;n&&(n===T.ghost||E(n,"display")==="none"||e&&!Mt(n,e));)n=n.previousElementSibling;return n||null}function he(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==T.clone&&(!e||Mt(t,e))&&n++;return n}function Nn(t){var e=0,n=0,o=we();if(t)do{var a=Xe(t),r=a.a,i=a.d;e+=t.scrollLeft*r,n+=t.scrollTop*i}while(t!==o&&(t=t.parentNode));return[e,n]}function gi(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function Ie(t,e){if(!t||!t.getBoundingClientRect)return we();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=E(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return we();if(o||e)return n;o=!0}}while(n=n.parentNode);return we()}function mi(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Kt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var tt;function uo(t,e){return function(){if(!tt){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),tt=setTimeout(function(){tt=void 0},e)}}}function vi(){clearTimeout(tt),tt=void 0}function fo(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function ho(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var fe="Sortable"+new Date().getTime();function bi(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(a){if(!(E(a,"display")==="none"||a===T.ghost)){t.push({target:a,rect:ne(a)});var r=xe({},t[t.length-1].rect);if(a.thisAnimationDuration){var i=Xe(a,!0);i&&(r.top-=i.f,r.left-=i.e)}a.fromRect=r}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(gi(t,{target:o}),1)},animateAll:function(o){var a=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var r=!1,i=0;t.forEach(function(s){var l=0,c=s.target,d=c.fromRect,f=ne(c),u=c.prevFromRect,g=c.prevToRect,v=s.rect,m=Xe(c,!0);m&&(f.top-=m.f,f.left-=m.e),c.toRect=f,c.thisAnimationDuration&&Kt(u,f)&&!Kt(d,f)&&(v.top-f.top)/(v.left-f.left)===(d.top-f.top)/(d.left-f.left)&&(l=wi(v,u,g,a.options)),Kt(f,d)||(c.prevFromRect=d,c.prevToRect=f,l||(l=a.options.animation),a.animate(c,v,f,l)),l&&(r=!0,i=Math.max(i,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),r?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),t=[]},animate:function(o,a,r,i){if(i){E(o,"transition",""),E(o,"transform","");var s=Xe(this.el),l=s&&s.a,c=s&&s.d,d=(a.left-r.left)/(l||1),f=(a.top-r.top)/(c||1);o.animatingX=!!d,o.animatingY=!!f,E(o,"transform","translate3d("+d+"px,"+f+"px,0)"),this.forRepaintDummy=yi(o),E(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),E(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){E(o,"transition",""),E(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function yi(t){return t.offsetWidth}function wi(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var Re=[],Gt={initializeByDefault:!0},ut={mount:function(e){for(var n in Gt)Gt.hasOwnProperty(n)&&!(n in e)&&(e[n]=Gt[n]);Re.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Re.push(e)},pluginEvent:function(e,n,o){var a=this;this.eventCanceled=!1,o.cancel=function(){a.eventCanceled=!0};var r=e+"Global";Re.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][r]&&n[i.pluginName][r](xe({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](xe({sortable:n},o)))})},initializePlugins:function(e,n,o,a){Re.forEach(function(s){var l=s.pluginName;if(!(!e.options[l]&&!s.initializeByDefault)){var c=new s(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,ke(o,c.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var i=this.modifyOption(e,r,e.options[r]);typeof i<"u"&&(e.options[r]=i)}},getEventProperties:function(e,n){var o={};return Re.forEach(function(a){typeof a.eventProperties=="function"&&ke(o,a.eventProperties.call(n[a.pluginName],e))}),o},modifyOption:function(e,n,o){var a;return Re.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(a=r.optionListeners[n].call(e[r.pluginName],o))}),a}};function xi(t){var e=t.sortable,n=t.rootEl,o=t.name,a=t.targetEl,r=t.cloneEl,i=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,f=t.newDraggableIndex,u=t.originalEvent,g=t.putSortable,v=t.extraEventProperties;if(e=e||n&&n[fe],!!e){var m,p=e.options,w="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Ce&&!ct?m=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(o,!0,!0)),m.to=i||n,m.from=s||n,m.item=a||n,m.clone=r,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=d,m.newDraggableIndex=f,m.originalEvent=u,m.pullMode=g?g.lastPutMode:void 0;var k=xe(xe({},v),ut.getEventProperties(o,e));for(var C in k)m[C]=k[C];n&&n.dispatchEvent(m),p[w]&&p[w].call(e,m)}}var Si=["evt"],ce=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.evt,r=di(o,Si);ut.pluginEvent.bind(T)(e,n,xe({dragEl:S,parentEl:K,ghostEl:Y,rootEl:q,nextEl:Pe,lastDownEl:Dt,cloneEl:G,cloneHidden:Te,dragStarted:Ge,putSortable:ae,activeSortable:T.active,originalEvent:a,oldIndex:Be,oldDraggableIndex:nt,newIndex:de,newDraggableIndex:Ee,hideGhostForTarget:vo,unhideGhostForTarget:bo,cloneNowHidden:function(){Te=!0},cloneNowShown:function(){Te=!1},dispatchSortableEvent:function(s){se({sortable:n,name:s,originalEvent:a})}},r))};function se(t){xi(xe({putSortable:ae,cloneEl:G,targetEl:S,rootEl:q,oldIndex:Be,oldDraggableIndex:nt,newIndex:de,newDraggableIndex:Ee},t))}var S,K,Y,q,Pe,Dt,G,Te,Be,de,nt,Ee,ht,ae,je=!1,At=!1,Yt=[],Ae,ve,Jt,Zt,Fn,Rn,Ge,We,ot,at=!1,pt=!1,kt,re,Qt=[],un=!1,Pt=[],Ft=typeof document<"u",gt=so,Wn=ct||Ce?"cssFloat":"float",_i=Ft&&!hi&&!so&&"draggable"in document.createElement("div"),po=function(){if(Ft){if(Ce)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),go=function(e,n){var o=E(e),a=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=Ue(e,0,n),i=Ue(e,1,n),s=r&&E(r),l=i&&E(i),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ne(r).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ne(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return i&&(l.clear==="both"||l.clear===f)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=a&&o[Wn]==="none"||i&&o[Wn]==="none"&&c+d>a)?"vertical":"horizontal"},Di=function(e,n,o){var a=o?e.left:e.top,r=o?e.right:e.bottom,i=o?e.width:e.height,s=o?n.left:n.top,l=o?n.right:n.bottom,c=o?n.width:n.height;return a===s||r===l||a+i/2===s+c/2},ki=function(e,n){var o;return Yt.some(function(a){var r=a[fe].options.emptyInsertThreshold;if(!(!r||bn(a))){var i=ne(a),s=e>=i.left-r&&e<=i.right+r,l=n>=i.top-r&&n<=i.bottom+r;if(s&&l)return o=a}}),o},mo=function(e){function n(r,i){return function(s,l,c,d){var f=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(r==null&&(i||f))return!0;if(r==null||r===!1)return!1;if(i&&r==="clone")return r;if(typeof r=="function")return n(r(s,l,c,d),i)(s,l,c,d);var u=(i?s:l).options.group.name;return r===!0||typeof r=="string"&&r===u||r.join&&r.indexOf(u)>-1}}var o={},a=e.group;(!a||_t(a)!="object")&&(a={name:a}),o.name=a.name,o.checkPull=n(a.pull,!0),o.checkPut=n(a.put),o.revertClone=a.revertClone,e.group=o},vo=function(){!po&&Y&&E(Y,"display","none")},bo=function(){!po&&Y&&E(Y,"display","")};Ft&&document.addEventListener("click",function(t){if(At)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),At=!1,!1},!0);var Ye=function(e){if(S){e=e.touches?e.touches[0]:e;var n=ki(e.clientX,e.clientY);if(n){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[fe]._onDragOver(o)}}},Ci=function(e){S&&S.parentNode[fe]._isOutsideThisEl(e.target)};function T(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ke({},e),t[fe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return go(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:T.supportPointer!==!1&&"PointerEvent"in window&&!et,emptyInsertThreshold:5};ut.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);mo(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:_i,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?V(t,"pointerdown",this._onTapStart):(V(t,"mousedown",this._onTapStart),V(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(V(t,"dragover",this),V(t,"dragenter",this)),Yt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ke(this,bi())}T.prototype={constructor:T,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(We=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,S):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,o=this.el,a=this.options,r=a.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(s||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=a.filter;if(Pi(o),!S&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&et&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=ye(l,a.draggable,o,!1),!(l&&l.animated)&&Dt!==l)){if(Be=he(l),nt=he(l,a.draggable),typeof d=="function"){if(d.call(this,e,l,this)){se({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:o,fromEl:o}),ce("filter",n,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(f){if(f=ye(c,f.trim(),o,!1),f)return se({sortable:n,rootEl:f,name:"filter",targetEl:l,fromEl:o,toEl:o}),ce("filter",n,{evt:e}),!0}),d)){r&&e.cancelable&&e.preventDefault();return}a.handle&&!ye(c,a.handle,o,!1)||this._prepareDragStart(e,s,l)}}},_prepareDragStart:function(e,n,o){var a=this,r=a.el,i=a.options,s=r.ownerDocument,l;if(o&&!S&&o.parentNode===r){var c=ne(o);if(q=r,S=o,K=S.parentNode,Pe=S.nextSibling,Dt=o,ht=i.group,T.dragged=S,Ae={target:S,clientX:(n||e).clientX,clientY:(n||e).clientY},Fn=Ae.clientX-c.left,Rn=Ae.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,S.style["will-change"]="all",l=function(){if(ce("delayEnded",a,{evt:e}),T.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Pn&&a.nativeDraggable&&(S.draggable=!0),a._triggerDragStart(e,n),se({sortable:a,name:"choose",originalEvent:e}),ue(S,i.chosenClass,!0)},i.ignore.split(",").forEach(function(d){co(S,d.trim(),en)}),V(s,"dragover",Ye),V(s,"mousemove",Ye),V(s,"touchmove",Ye),V(s,"mouseup",a._onDrop),V(s,"touchend",a._onDrop),V(s,"touchcancel",a._onDrop),Pn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),ce("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ct||Ce))){if(T.eventCanceled){this._onDrop();return}V(s,"mouseup",a._disableDelayedDrag),V(s,"touchend",a._disableDelayedDrag),V(s,"touchcancel",a._disableDelayedDrag),V(s,"mousemove",a._delayedDragTouchMoveHandler),V(s,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&V(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(l,i.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&en(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._disableDelayedDrag),F(e,"touchend",this._disableDelayedDrag),F(e,"touchcancel",this._disableDelayedDrag),F(e,"mousemove",this._delayedDragTouchMoveHandler),F(e,"touchmove",this._delayedDragTouchMoveHandler),F(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?V(document,"pointermove",this._onTouchMove):n?V(document,"touchmove",this._onTouchMove):V(document,"mousemove",this._onTouchMove):(V(S,"dragend",this),V(q,"dragstart",this._onDragStart));try{document.selection?Ct(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(je=!1,q&&S){ce("dragStarted",this,{evt:n}),this.nativeDraggable&&V(document,"dragover",Ci);var o=this.options;!e&&ue(S,o.dragClass,!1),ue(S,o.ghostClass,!0),T.active=this,e&&this._appendGhost(),se({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(ve){this._lastX=ve.clientX,this._lastY=ve.clientY,vo();for(var e=document.elementFromPoint(ve.clientX,ve.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ve.clientX,ve.clientY),e!==n);)n=e;if(S.parentNode[fe]._isOutsideThisEl(e),n)do{if(n[fe]){var o=void 0;if(o=n[fe]._onDragOver({clientX:ve.clientX,clientY:ve.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);bo()}},_onTouchMove:function(e){if(Ae){var n=this.options,o=n.fallbackTolerance,a=n.fallbackOffset,r=e.touches?e.touches[0]:e,i=Y&&Xe(Y,!0),s=Y&&i&&i.a,l=Y&&i&&i.d,c=gt&&re&&Nn(re),d=(r.clientX-Ae.clientX+a.x)/(s||1)+(c?c[0]-Qt[0]:0)/(s||1),f=(r.clientY-Ae.clientY+a.y)/(l||1)+(c?c[1]-Qt[1]:0)/(l||1);if(!T.active&&!je){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(Y){i?(i.e+=d-(Jt||0),i.f+=f-(Zt||0)):i={a:1,b:0,c:0,d:1,e:d,f};var u="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");E(Y,"webkitTransform",u),E(Y,"mozTransform",u),E(Y,"msTransform",u),E(Y,"transform",u),Jt=d,Zt=f,ve=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Y){var e=this.options.fallbackOnBody?document.body:q,n=ne(S,!0,gt,!0,e),o=this.options;if(gt){for(re=e;E(re,"position")==="static"&&E(re,"transform")==="none"&&re!==document;)re=re.parentNode;re!==document.body&&re!==document.documentElement?(re===document&&(re=we()),n.top+=re.scrollTop,n.left+=re.scrollLeft):re=we(),Qt=Nn(re)}Y=S.cloneNode(!0),ue(Y,o.ghostClass,!1),ue(Y,o.fallbackClass,!0),ue(Y,o.dragClass,!0),E(Y,"transition",""),E(Y,"transform",""),E(Y,"box-sizing","border-box"),E(Y,"margin",0),E(Y,"top",n.top),E(Y,"left",n.left),E(Y,"width",n.width),E(Y,"height",n.height),E(Y,"opacity","0.8"),E(Y,"position",gt?"absolute":"fixed"),E(Y,"zIndex","100000"),E(Y,"pointerEvents","none"),T.ghost=Y,e.appendChild(Y),E(Y,"transform-origin",Fn/parseInt(Y.style.width)*100+"% "+Rn/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,a=e.dataTransfer,r=o.options;if(ce("dragStart",this,{evt:e}),T.eventCanceled){this._onDrop();return}ce("setupClone",this),T.eventCanceled||(G=ho(S),G.draggable=!1,G.style["will-change"]="",this._hideClone(),ue(G,this.options.chosenClass,!1),T.clone=G),o.cloneId=Ct(function(){ce("clone",o),!T.eventCanceled&&(o.options.removeCloneOnHide||q.insertBefore(G,S),o._hideClone(),se({sortable:o,name:"clone"}))}),!n&&ue(S,r.dragClass,!0),n?(At=!0,o._loopId=setInterval(o._emulateDragOver,50)):(F(document,"mouseup",o._onDrop),F(document,"touchend",o._onDrop),F(document,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(o,a,S)),V(document,"drop",o),E(S,"transform","translateZ(0)")),je=!0,o._dragStartId=Ct(o._dragStarted.bind(o,n,e)),V(document,"selectstart",o),Ge=!0,et&&E(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,a,r,i,s=this.options,l=s.group,c=T.active,d=ht===l,f=s.sort,u=ae||c,g,v=this,m=!1;if(un)return;function p(le,ge){ce(le,v,xe({evt:e,isOwner:d,axis:g?"vertical":"horizontal",revert:i,dragRect:a,targetRect:r,canSort:f,fromSortable:u,target:o,completed:k,onMove:function(oe,Me){return mt(q,n,S,a,oe,ne(oe),e,Me)},changed:C},ge))}function w(){p("dragOverAnimationCapture"),v.captureAnimationState(),v!==u&&u.captureAnimationState()}function k(le){return p("dragOverCompleted",{insertion:le}),le&&(d?c._hideClone():c._showClone(v),v!==u&&(ue(S,ae?ae.options.ghostClass:c.options.ghostClass,!1),ue(S,s.ghostClass,!0)),ae!==v&&v!==T.active?ae=v:v===T.active&&ae&&(ae=null),u===v&&(v._ignoreWhileAnimating=o),v.animateAll(function(){p("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(o===S&&!S.animated||o===n&&!o.animated)&&(We=null),!s.dragoverBubble&&!e.rootEl&&o!==document&&(S.parentNode[fe]._isOutsideThisEl(e.target),!le&&Ye(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function C(){de=he(S),Ee=he(S,s.draggable),se({sortable:v,name:"change",toEl:n,newIndex:de,newDraggableIndex:Ee,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=ye(o,s.draggable,n,!0),p("dragOver"),T.eventCanceled)return m;if(S.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||v._ignoreWhileAnimating===o)return k(!1);if(At=!1,c&&!s.disabled&&(d?f||(i=K!==q):ae===this||(this.lastPutMode=ht.checkPull(this,c,S,e))&&l.checkPut(this,c,S,e))){if(g=this._getDirection(e,o)==="vertical",a=ne(S),p("dragOverValid"),T.eventCanceled)return m;if(i)return K=q,w(),this._hideClone(),p("revert"),T.eventCanceled||(Pe?q.insertBefore(S,Pe):q.appendChild(S)),k(!0);var I=bn(n,s.draggable);if(!I||Oi(e,g,this)&&!I.animated){if(I===S)return k(!1);if(I&&n===e.target&&(o=I),o&&(r=ne(o)),mt(q,n,S,a,o,r,e,!!o)!==!1)return w(),n.appendChild(S),K=n,C(),k(!0)}else if(I&&Ii(e,g,this)){var b=Ue(n,0,s,!0);if(b===S)return k(!1);if(o=b,r=ne(o),mt(q,n,S,a,o,r,e,!1)!==!1)return w(),n.insertBefore(S,b),K=n,C(),k(!0)}else if(o.parentNode===n){r=ne(o);var M=0,_,x=S.parentNode!==n,D=!Di(S.animated&&S.toRect||a,o.animated&&o.toRect||r,g),z=g?"top":"left",O=Ln(o,"top","top")||Ln(S,"top","top"),N=O?O.scrollTop:void 0;We!==o&&(_=r[z],at=!1,pt=!D&&s.invertSwap||x),M=Mi(e,o,r,g,D?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,pt,We===o);var A;if(M!==0){var R=he(S);do R-=M,A=K.children[R];while(A&&(E(A,"display")==="none"||A===Y))}if(M===0||A===o)return k(!1);We=o,ot=M;var Q=o.nextElementSibling,U=!1;U=M===1;var pe=mt(q,n,S,a,o,r,e,U);if(pe!==!1)return(pe===1||pe===-1)&&(U=pe===1),un=!0,setTimeout(Ti,30),w(),U&&!Q?n.appendChild(S):o.parentNode.insertBefore(S,U?Q:o),O&&fo(O,0,N-O.scrollTop),K=S.parentNode,_!==void 0&&!pt&&(kt=Math.abs(_-ne(o)[z])),C(),k(!0)}if(n.contains(S))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){F(document,"mousemove",this._onTouchMove),F(document,"touchmove",this._onTouchMove),F(document,"pointermove",this._onTouchMove),F(document,"dragover",Ye),F(document,"mousemove",Ye),F(document,"touchmove",Ye)},_offUpEvents:function(){var e=this.el.ownerDocument;F(e,"mouseup",this._onDrop),F(e,"touchend",this._onDrop),F(e,"pointerup",this._onDrop),F(e,"touchcancel",this._onDrop),F(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(de=he(S),Ee=he(S,o.draggable),ce("drop",this,{evt:e}),K=S&&S.parentNode,de=he(S),Ee=he(S,o.draggable),T.eventCanceled){this._nulling();return}je=!1,pt=!1,at=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),dn(this.cloneId),dn(this._dragStartId),this.nativeDraggable&&(F(document,"drop",this),F(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),et&&E(document.body,"user-select",""),E(S,"transform",""),e&&(Ge&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(q===K||ae&&ae.lastPutMode!=="clone")&&G&&G.parentNode&&G.parentNode.removeChild(G),S&&(this.nativeDraggable&&F(S,"dragend",this),en(S),S.style["will-change"]="",Ge&&!je&&ue(S,ae?ae.options.ghostClass:this.options.ghostClass,!1),ue(S,this.options.chosenClass,!1),se({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),q!==K?(de>=0&&(se({rootEl:K,name:"add",toEl:K,fromEl:q,originalEvent:e}),se({sortable:this,name:"remove",toEl:K,originalEvent:e}),se({rootEl:K,name:"sort",toEl:K,fromEl:q,originalEvent:e}),se({sortable:this,name:"sort",toEl:K,originalEvent:e})),ae&&ae.save()):de!==Be&&de>=0&&(se({sortable:this,name:"update",toEl:K,originalEvent:e}),se({sortable:this,name:"sort",toEl:K,originalEvent:e})),T.active&&((de==null||de===-1)&&(de=Be,Ee=nt),se({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ce("nulling",this),q=S=K=Y=Pe=G=Dt=Te=Ae=ve=Ge=de=Ee=Be=nt=We=ot=ae=ht=T.dragged=T.ghost=T.clone=T.active=null,Pt.forEach(function(e){e.checked=!0}),Pt.length=Jt=Zt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":S&&(this._onDragOver(e),Ei(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,a=0,r=o.length,i=this.options;a<r;a++)n=o[a],ye(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||Yi(n));return e},sort:function(e,n){var o={},a=this.el;this.toArray().forEach(function(r,i){var s=a.children[i];ye(s,this.options.draggable,a,!1)&&(o[r]=s)},this),n&&this.captureAnimationState(),e.forEach(function(r){o[r]&&(a.removeChild(o[r]),a.appendChild(o[r]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return ye(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var a=ut.modifyOption(this,e,n);typeof a<"u"?o[e]=a:o[e]=n,e==="group"&&mo(o)},destroy:function(){ce("destroy",this);var e=this.el;e[fe]=null,F(e,"mousedown",this._onTapStart),F(e,"touchstart",this._onTapStart),F(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(F(e,"dragover",this),F(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yt.splice(Yt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Te){if(ce("hideClone",this),T.eventCanceled)return;E(G,"display","none"),this.options.removeCloneOnHide&&G.parentNode&&G.parentNode.removeChild(G),Te=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Te){if(ce("showClone",this),T.eventCanceled)return;S.parentNode==q&&!this.options.group.revertClone?q.insertBefore(G,S):Pe?q.insertBefore(G,Pe):q.appendChild(G),this.options.group.revertClone&&this.animate(S,G),E(G,"display",""),Te=!1}}};function Ei(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function mt(t,e,n,o,a,r,i,s){var l,c=t[fe],d=c.options.onMove,f;return window.CustomEvent&&!Ce&&!ct?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=o,l.related=a||e,l.relatedRect=r||ne(e),l.willInsertAfter=s,l.originalEvent=i,t.dispatchEvent(l),d&&(f=d.call(c,l,i)),f}function en(t){t.draggable=!1}function Ti(){un=!1}function Ii(t,e,n){var o=ne(Ue(n.el,0,n.options,!0)),a=10;return e?t.clientX<o.left-a||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-a||t.clientY<o.bottom&&t.clientX<o.left}function Oi(t,e,n){var o=ne(bn(n.el,n.options.draggable)),a=10;return e?t.clientX>o.right+a||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+a}function Mi(t,e,n,o,a,r,i,s){var l=o?t.clientY:t.clientX,c=o?n.height:n.width,d=o?n.top:n.left,f=o?n.bottom:n.right,u=!1;if(!i){if(s&&kt<c*a){if(!at&&(ot===1?l>d+c*r/2:l<f-c*r/2)&&(at=!0),at)u=!0;else if(ot===1?l<d+kt:l>f-kt)return-ot}else if(l>d+c*(1-a)/2&&l<f-c*(1-a)/2)return Ai(e)}return u=u||i,u&&(l<d+c*r/2||l>f-c*r/2)?l>d+c/2?1:-1:0}function Ai(t){return he(S)<he(t)?1:-1}function Yi(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function Pi(t){Pt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&Pt.push(o)}}function Ct(t){return setTimeout(t,0)}function dn(t){return clearTimeout(t)}Ft&&V(document,"touchmove",function(t){(T.active||je)&&t.cancelable&&t.preventDefault()});T.utils={on:V,off:F,css:E,find:co,is:function(e,n){return!!ye(e,n,e,!1)},extend:mi,throttle:uo,closest:ye,toggleClass:ue,clone:ho,index:he,nextTick:Ct,cancelNextTick:dn,detectDirection:go,getChild:Ue};T.get=function(t){return t[fe]};T.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(T.utils=xe(xe({},T.utils),o.utils)),ut.mount(o)})};T.create=function(t,e){return new T(t,e)};T.version=fi;var Z=[],Je,fn,hn=!1,tn,nn,$t,Ze;function $i(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?V(document,"dragover",this._handleAutoScroll):this.options.supportPointer?V(document,"pointermove",this._handleFallbackAutoScroll):o.touches?V(document,"touchmove",this._handleFallbackAutoScroll):V(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?F(document,"dragover",this._handleAutoScroll):(F(document,"pointermove",this._handleFallbackAutoScroll),F(document,"touchmove",this._handleFallbackAutoScroll),F(document,"mousemove",this._handleFallbackAutoScroll)),Vn(),Et(),vi()},nulling:function(){$t=fn=Je=hn=Ze=tn=nn=null,Z.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var a=this,r=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(r,i);if($t=n,o||this.options.forceAutoScrollFallback||ct||Ce||et){on(n,this.options,s,o);var l=Ie(s,!0);hn&&(!Ze||r!==tn||i!==nn)&&(Ze&&Vn(),Ze=setInterval(function(){var c=Ie(document.elementFromPoint(r,i),!0);c!==l&&(l=c,Et()),on(n,a.options,c,o)},10),tn=r,nn=i)}else{if(!this.options.bubbleScroll||Ie(s,!0)===we()){Et();return}on(n,this.options,Ie(s,!1),!1)}}},ke(t,{pluginName:"scroll",initializeByDefault:!0})}function Et(){Z.forEach(function(t){clearInterval(t.pid)}),Z=[]}function Vn(){clearInterval(Ze)}var on=uo(function(t,e,n,o){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,l=we(),c=!1,d;fn!==n&&(fn=n,Et(),Je=e.scroll,d=e.scrollFn,Je===!0&&(Je=Ie(n,!0)));var f=0,u=Je;do{var g=u,v=ne(g),m=v.top,p=v.bottom,w=v.left,k=v.right,C=v.width,I=v.height,b=void 0,M=void 0,_=g.scrollWidth,x=g.scrollHeight,D=E(g),z=g.scrollLeft,O=g.scrollTop;g===l?(b=C<_&&(D.overflowX==="auto"||D.overflowX==="scroll"||D.overflowX==="visible"),M=I<x&&(D.overflowY==="auto"||D.overflowY==="scroll"||D.overflowY==="visible")):(b=C<_&&(D.overflowX==="auto"||D.overflowX==="scroll"),M=I<x&&(D.overflowY==="auto"||D.overflowY==="scroll"));var N=b&&(Math.abs(k-a)<=i&&z+C<_)-(Math.abs(w-a)<=i&&!!z),A=M&&(Math.abs(p-r)<=i&&O+I<x)-(Math.abs(m-r)<=i&&!!O);if(!Z[f])for(var R=0;R<=f;R++)Z[R]||(Z[R]={});(Z[f].vx!=N||Z[f].vy!=A||Z[f].el!==g)&&(Z[f].el=g,Z[f].vx=N,Z[f].vy=A,clearInterval(Z[f].pid),(N!=0||A!=0)&&(c=!0,Z[f].pid=setInterval((function(){o&&this.layer===0&&T.active._onTouchMove($t);var Q=Z[this.layer].vy?Z[this.layer].vy*s:0,U=Z[this.layer].vx?Z[this.layer].vx*s:0;typeof d=="function"&&d.call(T.dragged.parentNode[fe],U,Q,t,$t,Z[this.layer].el)!=="continue"||fo(Z[this.layer].el,U,Q)}).bind({layer:f}),24))),f++}while(e.bubbleScroll&&u!==l&&(u=Ie(u,!1)));hn=c}},30),yo=function(e){var n=e.originalEvent,o=e.putSortable,a=e.dragEl,r=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=o||r;s();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(f)&&(i("spill"),this.onSpill({dragEl:a,putSortable:o}))}};function yn(){}yn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var a=Ue(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:yo};ke(yn,{pluginName:"revertOnSpill"});function wn(){}wn.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,a=o||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:yo};ke(wn,{pluginName:"removeOnSpill"});T.mount(new $i);T.mount(wn,yn);function an(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function jn(t,e,n){const o=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,o)}function Li(){return typeof window<"u"?window.console:global.console}const Ni=Li();function Fi(t){const e=Object.create(null);return function(o){return e[o]||(e[o]=t(o))}}const Ri=/-(\w)/g,Wi=Fi(t=>t.replace(Ri,(e,n)=>n.toUpperCase())),wo=["Start","Add","Remove","Update","End"],xo=["Choose","Unchoose","Sort","Filter","Clone"],So=["Move"],Vi=[So,wo,xo].flatMap(t=>t).map(t=>`on${t}`),pn={manage:So,manageAndEmit:wo,emit:xo};function ji(t){return Vi.indexOf(t)!==-1}const zi=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Bi(t){return zi.includes(t)}function Xi(t){return["transition-group","TransitionGroup"].includes(t)}function _o(t){return["id","class","role","style"].includes(t)||t.startsWith("data-")||t.startsWith("aria-")||t.startsWith("on")}function Do(t){return t.reduce((e,[n,o])=>(e[n]=o,e),{})}function Hi({$attrs:t,componentData:e={}}){return{...Do(Object.entries(t).filter(([o,a])=>_o(o))),...e}}function Ui({$attrs:t,callBackBuilder:e}){const n=Do(ko(t));Object.entries(e).forEach(([a,r])=>{pn[a].forEach(i=>{n[`on${i}`]=r(i)})});const o=`[data-draggable]${n.draggable||""}`;return{...n,draggable:o}}function ko(t){return Object.entries(t).filter(([e,n])=>!_o(e)).map(([e,n])=>[Wi(e),n]).filter(([e,n])=>!ji(e))}const zn=({el:t})=>t,qi=(t,e)=>t.__draggable_context=e,Bn=t=>t.__draggable_context;class Ki{constructor({nodes:{header:e,default:n,footer:o},root:a,realList:r}){this.defaultNodes=n,this.children=[...e,...n,...o],this.externalComponent=a.externalComponent,this.rootTransition=a.transition,this.tag=a.tag,this.realList=r}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(e,n){const{tag:o,children:a,_isRootComponent:r}=this;return e(o,n,r?{default:()=>a}:a)}updated(){const{defaultNodes:e,realList:n}=this;e.forEach((o,a)=>{qi(zn(o),{element:n[a],index:a})})}getUnderlyingVm(e){return Bn(e)}getVmIndexFromDomIndex(e,n){const{defaultNodes:o}=this,{length:a}=o,r=n.children,i=r.item(e);if(i===null)return a;const s=Bn(i);if(s)return s.index;if(a===0)return 0;const l=zn(o[0]),c=[...r].findIndex(d=>d===l);return e<c?0:a}}function Gi(t,e){const n=t[e];return n?n():[]}function Ji({$slots:t,realList:e,getKey:n}){const o=e||[],[a,r]=["header","footer"].map(l=>Gi(t,l)),{item:i}=t;if(!i)throw new Error("draggable element must have an item slot");const s=o.flatMap((l,c)=>i({element:l,index:c}).map(d=>(d.key=n(l),d.props={...d.props||{},"data-draggable":!0},d)));if(s.length!==o.length)throw new Error("Item slot must have only one child");return{header:a,footer:r,default:s}}function Zi(t){const e=Xi(t),n=!Bi(t)&&!e;return{transition:e,externalComponent:n,tag:n?jo(t):e?zo:t}}function Qi({$slots:t,tag:e,realList:n,getKey:o}){const a=Ji({$slots:t,realList:n,getKey:o}),r=Zi(e);return new Ki({nodes:a,root:r,realList:n})}function Co(t,e){He(()=>this.$emit(t.toLowerCase(),e))}function Eo(t){return(e,n)=>{if(this.realList!==null)return this[`onDrag${t}`](e,n)}}function es(t){const e=Eo.call(this,t);return(n,o)=>{e.call(this,n,o),Co.call(this,t,n)}}let rn=null;const ts={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ns=["update:modelValue","change",...[...pn.manageAndEmit,...pn.emit].map(t=>t.toLowerCase())],os=qe({name:"draggable",inheritAttrs:!1,props:ts,emits:ns,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:t,$attrs:e,tag:n,componentData:o,realList:a,getKey:r}=this,i=Qi({$slots:t,tag:n,realList:a,getKey:r});this.componentStructure=i;const s=Hi({$attrs:e,componentData:o});return i.render(rt,s)}catch(t){return this.error=!0,rt("pre",{style:{color:"red"}},t.stack)}},created(){this.list!==null&&this.modelValue!==null&&Ni.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:t,$el:e,componentStructure:n}=this;n.updated();const o=Ui({$attrs:t,callBackBuilder:{manageAndEmit:r=>es.call(this,r),emit:r=>Co.bind(this,r),manage:r=>Eo.call(this,r)}}),a=e.nodeType===1?e:e.parentElement;this._sortable=new T(a,o),this.targetDomElement=a,a.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList(){const{list:t}=this;return t||this.modelValue},getKey(){const{itemKey:t}=this;return typeof t=="function"?t:e=>e[t]}},watch:{$attrs:{handler(t){const{_sortable:e}=this;e&&ko(t).forEach(([n,o])=>{e.option(n,o)})},deep:!0}},methods:{getUnderlyingVm(t){return this.componentStructure.getUnderlyingVm(t)||null},getUnderlyingPotencialDraggableComponent(t){return t.__draggable_component__},emitChanges(t){He(()=>this.$emit("change",t))},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=o=>o.splice(e,0,o.splice(t,1)[0]);this.alterList(n)},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};const o=n.realList,a={list:o,component:n};return t!==e&&o?{...n.getUnderlyingVm(e)||{},...a}:a},getVmIndexFromDomIndex(t){return this.componentStructure.getVmIndexFromDomIndex(t,this.targetDomElement)},onDragStart(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),rn=t.item},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;an(t.item);const n=this.getVmIndexFromDomIndex(t.newIndex);this.spliceList(n,0,e);const o={element:e,newIndex:n};this.emitChanges({added:o})},onDragRemove(t){if(jn(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){an(t.clone);return}const{index:e,element:n}=this.context;this.spliceList(e,1);const o={element:n,oldIndex:e};this.emitChanges({removed:o})},onDragUpdate(t){an(t.item),jn(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndexFromDomIndex(t.newIndex);this.updatePosition(e,n);const o={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:o})},computeFutureIndex(t,e){if(!t.element)return 0;const n=[...e.to.children].filter(i=>i.style.display!=="none"),o=n.indexOf(e.related),a=t.component.getVmIndexFromDomIndex(o);return n.indexOf(rn)!==-1||!e.willInsertAfter?a:a+1},onDragMove(t,e){const{move:n,realList:o}=this;if(!n||!o)return!0;const a=this.getRelatedContextFromMoveEvent(t),r=this.computeFutureIndex(a,t),i={...this.context,futureIndex:r},s={...t,relatedContext:a,draggedContext:i};return n(s,e)},onDragEnd(){rn=null}}}),as={class:"stock-page"},rs={class:"action-buttons"},is={class:"stock-content"},ss={class:"stock-indicator"},ls={class:"kd-indicator"},cs={class:"rsi-indicator"},us={class:"rsi-value"},ds={__name:"Stock",setup(t){const e=vn(),n=Zn("stock-search");W(null),W(null),W(0);const o=W(!1),a=W(null),r=W(null),i=W(null),s=ie({get(){return e.userStockList},set(){}});function l(_){if(_.moved){const{element:x,newIndex:D,oldIndex:z}=_.moved;console.log("[onDragChange] 事件",{movedStock:x,newIndex:D,oldIndex:z,evt:_,userStockList:e.userStockList.map(A=>({id:A.id,order:A.order}))});const O=e.userStockList.filter(A=>A.id!==x.id);let N;if(D===0){const A=O[0]?.order||2e3;if(N=Math.floor(A/2),A<100){console.log("[onDragChange] 第一位間隔太小，觸發重新排序",{movedStock:x,firstOrder:A,newOrder:N,originalList:O.map(R=>({id:R.id,order:R.order}))}),e.updateStockList(e.userStockList);return}console.log("[onDragChange] 移到第一位",{movedStock:x,firstOrder:A,newOrder:N,originalList:O.map(R=>({id:R.id,order:R.order}))})}else if(D===O.length){const A=O[O.length-1]?.order||0;N=A+1e3,console.log("[onDragChange] 移到最後一位",{movedStock:x,lastOrder:A,newOrder:N,originalList:O.map(R=>({id:R.id,order:R.order}))})}else{const A=O[D-1]?.order||0,R=O[D]?.order||A+2e3,Q=Math.floor((A+R)/2);if(console.log("[onDragChange] 移到中間",{movedStock:x,prevOrder:A,nextOrder:R,midOrder:Q,originalList:O.map(U=>({id:U.id,order:U.order}))}),R-A<100){console.log("[onDragChange] 間隔太小，觸發重新排序",{movedStock:x,prevOrder:A,nextOrder:R,originalList:O.map(U=>({id:U.id,order:U.order}))}),e.updateStockList(e.userStockList);return}N=Q}console.log("[onDragChange] 最終更新",{movedStock:x,newOrder:N}),e.updateSingleStockOrder(x.id,N)}}function c(){n.emit(!0)}function d(_,x){console.log(`Stock ${x} indicator changed to ${_}`)}function f(_){return _>0?"price-up":_<0?"price-down":"price-flat"}const u=ie(()=>a.value?[{name:`K 值: ${a.value.k}`,subname:"快線指標 (敏感度高)",color:"#4286f5"},{name:`D 值: ${a.value.d}`,subname:"慢線指標 (敏感度低)",color:"#e75c9a"},{name:`J 值: ${a.value.j}`,subname:"超買超賣指標",color:"#666"},{name:`更新時間: ${a.value.date}`,subname:"週線資料最後更新",color:"#999"}]:[]);function g(_){a.value=_,o.value=!0}function v(_){console.log("KDJ ActionSheet 選擇:",_.name),o.value=!1,_.name.includes("K 值")?ee("K 值反映股價短期波動"):_.name.includes("D 值")?ee("D 值是 K 值的移動平均"):_.name.includes("J 值")&&ee("J 值 > 80 超買，< 20 超賣")}function m(_){return _>70?"rsi-overbought":_<30?"rsi-oversold":"rsi-normal"}function p(_){return _>70?"超買":_<30?"超賣":"正常"}function w(){}function k(_){i.value=_,r.value?.showTradeSheet()}function C(_){i.value=_,r.value?.showStrategySheet()}function I(_){i.value=_,r.value?.showMoreSheet()}function b(_){setTimeout(()=>{const x=document.querySelector(".stock-row.sortable-chosen");if(x){const D=x.querySelector("canvas"),z=document.querySelector(".stock-row.sortable-drag");if(D&&z){const O=z.querySelector("canvas");if(O&&D.width&&D.height){O.width=D.width,O.height=D.height;const N=O.getContext("2d");N.clearRect(0,0,O.width,O.height),N.drawImage(D,0,0)}}}},0)}function M(_){console.log("拖曳結束",_)}return Bo(document,"visibilitychange",()=>{}),st(()=>{}),(_,x)=>(B(),H("div",as,[L(X(os),{modelValue:s.value,"onUpdate:modelValue":x[1]||(x[1]=D=>s.value=D),"item-key":"id",delay:200,animation:200,"ghost-class":"stock-row-ghost",onStart:b,onEnd:M,onChange:l},{item:te(({element:D,index:z})=>[h("div",{class:"stock-row",onContextmenu:x[0]||(x[0]=Xo(()=>{},["prevent"]))},[L(X(va),{"left-width":200,onClickLeft:w},{left:te(()=>[h("div",rs,[L(X(Le),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:O=>k(D)},{default:te(()=>x[3]||(x[3]=[h("div",null,"交 易",-1),h("div",null,"記 錄",-1)])),_:2,__:[3]},1032,["onClick"]),L(X(Le),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:O=>C(D)},{default:te(()=>x[4]||(x[4]=[ze("策 略",-1)])),_:2,__:[4]},1032,["onClick"]),L(X(Le),{type:"default",size:"small",class:"action-btn other-btn",onClick:O=>I(D)},{default:te(()=>x[5]||(x[5]=[ze("更 多",-1)])),_:2,__:[5]},1032,["onClick"])])]),default:te(()=>[h("div",is,[L(wr,{name:D.name,code:D.code,price:D.price,change:D.change,"change-percent":D.changePercent,"price-class":f(D.change),progress:D.progress,"progress-text":D.progressText},null,8,["name","code","price","change","change-percent","price-class","progress","progress-text"]),h("div",ss,[L(X(oa),{"show-indicators":!1,loop:!1,autoplay:0,onChange:O=>d(O,z)},{default:te(()=>[L(X(kn),{class:"indicator-content"},{default:te(()=>[h("div",ls,[L(ur,{width:120,height:60,"stock-id":D.id,onKdjClick:g},null,8,["stock-id"])])]),_:2},1024),L(X(kn),{class:"indicator-content"},{default:te(()=>[h("div",cs,[h("div",us,j(D.rsi),1),h("div",{class:it(["rsi-trend",m(D.rsi)])},j(p(D.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],32)]),_:1},8,["modelValue"]),L(X(la),{axis:"xy",magnetic:"x",gap:{x:20,y:80},style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"rgba(255, 224, 102, 0.9)","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:c},{default:te(()=>x[6]||(x[6]=[h("div",{class:"bubble-content",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24"},[h("path",{fill:"#322b0d","fill-rule":"evenodd",d:"M13 13v7a1 1 0 0 1-2 0v-7H4a1 1 0 0 1 0-2h7V4a1 1 0 0 1 2 0v7h7a1 1 0 0 1 0 2z"})]),h("span",{class:"bubble-label",style:{color:"#322b0d","font-size":"14px"}},"新增")],-1)])),_:1,__:[6]}),L(Ma),L(X($e),{show:o.value,"onUpdate:show":x[2]||(x[2]=D=>o.value=D),actions:u.value,"cancel-text":"取消",title:"KDJ 指標詳情",onSelect:v},null,8,["show","actions"]),i.value?(B(),Lt(li,{key:0,ref_key:"stockActionsRef",ref:r,"stock-info":i.value},null,8,["stock-info"])):Qe("",!0)]))}},ys=Nt(ds,[["__scopeId","data-v-0e9f2822"]]);export{ys as default};
