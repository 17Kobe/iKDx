import{d as U,k as D,n as $,c as I,aR as G,K as M,b1 as O,a as c,w as R,e as T,A as f,D as h,t as A,aQ as N,I as E,E as P,C as L,f as K,b as Q,ad as Y,b2 as H,ay as J,M as X,af as Z,al as z,ah as V,aj as t,aq as v,an as ee,ao as te,az as ae,ap as oe,ai as S,ak as k,S as y}from"./index-C0gXJBzg.js";import{w as W}from"./worker-pool-Vr2Seoof.js";const[j,se]=I("radio-group"),le={shape:String,disabled:Boolean,iconSize:$,direction:String,modelValue:D,checkedColor:String},q=Symbol(j);var ne=U({name:j,props:le,emits:["change","update:modelValue"],setup(e,{emit:s,slots:i}){const{linkChildren:o}=G(q),d=n=>s("update:modelValue",n);return M(()=>e.modelValue,n=>s("change",n)),o({props:e,updateValue:d}),O(()=>e.modelValue),()=>{var n;return c("div",{class:se([e.direction]),role:"radiogroup"},[(n=i.default)==null?void 0:n.call(i)])}}});const ie=R(ne),F={name:D,disabled:Boolean,iconSize:$,modelValue:D,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var de=U({props:T({},F,{bem:N(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:A,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:s,slots:i}){const o=f(),d=l=>{if(e.parent&&e.bindGroup)return e.parent.props[l]},n=h(()=>{if(e.parent&&e.bindGroup){const l=d("disabled")||e.disabled;if(e.role==="checkbox"){const _=d("modelValue").length,m=d("max"),g=m&&_>=+m;return l||g&&!e.checked}return l}return e.disabled}),p=h(()=>d("direction")),r=h(()=>{const l=e.checkedColor||d("checkedColor");if(l&&(e.checked||e.indeterminate)&&!n.value)return{borderColor:l,backgroundColor:l}}),a=h(()=>e.shape||d("shape")||"round"),u=l=>{const{target:_}=l,m=o.value,g=m===_||m?.contains(_);!n.value&&(g||!e.labelDisabled)&&s("toggle"),s("click",l)},b=()=>{var l,_;const{bem:m,checked:g,indeterminate:B}=e,x=e.iconSize||d("iconSize");return c("div",{ref:o,class:m("icon",[a.value,{disabled:n.value,checked:g,indeterminate:B}]),style:a.value!=="dot"?{fontSize:P(x)}:{width:P(x),height:P(x),borderColor:(l=r.value)==null?void 0:l.borderColor}},[i.icon?i.icon({checked:g,disabled:n.value}):a.value!=="dot"?c(E,{name:B?"minus":"success",style:r.value},null):c("div",{class:m("icon--dot__icon"),style:{backgroundColor:(_=r.value)==null?void 0:_.backgroundColor}},null)])},C=()=>{const{checked:l}=e;if(i.default)return c("span",{class:e.bem("label",[e.labelPosition,{disabled:n.value}])},[i.default({checked:l,disabled:n.value})])};return()=>{const l=e.labelPosition==="left"?[C(),b()]:[b(),C()];return c("div",{role:e.role,class:e.bem([{disabled:n.value,"label-disabled":e.labelDisabled},p.value]),tabindex:n.value?void 0:0,"aria-checked":e.checked,onClick:u},[l])}}});const re=T({},F,{shape:String}),[ue,ce]=I("radio");var ve=U({name:ue,props:re,emits:["update:modelValue"],setup(e,{emit:s,slots:i}){const{parent:o}=L(q),d=()=>(o?o.props.modelValue:e.modelValue)===e.name,n=()=>{o?o.updateValue(e.name):s("update:modelValue",e.name)};return()=>c(de,Q({bem:ce,role:"radio",parent:o,checked:d(),onToggle:n},e),K(i,["default","icon"]))}});const w=R(ve),me=Y("theme",()=>{const e=f(0),s=f(!1),i=H();return M([e,i],()=>{e.value===0?s.value=i.value:e.value===1?s.value=!1:s.value=!0,document.body.classList.toggle("dark",s.value)},{immediate:!0}),{mode:e,isDark:s}}),be={class:"worker-monitor"},_e={class:"monitor-header"},ke={class:"total-cpu"},he={class:"pool-stats"},ge={class:"pool-name"},fe={class:"pool-info"},pe={class:"stat-item"},Ce={class:"value"},Se={class:"stat-item"},ye={class:"value busy"},ze={class:"stat-item"},Ve={class:"value queue"},xe={class:"stat-item"},Pe={class:"value utilization"},we={class:"progress-bar"},De={class:"overall-stats"},Ue={class:"stat-box"},Be={class:"stat-value"},We={class:"stat-box"},$e={class:"stat-value"},Ie={class:"stat-box"},Me={class:"stat-value"},Re={__name:"WorkerMonitor",setup(e){const s=f({}),i=f(navigator.hardwareConcurrency||4),o=h(()=>Object.values(s.value).reduce((r,a)=>r+a.busyWorkers,0)),d=h(()=>Object.values(s.value).reduce((r,a)=>r+a.queuedTasks,0)),n=h(()=>{const r=Object.values(s.value);return r.length===0?"0.0":(r.reduce((b,C)=>{const l=parseFloat(C.utilization)||0;return b+l},0)/r.length).toFixed(1)}),p=(r,a,u)=>{s.value={...u}};return X(()=>{W.onAllStatusChange(p),s.value=W.getAllStatus()}),Z(()=>{}),(r,a)=>(V(),z("div",be,[t("div",_e,[a[0]||(a[0]=t("h3",null,"Worker Pool 監控",-1)),t("span",ke,"CPU 核心數: "+v(i.value),1)]),t("div",he,[(V(!0),z(ee,null,te(s.value,(u,b)=>(V(),z("div",{key:b,class:ae(["pool-card",{"pool-busy":u.busyWorkers>0}])},[t("div",ge,v(b),1),t("div",fe,[t("div",pe,[a[1]||(a[1]=t("span",{class:"label"},"可用:",-1)),t("span",Ce,v(u.availableWorkers)+"/"+v(u.totalWorkers),1)]),t("div",Se,[a[2]||(a[2]=t("span",{class:"label"},"使用中:",-1)),t("span",ye,v(u.busyWorkers),1)]),t("div",ze,[a[3]||(a[3]=t("span",{class:"label"},"排隊:",-1)),t("span",Ve,v(u.queuedTasks),1)]),t("div",xe,[a[4]||(a[4]=t("span",{class:"label"},"使用率:",-1)),t("span",Pe,v(u.utilization)+"%",1)])]),t("div",we,[t("div",{class:"progress-fill",style:oe({width:u.utilization+"%"})},null,4)])],2))),128))]),t("div",De,[t("div",Ue,[t("div",Be,v(o.value),1),a[5]||(a[5]=t("div",{class:"stat-label"},"總使用中",-1))]),t("div",We,[t("div",$e,v(d.value),1),a[6]||(a[6]=t("div",{class:"stat-label"},"總排隊",-1))]),t("div",Ie,[t("div",Me,v(n.value)+"%",1),a[7]||(a[7]=t("div",{class:"stat-label"},"整體使用率",-1))])])]))}},Te=J(Re,[["__scopeId","data-v-2f269c7a"]]),je={style:{padding:"32px"}},qe={style:{"margin-bottom":"16px"}},Fe={style:{"margin-bottom":"24px"}},Ae={__name:"My",setup(e){const s=me();return(i,o)=>(V(),z("div",je,[o[5]||(o[5]=t("h2",null,"我的頁面",-1)),t("div",qe,[c(k(ie),{modelValue:k(s).mode,"onUpdate:modelValue":o[0]||(o[0]=d=>k(s).mode=d),direction:"horizontal"},{default:S(()=>[c(k(w),{name:0},{default:S(()=>o[1]||(o[1]=[y("跟隨系統",-1)])),_:1,__:[1]}),c(k(w),{name:1},{default:S(()=>o[2]||(o[2]=[y("亮",-1)])),_:1,__:[2]}),c(k(w),{name:2},{default:S(()=>o[3]||(o[3]=[y("暗",-1)])),_:1,__:[3]})]),_:1},8,["modelValue"])]),t("div",Fe,[o[4]||(o[4]=y(" 目前主題：",-1)),t("b",null,v(k(s).isDark?"暗":"亮"),1)]),c(Te)]))}};export{Ae as default};
