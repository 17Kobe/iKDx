import{aj as F,ap as G,h as f,a5 as T,a3 as s,v as t,a4 as a,a2 as l,C as i,ao as v,aq as L,ar as z,as as A,a1 as W,ab as r}from"./index-5l6WqqSI.js";import{I as p,s as k}from"./iconify-nZj5NtRd.js";import{B as m}from"./index-D6f_mUUb.js";const D={class:"login-page"},E={class:"login-container"},I={class:"logo-section"},N={class:"app-logo"},P={class:"login-section"},V={class:"terms-section"},M={class:"terms-text"},S={class:"loading-content"},j={__name:"Login",setup(q){const c=A(),u=G(),n=f(!1),g=f(!1),d=f(!1);async function h(){try{g.value=!0,n.value=!0;const e=await _();if(e.success)await u.loginWithGoogle(e.token),r.success("Google 登入成功！"),c.push("/");else throw new Error(e.error)}catch(e){console.error("Google 登入失敗:",e),r.fail("Google 登入失敗，請稍後再試")}finally{g.value=!1,n.value=!1}}async function w(){try{d.value=!0,n.value=!0;const e=await y();if(e.success)await u.loginWithFacebook(e.token),r.success("Facebook 登入成功！"),c.push("/");else throw new Error(e.error)}catch(e){console.error("Facebook 登入失敗:",e),r.fail("Facebook 登入失敗，請稍後再試")}finally{d.value=!1,n.value=!1}}function b(){u.setGuestMode(!0),c.push("/")}async function _(){return new Promise(e=>{setTimeout(()=>{e({success:!0,token:"mock-google-token",user:{id:"google-123",name:"測試用戶",email:"test@gmail.com",avatar:""}})},1500)})}async function y(){return new Promise(e=>{setTimeout(()=>{e({success:!0,token:"mock-facebook-token",user:{id:"fb-123",name:"測試用戶",email:"test@facebook.com",avatar:""}})},1500)})}function x(){k({title:"服務條款",message:"這裡是服務條款內容...",showCancelButton:!1,confirmButtonText:"我知道了"})}function B(){k({title:"隱私政策",message:"這裡是隱私政策內容...",showCancelButton:!1,confirmButtonText:"我知道了"})}return(e,o)=>(W(),T("div",D,[s("div",E,[s("div",I,[s("div",N,[t(a(p),{icon:"flowbite:star-solid",width:"60",height:"60",color:"#FFD600"})]),o[1]||(o[1]=s("h1",{class:"app-title"},"iKDx",-1)),o[2]||(o[2]=s("p",{class:"app-subtitle"},"智能股票分析平台",-1))]),s("div",P,[o[6]||(o[6]=s("h2",{class:"login-title"},"歡迎登入",-1)),t(a(m),{class:"login-btn google-btn",size:"large",block:"",loading:g.value,onClick:h},{default:l(()=>[t(a(p),{icon:"logos:google-icon",width:"20",height:"20",style:{"margin-right":"8px"}}),o[3]||(o[3]=i(" 使用 Google 帳號登入 ",-1))]),_:1,__:[3]},8,["loading"]),t(a(m),{class:"login-btn facebook-btn",size:"large",block:"",loading:d.value,onClick:w},{default:l(()=>[t(a(p),{icon:"logos:facebook",width:"20",height:"20",style:{"margin-right":"8px"}}),o[4]||(o[4]=i(" 使用 Facebook 帳號登入 ",-1))]),_:1,__:[4]},8,["loading"]),o[7]||(o[7]=s("div",{class:"divider"},[s("span",null,"或")],-1)),t(a(m),{class:"guest-btn",size:"large",block:"",plain:"",onClick:b},{default:l(()=>o[5]||(o[5]=[i(" 訪客模式繼續 ",-1)])),_:1,__:[5]})]),s("div",V,[s("p",M,[o[8]||(o[8]=i(" 登入即表示您同意我們的 ",-1)),s("a",{href:"#",onClick:v(x,["prevent"])},"服務條款"),o[9]||(o[9]=i(" 和 ",-1)),s("a",{href:"#",onClick:v(B,["prevent"])},"隱私政策")])])]),t(a(z),{show:n.value,"onUpdate:show":o[0]||(o[0]=C=>n.value=C),class:"loading-overlay"},{default:l(()=>[s("div",S,[t(a(L),{size:"24px",vertical:""},{default:l(()=>o[10]||(o[10]=[i("登入中...",-1)])),_:1,__:[10]})])]),_:1},8,["show"])]))}},U=F(j,[["__scopeId","data-v-7d56084d"]]);export{U as default};
