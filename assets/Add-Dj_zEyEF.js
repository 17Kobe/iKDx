import{d as $,Q as h,m as y,c as L,a as ie,x as j,Y as me,k as t,e as M,t as p,Z as fe,$ as ge,a0 as ve,I as H,a1 as ye,P as Z,a2 as he,f as F,o as re,a3 as be,l as q,q as xe,a4 as N,a5 as Se,a6 as ke,a7 as le,i as Ce,r as _,a8 as ce,y as J,a9 as we,H as Pe,aa as _e,n as W,j as ze,ab as Be,K as Q,O as Y,G as z,E as x,J as G,F as O,L as X,ac as Te,C as w,B as ee,D as V,N as A}from"./index-CX_6PQPN.js";import{P as Ie,b as $e,S as Le}from"./index-v5fkdJlk.js";const[pe,D]=L("loading"),Oe=Array(12).fill(null).map((e,n)=>t("i",{class:D("line",String(n+1))},null)),Ee=t("svg",{class:D("circular"),viewBox:"25 25 50 50"},[t("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ne={size:h,type:y("circular"),color:String,vertical:Boolean,textSize:h,textColor:String};var De=$({name:pe,props:Ne,setup(e,{slots:n}){const o=ie(()=>j({color:e.color},me(e.size))),l=()=>{const c=e.type==="spinner"?Oe:Ee;return t("span",{class:D("spinner",e.type),style:o.value},[n.icon?n.icon():c])},d=()=>{var c;if(n.default)return t("span",{class:D("text"),style:{fontSize:M(e.textSize),color:(c=e.textColor)!=null?c:e.color}},[n.default()])};return()=>{const{type:c,vertical:u}=e;return t("div",{class:D([c,{vertical:u}]),"aria-live":"polite","aria-busy":!0},[l(),d()])}}});const se=p(De),[je,B]=L("button"),Re=j({},ve,{tag:y("button"),text:String,icon:String,type:y("default"),size:y("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:y("button"),loadingSize:h,loadingText:String,loadingType:String,iconPosition:y("left")});var Ve=$({name:je,props:Re,emits:["click"],setup(e,{emit:n,slots:o}){const l=fe(),d=()=>o.loading?o.loading():t(se,{size:e.loadingSize,type:e.loadingType,class:B("loading")},null),c=()=>{if(e.loading)return d();if(o.icon)return t("div",{class:B("icon")},[o.icon()]);if(e.icon)return t(H,{name:e.icon,class:B("icon"),classPrefix:e.iconPrefix},null)},u=()=>{let a;if(e.loading?a=e.loadingText:a=o.default?o.default():e.text,a)return t("span",{class:B("text")},[a])},v=()=>{const{color:a,plain:s}=e;if(a){const i={color:s?a:"white"};return s||(i.background=a),a.includes("gradient")?i.border=0:i.borderColor=a,i}},f=a=>{e.loading?ye(a):e.disabled||(n("click",a),l())};return()=>{const{tag:a,type:s,size:i,block:m,round:b,plain:S,square:C,loading:r,disabled:k,hairline:P,nativeType:K,iconPosition:R}=e,ue=[B([s,i,{plain:S,block:m,round:b,square:C,loading:r,disabled:k,hairline:P}]),{[ge]:P}];return t(a,{type:K,class:ue,style:v(),disabled:k,onClick:f},{default:()=>[t("div",{class:B("content")},[R==="left"&&c(),u(),R==="right"&&c()])]})}}});const ne=p(Ve);let E=0;function Ae(e){e?(E||document.body.classList.add("van-toast--unclickable"),E++):E&&(E--,E||document.body.classList.remove("van-toast--unclickable"))}const[Ue,T]=L("toast"),Me=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],Fe={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:h,iconSize:h,duration:he(2e3),position:y("middle"),teleport:[String,Object],wordBreak:String,className:Z,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:Z,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:h};var de=$({name:Ue,props:Fe,emits:["update:show"],setup(e,{emit:n,slots:o}){let l,d=!1;const c=()=>{const i=e.show&&e.forbidClick;d!==i&&(d=i,Ae(d))},u=i=>n("update:show",i),v=()=>{e.closeOnClick&&u(!1)},f=()=>clearTimeout(l),a=()=>{const{icon:i,type:m,iconSize:b,iconPrefix:S,loadingType:C}=e;if(i||m==="success"||m==="fail")return t(H,{name:i||m,size:b,class:T("icon"),classPrefix:S},null);if(m==="loading")return t(se,{class:T("loading"),size:b,type:C},null)},s=()=>{const{type:i,message:m}=e;if(o.message)return t("div",{class:T("text")},[o.message()]);if(N(m)&&m!=="")return i==="html"?t("div",{key:0,class:T("text"),innerHTML:String(m)},null):t("div",{class:T("text")},[m])};return F(()=>[e.show,e.forbidClick],c),F(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(l=setTimeout(()=>{u(!1)},e.duration))}),re(c),be(c),()=>t(Ie,q({class:[T([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:v,onClosed:f,"onUpdate:show":u},xe(e,Me)),{default:()=>[a(),s()]})}});function qe(){const e=ke({show:!1}),n=d=>{e.show=d},o=d=>{j(e,d,{transitionAppear:!0}),n(!0)},l=()=>n(!1);return $e({open:o,close:l,toggle:n}),{open:o,close:l,state:e,toggle:n}}function He(e){const n=Se(e),o=document.createElement("div");return document.body.appendChild(o),{instance:n.mount(o),unmount(){n.unmount(),document.body.removeChild(o)}}}const Ke={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let U=[],Ge=!1,te=j({},Ke);const Je=new Map;function Qe(e){return Ce(e)?e:{message:e}}function Ye(){const{instance:e}=He({setup(){const n=_(""),{open:o,state:l,close:d,toggle:c}=qe(),u=()=>{},v=()=>t(de,q(l,{onClosed:u,"onUpdate:show":c}),null);return F(n,f=>{l.message=f}),ce().render=v,{open:o,close:d,message:n}}});return e}function Ze(){if(!U.length||Ge){const e=Ye();U.push(e)}return U[U.length-1]}function We(e={}){if(!le)return{};const n=Ze(),o=Qe(e);return n.open(j({},te,Je.get(o.type||te.type),o)),n}p(de);const[Xe,oe]=L("tag"),en={size:String,mark:Boolean,show:J,type:y("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var nn=$({name:Xe,props:en,emits:["close"],setup(e,{slots:n,emit:o}){const l=u=>{u.stopPropagation(),o("close",u)},d=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},c=()=>{var u;const{type:v,mark:f,plain:a,round:s,size:i,closeable:m}=e,b={mark:f,plain:a,round:s};i&&(b[i]=i);const S=m&&t(H,{name:"cross",class:[oe("close"),Pe],onClick:l},null);return t("span",{style:d(),class:oe([b,v])},[(u=n.default)==null?void 0:u.call(n),S])};return()=>t(we,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?c():null]})}});const tn=p(nn),[on,I]=L("image"),an={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:h,height:h,radius:h,lazyLoad:Boolean,iconSize:h,showError:J,errorIcon:y("photo-fail"),iconPrefix:String,showLoading:J,loadingIcon:y("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var rn=$({name:on,props:an,emits:["load","error"],setup(e,{emit:n,slots:o}){const l=_(!1),d=_(!0),c=_(),{$Lazyload:u}=ce().proxy,v=ie(()=>{const r={width:M(e.width),height:M(e.height)};return N(e.radius)&&(r.overflow="hidden",r.borderRadius=M(e.radius)),r});F(()=>e.src,()=>{l.value=!1,d.value=!0});const f=r=>{d.value&&(d.value=!1,n("load",r))},a=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:c.value,enumerable:!0}),f(r)},s=r=>{l.value=!0,d.value=!1,n("error",r)},i=(r,k,P)=>P?P():t(H,{name:r,size:e.iconSize,class:k,classPrefix:e.iconPrefix},null),m=()=>{if(d.value&&e.showLoading)return t("div",{class:I("loading")},[i(e.loadingIcon,I("loading-icon"),o.loading)]);if(l.value&&e.showError)return t("div",{class:I("error")},[i(e.errorIcon,I("error-icon"),o.error)])},b=()=>{if(l.value||!e.src)return;const r={alt:e.alt,class:I("img"),decoding:e.decoding,style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?ze(t("img",q({ref:c},r),null),[[Be("lazy"),e.src]]):t("img",q({ref:c,src:e.src,onLoad:f,onError:s},r),null)},S=({el:r})=>{const k=()=>{r===c.value&&d.value&&a()};c.value?k():W(k)},C=({el:r})=>{r===c.value&&!l.value&&s()};return u&&le&&(u.$on("loaded",S),u.$on("error",C),_e(()=>{u.$off("loaded",S),u.$off("error",C)})),re(()=>{W(()=>{var r;(r=c.value)!=null&&r.complete&&!e.lazyLoad&&a()})}),()=>{var r;return t("div",{class:I({round:e.round,block:e.block}),style:v.value},[b(),m(),(r=o.default)==null?void 0:r.call(o)])}}});const ln=p(rn),[cn,g]=L("card"),sn={tag:String,num:h,desc:String,thumb:String,title:String,price:h,centered:Boolean,lazyLoad:Boolean,currency:y("¥"),thumbLink:String,originPrice:h};var dn=$({name:cn,props:sn,emits:["clickThumb"],setup(e,{slots:n,emit:o}){const l=()=>{if(n.title)return n.title();if(e.title)return t("div",{class:[g("title"),"van-multi-ellipsis--l2"]},[e.title])},d=()=>{if(n.tag||e.tag)return t("div",{class:g("tag")},[n.tag?n.tag():t(tn,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},c=()=>n.thumb?n.thumb():t(ln,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),u=()=>{if(n.thumb||e.thumb)return t("a",{href:e.thumbLink,class:g("thumb"),onClick:a=>o("clickThumb",a)},[c(),d()])},v=()=>{if(n.desc)return n.desc();if(e.desc)return t("div",{class:[g("desc"),"van-ellipsis"]},[e.desc])},f=()=>{const a=e.price.toString().split(".");return t("div",null,[t("span",{class:g("price-currency")},[e.currency]),t("span",{class:g("price-integer")},[a[0]]),a.length>1&&t(Q,null,[Y("."),t("span",{class:g("price-decimal")},[a[1]])])])};return()=>{var a,s,i;const m=n.num||N(e.num),b=n.price||N(e.price),S=n["origin-price"]||N(e.originPrice),C=m||b||S||n.bottom,r=b&&t("div",{class:g("price")},[n.price?n.price():f()]),k=S&&t("div",{class:g("origin-price")},[n["origin-price"]?n["origin-price"]():`${e.currency} ${e.originPrice}`]),P=m&&t("div",{class:g("num")},[n.num?n.num():`x${e.num}`]),K=n.footer&&t("div",{class:g("footer")},[n.footer()]),R=C&&t("div",{class:g("bottom")},[(a=n["price-top"])==null?void 0:a.call(n),r,k,P,(s=n.bottom)==null?void 0:s.call(n)]);return t("div",{class:g()},[t("div",{class:g("header")},[u(),t("div",{class:g("content",{centered:e.centered})},[t("div",null,[l(),v(),(i=n.tags)==null?void 0:i.call(n)]),R])]),K])}}});const ae=p(dn),un={style:{padding:"16px",background:"#f8f9fa"}},mn={style:{"margin-bottom":"20px"}},fn={key:0,style:{"margin-bottom":"20px"}},gn={style:{display:"flex","justify-content":"space-between","align-items":"center"}},vn={style:{"font-weight":"600","margin-bottom":"4px"}},yn={style:{color:"#666","font-size":"14px"}},hn={key:1},bn={style:{display:"flex","justify-content":"space-between","align-items":"center"}},xn={style:{"font-weight":"600","margin-bottom":"4px"}},Sn={style:{color:"#666","font-size":"14px"}},kn={key:2,style:{"text-align":"center",padding:"40px 0",color:"#999"}},Pn={__name:"Add",setup(e){const n=Te(),o=_(""),l=_([]),d=_([{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"}]),c=[{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"},{code:"2881",name:"富邦金"},{code:"2303",name:"聯電"},{code:"2308",name:"台達電"},{code:"1303",name:"南亞"}];function u(){if(!o.value.trim()){l.value=[];return}l.value=c.filter(a=>a.code.includes(o.value)||a.name.includes(o.value))}function v(){l.value=[]}function f(a){We(`已新增 ${a.name} (${a.code}) 到自選股`),setTimeout(()=>{n.push("/")},1e3)}return(a,s)=>(w(),z("div",un,[x("div",mn,[s[1]||(s[1]=x("h2",{style:{margin:"0 0 16px 0","font-size":"20px","font-weight":"600"}},"新增股票",-1)),t(O(Le),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=i=>o.value=i),placeholder:"搜尋股票代號或名稱",shape:"round",onSearch:u,onClear:v},null,8,["modelValue"])]),l.value.length>0?(w(),z("div",fn,[s[3]||(s[3]=x("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"搜尋結果",-1)),(w(!0),z(Q,null,X(l.value,i=>(w(),ee(O(ae),{key:i.code,style:{"margin-bottom":"8px"}},{default:V(()=>[x("div",gn,[x("div",null,[x("div",vn,A(i.name),1),x("div",yn,A(i.code),1)]),t(O(ne),{type:"primary",size:"small",onClick:m=>f(i)},{default:V(()=>s[2]||(s[2]=[Y(" 新增 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),_:2},1024))),128))])):G("",!0),o.value===""?(w(),z("div",hn,[s[5]||(s[5]=x("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"熱門股票",-1)),(w(!0),z(Q,null,X(d.value,i=>(w(),ee(O(ae),{key:i.code,style:{"margin-bottom":"8px"}},{default:V(()=>[x("div",bn,[x("div",null,[x("div",xn,A(i.name),1),x("div",Sn,A(i.code),1)]),t(O(ne),{type:"primary",size:"small",onClick:m=>f(i)},{default:V(()=>s[4]||(s[4]=[Y(" 新增 ",-1)])),_:2,__:[4]},1032,["onClick"])])]),_:2},1024))),128))])):G("",!0),o.value!==""&&l.value.length===0?(w(),z("div",kn," 查無相關股票 ")):G("",!0)]))}};export{Pn as default};
