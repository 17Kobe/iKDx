import{d as D,g as t,G as W,r as z,H as X,c as Y,w as Z,f as ee,o as ne,n as R,h as te,I as re,m as H,F as N,C as j,s as w,p as g,t as E,q as P,x as O,J as oe,k as h,j as U,l as L,z as $}from"./index-BTprOSjR.js";import{g as I,t as p,c as A,I as K,w as F,n as x,h as V,o as T,y as ae}from"./index-DsbgWY5g.js";import{H as ie,S as le,B as q,f as ce}from"./index-CXKzz26m.js";const[de,G]=A("tag"),se={size:String,mark:Boolean,show:p,type:I("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var ue=D({name:de,props:se,emits:["close"],setup(e,{slots:n,emit:l}){const c=d=>{d.stopPropagation(),l("close",d)},m=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},u=()=>{var d;const{type:y,mark:f,plain:a,round:i,size:o,closeable:v}=e,b={mark:f,plain:a,round:i};o&&(b[o]=o);const _=v&&t(K,{name:"cross",class:[G("close"),ie],onClick:c},null);return t("span",{style:m(),class:G([b,y])},[(d=n.default)==null?void 0:d.call(n),_])};return()=>t(W,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?u():null]})}});const me=F(ue),[ge,k]=A("image"),fe={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:x,height:x,radius:x,lazyLoad:Boolean,iconSize:x,showError:p,errorIcon:I("photo-fail"),iconPrefix:String,showLoading:p,loadingIcon:I("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var ve=D({name:ge,props:fe,emits:["load","error"],setup(e,{emit:n,slots:l}){const c=z(!1),m=z(!0),u=z(),{$Lazyload:d}=X().proxy,y=Y(()=>{const r={width:V(e.width),height:V(e.height)};return T(e.radius)&&(r.overflow="hidden",r.borderRadius=V(e.radius)),r});Z(()=>e.src,()=>{c.value=!1,m.value=!0});const f=r=>{m.value&&(m.value=!1,n("load",r))},a=()=>{const r=new Event("load");Object.defineProperty(r,"target",{value:u.value,enumerable:!0}),f(r)},i=r=>{c.value=!0,m.value=!1,n("error",r)},o=(r,S,B)=>B?B():t(K,{name:r,size:e.iconSize,class:S,classPrefix:e.iconPrefix},null),v=()=>{if(m.value&&e.showLoading)return t("div",{class:k("loading")},[o(e.loadingIcon,k("loading-icon"),l.loading)]);if(c.value&&e.showError)return t("div",{class:k("error")},[o(e.errorIcon,k("error-icon"),l.error)])},b=()=>{if(c.value||!e.src)return;const r={alt:e.alt,class:k("img"),decoding:e.decoding,style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?te(t("img",H({ref:u},r),null),[[re("lazy"),e.src]]):t("img",H({ref:u,src:e.src,onLoad:f,onError:i},r),null)},_=({el:r})=>{const S=()=>{r===u.value&&m.value&&a()};u.value?S():R(S)},C=({el:r})=>{r===u.value&&!c.value&&i()};return d&&ae&&(d.$on("loaded",_),d.$on("error",C),ee(()=>{d.$off("loaded",_),d.$off("error",C)})),ne(()=>{R(()=>{var r;(r=u.value)!=null&&r.complete&&!e.lazyLoad&&a()})}),()=>{var r;return t("div",{class:k({round:e.round,block:e.block}),style:y.value},[b(),v(),(r=l.default)==null?void 0:r.call(l)])}}});const he=F(ve),[ye,s]=A("card"),be={tag:String,num:x,desc:String,thumb:String,title:String,price:x,centered:Boolean,lazyLoad:Boolean,currency:I("¥"),thumbLink:String,originPrice:x};var _e=D({name:ye,props:be,emits:["clickThumb"],setup(e,{slots:n,emit:l}){const c=()=>{if(n.title)return n.title();if(e.title)return t("div",{class:[s("title"),"van-multi-ellipsis--l2"]},[e.title])},m=()=>{if(n.tag||e.tag)return t("div",{class:s("tag")},[n.tag?n.tag():t(me,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},u=()=>n.thumb?n.thumb():t(he,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),d=()=>{if(n.thumb||e.thumb)return t("a",{href:e.thumbLink,class:s("thumb"),onClick:a=>l("clickThumb",a)},[u(),m()])},y=()=>{if(n.desc)return n.desc();if(e.desc)return t("div",{class:[s("desc"),"van-ellipsis"]},[e.desc])},f=()=>{const a=e.price.toString().split(".");return t("div",null,[t("span",{class:s("price-currency")},[e.currency]),t("span",{class:s("price-integer")},[a[0]]),a.length>1&&t(N,null,[j("."),t("span",{class:s("price-decimal")},[a[1]])])])};return()=>{var a,i,o;const v=n.num||T(e.num),b=n.price||T(e.price),_=n["origin-price"]||T(e.originPrice),C=v||b||_||n.bottom,r=b&&t("div",{class:s("price")},[n.price?n.price():f()]),S=_&&t("div",{class:s("origin-price")},[n["origin-price"]?n["origin-price"]():`${e.currency} ${e.originPrice}`]),B=v&&t("div",{class:s("num")},[n.num?n.num():`x${e.num}`]),M=n.footer&&t("div",{class:s("footer")},[n.footer()]),Q=C&&t("div",{class:s("bottom")},[(a=n["price-top"])==null?void 0:a.call(n),r,S,B,(i=n.bottom)==null?void 0:i.call(n)]);return t("div",{class:s()},[t("div",{class:s("header")},[d(),t("div",{class:s("content",{centered:e.centered})},[t("div",null,[c(),y(),(o=n.tags)==null?void 0:o.call(n)]),Q])]),M])}}});const J=F(_e),xe={style:{padding:"16px",background:"#f8f9fa"}},Se={style:{"margin-bottom":"20px"}},we={key:0,style:{"margin-bottom":"20px"}},ke={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ze={style:{"font-weight":"600","margin-bottom":"4px"}},Pe={style:{color:"#666","font-size":"14px"}},Ce={key:1},Be={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Le={style:{"font-weight":"600","margin-bottom":"4px"}},$e={style:{color:"#666","font-size":"14px"}},Te={key:2,style:{"text-align":"center",padding:"40px 0",color:"#999"}},Ne={__name:"Add",setup(e){const n=oe(),l=z(""),c=z([]),m=z([{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"}]),u=[{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"},{code:"2881",name:"富邦金"},{code:"2303",name:"聯電"},{code:"2308",name:"台達電"},{code:"1303",name:"南亞"}];function d(){if(!l.value.trim()){c.value=[];return}c.value=u.filter(a=>a.code.includes(l.value)||a.name.includes(l.value))}function y(){c.value=[]}function f(a){ce(`已新增 ${a.name} (${a.code}) 到自選股`),setTimeout(()=>{n.push("/")},1e3)}return(a,i)=>(h(),w("div",xe,[g("div",Se,[i[1]||(i[1]=g("h2",{style:{margin:"0 0 16px 0","font-size":"20px","font-weight":"600"}},"新增股票",-1)),t(P(le),{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=o=>l.value=o),placeholder:"搜尋股票代號或名稱",shape:"round",onSearch:d,onClear:y},null,8,["modelValue"])]),c.value.length>0?(h(),w("div",we,[i[3]||(i[3]=g("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"搜尋結果",-1)),(h(!0),w(N,null,O(c.value,o=>(h(),U(P(J),{key:o.code,style:{"margin-bottom":"8px"}},{default:L(()=>[g("div",ke,[g("div",null,[g("div",ze,$(o.name),1),g("div",Pe,$(o.code),1)]),t(P(q),{type:"primary",size:"small",onClick:v=>f(o)},{default:L(()=>i[2]||(i[2]=[j(" 新增 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),_:2},1024))),128))])):E("",!0),l.value===""?(h(),w("div",Ce,[i[5]||(i[5]=g("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"熱門股票",-1)),(h(!0),w(N,null,O(m.value,o=>(h(),U(P(J),{key:o.code,style:{"margin-bottom":"8px"}},{default:L(()=>[g("div",Be,[g("div",null,[g("div",Le,$(o.name),1),g("div",$e,$(o.code),1)]),t(P(q),{type:"primary",size:"small",onClick:v=>f(o)},{default:L(()=>i[4]||(i[4]=[j(" 新增 ",-1)])),_:2,__:[4]},1032,["onClick"])])]),_:2},1024))),128))])):E("",!0),l.value!==""&&c.value.length===0?(h(),w("div",Te," 查無相關股票 ")):E("",!0)]))}};export{Ne as default};
