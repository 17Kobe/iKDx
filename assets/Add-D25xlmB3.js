import{d as p,D as I,t as D,c as A,p as t,at as W,R as X,S as M,B as F,n as x,r as P,au as Y,e as Z,F as E,U as T,w as ee,av as ne,k as te,o as ae,s as R,G as re,aw as oe,J as U,ac as N,ag as j,aa as w,a8 as g,ab as V,a9 as z,ad as O,ax as ie,a6 as h,a5 as G,a7 as L,af as $,ah as le}from"./index-_HfVV_Za.js";import{S as ce,B as H}from"./index-DJfA7ePL.js";const[de,J]=A("tag"),se={size:String,mark:Boolean,show:D,type:I("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var ue=p({name:de,props:se,emits:["close"],setup(e,{slots:n,emit:l}){const c=d=>{d.stopPropagation(),l("close",d)},m=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},u=()=>{var d;const{type:y,mark:f,plain:o,round:i,size:r,closeable:v}=e,b={mark:f,plain:o,round:i};r&&(b[r]=r);const _=v&&t(M,{name:"cross",class:[J("close"),X],onClick:c},null);return t("span",{style:m(),class:J([b,y])},[(d=n.default)==null?void 0:d.call(n),_])};return()=>t(W,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?u():null]})}});const me=F(ue),[ge,k]=A("image"),fe={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:x,height:x,radius:x,lazyLoad:Boolean,iconSize:x,showError:D,errorIcon:I("photo-fail"),iconPrefix:String,showLoading:D,loadingIcon:I("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var ve=p({name:ge,props:fe,emits:["load","error"],setup(e,{emit:n,slots:l}){const c=P(!1),m=P(!0),u=P(),{$Lazyload:d}=Y().proxy,y=Z(()=>{const a={width:E(e.width),height:E(e.height)};return T(e.radius)&&(a.overflow="hidden",a.borderRadius=E(e.radius)),a});ee(()=>e.src,()=>{c.value=!1,m.value=!0});const f=a=>{m.value&&(m.value=!1,n("load",a))},o=()=>{const a=new Event("load");Object.defineProperty(a,"target",{value:u.value,enumerable:!0}),f(a)},i=a=>{c.value=!0,m.value=!1,n("error",a)},r=(a,S,C)=>C?C():t(M,{name:a,size:e.iconSize,class:S,classPrefix:e.iconPrefix},null),v=()=>{if(m.value&&e.showLoading)return t("div",{class:k("loading")},[r(e.loadingIcon,k("loading-icon"),l.loading)]);if(c.value&&e.showError)return t("div",{class:k("error")},[r(e.errorIcon,k("error-icon"),l.error)])},b=()=>{if(c.value||!e.src)return;const a={alt:e.alt,class:k("img"),decoding:e.decoding,style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?re(t("img",U({ref:u},a),null),[[oe("lazy"),e.src]]):t("img",U({ref:u,src:e.src,onLoad:f,onError:i},a),null)},_=({el:a})=>{const S=()=>{a===u.value&&m.value&&o()};u.value?S():R(S)},B=({el:a})=>{a===u.value&&!c.value&&i()};return d&&ne&&(d.$on("loaded",_),d.$on("error",B),te(()=>{d.$off("loaded",_),d.$off("error",B)})),ae(()=>{R(()=>{var a;(a=u.value)!=null&&a.complete&&!e.lazyLoad&&o()})}),()=>{var a;return t("div",{class:k({round:e.round,block:e.block}),style:y.value},[b(),v(),(a=l.default)==null?void 0:a.call(l)])}}});const he=F(ve),[ye,s]=A("card"),be={tag:String,num:x,desc:String,thumb:String,title:String,price:x,centered:Boolean,lazyLoad:Boolean,currency:I("¥"),thumbLink:String,originPrice:x};var _e=p({name:ye,props:be,emits:["clickThumb"],setup(e,{slots:n,emit:l}){const c=()=>{if(n.title)return n.title();if(e.title)return t("div",{class:[s("title"),"van-multi-ellipsis--l2"]},[e.title])},m=()=>{if(n.tag||e.tag)return t("div",{class:s("tag")},[n.tag?n.tag():t(me,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},u=()=>n.thumb?n.thumb():t(he,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),d=()=>{if(n.thumb||e.thumb)return t("a",{href:e.thumbLink,class:s("thumb"),onClick:o=>l("clickThumb",o)},[u(),m()])},y=()=>{if(n.desc)return n.desc();if(e.desc)return t("div",{class:[s("desc"),"van-ellipsis"]},[e.desc])},f=()=>{const o=e.price.toString().split(".");return t("div",null,[t("span",{class:s("price-currency")},[e.currency]),t("span",{class:s("price-integer")},[o[0]]),o.length>1&&t(N,null,[j("."),t("span",{class:s("price-decimal")},[o[1]])])])};return()=>{var o,i,r;const v=n.num||T(e.num),b=n.price||T(e.price),_=n["origin-price"]||T(e.originPrice),B=v||b||_||n.bottom,a=b&&t("div",{class:s("price")},[n.price?n.price():f()]),S=_&&t("div",{class:s("origin-price")},[n["origin-price"]?n["origin-price"]():`${e.currency} ${e.originPrice}`]),C=v&&t("div",{class:s("num")},[n.num?n.num():`x${e.num}`]),q=n.footer&&t("div",{class:s("footer")},[n.footer()]),Q=B&&t("div",{class:s("bottom")},[(o=n["price-top"])==null?void 0:o.call(n),a,S,C,(i=n.bottom)==null?void 0:i.call(n)]);return t("div",{class:s()},[t("div",{class:s("header")},[d(),t("div",{class:s("content",{centered:e.centered})},[t("div",null,[c(),y(),(r=n.tags)==null?void 0:r.call(n)]),Q])]),q])}}});const K=F(_e),xe={style:{padding:"16px",background:"#f8f9fa"}},Se={style:{"margin-bottom":"20px"}},we={key:0,style:{"margin-bottom":"20px"}},ke={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Pe={style:{"font-weight":"600","margin-bottom":"4px"}},ze={style:{color:"#666","font-size":"14px"}},Be={key:1},Ce={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Le={style:{"font-weight":"600","margin-bottom":"4px"}},$e={style:{color:"#666","font-size":"14px"}},Te={key:2,style:{"text-align":"center",padding:"40px 0",color:"#999"}},Ve={__name:"Add",setup(e){const n=ie(),l=P(""),c=P([]),m=P([{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"}]),u=[{code:"2330",name:"台積電"},{code:"2317",name:"鴻海"},{code:"2454",name:"聯發科"},{code:"2412",name:"中華電"},{code:"1301",name:"台塑"},{code:"2882",name:"國泰金"},{code:"2881",name:"富邦金"},{code:"2303",name:"聯電"},{code:"2308",name:"台達電"},{code:"1303",name:"南亞"}];function d(){if(!l.value.trim()){c.value=[];return}c.value=u.filter(o=>o.code.includes(l.value)||o.name.includes(l.value))}function y(){c.value=[]}function f(o){le(`已新增 ${o.name} (${o.code}) 到自選股`),setTimeout(()=>{n.push("/")},1e3)}return(o,i)=>(h(),w("div",xe,[g("div",Se,[i[1]||(i[1]=g("h2",{style:{margin:"0 0 16px 0","font-size":"20px","font-weight":"600"}},"新增股票",-1)),t(z(ce),{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=r=>l.value=r),placeholder:"搜尋股票代號或名稱",shape:"round",onSearch:d,onClear:y},null,8,["modelValue"])]),c.value.length>0?(h(),w("div",we,[i[3]||(i[3]=g("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"搜尋結果",-1)),(h(!0),w(N,null,O(c.value,r=>(h(),G(z(K),{key:r.code,style:{"margin-bottom":"8px"}},{default:L(()=>[g("div",ke,[g("div",null,[g("div",Pe,$(r.name),1),g("div",ze,$(r.code),1)]),t(z(H),{type:"primary",size:"small",onClick:v=>f(r)},{default:L(()=>i[2]||(i[2]=[j(" 新增 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),_:2},1024))),128))])):V("",!0),l.value===""?(h(),w("div",Be,[i[5]||(i[5]=g("h3",{style:{margin:"0 0 12px 0","font-size":"16px",color:"#666"}},"熱門股票",-1)),(h(!0),w(N,null,O(m.value,r=>(h(),G(z(K),{key:r.code,style:{"margin-bottom":"8px"}},{default:L(()=>[g("div",Ce,[g("div",null,[g("div",Le,$(r.name),1),g("div",$e,$(r.code),1)]),t(z(H),{type:"primary",size:"small",onClick:v=>f(r)},{default:L(()=>i[4]||(i[4]=[j(" 新增 ",-1)])),_:2,__:[4]},1032,["onClick"])])]),_:2},1024))),128))])):V("",!0),l.value!==""&&c.value.length===0?(h(),w("div",Te," 查無相關股票 ")):V("",!0)]))}};export{Ve as default};
