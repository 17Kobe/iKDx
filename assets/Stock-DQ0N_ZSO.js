import{d as Ke,m as un,c as bn,r as W,a as ee,i as kn,w as Kt,b as Gt,e as Dn,u as qn,f as Kn,o as lt,n as De,g as Mt,h as Wo,j as Vo,k as Bo,v as zo,l as N,s as jo,p as Gn,T as Xo,q as Jn,t as Yt,x as yn,y as Zn,z as Qn,A as Ho,B as eo,C as _n,D as Uo,E as qo,F as Cn,G as Ko,H as Go,I as Jo,J as ct,K as to,L as no,M as Zo,N as ut,O as B,P as ne,Q as h,R as X,S as q,U as tt,V as xt,W as dn,X as oo,Y as H,Z as le,_ as ao,$ as st,a0 as Qo,a1 as fn,a2 as ro,a3 as dt,a4 as G,a5 as ft,a6 as $t,a7 as je,a8 as Ge,a9 as mt,aa as ea,ab as ta,ac as na,ad as oa,ae as aa,af as ra}from"./index-BrrQnm3-.js";import{F as Be,f as io,C as Ue,L as ia,a as sa,b as so,c as lo,P as co,d as uo,p as fo,e as ho,g as po,T as go}from"./chart-W9-rz42h.js";import{u as la,S as ca,a as En}from"./index-DgQymjF3.js";import{A as Ie}from"./index-DZCmwKFA.js";import{B as Fe,s as Tn}from"./function-call-DeaqWxTt.js";import"./index-BG-lG3bY.js";function In(t,e){return t.reduce((n,o)=>Math.abs(n-e)<Math.abs(o-e)?n:o)}const ua={gap:{type:[Number,Object],default:24},icon:String,axis:un("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[da,On]=bn("floating-bubble");var fa=Ke({name:da,inheritAttrs:!1,props:ua,emits:["click","update:offset","offsetChange"],setup(t,{slots:e,emit:n,attrs:o}){const a=W(),r=W({x:0,y:0,width:0,height:0}),i=ee(()=>kn(t.gap)?t.gap.x:t.gap),s=ee(()=>kn(t.gap)?t.gap.y:t.gap),c=ee(()=>({top:s.value,right:Gt.value-r.value.width-i.value,bottom:Kt.value-r.value.height-s.value,left:i.value})),u=W(!1);let f=!1;const d=ee(()=>{const b={},D=Dn(r.value.x),I=Dn(r.value.y);return b.transform=`translate3d(${D}, ${I}, 0)`,(u.value||!f)&&(b.transition="none"),b}),l=()=>{if(!O.value)return;const{width:b,height:D}=Jn(a.value),{offset:I}=t;r.value={x:I?I.x:Gt.value-b-i.value,y:I?I.y:Kt.value-D-s.value,width:b,height:D}},g=qn();let p=0,m=0;const v=b=>{g.start(b),u.value=!0,p=r.value.x,m=r.value.y};Kn("touchmove",b=>{if(b.preventDefault(),g.move(b),t.axis!=="lock"&&!g.isTap.value){if(t.axis==="x"||t.axis==="xy"){let I=p+g.deltaX.value;I<c.value.left&&(I=c.value.left),I>c.value.right&&(I=c.value.right),r.value.x=I}if(t.axis==="y"||t.axis==="xy"){let I=m+g.deltaY.value;I<c.value.top&&(I=c.value.top),I>c.value.bottom&&(I=c.value.bottom),r.value.y=I}const D=Yt(r.value,["x","y"]);n("update:offset",D)}},{target:a});const S=()=>{u.value=!1,De(()=>{if(t.magnetic==="x"){const b=In([c.value.left,c.value.right],r.value.x);r.value.x=b}if(t.magnetic==="y"){const b=In([c.value.top,c.value.bottom],r.value.y);r.value.y=b}if(!g.isTap.value){const b=Yt(r.value,["x","y"]);n("update:offset",b),(p!==b.x||m!==b.y)&&n("offsetChange",b)}})},k=b=>{g.isTap.value?n("click",b):b.stopPropagation()};lt(()=>{l(),De(()=>{f=!0})}),Mt([Gt,Kt,i,s,()=>t.offset],l,{deep:!0});const O=W(!0);return Wo(()=>{O.value=!0}),Vo(()=>{t.teleport&&(O.value=!1)}),()=>{const b=Bo(N("div",Gn({class:On(),ref:a,onTouchstartPassive:v,onTouchend:S,onTouchcancel:S,onClickCapture:k,style:d.value},o),[e.default?e.default():N(jo,{name:t.icon,class:On("icon")},null)]),[[zo,O.value]]);return t.teleport?N(Xo,{to:t.teleport},{default:()=>[b]}):b}}});const ha=yn(fa),[pa,Je,ga]=bn("search"),ma=Zn({},io,{label:String,shape:un("square"),leftIcon:un("search"),clearable:Ho,actionText:String,background:String,showAction:Boolean});var va=Ke({name:pa,props:ma,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(t,{emit:e,slots:n,attrs:o}){const a=la(),r=W(),i=()=>{n.action||(e("update:modelValue",""),e("cancel"))},s=b=>{b.keyCode===13&&(eo(b),e("search",t.modelValue))},c=()=>t.id||`${a}-input`,u=()=>{if(n.label||t.label)return N("label",{class:Je("label"),for:c(),"data-allow-mismatch":"attribute"},[n.label?n.label():t.label])},f=()=>{if(t.showAction){const b=t.actionText||ga("cancel");return N("div",{class:Je("action"),role:"button",tabindex:0,onClick:i},[n.action?n.action():b])}},d=()=>{var b;return(b=r.value)==null?void 0:b.blur()},l=()=>{var b;return(b=r.value)==null?void 0:b.focus()},g=b=>e("blur",b),p=b=>e("focus",b),m=b=>e("clear",b),v=b=>e("clickInput",b),y=b=>e("clickLeftIcon",b),S=b=>e("clickRightIcon",b),k=Object.keys(io),O=()=>{const b=Zn({},o,Yt(t,k),{id:c()}),D=I=>e("update:modelValue",I);return N(Be,Gn({ref:r,type:"search",class:Je("field",{"with-message":b.errorMessage}),border:!1,onBlur:g,onFocus:p,onClear:m,onKeypress:s,onClickInput:v,onClickLeftIcon:y,onClickRightIcon:S,"onUpdate:modelValue":D},b),Yt(n,["left-icon","right-icon"]))};return Qn({focus:l,blur:d}),()=>{var b;return N("div",{class:Je({"show-action":t.showAction}),style:{background:t.background}},[(b=n.left)==null?void 0:b.call(n),N("div",{class:Je("content",t.shape)},[u(),O()]),f()])}}});const ba=yn(va),[ya,Jt]=bn("swipe-cell"),wa={name:Uo(""),disabled:Boolean,leftWidth:_n,rightWidth:_n,beforeClose:Function,stopPropagation:Boolean};var xa=Ke({name:ya,props:wa,emits:["open","close","click"],setup(t,{emit:e,slots:n}){let o,a,r,i;const s=W(),c=W(),u=W(),f=qo({offset:0,dragging:!1}),d=qn(),l=_=>_.value?Jn(_).width:0,g=ee(()=>Cn(t.leftWidth)?+t.leftWidth:l(c)),p=ee(()=>Cn(t.rightWidth)?+t.rightWidth:l(u)),m=_=>{f.offset=_==="left"?g.value:-p.value,o||(o=!0,e("open",{name:t.name,position:_}))},v=_=>{f.offset=0,o&&(o=!1,e("close",{name:t.name,position:_}))},y=_=>{const $=Math.abs(f.offset),C=.15,E=o?1-C:C,T=_==="left"?g.value:p.value;T&&$>T*E?m(_):v(_)},S=_=>{t.disabled||(r=f.offset,d.start(_))},k=_=>{if(t.disabled)return;const{deltaX:$}=d;d.move(_),d.isHorizontal()&&(a=!0,f.dragging=!0,(!o||$.value*r<0)&&eo(_,t.stopPropagation),f.offset=Go($.value+r,-p.value,g.value))},O=()=>{f.dragging&&(f.dragging=!1,y(f.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},b=(_="outside",$)=>{i||(e("click",_),o&&!a&&(i=!0,Jo(t.beforeClose,{args:[{event:$,name:t.name,position:_}],done:()=>{i=!1,v(_)},canceled:()=>i=!1,error:()=>i=!1})))},D=_=>$=>{(a||o)&&$.stopPropagation(),!a&&b(_,$)},I=(_,$)=>{const C=n[_];if(C)return N("div",{ref:$,class:Jt(_),onClick:D(_)},[C()])};return Qn({open:m,close:v}),Ko(s,_=>b("outside",_),{eventName:"touchstart"}),Kn("touchmove",k,{target:s}),()=>{var _;const $={transform:`translate3d(${f.offset}px, 0, 0)`,transitionDuration:f.dragging?"0s":".6s"};return N("div",{ref:s,class:Jt(),onClick:D("cell"),onTouchstartPassive:S,onTouchend:O,onTouchcancel:O},[N("div",{class:Jt("wrapper"),style:$},[I("left",c),(_=n.default)==null?void 0:_.call(n),I("right",u)])])}}});const Sa=yn(xa),ka={style:{display:"flex","flex-direction":"column",gap:"0"}},Da={style:{margin:"16px 0 0 0"}},_a={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},Ca=["onClick"],Ea={key:0,style:{"margin-top":"12px"}},Ta={key:0},Ia={key:0,style:{background:"#d3d3d3","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",opacity:"0.6"}},Oa={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},Aa={style:{"font-size":"16px",color:"#333",flex:"1"}},Ma=["onClick"],Ya={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},$a={style:{"font-size":"16px",color:"#333",flex:"1"}},Pa={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},La={__name:"StockSearch",setup(t){const e=ct(),n=to("stock-search"),o=W(!1);lt(()=>{n.on(m=>{o.value=m})}),no(()=>{n.reset()});const a=W(),r=W(""),i=W([]),s=["Âè∞Á©çÈõª","È¥ªÊµ∑","ËÅØÁôºÁßë","Èï∑Ê¶Æ","‰∏≠Èãº"],c={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},u={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function f(m){return r.value===m?{...c,...u}:c}function d(){De(()=>{const m=a.value?.$el?.querySelector("input");m&&m.focus()})}Mt(()=>o.value,m=>{m&&setTimeout(()=>{d()},300)}),Mt(()=>r.value,async m=>{if(console.log("localSearch Êõ¥Êñ∞:",m),!m||m.length<1){i.value=[];return}console.log("Ëß∏Áôº getAllStocks");try{const v=await Zo();console.log("getAllStocks Âü∑Ë°åÊàêÂäü",v),i.value=v.filter(y=>y.name.includes(m)||y.id.includes(m)),console.log("ÊêúÂ∞ãÁµêÊûú:",i.value)}catch(v){console.error("getAllStocks Âü∑Ë°åÂ§±Êïó:",v)}});function l(m){}function g(m){console.log("ÈªûÊìäÁÜ±ÈñÄÊ®ôÁ±§:",m),r.value=m}async function p(m){const v=await e.addStockToList(m);le({message:v.message,type:v.success?"success":"fail"})}return(m,v)=>(B(),ut(X(Ie),{show:o.value,"onUpdate:show":v[3]||(v[3]=y=>o.value=y),"cancel-text":"Èõ¢Èñã",title:"ËÇ°Á•®ÊêúÂ∞ã",onSelect:p,style:{height:"80vh",maxHeight:"80vh"},"body-style":"height:80vh;max-height:80vh;overflow-y:auto;"},{description:ne(()=>[h("div",ka,[N(X(ba),{ref_key:"searchInputRef",ref:a,modelValue:r.value,"onUpdate:modelValue":v[0]||(v[0]=y=>r.value=y),placeholder:"Ë´ãËº∏ÂÖ•ËÇ°Á•®ÂêçÁ®±Êàñ‰ª£Á¢º","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:l},null,8,["modelValue"]),h("div",Da,[v[5]||(v[5]=h("div",{style:{"font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px","margin-bottom":"8px","margin-left":"8px","text-align":"left"}}," | ÁÜ±ÈñÄËÇ°Á•® ",-1)),h("div",_a,[(B(),q(xt,null,dn(s,y=>h("span",{key:y,onClick:S=>g(y),style:oo(f(y))},H(y),13,Ca)),64))]),r.value&&r.value.length>=1?(B(),q("div",Ea,[i.value.length?(B(),q("div",Ta,[(B(!0),q(xt,null,dn(i.value,y=>(B(),q(xt,{key:y.id},[X(e).isStockInList(y.id)?(B(),q("div",Ia,[h("div",Oa,H(y.id),1),h("div",Aa,H(y.name),1),v[4]||(v[4]=h("div",{style:{"margin-left":"12px","min-width":"60px",height:"40px",background:"#e0e0e0",color:"#666","font-weight":"bold","font-size":"16px","border-radius":"8px",width:"64px",display:"flex","align-items":"center","justify-content":"center"}}," Â∑≤Êñ∞Â¢û ",-1))])):(B(),q("div",{key:1,onClick:S=>p(y),style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"10px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px",cursor:"pointer",transition:"all 0.2s ease"},onMouseenter:v[1]||(v[1]=S=>S.target.style.background="#eff3f6"),onMouseleave:v[2]||(v[2]=S=>S.target.style.background="#fff")},[h("div",Ya,H(y.id),1),h("div",$a,H(y.name),1)],40,Ma))],64))),128))])):(B(),q("div",Pa," Êü•ÁÑ°Ë≥áÊñô "))])):tt("",!0)])])]),_:1},8,["show"]))}},mo={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Fa={ariaLabel:{type:String},ariaDescribedby:{type:String}},Na={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...mo,...Fa},Ra=Qo[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function Re(t){return ro(t)?fn(t):t}function Wa(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return ro(e)?new Proxy(t,{}):t}function Va(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function vo(t,e){t.labels=e}function bo(t,e,n){const o=[];t.datasets=e.map(a=>{const r=t.datasets.find(i=>i[n]===a[n]);return!r||!a.data||o.includes(r)?{...a}:(o.push(r),Object.assign(r,a),r)})}function Ba(t,e){const n={labels:[],datasets:[]};return vo(n,t.labels),bo(n,t.datasets,e),n}const za=Ke({props:Na,setup(t,e){let{expose:n,slots:o}=e;const a=W(null),r=ao(null);n({chart:r});const i=()=>{if(!a.value)return;const{type:u,data:f,options:d,plugins:l,datasetIdKey:g}=t,p=Ba(f,g),m=Wa(p,f);r.value=new Ue(a.value,{type:u,data:m,options:{...d},plugins:l})},s=()=>{const u=fn(r.value);u&&(t.destroyDelay>0?setTimeout(()=>{u.destroy(),r.value=null},t.destroyDelay):(u.destroy(),r.value=null))},c=u=>{u.update(t.updateMode)};return lt(i),no(s),Mt([()=>t.options,()=>t.data],(u,f)=>{let[d,l]=u,[g,p]=f;const m=fn(r.value);if(!m)return;let v=!1;if(d){const y=Re(d),S=Re(g);y&&y!==S&&(Va(m,y),v=!0)}if(l){const y=Re(l.labels),S=Re(p.labels),k=Re(l.datasets),O=Re(p.datasets);y!==S&&(vo(m.config.data,y),v=!0),k&&k!==O&&(bo(m.config.data,k,t.datasetIdKey),v=!0)}v&&De(()=>{c(m)})},{deep:!0}),()=>st("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:a},[st("p",{},[o.default?o.default():""])])}});function ja(t,e){return Ue.register(e),Ke({props:mo,setup(n,o){let{expose:a}=o;const r=ao(null),i=s=>{r.value=s?.chart};return a({chart:r}),()=>st(za,Ra({ref:i},{type:t,...n}))}})}const yo=ja("line",ia);var St={exports:{}},Xa=St.exports,An;function Ha(){return An||(An=1,function(t,e){(function(n,o){t.exports=o()})(Xa,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,r=/\d\d/,i=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,c={},u=function(v){return(v=+v)+(v>68?1900:2e3)},f=function(v){return function(y){this[v]=+y}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var S=y.match(/([+-]|\d\d)/g),k=60*S[1]+(+S[2]||0);return k===0?0:S[0]==="+"?-k:k}(v)}],l=function(v){var y=c[v];return y&&(y.indexOf?y:y.s.concat(y.f))},g=function(v,y){var S,k=c.meridiem;if(k){for(var O=1;O<=24;O+=1)if(v.indexOf(k(O,0,y))>-1){S=O>12;break}}else S=v===(y?"pm":"PM");return S},p={A:[s,function(v){this.afternoon=g(v,!1)}],a:[s,function(v){this.afternoon=g(v,!0)}],Q:[a,function(v){this.month=3*(v-1)+1}],S:[a,function(v){this.milliseconds=100*+v}],SS:[r,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[i,f("seconds")],ss:[i,f("seconds")],m:[i,f("minutes")],mm:[i,f("minutes")],H:[i,f("hours")],h:[i,f("hours")],HH:[i,f("hours")],hh:[i,f("hours")],D:[i,f("day")],DD:[r,f("day")],Do:[s,function(v){var y=c.ordinal,S=v.match(/\d+/);if(this.day=S[0],y)for(var k=1;k<=31;k+=1)y(k).replace(/\[|\]/g,"")===v&&(this.day=k)}],w:[i,f("week")],ww:[r,f("week")],M:[i,f("month")],MM:[r,f("month")],MMM:[s,function(v){var y=l("months"),S=(l("monthsShort")||y.map(function(k){return k.slice(0,3)})).indexOf(v)+1;if(S<1)throw new Error;this.month=S%12||S}],MMMM:[s,function(v){var y=l("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,f("year")],YY:[r,function(v){this.year=u(v)}],YYYY:[/\d{4}/,f("year")],Z:d,ZZ:d};function m(v){var y,S;y=v,S=c&&c.formats;for(var k=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(C,E,T){var j=T&&T.toUpperCase();return E||S[T]||n[T]||S[j].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(L,U,R){return U||R.slice(1)})})).match(o),O=k.length,b=0;b<O;b+=1){var D=k[b],I=p[D],_=I&&I[0],$=I&&I[1];k[b]=$?{regex:_,parser:$}:D.replace(/^\[|\]$/g,"")}return function(C){for(var E={},T=0,j=0;T<O;T+=1){var L=k[T];if(typeof L=="string")j+=L.length;else{var U=L.regex,R=L.parser,K=C.slice(j),ae=U.exec(K)[0];R.call(E,ae),C=C.replace(ae,"")}}return function(re){var Me=re.afternoon;if(Me!==void 0){var ie=re.hours;Me?ie<12&&(re.hours+=12):ie===12&&(re.hours=0),delete re.afternoon}}(E),E}}return function(v,y,S){S.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(u=v.parseTwoDigitYear);var k=y.prototype,O=k.parse;k.parse=function(b){var D=b.date,I=b.utc,_=b.args;this.$u=I;var $=_[1];if(typeof $=="string"){var C=_[2]===!0,E=_[3]===!0,T=C||E,j=_[2];E&&(j=_[2]),c=this.$locale(),!C&&j&&(c=S.Ls[j]),this.$d=function(K,ae,re,Me){try{if(["x","X"].indexOf(ae)>-1)return new Date((ae==="X"?1e3:1)*K);var ie=m(ae)(K),Ye=ie.year,Ne=ie.month,Vt=ie.day,Bt=ie.hours,zt=ie.minutes,jt=ie.seconds,Y=ie.milliseconds,w=ie.zone,P=ie.week,ge=new Date,ye=Vt||(Ye||Ne?1:ge.getDate()),ve=Ye||ge.getFullYear(),we=0;Ye&&!Ne||(we=Ne>0?Ne-1:ge.getMonth());var gt,Xt=Bt||0,Ht=zt||0,Ut=jt||0,qt=Y||0;return w?new Date(Date.UTC(ve,we,ye,Xt,Ht,Ut,qt+60*w.offset*1e3)):re?new Date(Date.UTC(ve,we,ye,Xt,Ht,Ut,qt)):(gt=new Date(ve,we,ye,Xt,Ht,Ut,qt),P&&(gt=Me(gt).week(P).toDate()),gt)}catch{return new Date("")}}(D,$,I,S),this.init(),j&&j!==!0&&(this.$L=this.locale(j).$L),T&&D!=this.format($)&&(this.$d=new Date("")),c={}}else if($ instanceof Array)for(var L=$.length,U=1;U<=L;U+=1){_[1]=$[U-1];var R=S.apply(this,_);if(R.isValid()){this.$d=R.$d,this.$L=R.$L,this.init();break}U===L&&(this.$d=new Date(""))}else O.call(this,b)}}})}(St)),St.exports}var Ua=Ha();const qa=dt(Ua);var kt={exports:{}},Ka=kt.exports,Mn;function Ga(){return Mn||(Mn=1,function(t,e){(function(n,o){t.exports=o()})(Ka,function(){return function(n,o){var a=o.prototype,r=a.format;a.format=function(i){var s=this,c=this.$locale();if(!this.isValid())return r.bind(this)(i);var u=this.$utils(),f=(i||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((s.$M+1)/3);case"Do":return c.ordinal(s.$D);case"gggg":return s.weekYear();case"GGGG":return s.isoWeekYear();case"wo":return c.ordinal(s.week(),"W");case"w":case"ww":return u.s(s.week(),d==="w"?1:2,"0");case"W":case"WW":return u.s(s.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return u.s(String(s.$H===0?24:s.$H),d==="k"?1:2,"0");case"X":return Math.floor(s.$d.getTime()/1e3);case"x":return s.$d.getTime();case"z":return"["+s.offsetName()+"]";case"zzz":return"["+s.offsetName("long")+"]";default:return d}});return r.bind(this)(f)}}})}(kt)),kt.exports}var Ja=Ga();const Za=dt(Ja);var Dt={exports:{}},Qa=Dt.exports,Yn;function er(){return Yn||(Yn=1,function(t,e){(function(n,o){t.exports=o()})(Qa,function(){var n="month",o="quarter";return function(a,r){var i=r.prototype;i.quarter=function(u){return this.$utils().u(u)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(u-1))};var s=i.add;i.add=function(u,f){return u=Number(u),this.$utils().p(f)===o?this.add(3*u,n):s.bind(this)(u,f)};var c=i.startOf;i.startOf=function(u,f){var d=this.$utils(),l=!!d.u(f)||f;if(d.p(u)===o){var g=this.quarter()-1;return l?this.month(3*g).startOf(n).startOf("day"):this.month(3*g+2).endOf(n).endOf("day")}return c.bind(this)(u,f)}}})}(Dt)),Dt.exports}var tr=er();const nr=dt(tr);var _t={exports:{}},or=_t.exports,$n;function ar(){return $n||($n=1,function(t,e){(function(n,o){t.exports=o()})(or,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(o,a,r){var i=a.prototype,s=i.format;r.en.formats=n,i.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var u=this.$locale().formats,f=function(d,l){return d.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(g,p,m){var v=m&&m.toUpperCase();return p||l[m]||n[m]||l[v].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,S,k){return S||k.slice(1)})})}(c,u===void 0?{}:u);return s.call(this,f)}}})}(_t)),_t.exports}var rr=ar();const ir=dt(rr);var Ct={exports:{}},sr=Ct.exports,Pn;function lr(){return Pn||(Pn=1,function(t,e){(function(n,o){t.exports=o()})(sr,function(){var n="day";return function(o,a,r){var i=function(u){return u.add(4-u.isoWeekday(),n)},s=a.prototype;s.isoWeekYear=function(){return i(this).year()},s.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var f,d,l,g,p=i(this),m=(f=this.isoWeekYear(),d=this.$u,l=(d?r.utc:r)().year(f).startOf("year"),g=4-l.isoWeekday(),l.isoWeekday()>4&&(g+=7),l.add(g,n));return p.diff(m,"week")+1},s.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var c=s.startOf;s.startOf=function(u,f){var d=this.$utils(),l=!!d.u(f)||f;return d.p(u)==="isoweek"?l?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):c.bind(this)(u,f)}}})}(Ct)),Ct.exports}var cr=lr();const ur=dt(cr);G.extend(Za);G.extend(nr);G.extend(ir);G.extend(qa);G.extend(ur);var dr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};sa._date.override({formats:function(){return dr},parse:function(e,n){var o=typeof e;return e===null||o==="undefined"?null:o==="string"&&typeof n=="string"?G(e,n).isValid()?G(e,n).valueOf():null:e instanceof G?null:G(e).isValid()?G(e).valueOf():null},format:function(e,n){return G(e).format(n)},add:function(e,n,o){return G(e).add(n,o).valueOf()},diff:function(e,n,o){return G(e).diff(G(n),o)},startOf:function(e,n,o){if(n==="isoWeek"){var a=typeof o=="number"&&o>0&&o<7?o:1;return G(e).isoWeekday(a).startOf("day").valueOf()}return G(e).startOf(n).valueOf()},endOf:function(e,n){return G(e).endOf(n).valueOf()}});const fr={key:1,class:"error-placeholder"},hr={__name:"KdjChart",props:{stockId:{type:String,required:!0},width:{type:Number,default:200},height:{type:Number,default:100}},emits:["kdjClick"],setup(t,{emit:e}){Ue.register(so,lo,co,uo,fo,ho,po,go);const n={id:"kdjDisplay",afterDatasetsDraw:(d,l,g)=>{if(!g.enabled||!g.lastKdj)return;const{ctx:p,chartArea:m}=d,{lastKdj:v}=g,S=d.scales.y.getPixelForValue(0),k=m.right-97,O=S+15,b=S+30;p.save(),console.log("Drawing KDJ values:",{k:v.k,d:v.d,xStart:k,yK:O,yD:b,zeroY:S,chartArea:m}),p.font="bold 12px Arial",p.textAlign="left",p.fillStyle="#4286f5";const D=`K: ${v.k}`;p.fillText(D,k,O);const I=p.measureText(D).width;p.fillStyle="#e75c9a";const _=` D: ${v.d}`,$=k+I;console.log("Drawing D value:",_,"at same line position:",$,O),p.fillText(_,$,O),p.restore()}};Ue.register(n);const o=t,a=e,r=ct(),i=W(null),s=ee(()=>{const d=r.userStockList.find(l=>l.id===o.stockId);return d?.data?.weeklyKdj?d.data.weeklyKdj.filter(l=>l&&Array.isArray(l)&&l.length>=4&&typeof l[1]=="number"&&!isNaN(l[1])&&typeof l[2]=="number"&&!isNaN(l[2])&&typeof l[3]=="number"&&!isNaN(l[3])).map(l=>({x:G(l[0],"YYYYMMDD").toDate(),k:l[1],d:l[2],j:l[3]})):[]}),c=ee(()=>{const d=s.value;if(!d||d.length===0)return{datasets:[]};const l=d.map(p=>({x:p.x,y:p.k})),g=d.map(p=>({x:p.x,y:p.d}));return{datasets:[{label:"K",data:l,borderColor:"#4286f5",backgroundColor:"rgba(66, 134, 245, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#4286f5",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2},{label:"D",data:g,borderColor:"#e75c9a",backgroundColor:"rgba(231, 92, 154, 0.1)",borderWidth:2,fill:!1,tension:0,pointRadius:0,pointHoverRadius:4,pointBackgroundColor:"#e75c9a",pointBorderColor:"#fff",pointBorderWidth:2,pointHoverBorderWidth:2}]}}),u=ee(()=>{const d=s.value;return d&&d.length>0?d[d.length-1]:null}),f=ee(()=>{const d=u.value;return{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"nearest",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.95)",titleColor:"#333",bodyColor:"#333",borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:1,cornerRadius:6,displayColors:!1,padding:8,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:function(l){const g=l[0].parsed.x;return G(g).format("YYYY-MM-DD(dd)")},label:function(l){const g=l.dataset.label,p=l.parsed.y.toFixed(2);return`${g}: ${p}`},afterLabel:function(l){const g=l.dataIndex,p=s.value;if(p&&p[g]){const m=p[g];if(l.datasetIndex===0)return[`K: ${m.k.toFixed(2)}`,`D: ${m.d.toFixed(2)}`,`J: ${m.j.toFixed(2)}`]}return[]}}},kdjDisplay:{enabled:!!d,lastKdj:d?{k:d.k.toFixed(2),d:d.d.toFixed(2),j:d.j.toFixed(2),date:G(d.x).format("YYYY/MM/DD")}:null}},scales:{x:{type:"time",time:{unit:"week",displayFormats:{week:"MM/DD"}},display:!1,grid:{display:!1},ticks:{display:!1},offset:!1,bounds:"data"},y:{type:"linear",position:"right",display:!0,min:-20,max:100,border:{display:!1},grid:{drawTicks:!1,color:l=>{const g=l.tick.value;return[0,20,50,80,100].includes(g)?"rgba(200, 200, 200, 0.3)":"transparent"}},ticks:{stepSize:10,autoSkip:!1,color:"#888",font:{size:12},padding:-15,callback:l=>l===20||l===50||l===80?l:""}}},animation:!1,interaction:{mode:"nearest",intersect:!1,includeInvisible:!1},hover:{mode:"nearest",intersect:!1,animationDuration:200},onClick:(l,g,p)=>{console.log("Chart onClick triggered"),console.log("Event object:",l);const m=p.canvas.getBoundingClientRect();let v,y;if(l.native)v=l.native.offsetX||l.native.clientX-m.left,y=l.native.offsetY||l.native.clientY-m.top;else if(l.offsetX!==void 0)v=l.offsetX,y=l.offsetY;else if(l.clientX!==void 0)v=l.clientX-m.left,y=l.clientY-m.top;else{console.log("Cannot determine click position");return}console.log("Click position:",{x:v,y}),console.log("Canvas rect:",m);const S=p.chartArea,O=p.scales.y.getPixelForValue(0),b={left:S.right-120,right:S.right-5,top:O+5,bottom:O+20};if(console.log("KDJ area:",b),v>=b.left&&v<=b.right&&y>=b.top&&y<=b.bottom){console.log("Clicked in KDJ area");const D=u.value;D&&(console.log("Emitting kdjClick event:",D),a("kdjClick",{k:D.k.toFixed(2),d:D.d.toFixed(2),j:D.j.toFixed(2),date:G(D.x).format("YYYY/MM/DD")}))}else console.log("Clicked outside KDJ area")}}});return(d,l)=>(B(),q("div",{ref_key:"chartContainer",ref:i,class:"kdj-chart",style:{width:"100%",height:"100%"}},[c.value.datasets.length>0?(B(),ut(X(yo),{key:0,data:c.value,options:f.value},null,8,["data","options"])):(B(),q("div",fr,"KDJ ÂúñË°®Êö´‰∏çÂèØÁî®"))],512))}},pr=ft(hr,[["__scopeId","data-v-7b9bfd80"]]),gr={key:1,class:"error-placeholder"},mr={__name:"RsiChart",props:{stockId:{type:String,required:!0},width:{type:Number,default:200},height:{type:Number,default:100}},emits:["rsiClick"],setup(t,{emit:e}){Ue.register(so,lo,co,uo,fo,ho,po,go);const n={id:"rsiDisplay",afterDatasetsDraw:(d,l,g)=>{const p=g?.rsiDisplay||g;if(!p?.enabled||!p?.lastRsi)return;const{ctx:m,chartArea:v}=d,{lastRsi:y}=p,k=d.scales.y.getPixelForValue(0),O=v.right-59,b=k+15;m.save(),m.font="bold 12px Arial",m.textAlign="left";const D=parseFloat(y.value);D>70?m.fillStyle="#e74c3c":D<30?m.fillStyle="#27ae60":m.fillStyle="#3498db";const I=`RSI: ${y.value}`;m.fillText(I,O,b),m.restore()}};try{Ue.register(n)}catch{}const o=t,a=e,r=ct(),i=W(null),s=ee(()=>{const d=r.userStockList.find(l=>l.id===o.stockId);return d?.data?.weeklyRsi?d.data.weeklyRsi.filter(l=>l&&Array.isArray(l)&&l.length>=2&&typeof l[1]=="number"&&!isNaN(l[1])).map(l=>({x:G(l[0],"YYYYMMDD").toDate(),rsi:l[1]})):[]}),c=ee(()=>{const d=s.value;return d&&d.length>0?d[d.length-1]:null}),u=ee(()=>{const d=s.value;return!d||d.length===0?{datasets:[]}:{labels:d.map(l=>l.x),datasets:[{label:"RSI",data:d.map(l=>({x:l.x,y:l.rsi})),borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.1)",borderWidth:2,pointRadius:0,pointHoverRadius:4,fill:!1,tension:.2}]}}),f=ee(()=>{const d=c.value;return{responsive:!0,maintainAspectRatio:!1,elements:{point:{radius:0,hoverRadius:4,backgroundColor:"#3498db",borderColor:"#ffffff",borderWidth:2},line:{borderWidth:2,tension:.2}},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#3498db",borderWidth:1,callbacks:{title:l=>{const g=l[0];return G(g.parsed.x).format("YYYY/MM/DD")},label:l=>{const g=l.parsed.y;let p="Ê≠£Â∏∏";return g>70?p="Ë∂ÖË≤∑":g<30&&(p="Ë∂ÖË≥£"),[`RSI: ${g.toFixed(2)}`,`ÁãÄÊÖã: ${p}`]}}},rsiDisplay:{enabled:!!d,lastRsi:d?{value:d.rsi.toFixed(2),date:G(d.x).format("YYYY/MM/DD")}:null}},scales:{x:{type:"time",time:{unit:"week",displayFormats:{week:"MM/DD"}},display:!1,grid:{display:!1},ticks:{display:!1},offset:!1,bounds:"data"},y:{type:"linear",position:"right",display:!0,min:-20,max:100,border:{display:!1},grid:{drawTicks:!1,color:l=>{const g=l.tick.value;return[0,30,50,70,100].includes(g)&&g>=0?"rgba(200, 200, 200, 0.3)":"transparent"}},ticks:{stepSize:10,autoSkip:!1,color:"#888",font:{size:12},padding:-15,callback:l=>l===30||l===70?l:""}}},animation:!1,interaction:{mode:"nearest",intersect:!1,includeInvisible:!1},hover:{mode:"nearest",intersect:!1,animationDuration:200},onClick:(l,g,p)=>{console.log("RSI Chart onClick triggered");const m=p.canvas.getBoundingClientRect();let v,y;if(l.native)v=l.native.offsetX||l.native.clientX-m.left,y=l.native.offsetY||l.native.clientY-m.top;else if(l.offsetX!==void 0)v=l.offsetX,y=l.offsetY;else if(l.clientX!==void 0)v=l.clientX-m.left,y=l.clientY-m.top;else{console.log("Cannot determine click position");return}const S=p.chartArea,O=p.scales.y.getPixelForValue(0),b={left:S.right-120,right:S.right-5,top:O+5,bottom:O+25};if(v>=b.left&&v<=b.right&&y>=b.top&&y<=b.bottom){console.log("Clicked in RSI area");const D=c.value;if(D){console.log("Emitting rsiClick event:",D);let I="Ê≠£Â∏∏";D.rsi>70?I="Ë∂ÖË≤∑":D.rsi<30&&(I="Ë∂ÖË≥£"),a("rsiClick",{rsi:D.rsi.toFixed(2),status:I,date:G(D.x).format("YYYY/MM/DD")})}}}}});return(d,l)=>(B(),q("div",{ref_key:"chartContainer",ref:i,class:"rsi-chart",style:{width:"100%",height:"100%"}},[u.value.datasets.length>0?(B(),ut(X(yo),{key:0,data:u.value,options:f.value},null,8,["data","options"])):(B(),q("div",gr,"RSI ÂúñË°®Êö´‰∏çÂèØÁî®"))],512))}},vr=ft(mr,[["__scopeId","data-v-469d754e"]]),br={class:"stock-name"},yr={class:"stock-name-main"},wr={class:"stock-name-left"},xr={class:"name highlight"},Sr={class:"code"},kr={class:"stock-name-right"},Dr={class:"stock-progress-bar"},_r={class:"progress-text"},Cr={__name:"StockName",props:{name:String,code:String,price:[String,Number],change:[String,Number],changePercent:[String,Number],priceClass:String,progress:Number,progressText:String},setup(t){return(e,n)=>(B(),q("div",br,[h("div",yr,[h("div",wr,[h("div",xr,H(t.name),1),h("div",Sr,H(t.code),1),n[0]||(n[0]=h("div",{class:"star-area"},[h("span",{class:"star"},"‚òÖ")],-1))]),h("div",kr,[h("div",{class:$t(["price",t.priceClass])},H(t.price),3),h("div",{class:$t(["change",t.priceClass])},H(t.change>0?"+":"")+H(t.change)+" ("+H(t.changePercent)+"%) ",3)])]),h("div",Dr,[h("div",{class:"stock-progress-inner",style:oo({width:(t.progress||0)+"%"})},[h("span",_r,H(t.progressText||(t.progress||0)+"%"),1)],4)])]))}},Er=ft(Cr,[["__scopeId","data-v-e4a25520"]]),Tr={class:"stock-actions"},Ir={class:"sheet-content"},Or={class:"sheet-header"},Ar={class:"current-price"},Mr={class:"add-trade-section"},Yr={class:"trade-list"},$r=["onClick"],Pr={class:"trade-info"},Lr={class:"trade-details"},Fr={class:"trade-date"},Nr={class:"trade-amount"},Rr={class:"trade-total"},Wr={class:"total-amount"},Vr={key:0,class:"empty-trades"},Br={key:0,class:"trade-summary"},zr={class:"summary-item"},jr={class:"value"},Xr={class:"summary-item"},Hr={class:"value"},Ur={class:"summary-item"},qr={class:"sheet-content"},Kr={class:"sheet-header"},Gr={class:"strategy-list"},Jr={class:"strategy-status"},Zr={key:0,class:"enabled"},Qr={key:1,class:"disabled"},ei={class:"strategy-status"},ti={key:0,class:"enabled"},ni={key:1,class:"disabled"},oi={class:"strategy-status"},ai={key:0,class:"enabled"},ri={key:1,class:"disabled"},ii={class:"strategy-status"},si={key:0,class:"enabled"},li={key:1,class:"disabled"},ci={class:"sheet-content"},ui={class:"more-list"},di={class:"more-info"},fi={class:"trade-form"},hi={class:"form-actions"},pi={__name:"StockActions",props:{stockInfo:{type:Object,required:!0}},setup(t,{expose:e}){const n=t,o=ct(),a=W(!1),r=W(!1),i=W(!1),s=W(!1),c=W(!1),u=W(null),f=W(!1),d=W(!1),l=ee(()=>{if(!n.stockInfo)return 0;const Y=n.stockInfo.price;if(typeof Y=="string"){const w=parseFloat(Y);return isNaN(w)?0:w}return typeof Y=="number"?Y:0}),g=W({type:"",shares:"",price:"",date:new Date().toISOString().split("T")[0],note:""}),p=W([]),m=W({stopLoss:{enabled:!1,price:0,percentage:10},takeProfit:{enabled:!1,price:0,percentage:15},priceAlert:{enabled:!1,alerts:[]},autoInvest:{enabled:!1,amount:1e4,frequency:"monthly"}}),v=[{name:"Ë≤∑ÂÖ•",value:"buy"},{name:"Ë≥£Âá∫",value:"sell"}],y=ee(()=>p.value.reduce((Y,w)=>w.type==="buy"?Y+w.shares:Y-w.shares,0)),S=ee(()=>{const Y=p.value.filter(ge=>ge.type==="buy"),w=Y.reduce((ge,ye)=>ge+ye.shares*ye.price,0),P=Y.reduce((ge,ye)=>ge+ye.shares,0);return P>0?w/P:0}),k=ee(()=>{if(!l.value||y.value===0)return 0;const Y=y.value*l.value,P=p.value.filter(ve=>ve.type==="buy").reduce((ve,we)=>ve+we.shares*we.price,0),ye=p.value.filter(ve=>ve.type==="sell").reduce((ve,we)=>ve+we.shares*we.price,0);return Y+ye-P});function O(){if(!n.stockInfo)return;const Y=n.stockInfo.code||n.stockInfo.id,w=localStorage.getItem(`tradeRecords_${Y}`);w?p.value=JSON.parse(w):Y==="2330"?p.value=[{id:1,type:"buy",shares:1e3,price:550,date:"2024-01-15",note:"È¶ñÊ¨°Ë≤∑ÂÖ•"},{id:2,type:"buy",shares:500,price:520,date:"2024-02-10",note:"Âä†Á¢ºË≤∑ÂÖ•"}]:p.value=[]}function b(){if(!n.stockInfo)return;const Y=n.stockInfo.code||n.stockInfo.id,w=localStorage.getItem(`strategies_${Y}`);w&&(m.value={...m.value,...JSON.parse(w)})}function D(){if(!n.stockInfo)return;const Y=n.stockInfo.code||n.stockInfo.id;localStorage.setItem(`tradeRecords_${Y}`,JSON.stringify(p.value))}function I(Y){return new Date(Y).toLocaleDateString("zh-TW")}function _(){O(),a.value=!0}function $(){b(),r.value=!0}function C(){i.value=!0}function E(){u.value=null,g.value={type:"",shares:"",price:l.value>0?l.value.toString():"",date:new Date().toISOString().split("T")[0],note:""},s.value=!0}function T(Y){u.value=Y,g.value={type:Y.type,shares:Y.shares.toString(),price:Y.price.toString(),date:Y.date,note:Y.note||""},a.value=!1,s.value=!0}function j(){c.value=!0}function L(Y){g.value.type=Y.value,c.value=!1}function U(){if(!g.value.type||!g.value.shares||!g.value.price){mt("Ë´ãÂ°´ÂØ´ÂøÖË¶ÅÊ¨Ñ‰Ωç");return}f.value=!0;try{const Y={type:g.value.type,shares:parseInt(g.value.shares),price:parseFloat(g.value.price),date:g.value.date,note:g.value.note};if(u.value){const w=p.value.findIndex(P=>P.id===u.value.id);w!==-1&&(p.value[w]={...p.value[w],...Y}),Ge("‰∫§ÊòìË®òÈåÑÂ∑≤Êõ¥Êñ∞")}else Y.id=Date.now(),p.value.push(Y),Ge("‰∫§ÊòìË®òÈåÑÂ∑≤Êñ∞Â¢û");s.value=!1,D()}catch{mt("Êìç‰ΩúÂ§±Êïó")}finally{f.value=!1}}function R(){Tn({title:"Á¢∫Ë™çÂà™Èô§",message:"Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÁ≠Ü‰∫§ÊòìË®òÈåÑÂóéÔºü",showCancelButton:!0,confirmButtonText:"Âà™Èô§",cancelButtonText:"ÂèñÊ∂à"}).then(()=>{const Y=p.value.findIndex(w=>w.id===u.value.id);Y!==-1&&(p.value.splice(Y,1),Ge("‰∫§ÊòìË®òÈåÑÂ∑≤Âà™Èô§"),s.value=!1,D())}).catch(()=>{})}function K(){le("ÂÅúÊêçË®≠ÂÆöÂäüËÉΩÈñãÁôº‰∏≠")}function ae(){le("ÂÅúÂà©Ë®≠ÂÆöÂäüËÉΩÈñãÁôº‰∏≠")}function re(){le("ÂÉπÊ†ºÊèêÈÜíÂäüËÉΩÈñãÁôº‰∏≠")}function Me(){le("ÂÆöÊúüÂÆöÈ°çÂäüËÉΩÈñãÁôº‰∏≠")}function ie(){le("ÊäÄË°ìÂàÜÊûêÂäüËÉΩÈñãÁôº‰∏≠")}function Ye(){le("Áõ∏ÈóúÊñ∞ËÅûÂäüËÉΩÈñãÁôº‰∏≠")}function Ne(){le("Ë≤°ÂãôÂ†±Ë°®ÂäüËÉΩÈñãÁôº‰∏≠")}function Vt(){d.value=!d.value,Ge(d.value?"Â∑≤Âä†ÂÖ•ÈóúÊ≥®":"Â∑≤ÁßªÈô§ÈóúÊ≥®"),i.value=!1}function Bt(){le("ÂàÜ‰∫´ÂäüËÉΩÈñãÁôº‰∏≠")}function zt(){le("ÂåØÂá∫ÂäüËÉΩÈñãÁôº‰∏≠")}async function jt(){if(!n.stockInfo)return;const Y=n.stockInfo.code||n.stockInfo.id,w=n.stockInfo.name||Y;Tn({title:"Á¢∫Ë™çÂà™Èô§",message:`Á¢∫ÂÆöË¶ÅÂà™Èô§„Äå${w}„ÄçÁöÑÊâÄÊúâÁõ∏ÈóúÊï∏ÊìöÂóéÔºü

Ê≠§Êìç‰ΩúÂ∞áÊ∏ÖÈô§Ôºö
‚Ä¢ Pinia Store ‰∏≠ÁöÑËÇ°Á•®Ë≥áÊñô
‚Ä¢ IndexedDB ‰∏≠ÁöÑ‰∫§ÊòìË®òÈåÑ
‚Ä¢ IndexedDB ‰∏≠ÁöÑÂÉπÊ†ºÊï∏Êìö

Ê≠§Êìç‰ΩúÁÑ°Ê≥ïÂæ©ÂéüÔºÅ`,showCancelButton:!0,confirmButtonText:"Âà™Èô§",confirmButtonColor:"#ee0a24",cancelButtonText:"ÂèñÊ∂à"}).then(async()=>{try{const P=await o.removeStockFromList(Y);if(!P.success){mt(`ÂæûËÇ°Á•®Ê∏ÖÂñÆÁßªÈô§Â§±ÊïóÔºö${P.message}`);return}await ea(Y),await(await ta()).delete("user-stock-data",Y),i.value=!1,Ge(`Â∑≤Âà™Èô§„Äå${w}„ÄçÁöÑÊâÄÊúâÁõ∏ÈóúÊï∏Êìö`)}catch(P){console.error("Âà™Èô§ËÇ°Á•®Êï∏ÊìöÂ§±Êïó:",P),mt("Âà™Èô§Â§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶")}}).catch(()=>{})}return e({showTradeSheet:_,showStrategySheet:$,showMoreSheet:C}),lt(()=>{O(),b()}),(Y,w)=>(B(),q("div",Tr,[N(X(Ie),{show:a.value,"onUpdate:show":w[0]||(w[0]=P=>a.value=P),title:"‰∫§ÊòìË®òÈåÑ","cancel-text":"ÈóúÈñâ",class:"trade-action-sheet"},{default:ne(()=>[h("div",Ir,[h("div",Or,[h("h3",null,H(t.stockInfo.name)+" ("+H(t.stockInfo.code)+")",1),h("p",Ar," ÁèæÂÉπÔºöNT$ "+H(l.value?l.value.toLocaleString():"--"),1)]),h("div",Mr,[N(X(Fe),{type:"primary",block:"",onClick:E,icon:"plus"},{default:ne(()=>w[10]||(w[10]=[je(" Êñ∞Â¢û‰∫§ÊòìË®òÈåÑ ",-1)])),_:1,__:[10]})]),h("div",Yr,[(B(!0),q(xt,null,dn(p.value,P=>(B(),q("div",{key:P.id,class:"trade-item",onClick:ge=>T(P)},[h("div",Pr,[h("div",{class:$t(["trade-type",P.type])},H(P.type==="buy"?"Ë≤∑ÂÖ•":"Ë≥£Âá∫"),3),h("div",Lr,[h("p",Fr,H(I(P.date)),1),h("p",Nr,H(P.shares)+"ËÇ° @ NT$ "+H(P.price),1)])]),h("div",Rr,[h("span",Wr,"NT$ "+H((P.shares*P.price).toLocaleString()),1)])],8,$r))),128)),p.value.length===0?(B(),q("div",Vr,[w[12]||(w[12]=h("p",null,"Â∞öÁÑ°‰∫§ÊòìË®òÈåÑ",-1)),N(X(Fe),{type:"primary",onClick:E},{default:ne(()=>w[11]||(w[11]=[je("Êñ∞Â¢ûÁ¨¨‰∏ÄÁ≠Ü‰∫§Êòì",-1)])),_:1,__:[11]})])):tt("",!0)]),p.value.length>0?(B(),q("div",Br,[h("div",zr,[w[13]||(w[13]=h("span",{class:"label"},"ÊåÅÊúâËÇ°Êï∏",-1)),h("span",jr,H(y.value)+"ËÇ°",1)]),h("div",Xr,[w[14]||(w[14]=h("span",{class:"label"},"Âπ≥ÂùáÊàêÊú¨",-1)),h("span",Hr,"NT$ "+H(S.value.toFixed(2)),1)]),h("div",Ur,[w[15]||(w[15]=h("span",{class:"label"},"ÊêçÁõä",-1)),h("span",{class:$t(["value",{profit:k.value>0,loss:k.value<0}])},H(k.value>0?"+":"")+"NT$ "+H(Math.abs(k.value).toLocaleString()),3)])])):tt("",!0)])]),_:1},8,["show"]),N(X(Ie),{show:r.value,"onUpdate:show":w[1]||(w[1]=P=>r.value=P),title:"ÊäïË≥áÁ≠ñÁï•","cancel-text":"ÈóúÈñâ",class:"strategy-action-sheet"},{default:ne(()=>[h("div",qr,[h("div",Kr,[h("h3",null,H(t.stockInfo.name)+" Á≠ñÁï•Ë®≠ÂÆö",1)]),h("div",Gr,[h("div",{class:"strategy-item",onClick:K},[w[16]||(w[16]=h("div",{class:"strategy-icon"},"üõ°Ô∏è",-1)),w[17]||(w[17]=h("div",{class:"strategy-info"},[h("h4",null,"ÂÅúÊêçË®≠ÂÆö"),h("p",null,"Ëá™ÂãïÂÅúÊêç‰øùË≠∑")],-1)),h("div",Jr,[m.value.stopLoss.enabled?(B(),q("span",Zr,"Â∑≤ÂïüÁî®")):(B(),q("span",Qr,"Êú™Ë®≠ÂÆö"))])]),h("div",{class:"strategy-item",onClick:ae},[w[18]||(w[18]=h("div",{class:"strategy-icon"},"üéØ",-1)),w[19]||(w[19]=h("div",{class:"strategy-info"},[h("h4",null,"ÂÅúÂà©Ë®≠ÂÆö"),h("p",null,"Ëá™ÂãïÁç≤Âà©‰∫ÜÁµê")],-1)),h("div",ei,[m.value.takeProfit.enabled?(B(),q("span",ti,"Â∑≤ÂïüÁî®")):(B(),q("span",ni,"Êú™Ë®≠ÂÆö"))])]),h("div",{class:"strategy-item",onClick:re},[w[20]||(w[20]=h("div",{class:"strategy-icon"},"üîî",-1)),w[21]||(w[21]=h("div",{class:"strategy-info"},[h("h4",null,"ÂÉπÊ†ºÊèêÈÜí"),h("p",null,"Âà∞ÂÉπÈÄöÁü•ÊèêÈÜí")],-1)),h("div",oi,[m.value.priceAlert.enabled?(B(),q("span",ai,H(m.value.priceAlert.alerts.length)+"ÂÄãÊèêÈÜí",1)):(B(),q("span",ri,"Êú™Ë®≠ÂÆö"))])]),h("div",{class:"strategy-item",onClick:Me},[w[22]||(w[22]=h("div",{class:"strategy-icon"},"üîÑ",-1)),w[23]||(w[23]=h("div",{class:"strategy-info"},[h("h4",null,"ÂÆöÊúüÂÆöÈ°ç"),h("p",null,"Ëá™ÂãïÊäïË≥áË®àÂäÉ")],-1)),h("div",ii,[m.value.autoInvest.enabled?(B(),q("span",si,"Â∑≤ÂïüÁî®")):(B(),q("span",li,"Êú™Ë®≠ÂÆö"))])])])])]),_:1},8,["show"]),N(X(Ie),{show:i.value,"onUpdate:show":w[2]||(w[2]=P=>i.value=P),title:"Êõ¥Â§öÈÅ∏È†Ö","cancel-text":"ÈóúÈñâ",class:"more-action-sheet"},{default:ne(()=>[h("div",ci,[h("div",ui,[h("div",{class:"more-item",onClick:ie},w[24]||(w[24]=[h("div",{class:"more-icon"},"üìä",-1),h("div",{class:"more-info"},[h("h4",null,"ÊäÄË°ìÂàÜÊûê"),h("p",null,"Êü•ÁúãÊäÄË°ìÊåáÊ®ô")],-1)])),h("div",{class:"more-item",onClick:Ye},w[25]||(w[25]=[h("div",{class:"more-icon"},"üì∞",-1),h("div",{class:"more-info"},[h("h4",null,"Áõ∏ÈóúÊñ∞ËÅû"),h("p",null,"ÊúÄÊñ∞Ë≤°Á∂ìË≥áË®ä")],-1)])),h("div",{class:"more-item",onClick:Ne},w[26]||(w[26]=[h("div",{class:"more-icon"},"üìà",-1),h("div",{class:"more-info"},[h("h4",null,"Ë≤°ÂãôÂ†±Ë°®"),h("p",null,"Ë≤°ÂãôÊï∏ÊìöÂàÜÊûê")],-1)])),h("div",{class:"more-item",onClick:Vt},[w[27]||(w[27]=h("div",{class:"more-icon"},"‚≠ê",-1)),h("div",di,[h("h4",null,H(d.value?"ÁßªÈô§ÈóúÊ≥®":"Âä†ÂÖ•ÈóúÊ≥®"),1),h("p",null,H(d.value?"ÂæûÈóúÊ≥®Ê∏ÖÂñÆÁßªÈô§":"Âä†ÂÖ•Ëá™ÈÅ∏ËÇ°"),1)])]),h("div",{class:"more-item",onClick:Bt},w[28]||(w[28]=[h("div",{class:"more-icon"},"üì§",-1),h("div",{class:"more-info"},[h("h4",null,"ÂàÜ‰∫´"),h("p",null,"ÂàÜ‰∫´ËÇ°Á•®Ë≥áË®ä")],-1)])),h("div",{class:"more-item",onClick:zt},w[29]||(w[29]=[h("div",{class:"more-icon"},"üíæ",-1),h("div",{class:"more-info"},[h("h4",null,"ÂåØÂá∫Ë≥áÊñô"),h("p",null,"ÂåØÂá∫‰∫§ÊòìË®òÈåÑ")],-1)])),h("div",{class:"more-item danger",onClick:jt},w[30]||(w[30]=[h("div",{class:"more-icon"},"üóëÔ∏è",-1),h("div",{class:"more-info"},[h("h4",null,"Âà™Èô§"),h("p",null,"Ê∏ÖÈô§ËÇ°Á•®Áõ∏ÈóúÊï∏Êìö")],-1)]))])])]),_:1},8,["show"]),N(X(Ie),{show:s.value,"onUpdate:show":w[8]||(w[8]=P=>s.value=P),title:u.value?"Á∑®ËºØ‰∫§Êòì":"Êñ∞Â¢û‰∫§ÊòìË®òÈåÑ","cancel-text":"ÂèñÊ∂à"},{default:ne(()=>[h("div",fi,[N(X(Be),{modelValue:g.value.type,"onUpdate:modelValue":w[3]||(w[3]=P=>g.value.type=P),label:"‰∫§ÊòìÈ°ûÂûã",readonly:"",onClick:j,placeholder:g.value.type==="buy"?"Ë≤∑ÂÖ•":g.value.type==="sell"?"Ë≥£Âá∫":"Ë´ãÈÅ∏Êìá"},null,8,["modelValue","placeholder"]),N(X(Be),{modelValue:g.value.shares,"onUpdate:modelValue":w[4]||(w[4]=P=>g.value.shares=P),label:"ËÇ°Êï∏",type:"number",placeholder:"Ë´ãËº∏ÂÖ•ËÇ°Êï∏"},null,8,["modelValue"]),N(X(Be),{modelValue:g.value.price,"onUpdate:modelValue":w[5]||(w[5]=P=>g.value.price=P),label:"ÂÉπÊ†º",type:"number",placeholder:"Ë´ãËº∏ÂÖ•Êàê‰∫§ÂÉπÊ†º"},null,8,["modelValue"]),N(X(Be),{modelValue:g.value.date,"onUpdate:modelValue":w[6]||(w[6]=P=>g.value.date=P),label:"‰∫§ÊòìÊó•Êúü",type:"date"},null,8,["modelValue"]),N(X(Be),{modelValue:g.value.note,"onUpdate:modelValue":w[7]||(w[7]=P=>g.value.note=P),label:"ÂÇôË®ª",placeholder:"ÈÅ∏Â°´",type:"textarea",rows:"2"},null,8,["modelValue"]),h("div",hi,[N(X(Fe),{type:"primary",size:"large",block:"",onClick:U,loading:f.value},{default:ne(()=>[je(H(u.value?"Êõ¥Êñ∞":"Êñ∞Â¢û"),1)]),_:1},8,["loading"]),u.value?(B(),ut(X(Fe),{key:0,type:"danger",size:"large",block:"",plain:"",onClick:R,style:{"margin-top":"12px"}},{default:ne(()=>w[31]||(w[31]=[je(" Âà™Èô§Ë®òÈåÑ ",-1)])),_:1,__:[31]})):tt("",!0)])])]),_:1},8,["show","title"]),N(X(Ie),{show:c.value,"onUpdate:show":w[9]||(w[9]=P=>c.value=P),title:"ÈÅ∏Êìá‰∫§ÊòìÈ°ûÂûã",actions:v,"cancel-text":"ÂèñÊ∂à",onSelect:L},null,8,["show"])]))}},gi=ft(pi,[["__scopeId","data-v-fa889fff"]]);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ln(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,o)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ln(Object(n),!0).forEach(function(o){mi(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function Et(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Et=function(e){return typeof e}:Et=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(t)}function mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ce(){return Ce=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Ce.apply(this,arguments)}function vi(t,e){if(t==null)return{};var n={},o=Object.keys(t),a,r;for(r=0;r<o.length;r++)a=o[r],!(e.indexOf(a)>=0)&&(n[a]=t[a]);return n}function bi(t,e){if(t==null)return{};var n=vi(t,e),o,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}var yi="1.14.0";function _e(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Ee=_e(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ht=_e(/Edge/i),Fn=_e(/firefox/i),nt=_e(/safari/i)&&!_e(/chrome/i)&&!_e(/android/i),wo=_e(/iP(ad|od|hone)/i),wi=_e(/chrome/i)&&_e(/android/i),xo={capture:!1,passive:!1};function z(t,e,n){t.addEventListener(e,n,!Ee&&xo)}function V(t,e,n){t.removeEventListener(e,n,!Ee&&xo)}function Pt(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function xi(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function xe(t,e,n,o){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Pt(t,e):Pt(t,e))||o&&t===n)return t;if(t===n)break}while(t=xi(t))}return null}var Nn=/\s+/g;function fe(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(Nn," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(Nn," ")}}function A(t,e,n){var o=t&&t.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in o)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),o[e]=n+(typeof n=="string"?"":"px")}}function He(t,e){var n="";if(typeof t=="string")n=t;else do{var o=A(t,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function So(t,e,n){if(t){var o=t.getElementsByTagName(e),a=0,r=o.length;if(n)for(;a<r;a++)n(o[a],a);return o}return[]}function Se(){var t=document.scrollingElement;return t||document.documentElement}function oe(t,e,n,o,a){if(!(!t.getBoundingClientRect&&t!==window)){var r,i,s,c,u,f,d;if(t!==window&&t.parentNode&&t!==Se()?(r=t.getBoundingClientRect(),i=r.top,s=r.left,c=r.bottom,u=r.right,f=r.height,d=r.width):(i=0,s=0,c=window.innerHeight,u=window.innerWidth,f=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(a=a||t.parentNode,!Ee))do if(a&&a.getBoundingClientRect&&(A(a,"transform")!=="none"||n&&A(a,"position")!=="static")){var l=a.getBoundingClientRect();i-=l.top+parseInt(A(a,"border-top-width")),s-=l.left+parseInt(A(a,"border-left-width")),c=i+r.height,u=s+r.width;break}while(a=a.parentNode);if(o&&t!==window){var g=He(a||t),p=g&&g.a,m=g&&g.d;g&&(i/=m,s/=p,d/=p,f/=m,c=i+f,u=s+d)}return{top:i,left:s,bottom:c,right:u,width:d,height:f}}}function Rn(t,e,n){for(var o=Ae(t,!0),a=oe(t)[e];o;){var r=oe(o)[n],i=void 0;if(i=a>=r,!i)return o;if(o===Se())break;o=Ae(o,!1)}return!1}function qe(t,e,n,o){for(var a=0,r=0,i=t.children;r<i.length;){if(i[r].style.display!=="none"&&i[r]!==M.ghost&&(o||i[r]!==M.dragged)&&xe(i[r],n.draggable,t,!1)){if(a===e)return i[r];a++}r++}return null}function wn(t,e){for(var n=t.lastElementChild;n&&(n===M.ghost||A(n,"display")==="none"||e&&!Pt(n,e));)n=n.previousElementSibling;return n||null}function me(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==M.clone&&(!e||Pt(t,e))&&n++;return n}function Wn(t){var e=0,n=0,o=Se();if(t)do{var a=He(t),r=a.a,i=a.d;e+=t.scrollLeft*r,n+=t.scrollTop*i}while(t!==o&&(t=t.parentNode));return[e,n]}function Si(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n)}return-1}function Ae(t,e){if(!t||!t.getBoundingClientRect)return Se();var n=t,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=A(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Se();if(o||e)return n;o=!0}}while(n=n.parentNode);return Se()}function ki(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function Zt(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var ot;function ko(t,e){return function(){if(!ot){var n=arguments,o=this;n.length===1?t.call(o,n[0]):t.apply(o,n),ot=setTimeout(function(){ot=void 0},e)}}}function Di(){clearTimeout(ot),ot=void 0}function Do(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function _o(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var pe="Sortable"+new Date().getTime();function _i(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(a){if(!(A(a,"display")==="none"||a===M.ghost)){t.push({target:a,rect:oe(a)});var r=ke({},t[t.length-1].rect);if(a.thisAnimationDuration){var i=He(a,!0);i&&(r.top-=i.f,r.left-=i.e)}a.fromRect=r}})}},addAnimationState:function(o){t.push(o)},removeAnimationState:function(o){t.splice(Si(t,{target:o}),1)},animateAll:function(o){var a=this;if(!this.options.animation){clearTimeout(e),typeof o=="function"&&o();return}var r=!1,i=0;t.forEach(function(s){var c=0,u=s.target,f=u.fromRect,d=oe(u),l=u.prevFromRect,g=u.prevToRect,p=s.rect,m=He(u,!0);m&&(d.top-=m.f,d.left-=m.e),u.toRect=d,u.thisAnimationDuration&&Zt(l,d)&&!Zt(f,d)&&(p.top-d.top)/(p.left-d.left)===(f.top-d.top)/(f.left-d.left)&&(c=Ei(p,l,g,a.options)),Zt(d,f)||(u.prevFromRect=f,u.prevToRect=d,c||(c=a.options.animation),a.animate(u,p,d,c)),c&&(r=!0,i=Math.max(i,c),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},c),u.thisAnimationDuration=c)}),clearTimeout(e),r?e=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),t=[]},animate:function(o,a,r,i){if(i){A(o,"transition",""),A(o,"transform","");var s=He(this.el),c=s&&s.a,u=s&&s.d,f=(a.left-r.left)/(c||1),d=(a.top-r.top)/(u||1);o.animatingX=!!f,o.animatingY=!!d,A(o,"transform","translate3d("+f+"px,"+d+"px,0)"),this.forRepaintDummy=Ci(o),A(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),A(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){A(o,"transition",""),A(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function Ci(t){return t.offsetWidth}function Ei(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}var We=[],Qt={initializeByDefault:!0},pt={mount:function(e){for(var n in Qt)Qt.hasOwnProperty(n)&&!(n in e)&&(e[n]=Qt[n]);We.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),We.push(e)},pluginEvent:function(e,n,o){var a=this;this.eventCanceled=!1,o.cancel=function(){a.eventCanceled=!0};var r=e+"Global";We.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][r]&&n[i.pluginName][r](ke({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](ke({sortable:n},o)))})},initializePlugins:function(e,n,o,a){We.forEach(function(s){var c=s.pluginName;if(!(!e.options[c]&&!s.initializeByDefault)){var u=new s(e,n,e.options);u.sortable=e,u.options=e.options,e[c]=u,Ce(o,u.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var i=this.modifyOption(e,r,e.options[r]);typeof i<"u"&&(e.options[r]=i)}},getEventProperties:function(e,n){var o={};return We.forEach(function(a){typeof a.eventProperties=="function"&&Ce(o,a.eventProperties.call(n[a.pluginName],e))}),o},modifyOption:function(e,n,o){var a;return We.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(a=r.optionListeners[n].call(e[r.pluginName],o))}),a}};function Ti(t){var e=t.sortable,n=t.rootEl,o=t.name,a=t.targetEl,r=t.cloneEl,i=t.toEl,s=t.fromEl,c=t.oldIndex,u=t.newIndex,f=t.oldDraggableIndex,d=t.newDraggableIndex,l=t.originalEvent,g=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[pe],!!e){var m,v=e.options,y="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Ee&&!ht?m=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(o,!0,!0)),m.to=i||n,m.from=s||n,m.item=a||n,m.clone=r,m.oldIndex=c,m.newIndex=u,m.oldDraggableIndex=f,m.newDraggableIndex=d,m.originalEvent=l,m.pullMode=g?g.lastPutMode:void 0;var S=ke(ke({},p),pt.getEventProperties(o,e));for(var k in S)m[k]=S[k];n&&n.dispatchEvent(m),v[y]&&v[y].call(e,m)}}var Ii=["evt"],de=function(e,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.evt,r=bi(o,Ii);pt.pluginEvent.bind(M)(e,n,ke({dragEl:x,parentEl:Z,ghostEl:F,rootEl:J,nextEl:Le,lastDownEl:Tt,cloneEl:Q,cloneHidden:Oe,dragStarted:Ze,putSortable:se,activeSortable:M.active,originalEvent:a,oldIndex:Xe,oldDraggableIndex:at,newIndex:he,newDraggableIndex:Te,hideGhostForTarget:Io,unhideGhostForTarget:Oo,cloneNowHidden:function(){Oe=!0},cloneNowShown:function(){Oe=!1},dispatchSortableEvent:function(s){ue({sortable:n,name:s,originalEvent:a})}},r))};function ue(t){Ti(ke({putSortable:se,cloneEl:Q,targetEl:x,rootEl:J,oldIndex:Xe,oldDraggableIndex:at,newIndex:he,newDraggableIndex:Te},t))}var x,Z,F,J,Le,Tt,Q,Oe,Xe,he,at,Te,vt,se,ze=!1,Lt=!1,Ft=[],$e,be,en,tn,Vn,Bn,Ze,Ve,rt,it=!1,bt=!1,It,ce,nn=[],hn=!1,Nt=[],Wt=typeof document<"u",yt=wo,zn=ht||Ee?"cssFloat":"float",Oi=Wt&&!wi&&!wo&&"draggable"in document.createElement("div"),Co=function(){if(Wt){if(Ee)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),Eo=function(e,n){var o=A(e),a=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=qe(e,0,n),i=qe(e,1,n),s=r&&A(r),c=i&&A(i),u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+oe(r).width,f=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+oe(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var d=s.float==="left"?"left":"right";return i&&(c.clear==="both"||c.clear===d)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||u>=a&&o[zn]==="none"||i&&o[zn]==="none"&&u+f>a)?"vertical":"horizontal"},Ai=function(e,n,o){var a=o?e.left:e.top,r=o?e.right:e.bottom,i=o?e.width:e.height,s=o?n.left:n.top,c=o?n.right:n.bottom,u=o?n.width:n.height;return a===s||r===c||a+i/2===s+u/2},Mi=function(e,n){var o;return Ft.some(function(a){var r=a[pe].options.emptyInsertThreshold;if(!(!r||wn(a))){var i=oe(a),s=e>=i.left-r&&e<=i.right+r,c=n>=i.top-r&&n<=i.bottom+r;if(s&&c)return o=a}}),o},To=function(e){function n(r,i){return function(s,c,u,f){var d=s.options.group.name&&c.options.group.name&&s.options.group.name===c.options.group.name;if(r==null&&(i||d))return!0;if(r==null||r===!1)return!1;if(i&&r==="clone")return r;if(typeof r=="function")return n(r(s,c,u,f),i)(s,c,u,f);var l=(i?s:c).options.group.name;return r===!0||typeof r=="string"&&r===l||r.join&&r.indexOf(l)>-1}}var o={},a=e.group;(!a||Et(a)!="object")&&(a={name:a}),o.name=a.name,o.checkPull=n(a.pull,!0),o.checkPut=n(a.put),o.revertClone=a.revertClone,e.group=o},Io=function(){!Co&&F&&A(F,"display","none")},Oo=function(){!Co&&F&&A(F,"display","")};Wt&&document.addEventListener("click",function(t){if(Lt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Lt=!1,!1},!0);var Pe=function(e){if(x){e=e.touches?e.touches[0]:e;var n=Mi(e.clientX,e.clientY);if(n){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[pe]._onDragOver(o)}}},Yi=function(e){x&&x.parentNode[pe]._isOutsideThisEl(e.target)};function M(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Ce({},e),t[pe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Eo(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,s){i.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:M.supportPointer!==!1&&"PointerEvent"in window&&!nt,emptyInsertThreshold:5};pt.initializePlugins(this,t,n);for(var o in n)!(o in e)&&(e[o]=n[o]);To(e);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=e.forceFallback?!1:Oi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?z(t,"pointerdown",this._onTapStart):(z(t,"mousedown",this._onTapStart),z(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(z(t,"dragover",this),z(t,"dragenter",this)),Ft.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ce(this,_i())}M.prototype={constructor:M,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ve=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,x):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,o=this.el,a=this.options,r=a.preventOnFilter,i=e.type,s=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(s||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,f=a.filter;if(Vi(o),!x&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&nt&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=xe(c,a.draggable,o,!1),!(c&&c.animated)&&Tt!==c)){if(Xe=me(c),at=me(c,a.draggable),typeof f=="function"){if(f.call(this,e,c,this)){ue({sortable:n,rootEl:u,name:"filter",targetEl:c,toEl:o,fromEl:o}),de("filter",n,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(d){if(d=xe(u,d.trim(),o,!1),d)return ue({sortable:n,rootEl:d,name:"filter",targetEl:c,fromEl:o,toEl:o}),de("filter",n,{evt:e}),!0}),f)){r&&e.cancelable&&e.preventDefault();return}a.handle&&!xe(u,a.handle,o,!1)||this._prepareDragStart(e,s,c)}}},_prepareDragStart:function(e,n,o){var a=this,r=a.el,i=a.options,s=r.ownerDocument,c;if(o&&!x&&o.parentNode===r){var u=oe(o);if(J=r,x=o,Z=x.parentNode,Le=x.nextSibling,Tt=o,vt=i.group,M.dragged=x,$e={target:x,clientX:(n||e).clientX,clientY:(n||e).clientY},Vn=$e.clientX-u.left,Bn=$e.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,x.style["will-change"]="all",c=function(){if(de("delayEnded",a,{evt:e}),M.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Fn&&a.nativeDraggable&&(x.draggable=!0),a._triggerDragStart(e,n),ue({sortable:a,name:"choose",originalEvent:e}),fe(x,i.chosenClass,!0)},i.ignore.split(",").forEach(function(f){So(x,f.trim(),on)}),z(s,"dragover",Pe),z(s,"mousemove",Pe),z(s,"touchmove",Pe),z(s,"mouseup",a._onDrop),z(s,"touchend",a._onDrop),z(s,"touchcancel",a._onDrop),Fn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,x.draggable=!0),de("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(ht||Ee))){if(M.eventCanceled){this._onDrop();return}z(s,"mouseup",a._disableDelayedDrag),z(s,"touchend",a._disableDelayedDrag),z(s,"touchcancel",a._disableDelayedDrag),z(s,"mousemove",a._delayedDragTouchMoveHandler),z(s,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&z(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(c,i.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){x&&on(x),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;V(e,"mouseup",this._disableDelayedDrag),V(e,"touchend",this._disableDelayedDrag),V(e,"touchcancel",this._disableDelayedDrag),V(e,"mousemove",this._delayedDragTouchMoveHandler),V(e,"touchmove",this._delayedDragTouchMoveHandler),V(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):n?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(x,"dragend",this),z(J,"dragstart",this._onDragStart));try{document.selection?Ot(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ze=!1,J&&x){de("dragStarted",this,{evt:n}),this.nativeDraggable&&z(document,"dragover",Yi);var o=this.options;!e&&fe(x,o.dragClass,!1),fe(x,o.ghostClass,!0),M.active=this,e&&this._appendGhost(),ue({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(be){this._lastX=be.clientX,this._lastY=be.clientY,Io();for(var e=document.elementFromPoint(be.clientX,be.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(be.clientX,be.clientY),e!==n);)n=e;if(x.parentNode[pe]._isOutsideThisEl(e),n)do{if(n[pe]){var o=void 0;if(o=n[pe]._onDragOver({clientX:be.clientX,clientY:be.clientY,target:e,rootEl:n}),o&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);Oo()}},_onTouchMove:function(e){if($e){var n=this.options,o=n.fallbackTolerance,a=n.fallbackOffset,r=e.touches?e.touches[0]:e,i=F&&He(F,!0),s=F&&i&&i.a,c=F&&i&&i.d,u=yt&&ce&&Wn(ce),f=(r.clientX-$e.clientX+a.x)/(s||1)+(u?u[0]-nn[0]:0)/(s||1),d=(r.clientY-$e.clientY+a.y)/(c||1)+(u?u[1]-nn[1]:0)/(c||1);if(!M.active&&!ze){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(F){i?(i.e+=f-(en||0),i.f+=d-(tn||0)):i={a:1,b:0,c:0,d:1,e:f,f:d};var l="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");A(F,"webkitTransform",l),A(F,"mozTransform",l),A(F,"msTransform",l),A(F,"transform",l),en=f,tn=d,be=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!F){var e=this.options.fallbackOnBody?document.body:J,n=oe(x,!0,yt,!0,e),o=this.options;if(yt){for(ce=e;A(ce,"position")==="static"&&A(ce,"transform")==="none"&&ce!==document;)ce=ce.parentNode;ce!==document.body&&ce!==document.documentElement?(ce===document&&(ce=Se()),n.top+=ce.scrollTop,n.left+=ce.scrollLeft):ce=Se(),nn=Wn(ce)}F=x.cloneNode(!0),fe(F,o.ghostClass,!1),fe(F,o.fallbackClass,!0),fe(F,o.dragClass,!0),A(F,"transition",""),A(F,"transform",""),A(F,"box-sizing","border-box"),A(F,"margin",0),A(F,"top",n.top),A(F,"left",n.left),A(F,"width",n.width),A(F,"height",n.height),A(F,"opacity","0.8"),A(F,"position",yt?"absolute":"fixed"),A(F,"zIndex","100000"),A(F,"pointerEvents","none"),M.ghost=F,e.appendChild(F),A(F,"transform-origin",Vn/parseInt(F.style.width)*100+"% "+Bn/parseInt(F.style.height)*100+"%")}},_onDragStart:function(e,n){var o=this,a=e.dataTransfer,r=o.options;if(de("dragStart",this,{evt:e}),M.eventCanceled){this._onDrop();return}de("setupClone",this),M.eventCanceled||(Q=_o(x),Q.draggable=!1,Q.style["will-change"]="",this._hideClone(),fe(Q,this.options.chosenClass,!1),M.clone=Q),o.cloneId=Ot(function(){de("clone",o),!M.eventCanceled&&(o.options.removeCloneOnHide||J.insertBefore(Q,x),o._hideClone(),ue({sortable:o,name:"clone"}))}),!n&&fe(x,r.dragClass,!0),n?(Lt=!0,o._loopId=setInterval(o._emulateDragOver,50)):(V(document,"mouseup",o._onDrop),V(document,"touchend",o._onDrop),V(document,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(o,a,x)),z(document,"drop",o),A(x,"transform","translateZ(0)")),ze=!0,o._dragStartId=Ot(o._dragStarted.bind(o,n,e)),z(document,"selectstart",o),Ze=!0,nt&&A(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,o=e.target,a,r,i,s=this.options,c=s.group,u=M.active,f=vt===c,d=s.sort,l=se||u,g,p=this,m=!1;if(hn)return;function v(ae,re){de(ae,p,ke({evt:e,isOwner:f,axis:g?"vertical":"horizontal",revert:i,dragRect:a,targetRect:r,canSort:d,fromSortable:l,target:o,completed:S,onMove:function(ie,Ye){return wt(J,n,x,a,ie,oe(ie),e,Ye)},changed:k},re))}function y(){v("dragOverAnimationCapture"),p.captureAnimationState(),p!==l&&l.captureAnimationState()}function S(ae){return v("dragOverCompleted",{insertion:ae}),ae&&(f?u._hideClone():u._showClone(p),p!==l&&(fe(x,se?se.options.ghostClass:u.options.ghostClass,!1),fe(x,s.ghostClass,!0)),se!==p&&p!==M.active?se=p:p===M.active&&se&&(se=null),l===p&&(p._ignoreWhileAnimating=o),p.animateAll(function(){v("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==l&&(l.animateAll(),l._ignoreWhileAnimating=null)),(o===x&&!x.animated||o===n&&!o.animated)&&(Ve=null),!s.dragoverBubble&&!e.rootEl&&o!==document&&(x.parentNode[pe]._isOutsideThisEl(e.target),!ae&&Pe(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function k(){he=me(x),Te=me(x,s.draggable),ue({sortable:p,name:"change",toEl:n,newIndex:he,newDraggableIndex:Te,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),o=xe(o,s.draggable,n,!0),v("dragOver"),M.eventCanceled)return m;if(x.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||p._ignoreWhileAnimating===o)return S(!1);if(Lt=!1,u&&!s.disabled&&(f?d||(i=Z!==J):se===this||(this.lastPutMode=vt.checkPull(this,u,x,e))&&c.checkPut(this,u,x,e))){if(g=this._getDirection(e,o)==="vertical",a=oe(x),v("dragOverValid"),M.eventCanceled)return m;if(i)return Z=J,y(),this._hideClone(),v("revert"),M.eventCanceled||(Le?J.insertBefore(x,Le):J.appendChild(x)),S(!0);var O=wn(n,s.draggable);if(!O||Fi(e,g,this)&&!O.animated){if(O===x)return S(!1);if(O&&n===e.target&&(o=O),o&&(r=oe(o)),wt(J,n,x,a,o,r,e,!!o)!==!1)return y(),n.appendChild(x),Z=n,k(),S(!0)}else if(O&&Li(e,g,this)){var b=qe(n,0,s,!0);if(b===x)return S(!1);if(o=b,r=oe(o),wt(J,n,x,a,o,r,e,!1)!==!1)return y(),n.insertBefore(x,b),Z=n,k(),S(!0)}else if(o.parentNode===n){r=oe(o);var D=0,I,_=x.parentNode!==n,$=!Ai(x.animated&&x.toRect||a,o.animated&&o.toRect||r,g),C=g?"top":"left",E=Rn(o,"top","top")||Rn(x,"top","top"),T=E?E.scrollTop:void 0;Ve!==o&&(I=r[C],it=!1,bt=!$&&s.invertSwap||_),D=Ni(e,o,r,g,$?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,bt,Ve===o);var j;if(D!==0){var L=me(x);do L-=D,j=Z.children[L];while(j&&(A(j,"display")==="none"||j===F))}if(D===0||j===o)return S(!1);Ve=o,rt=D;var U=o.nextElementSibling,R=!1;R=D===1;var K=wt(J,n,x,a,o,r,e,R);if(K!==!1)return(K===1||K===-1)&&(R=K===1),hn=!0,setTimeout(Pi,30),y(),R&&!U?n.appendChild(x):o.parentNode.insertBefore(x,R?U:o),E&&Do(E,0,T-E.scrollTop),Z=x.parentNode,I!==void 0&&!bt&&(It=Math.abs(I-oe(o)[C])),k(),S(!0)}if(n.contains(x))return S(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){V(document,"mousemove",this._onTouchMove),V(document,"touchmove",this._onTouchMove),V(document,"pointermove",this._onTouchMove),V(document,"dragover",Pe),V(document,"mousemove",Pe),V(document,"touchmove",Pe)},_offUpEvents:function(){var e=this.el.ownerDocument;V(e,"mouseup",this._onDrop),V(e,"touchend",this._onDrop),V(e,"pointerup",this._onDrop),V(e,"touchcancel",this._onDrop),V(document,"selectstart",this)},_onDrop:function(e){var n=this.el,o=this.options;if(he=me(x),Te=me(x,o.draggable),de("drop",this,{evt:e}),Z=x&&x.parentNode,he=me(x),Te=me(x,o.draggable),M.eventCanceled){this._nulling();return}ze=!1,bt=!1,it=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pn(this.cloneId),pn(this._dragStartId),this.nativeDraggable&&(V(document,"drop",this),V(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),nt&&A(document.body,"user-select",""),A(x,"transform",""),e&&(Ze&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),F&&F.parentNode&&F.parentNode.removeChild(F),(J===Z||se&&se.lastPutMode!=="clone")&&Q&&Q.parentNode&&Q.parentNode.removeChild(Q),x&&(this.nativeDraggable&&V(x,"dragend",this),on(x),x.style["will-change"]="",Ze&&!ze&&fe(x,se?se.options.ghostClass:this.options.ghostClass,!1),fe(x,this.options.chosenClass,!1),ue({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==Z?(he>=0&&(ue({rootEl:Z,name:"add",toEl:Z,fromEl:J,originalEvent:e}),ue({sortable:this,name:"remove",toEl:Z,originalEvent:e}),ue({rootEl:Z,name:"sort",toEl:Z,fromEl:J,originalEvent:e}),ue({sortable:this,name:"sort",toEl:Z,originalEvent:e})),se&&se.save()):he!==Xe&&he>=0&&(ue({sortable:this,name:"update",toEl:Z,originalEvent:e}),ue({sortable:this,name:"sort",toEl:Z,originalEvent:e})),M.active&&((he==null||he===-1)&&(he=Xe,Te=at),ue({sortable:this,name:"end",toEl:Z,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){de("nulling",this),J=x=Z=F=Le=Q=Tt=Oe=$e=be=Ze=he=Te=Xe=at=Ve=rt=se=vt=M.dragged=M.ghost=M.clone=M.active=null,Nt.forEach(function(e){e.checked=!0}),Nt.length=en=tn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":x&&(this._onDragOver(e),$i(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,o=this.el.children,a=0,r=o.length,i=this.options;a<r;a++)n=o[a],xe(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||Wi(n));return e},sort:function(e,n){var o={},a=this.el;this.toArray().forEach(function(r,i){var s=a.children[i];xe(s,this.options.draggable,a,!1)&&(o[r]=s)},this),n&&this.captureAnimationState(),e.forEach(function(r){o[r]&&(a.removeChild(o[r]),a.appendChild(o[r]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return xe(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var o=this.options;if(n===void 0)return o[e];var a=pt.modifyOption(this,e,n);typeof a<"u"?o[e]=a:o[e]=n,e==="group"&&To(o)},destroy:function(){de("destroy",this);var e=this.el;e[pe]=null,V(e,"mousedown",this._onTapStart),V(e,"touchstart",this._onTapStart),V(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(V(e,"dragover",this),V(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ft.splice(Ft.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Oe){if(de("hideClone",this),M.eventCanceled)return;A(Q,"display","none"),this.options.removeCloneOnHide&&Q.parentNode&&Q.parentNode.removeChild(Q),Oe=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Oe){if(de("showClone",this),M.eventCanceled)return;x.parentNode==J&&!this.options.group.revertClone?J.insertBefore(Q,x):Le?J.insertBefore(Q,Le):J.appendChild(Q),this.options.group.revertClone&&this.animate(x,Q),A(Q,"display",""),Oe=!1}}};function $i(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function wt(t,e,n,o,a,r,i,s){var c,u=t[pe],f=u.options.onMove,d;return window.CustomEvent&&!Ee&&!ht?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=t,c.dragged=n,c.draggedRect=o,c.related=a||e,c.relatedRect=r||oe(e),c.willInsertAfter=s,c.originalEvent=i,t.dispatchEvent(c),f&&(d=f.call(u,c,i)),d}function on(t){t.draggable=!1}function Pi(){hn=!1}function Li(t,e,n){var o=oe(qe(n.el,0,n.options,!0)),a=10;return e?t.clientX<o.left-a||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-a||t.clientY<o.bottom&&t.clientX<o.left}function Fi(t,e,n){var o=oe(wn(n.el,n.options.draggable)),a=10;return e?t.clientX>o.right+a||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+a}function Ni(t,e,n,o,a,r,i,s){var c=o?t.clientY:t.clientX,u=o?n.height:n.width,f=o?n.top:n.left,d=o?n.bottom:n.right,l=!1;if(!i){if(s&&It<u*a){if(!it&&(rt===1?c>f+u*r/2:c<d-u*r/2)&&(it=!0),it)l=!0;else if(rt===1?c<f+It:c>d-It)return-rt}else if(c>f+u*(1-a)/2&&c<d-u*(1-a)/2)return Ri(e)}return l=l||i,l&&(c<f+u*r/2||c>d-u*r/2)?c>f+u/2?1:-1:0}function Ri(t){return me(x)<me(t)?1:-1}function Wi(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function Vi(t){Nt.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&Nt.push(o)}}function Ot(t){return setTimeout(t,0)}function pn(t){return clearTimeout(t)}Wt&&z(document,"touchmove",function(t){(M.active||ze)&&t.cancelable&&t.preventDefault()});M.utils={on:z,off:V,css:A,find:So,is:function(e,n){return!!xe(e,n,e,!1)},extend:ki,throttle:ko,closest:xe,toggleClass:fe,clone:_o,index:me,nextTick:Ot,cancelNextTick:pn,detectDirection:Eo,getChild:qe};M.get=function(t){return t[pe]};M.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(M.utils=ke(ke({},M.utils),o.utils)),pt.mount(o)})};M.create=function(t,e){return new M(t,e)};M.version=yi;var te=[],Qe,gn,mn=!1,an,rn,Rt,et;function Bi(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):o.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?V(document,"dragover",this._handleAutoScroll):(V(document,"pointermove",this._handleFallbackAutoScroll),V(document,"touchmove",this._handleFallbackAutoScroll),V(document,"mousemove",this._handleFallbackAutoScroll)),jn(),At(),Di()},nulling:function(){Rt=gn=Qe=mn=et=an=rn=null,te.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var a=this,r=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(r,i);if(Rt=n,o||this.options.forceAutoScrollFallback||ht||Ee||nt){sn(n,this.options,s,o);var c=Ae(s,!0);mn&&(!et||r!==an||i!==rn)&&(et&&jn(),et=setInterval(function(){var u=Ae(document.elementFromPoint(r,i),!0);u!==c&&(c=u,At()),sn(n,a.options,u,o)},10),an=r,rn=i)}else{if(!this.options.bubbleScroll||Ae(s,!0)===Se()){At();return}sn(n,this.options,Ae(s,!1),!1)}}},Ce(t,{pluginName:"scroll",initializeByDefault:!0})}function At(){te.forEach(function(t){clearInterval(t.pid)}),te=[]}function jn(){clearInterval(et)}var sn=ko(function(t,e,n,o){if(e.scroll){var a=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,s=e.scrollSpeed,c=Se(),u=!1,f;gn!==n&&(gn=n,At(),Qe=e.scroll,f=e.scrollFn,Qe===!0&&(Qe=Ae(n,!0)));var d=0,l=Qe;do{var g=l,p=oe(g),m=p.top,v=p.bottom,y=p.left,S=p.right,k=p.width,O=p.height,b=void 0,D=void 0,I=g.scrollWidth,_=g.scrollHeight,$=A(g),C=g.scrollLeft,E=g.scrollTop;g===c?(b=k<I&&($.overflowX==="auto"||$.overflowX==="scroll"||$.overflowX==="visible"),D=O<_&&($.overflowY==="auto"||$.overflowY==="scroll"||$.overflowY==="visible")):(b=k<I&&($.overflowX==="auto"||$.overflowX==="scroll"),D=O<_&&($.overflowY==="auto"||$.overflowY==="scroll"));var T=b&&(Math.abs(S-a)<=i&&C+k<I)-(Math.abs(y-a)<=i&&!!C),j=D&&(Math.abs(v-r)<=i&&E+O<_)-(Math.abs(m-r)<=i&&!!E);if(!te[d])for(var L=0;L<=d;L++)te[L]||(te[L]={});(te[d].vx!=T||te[d].vy!=j||te[d].el!==g)&&(te[d].el=g,te[d].vx=T,te[d].vy=j,clearInterval(te[d].pid),(T!=0||j!=0)&&(u=!0,te[d].pid=setInterval((function(){o&&this.layer===0&&M.active._onTouchMove(Rt);var U=te[this.layer].vy?te[this.layer].vy*s:0,R=te[this.layer].vx?te[this.layer].vx*s:0;typeof f=="function"&&f.call(M.dragged.parentNode[pe],R,U,t,Rt,te[this.layer].el)!=="continue"||Do(te[this.layer].el,R,U)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&l!==c&&(l=Ae(l,!1)));mn=u}},30),Ao=function(e){var n=e.originalEvent,o=e.putSortable,a=e.dragEl,r=e.activeSortable,i=e.dispatchSortableEvent,s=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(n){var u=o||r;s();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(f.clientX,f.clientY);c(),u&&!u.el.contains(d)&&(i("spill"),this.onSpill({dragEl:a,putSortable:o}))}};function xn(){}xn.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var a=qe(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:Ao};Ce(xn,{pluginName:"revertOnSpill"});function Sn(){}Sn.prototype={onSpill:function(e){var n=e.dragEl,o=e.putSortable,a=o||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:Ao};Ce(Sn,{pluginName:"removeOnSpill"});M.mount(new Bi);M.mount(Sn,xn);function ln(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function Xn(t,e,n){const o=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,o)}function zi(){return typeof window<"u"?window.console:global.console}const ji=zi();function Xi(t){const e=Object.create(null);return function(o){return e[o]||(e[o]=t(o))}}const Hi=/-(\w)/g,Ui=Xi(t=>t.replace(Hi,(e,n)=>n.toUpperCase())),Mo=["Start","Add","Remove","Update","End"],Yo=["Choose","Unchoose","Sort","Filter","Clone"],$o=["Move"],qi=[$o,Mo,Yo].flatMap(t=>t).map(t=>`on${t}`),vn={manage:$o,manageAndEmit:Mo,emit:Yo};function Ki(t){return qi.indexOf(t)!==-1}const Gi=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Ji(t){return Gi.includes(t)}function Zi(t){return["transition-group","TransitionGroup"].includes(t)}function Po(t){return["id","class","role","style"].includes(t)||t.startsWith("data-")||t.startsWith("aria-")||t.startsWith("on")}function Lo(t){return t.reduce((e,[n,o])=>(e[n]=o,e),{})}function Qi({$attrs:t,componentData:e={}}){return{...Lo(Object.entries(t).filter(([o,a])=>Po(o))),...e}}function es({$attrs:t,callBackBuilder:e}){const n=Lo(Fo(t));Object.entries(e).forEach(([a,r])=>{vn[a].forEach(i=>{n[`on${i}`]=r(i)})});const o=`[data-draggable]${n.draggable||""}`;return{...n,draggable:o}}function Fo(t){return Object.entries(t).filter(([e,n])=>!Po(e)).map(([e,n])=>[Ui(e),n]).filter(([e,n])=>!Ki(e))}const Hn=({el:t})=>t,ts=(t,e)=>t.__draggable_context=e,Un=t=>t.__draggable_context;class ns{constructor({nodes:{header:e,default:n,footer:o},root:a,realList:r}){this.defaultNodes=n,this.children=[...e,...n,...o],this.externalComponent=a.externalComponent,this.rootTransition=a.transition,this.tag=a.tag,this.realList=r}get _isRootComponent(){return this.externalComponent||this.rootTransition}render(e,n){const{tag:o,children:a,_isRootComponent:r}=this;return e(o,n,r?{default:()=>a}:a)}updated(){const{defaultNodes:e,realList:n}=this;e.forEach((o,a)=>{ts(Hn(o),{element:n[a],index:a})})}getUnderlyingVm(e){return Un(e)}getVmIndexFromDomIndex(e,n){const{defaultNodes:o}=this,{length:a}=o,r=n.children,i=r.item(e);if(i===null)return a;const s=Un(i);if(s)return s.index;if(a===0)return 0;const c=Hn(o[0]),u=[...r].findIndex(f=>f===c);return e<u?0:a}}function os(t,e){const n=t[e];return n?n():[]}function as({$slots:t,realList:e,getKey:n}){const o=e||[],[a,r]=["header","footer"].map(c=>os(t,c)),{item:i}=t;if(!i)throw new Error("draggable element must have an item slot");const s=o.flatMap((c,u)=>i({element:c,index:u}).map(f=>(f.key=n(c),f.props={...f.props||{},"data-draggable":!0},f)));if(s.length!==o.length)throw new Error("Item slot must have only one child");return{header:a,footer:r,default:s}}function rs(t){const e=Zi(t),n=!Ji(t)&&!e;return{transition:e,externalComponent:n,tag:n?na(t):e?oa:t}}function is({$slots:t,tag:e,realList:n,getKey:o}){const a=as({$slots:t,realList:n,getKey:o}),r=rs(e);return new ns({nodes:a,root:r,realList:n})}function No(t,e){De(()=>this.$emit(t.toLowerCase(),e))}function Ro(t){return(e,n)=>{if(this.realList!==null)return this[`onDrag${t}`](e,n)}}function ss(t){const e=Ro.call(this,t);return(n,o)=>{e.call(this,n,o),No.call(this,t,n)}}let cn=null;const ls={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},cs=["update:modelValue","change",...[...vn.manageAndEmit,...vn.emit].map(t=>t.toLowerCase())],us=Ke({name:"draggable",inheritAttrs:!1,props:ls,emits:cs,data(){return{error:!1}},render(){try{this.error=!1;const{$slots:t,$attrs:e,tag:n,componentData:o,realList:a,getKey:r}=this,i=is({$slots:t,tag:n,realList:a,getKey:r});this.componentStructure=i;const s=Qi({$attrs:e,componentData:o});return i.render(st,s)}catch(t){return this.error=!0,st("pre",{style:{color:"red"}},t.stack)}},created(){this.list!==null&&this.modelValue!==null&&ji.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted(){if(this.error)return;const{$attrs:t,$el:e,componentStructure:n}=this;n.updated();const o=es({$attrs:t,callBackBuilder:{manageAndEmit:r=>ss.call(this,r),emit:r=>No.bind(this,r),manage:r=>Ro.call(this,r)}}),a=e.nodeType===1?e:e.parentElement;this._sortable=new M(a,o),this.targetDomElement=a,a.__draggable_component__=this},updated(){this.componentStructure.updated()},beforeUnmount(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList(){const{list:t}=this;return t||this.modelValue},getKey(){const{itemKey:t}=this;return typeof t=="function"?t:e=>e[t]}},watch:{$attrs:{handler(t){const{_sortable:e}=this;e&&Fo(t).forEach(([n,o])=>{e.option(n,o)})},deep:!0}},methods:{getUnderlyingVm(t){return this.componentStructure.getUnderlyingVm(t)||null},getUnderlyingPotencialDraggableComponent(t){return t.__draggable_component__},emitChanges(t){De(()=>this.$emit("change",t))},alterList(t){if(this.list){t(this.list);return}const e=[...this.modelValue];t(e),this.$emit("update:modelValue",e)},spliceList(){const t=e=>e.splice(...arguments);this.alterList(t)},updatePosition(t,e){const n=o=>o.splice(e,0,o.splice(t,1)[0]);this.alterList(n)},getRelatedContextFromMoveEvent({to:t,related:e}){const n=this.getUnderlyingPotencialDraggableComponent(t);if(!n)return{component:n};const o=n.realList,a={list:o,component:n};return t!==e&&o?{...n.getUnderlyingVm(e)||{},...a}:a},getVmIndexFromDomIndex(t){return this.componentStructure.getVmIndexFromDomIndex(t,this.targetDomElement)},onDragStart(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),cn=t.item},onDragAdd(t){const e=t.item._underlying_vm_;if(e===void 0)return;ln(t.item);const n=this.getVmIndexFromDomIndex(t.newIndex);this.spliceList(n,0,e);const o={element:e,newIndex:n};this.emitChanges({added:o})},onDragRemove(t){if(Xn(this.$el,t.item,t.oldIndex),t.pullMode==="clone"){ln(t.clone);return}const{index:e,element:n}=this.context;this.spliceList(e,1);const o={element:n,oldIndex:e};this.emitChanges({removed:o})},onDragUpdate(t){ln(t.item),Xn(t.from,t.item,t.oldIndex);const e=this.context.index,n=this.getVmIndexFromDomIndex(t.newIndex);this.updatePosition(e,n);const o={element:this.context.element,oldIndex:e,newIndex:n};this.emitChanges({moved:o})},computeFutureIndex(t,e){if(!t.element)return 0;const n=[...e.to.children].filter(i=>i.style.display!=="none"),o=n.indexOf(e.related),a=t.component.getVmIndexFromDomIndex(o);return n.indexOf(cn)!==-1||!e.willInsertAfter?a:a+1},onDragMove(t,e){const{move:n,realList:o}=this;if(!n||!o)return!0;const a=this.getRelatedContextFromMoveEvent(t),r=this.computeFutureIndex(a,t),i={...this.context,futureIndex:r},s={...t,relatedContext:a,draggedContext:i};return n(s,e)},onDragEnd(){cn=null}}}),ds={class:"stock-page"},fs={class:"action-buttons"},hs={class:"stock-content"},ps={class:"stock-indicator"},gs={class:"kd-indicator"},ms={class:"rsi-indicator"},vs={__name:"Stock",setup(t){const e=ct(),n=to("stock-search");W(null),W(null),W(0);const o=W(!1),a=W(!1),r=W(null),i=W(null),s=W(null),c=W(null),u=ee({get(){return e.userStockList},set(){}});function f(C){if(C.moved){const{element:E,newIndex:T,oldIndex:j}=C.moved;console.log("[onDragChange] ‰∫ã‰ª∂",{movedStock:E,newIndex:T,oldIndex:j,evt:C,userStockList:e.userStockList.map(R=>({id:R.id,order:R.order}))});const L=e.userStockList.filter(R=>R.id!==E.id);let U;if(T===0){const R=L[0]?.order||2e3;if(U=Math.floor(R/2),R<100){console.log("[onDragChange] Á¨¨‰∏Ä‰ΩçÈñìÈöîÂ§™Â∞èÔºåËß∏ÁôºÈáçÊñ∞ÊéíÂ∫è",{movedStock:E,firstOrder:R,newOrder:U,originalList:L.map(K=>({id:K.id,order:K.order}))}),e.updateStockList(e.userStockList);return}console.log("[onDragChange] ÁßªÂà∞Á¨¨‰∏Ä‰Ωç",{movedStock:E,firstOrder:R,newOrder:U,originalList:L.map(K=>({id:K.id,order:K.order}))})}else if(T===L.length){const R=L[L.length-1]?.order||0;U=R+1e3,console.log("[onDragChange] ÁßªÂà∞ÊúÄÂæå‰∏Ä‰Ωç",{movedStock:E,lastOrder:R,newOrder:U,originalList:L.map(K=>({id:K.id,order:K.order}))})}else{const R=L[T-1]?.order||0,K=L[T]?.order||R+2e3,ae=Math.floor((R+K)/2);if(console.log("[onDragChange] ÁßªÂà∞‰∏≠Èñì",{movedStock:E,prevOrder:R,nextOrder:K,midOrder:ae,originalList:L.map(re=>({id:re.id,order:re.order}))}),K-R<100){console.log("[onDragChange] ÈñìÈöîÂ§™Â∞èÔºåËß∏ÁôºÈáçÊñ∞ÊéíÂ∫è",{movedStock:E,prevOrder:R,nextOrder:K,originalList:L.map(re=>({id:re.id,order:re.order}))}),e.updateStockList(e.userStockList);return}U=ae}console.log("[onDragChange] ÊúÄÁµÇÊõ¥Êñ∞",{movedStock:E,newOrder:U}),e.updateSingleStockOrder(E.id,U)}}function d(){n.emit(!0)}function l(C,E){console.log(`Stock ${E} indicator changed to ${C}`)}function g(C){return C>0?"price-up":C<0?"price-down":"price-flat"}const p=ee(()=>r.value?[{name:`K ÂÄº: ${r.value.k}`,subname:"Âø´Á∑öÊåáÊ®ô (ÊïèÊÑüÂ∫¶È´ò)",color:"#4286f5"},{name:`D ÂÄº: ${r.value.d}`,subname:"ÊÖ¢Á∑öÊåáÊ®ô (ÊïèÊÑüÂ∫¶‰Ωé)",color:"#e75c9a"},{name:`J ÂÄº: ${r.value.j}`,subname:"Ë∂ÖË≤∑Ë∂ÖË≥£ÊåáÊ®ô",color:"#666"},{name:`Êõ¥Êñ∞ÊôÇÈñì: ${r.value.date}`,subname:"ÈÄ±Á∑öË≥áÊñôÊúÄÂæåÊõ¥Êñ∞",color:"#999"}]:[]);function m(C){r.value=C,o.value=!0}function v(C){console.log("KDJ ActionSheet ÈÅ∏Êìá:",C.name),o.value=!1,C.name.includes("K ÂÄº")?le("K ÂÄºÂèçÊò†ËÇ°ÂÉπÁü≠ÊúüÊ≥¢Âãï"):C.name.includes("D ÂÄº")?le("D ÂÄºÊòØ K ÂÄºÁöÑÁßªÂãïÂπ≥Âùá"):C.name.includes("J ÂÄº")&&le("J ÂÄº > 80 Ë∂ÖË≤∑Ôºå< 20 Ë∂ÖË≥£")}const y=ee(()=>i.value?[{name:`RSI ÂÄº: ${i.value.rsi}`,subname:"Áõ∏Â∞çÂº∑Âº±ÊåáÊ®ô",color:i.value.rsi>70?"#e74c3c":i.value.rsi<30?"#27ae60":"#3498db"},{name:`ÁãÄÊÖã: ${i.value.status}`,subname:"RSI > 70 Ë∂ÖË≤∑Ôºå< 30 Ë∂ÖË≥£",color:i.value.rsi>70?"#e74c3c":i.value.rsi<30?"#27ae60":"#3498db"},{name:`Êõ¥Êñ∞ÊôÇÈñì: ${i.value.date}`,subname:"ÈÄ±Á∑öË≥áÊñôÊúÄÂæåÊõ¥Êñ∞",color:"#999"}]:[]);function S(C){i.value=C,a.value=!0}function k(C){console.log("RSI ActionSheet ÈÅ∏Êìá:",C.name),a.value=!1,C.name.includes("RSI ÂÄº")?le("RSI ÊòØË°°ÈáèËÇ°ÂÉπÂº∑Âº±ÁöÑÂãïÈáèÊåáÊ®ô"):C.name.includes("ÁãÄÊÖã")&&(i.value.rsi>70?le("RSI > 70 Ë°®Á§∫Ë∂ÖË≤∑ÔºåÂèØËÉΩÊúâÂõûË™øÈ¢®Èö™"):i.value.rsi<30?le("RSI < 30 Ë°®Á§∫Ë∂ÖË≥£ÔºåÂèØËÉΩÊúâÂèçÂΩàÊ©üÊúÉ"):le("RSI Âú®Ê≠£Â∏∏ÁØÑÂúçÂÖßÔºåË∂®Âã¢Áõ∏Â∞çÁ©©ÂÆö"))}function O(){}function b(C){c.value=C,De(()=>{s.value?.showTradeSheet()})}function D(C){c.value=C,De(()=>{s.value?.showStrategySheet()})}function I(C){c.value=C,De(()=>{s.value?.showMoreSheet()})}function _(C){setTimeout(()=>{const E=document.querySelector(".stock-row.sortable-chosen");if(E){const T=E.querySelector("canvas"),j=document.querySelector(".stock-row.sortable-drag");if(T&&j){const L=j.querySelector("canvas");if(L&&T.width&&T.height){L.width=T.width,L.height=T.height;const U=L.getContext("2d");U.clearRect(0,0,L.width,L.height),U.drawImage(T,0,0)}}}},0)}function $(C){console.log("ÊãñÊõ≥ÁµêÊùü",C)}return aa(document,"visibilitychange",()=>{}),lt(()=>{}),(C,E)=>(B(),q("div",ds,[N(X(us),{modelValue:u.value,"onUpdate:modelValue":E[1]||(E[1]=T=>u.value=T),"item-key":"id",delay:200,animation:200,"ghost-class":"stock-row-ghost",onStart:_,onEnd:$,onChange:f},{item:ne(({element:T,index:j})=>[h("div",{class:"stock-row",onContextmenu:E[0]||(E[0]=ra(()=>{},["prevent"]))},[N(X(Sa),{"left-width":200,onClickLeft:O},{left:ne(()=>[h("div",fs,[N(X(Fe),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:L=>b(T)},{default:ne(()=>E[4]||(E[4]=[h("div",null,"‰∫§ Êòì",-1),h("div",null,"Ë®ò ÈåÑ",-1)])),_:2,__:[4]},1032,["onClick"]),N(X(Fe),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:L=>D(T)},{default:ne(()=>E[5]||(E[5]=[je("Á≠ñ Áï•",-1)])),_:2,__:[5]},1032,["onClick"]),N(X(Fe),{type:"default",size:"small",class:"action-btn other-btn",onClick:L=>I(T)},{default:ne(()=>E[6]||(E[6]=[je("Êõ¥ Â§ö",-1)])),_:2,__:[6]},1032,["onClick"])])]),default:ne(()=>[h("div",hs,[N(Er,{name:T.name,code:T.code,price:T.price,change:T.change,"change-percent":T.changePercent,"price-class":g(T.change),progress:T.progress,"progress-text":T.progressText},null,8,["name","code","price","change","change-percent","price-class","progress","progress-text"]),h("div",ps,[N(X(ca),{"show-indicators":!1,loop:!1,autoplay:0,onChange:L=>l(L,j)},{default:ne(()=>[N(X(En),{class:"indicator-content"},{default:ne(()=>[h("div",gs,[N(pr,{width:120,height:60,"stock-id":T.id,onKdjClick:m},null,8,["stock-id"])])]),_:2},1024),N(X(En),{class:"indicator-content"},{default:ne(()=>[h("div",ms,[N(vr,{width:120,height:60,"stock-id":T.id,onRsiClick:S},null,8,["stock-id"])])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],32)]),_:1},8,["modelValue"]),N(X(ha),{axis:"xy",magnetic:"x",gap:{x:20,y:80},style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"rgba(255, 224, 102, 0.9)","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:d},{default:ne(()=>E[7]||(E[7]=[h("div",{class:"bubble-content",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 24 24"},[h("path",{fill:"#322b0d","fill-rule":"evenodd",d:"M13 13v7a1 1 0 0 1-2 0v-7H4a1 1 0 0 1 0-2h7V4a1 1 0 0 1 2 0v7h7a1 1 0 0 1 0 2z"})]),h("span",{class:"bubble-label",style:{color:"#322b0d","font-size":"14px"}},"Êñ∞Â¢û")],-1)])),_:1,__:[7]}),N(La),N(X(Ie),{show:o.value,"onUpdate:show":E[2]||(E[2]=T=>o.value=T),actions:p.value,"cancel-text":"ÂèñÊ∂à",title:"KDJ ÊåáÊ®ôË©≥ÊÉÖ",onSelect:v},null,8,["show","actions"]),N(X(Ie),{show:a.value,"onUpdate:show":E[3]||(E[3]=T=>a.value=T),actions:y.value,"cancel-text":"ÂèñÊ∂à",title:"RSI ÊåáÊ®ôË©≥ÊÉÖ",onSelect:k},null,8,["show","actions"]),c.value?(B(),ut(gi,{key:0,ref_key:"stockActionsRef",ref:s,"stock-info":c.value},null,8,["stock-info"])):tt("",!0)]))}},_s=ft(vs,[["__scopeId","data-v-9a0caca8"]]);export{_s as default};
