import{u as F,p as K,P as G,a as L,S as W}from"./index-qICEYxYw.js";import{d as N,m as J,c as D,r as g,a as k,i as O,w as B,b as z,e as V,u as Q,o as Z,n as A,f as R,g as ee,h as te,j as ae,v as ne,k as c,s as oe,l as U,T as se,p as le,q as _,t as X,x as ie,y as I,z as ce,H as re,I as ue,A as de,B as Y,C as j,D as f,E as q,F as pe,G as fe}from"./index-CZrN-HcI.js";function E(e,r){return e.reduce((s,p)=>Math.abs(s-r)<Math.abs(p-r)?s:p)}const ve={gap:{type:[Number,Object],default:24},icon:String,axis:J("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[xe,M]=D("floating-bubble");var he=N({name:xe,inheritAttrs:!1,props:ve,emits:["click","update:offset","offsetChange"],setup(e,{slots:r,emit:s,attrs:p}){const d=g(),n=g({x:0,y:0,width:0,height:0}),l=k(()=>O(e.gap)?e.gap.x:e.gap),x=k(()=>O(e.gap)?e.gap.y:e.gap),u=k(()=>({top:x.value,right:z.value-n.value.width-l.value,bottom:B.value-n.value.height-x.value,left:l.value})),m=g(!1);let w=!1;const T=k(()=>{const a={},y=V(n.value.x),i=V(n.value.y);return a.transform=`translate3d(${y}, ${i}, 0)`,(m.value||!w)&&(a.transition="none"),a}),t=()=>{if(!S.value)return;const{width:a,height:y}=le(d.value),{offset:i}=e;n.value={x:i?i.x:z.value-a-l.value,y:i?i.y:B.value-y-x.value,width:a,height:y}},o=F();let h=0,b=0;const C=a=>{o.start(a),m.value=!0,h=n.value.x,b=n.value.y};Q("touchmove",a=>{if(a.preventDefault(),o.move(a),e.axis!=="lock"&&!o.isTap.value){if(e.axis==="x"||e.axis==="xy"){let i=h+o.deltaX.value;i<u.value.left&&(i=u.value.left),i>u.value.right&&(i=u.value.right),n.value.x=i}if(e.axis==="y"||e.axis==="xy"){let i=b+o.deltaY.value;i<u.value.top&&(i=u.value.top),i>u.value.bottom&&(i=u.value.bottom),n.value.y=i}const y=_(n.value,["x","y"]);s("update:offset",y)}},{target:d});const $=()=>{m.value=!1,A(()=>{if(e.magnetic==="x"){const a=E([u.value.left,u.value.right],n.value.x);n.value.x=a}if(e.magnetic==="y"){const a=E([u.value.top,u.value.bottom],n.value.y);n.value.y=a}if(!o.isTap.value){const a=_(n.value,["x","y"]);s("update:offset",a),(h!==a.x||b!==a.y)&&s("offsetChange",a)}})},H=a=>{o.isTap.value?s("click",a):a.stopPropagation()};Z(()=>{t(),A(()=>{w=!0})}),R([z,B,l,x,()=>e.offset],t,{deep:!0});const S=g(!0);return ee(()=>{S.value=!0}),te(()=>{e.teleport&&(S.value=!1)}),()=>{const a=ae(c("div",U({class:M(),ref:d,onTouchstartPassive:C,onTouchend:$,onTouchcancel:$,onClickCapture:H,style:T.value},p),[r.default?r.default():c(oe,{name:e.icon,class:M("icon")},null)]),[[ne,S.value]]);return e.teleport?c(se,{to:e.teleport},{default:()=>[a]}):a}}});const ge=X(he),me=e=>e?.includes("/"),ye=[...K,"round","closeOnPopstate","safeAreaInsetBottom"],be={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[we,v,Se]=D("share-sheet"),ke=ie({},L,{title:String,round:I,options:ce(),cancelText:String,description:String,closeOnPopstate:I,safeAreaInsetBottom:I});var Te=N({name:we,props:ke,emits:["cancel","select","update:show"],setup(e,{emit:r,slots:s}){const p=t=>r("update:show",t),d=()=>{p(!1),r("cancel")},n=(t,o)=>r("select",t,o),l=()=>{const t=s.title?s.title():e.title,o=s.description?s.description():e.description;if(t||o)return c("div",{class:v("header")},[t&&c("h2",{class:v("title")},[t]),o&&c("span",{class:v("description")},[o])])},x=t=>me(t)?c("img",{src:t,class:v("image-icon")},null):c("div",{class:v("icon",[t])},[c(ue,{name:be[t]||t},null)]),u=(t,o)=>{const{name:h,icon:b,className:C,description:P}=t;return c("div",{role:"button",tabindex:0,class:[v("option"),C,re],onClick:()=>n(t,o)},[x(b),h&&c("span",{class:v("name")},[h]),P&&c("span",{class:v("option-description")},[P])])},m=(t,o)=>c("div",{class:v("options",{border:o})},[t.map(u)]),w=()=>{const{options:t}=e;return Array.isArray(t[0])?t.map((o,h)=>m(o,h!==0)):m(t)},T=()=>{var t;const o=(t=e.cancelText)!=null?t:Se("cancel");if(s.cancel||o)return c("button",{type:"button",class:v("cancel"),onClick:d},[s.cancel?s.cancel():o])};return()=>c(G,U({class:v(),position:"bottom","onUpdate:show":p},_(e,ye)),{default:()=>[l(),w(),T()]})}});const Ce=X(Te),Pe={__name:"StockSearchSheet",props:{modelValue:Boolean},setup(e){const r=e,s=g(),p=g("");R(()=>r.modelValue,n=>{n&&A(()=>{const l=s.value?.$el?.querySelector("input");l&&l.focus()})});function d(n){}return(n,l)=>(Y(),de(q(Ce),{show:r.modelValue,"onUpdate:show":l[1]||(l[1]=x=>n.$emit("update:modelValue",x)),options:[],"cancel-text":"",style:{"--van-share-sheet-header-padding":"24px 24px 0 24px","min-height":"60vh"}},{title:j(()=>l[2]||(l[2]=[f("div",{style:{"font-size":"18px","font-weight":"bold","letter-spacing":"1px","text-align":"center","margin-top":"0","margin-bottom":"0",color:"#222","line-height":"1.2"}}," 股票搜尋 ",-1)])),description:j(()=>[f("div",null,[c(q(W),{ref_key:"searchInputRef",ref:s,"model-value":p.value,"onUpdate:modelValue":l[0]||(l[0]=x=>p.value.value=x),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:d},null,8,["model-value"])]),l[3]||(l[3]=f("div",null,[f("div",{style:{display:"flex","align-items":"center",margin:"0 0 10px 0"}},[f("div",{style:{"margin-left":"16px","font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px"}}," | 熱門股票 ")]),f("div",{style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center"}},[f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"台積電"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"鴻海"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"聯發科"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"長榮"),f("span",{style:{background:"#f2f3f5","border-radius":"16px",padding:"4px 12px","font-size":"15px"}},"中鋼")])],-1))]),_:1},8,["show"]))}},Be={style:{padding:"32px"}},Ae={__name:"Stock",setup(e){const r=g(!1);function s(){r.value=!0}return(p,d)=>(Y(),pe("div",Be,[d[1]||(d[1]=fe(" 自選股頁面324234234234234234324234234234 ",-1)),c(q(ge),{icon:"plus",axis:"xy",magnetic:"x",gap:{x:24,y:80},style:{"--van-floating-bubble-size":"48px"},onClick:s}),c(Pe,{show:r.value,"onUpdate:show":d[0]||(d[0]=n=>r.value=n)},null,8,["show"])]))}};export{Ae as default};
