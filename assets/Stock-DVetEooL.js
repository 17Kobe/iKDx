import{d as Q,t as F,m as oe,n as ce,c as Z,r as _,a as ke,u as at,b as B,w as N,e as ot,o as ee,f as je,g as st,h as Ve,i as it,j as Se,k as b,l as te,p as Pe,q as J,s as Ne,v as se,x as ie,y as re,z as q,A as rt,B as ct,C as Ie,D as Be,E as lt,F as ut,G as dt,H as He,T as ft,I as Fe,J as he,K as vt,L as ht,M as gt,N as mt,O as $e,P as pt,Q as yt,R as Xe,S as wt,U as bt,V as W,W as K,X as y,Y,Z as j,_ as xt,$ as ge,a0 as me,a1 as kt,a2 as E,a3 as St,a4 as Ct,a5 as G,a6 as Me}from"./index-BMFpUXEM.js";import{u as Ce,a as _e,s as _t,p as Tt,P as Dt,b as Pt,S as It,B as Ee,c as ne}from"./index-Z2boGVv9.js";function Ae(e,t){return e.reduce((a,o)=>Math.abs(a-t)<Math.abs(o-t)?a:o)}const[qe,ae]=Z("swipe"),Bt={loop:F,width:ce,height:ce,vertical:Boolean,autoplay:oe(0),duration:oe(500),touchable:F,lazyRender:Boolean,initialSwipe:oe(0),indicatorColor:String,showIndicators:F,stopPropagation:F},Ue=Symbol(qe);var $t=Q({name:qe,props:Bt,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:a}){const o=_(),i=_(),n=ke({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let d=!1;const v=Ce(),{children:c,linkChildren:p}=at(Ue),r=B(()=>c.length),x=B(()=>n[e.vertical?"height":"width"]),l=B(()=>e.vertical?v.deltaY.value:v.deltaX.value),s=B(()=>n.rect?(e.vertical?n.rect.height:n.rect.width)-x.value*r.value:0),k=B(()=>x.value?Math.ceil(Math.abs(s.value)/x.value):r.value),S=B(()=>r.value*x.value),I=B(()=>(n.active+r.value)%r.value),z=B(()=>{const h=e.vertical?"vertical":"horizontal";return v.direction.value===h}),V=B(()=>{const h={transitionDuration:`${n.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+n.offset.toFixed(2)}px)`};if(x.value){const P=e.vertical?"height":"width",D=e.vertical?"width":"height";h[P]=`${S.value}px`,h[D]=e[D]?`${e[D]}px`:""}return h}),H=h=>{const{active:P}=n;return h?e.loop?se(P+h,-1,r.value):se(P+h,0,k.value):P},A=(h,P=0)=>{let D=h*x.value;e.loop||(D=Math.min(D,-s.value));let O=P-D;return e.loop||(O=se(O,s.value,0)),O},g=({pace:h=0,offset:P=0,emitChange:D})=>{if(r.value<=1)return;const{active:O}=n,M=H(h),U=A(M,P);if(e.loop){if(c[0]&&U!==s.value){const ue=U<s.value;c[0].setOffset(ue?S.value:0)}if(c[r.value-1]&&U!==0){const ue=U>0;c[r.value-1].setOffset(ue?-S.value:0)}}n.active=M,n.offset=U,D&&M!==O&&t("change",I.value)},$=()=>{n.swiping=!0,n.active<=-1?g({pace:r.value}):n.active>=r.value&&g({pace:-r.value})},C=()=>{$(),v.reset(),te(()=>{n.swiping=!1,g({pace:-1,emitChange:!0})})},m=()=>{$(),v.reset(),te(()=>{n.swiping=!1,g({pace:1,emitChange:!0})})};let u;const f=()=>clearTimeout(u),w=()=>{f(),+e.autoplay>0&&r.value>1&&(u=setTimeout(()=>{m(),w()},+e.autoplay))},T=(h=+e.initialSwipe)=>{if(!o.value)return;const P=()=>{var D,O;if(!Pe(o)){const M={width:o.value.offsetWidth,height:o.value.offsetHeight};n.rect=M,n.width=+((D=e.width)!=null?D:M.width),n.height=+((O=e.height)!=null?O:M.height)}r.value&&(h=Math.min(r.value-1,h),h===-1&&(h=r.value-1)),n.active=h,n.swiping=!0,n.offset=A(h),c.forEach(M=>{M.setOffset(0)}),w()};Pe(o)?J().then(P):P()},L=()=>T(n.active);let Te;const Qe=h=>{!e.touchable||h.touches.length>1||(v.start(h),d=!1,Te=Date.now(),f(),$())},Ze=h=>{e.touchable&&n.swiping&&(v.move(h),z.value&&(!e.loop&&(n.active===0&&l.value>0||n.active===r.value-1&&l.value<0)||(Ne(h,e.stopPropagation),g({offset:l.value}),d||(t("dragStart",{index:I.value}),d=!0))))},De=()=>{if(!e.touchable||!n.swiping)return;const h=Date.now()-Te,P=l.value/h;if((Math.abs(P)>.25||Math.abs(l.value)>x.value/2)&&z.value){const O=e.vertical?v.offsetY.value:v.offsetX.value;let M=0;e.loop?M=O>0?l.value>0?-1:1:0:M=-Math[l.value>0?"ceil":"floor"](l.value/x.value),g({pace:M,emitChange:!0})}else l.value&&g({pace:0});d=!1,n.swiping=!1,t("dragEnd",{index:I.value}),w()},et=(h,P={})=>{$(),v.reset(),te(()=>{let D;e.loop&&h===r.value?D=n.active===0?0:h:D=h%r.value,P.immediate?te(()=>{n.swiping=!1}):n.swiping=!1,g({pace:D-n.active,emitChange:!0})})},tt=(h,P)=>{const D=P===I.value,O=D?{backgroundColor:e.indicatorColor}:void 0;return b("i",{style:O,class:ae("indicator",{active:D})},null)},nt=()=>{if(a.indicator)return a.indicator({active:I.value,total:r.value});if(e.showIndicators&&r.value>1)return b("div",{class:ae("indicators",{vertical:e.vertical})},[Array(r.value).fill("").map(tt)])};return _e({prev:C,next:m,state:n,resize:L,swipeTo:et}),p({size:x,props:e,count:r,activeIndicator:I}),N(()=>e.initialSwipe,h=>T(+h)),N(r,()=>T(n.active)),N(()=>e.autoplay,w),N([ie,re,()=>e.width,()=>e.height],L),N(ot(),h=>{h==="visible"?w():f()}),ee(T),je(()=>T(n.active)),st(()=>T(n.active)),Ve(f),it(f),Se("touchmove",Ze,{target:i}),()=>{var h;return b("div",{ref:o,class:ae()},[b("div",{ref:i,style:V.value,class:ae("track",{vertical:e.vertical}),onTouchstartPassive:Qe,onTouchend:De,onTouchcancel:De},[(h=a.default)==null?void 0:h.call(a)]),nt()])}}});const Mt=q($t),[Et,At]=Z("swipe-item");var Ot=Q({name:Et,setup(e,{slots:t}){let a;const o=ke({offset:0,inited:!1,mounted:!1}),{parent:i,index:n}=rt(Ue);if(!i)return;const d=B(()=>{const p={},{vertical:r}=i.props;return i.size.value&&(p[r?"height":"width"]=`${i.size.value}px`),o.offset&&(p.transform=`translate${r?"Y":"X"}(${o.offset}px)`),p}),v=B(()=>{const{loop:p,lazyRender:r}=i.props;if(!r||a)return!0;if(!o.mounted)return!1;const x=i.activeIndicator.value,l=i.count.value-1,s=x===0&&p?l:x-1,k=x===l&&p?0:x+1;return a=n.value===x||n.value===s||n.value===k,a}),c=p=>{o.offset=p};return ee(()=>{J(()=>{o.mounted=!0})}),_e({setOffset:c}),()=>{var p;return b("div",{class:At(),style:d.value},[v.value?(p=t.default)==null?void 0:p.call(t):null])}}});const Oe=q(Ot);q(_t);const Rt={gap:{type:[Number,Object],default:24},icon:String,axis:ct("y"),magnetic:String,offset:Object,teleport:{type:[String,Object],default:"body"}},[zt,Re]=Z("floating-bubble");var Lt=Q({name:zt,inheritAttrs:!1,props:Rt,emits:["click","update:offset","offsetChange"],setup(e,{slots:t,emit:a,attrs:o}){const i=_(),n=_({x:0,y:0,width:0,height:0}),d=B(()=>Ie(e.gap)?e.gap.x:e.gap),v=B(()=>Ie(e.gap)?e.gap.y:e.gap),c=B(()=>({top:v.value,right:ie.value-n.value.width-d.value,bottom:re.value-n.value.height-v.value,left:d.value})),p=_(!1);let r=!1;const x=B(()=>{const g={},$=Be(n.value.x),C=Be(n.value.y);return g.transform=`translate3d(${$}, ${C}, 0)`,(p.value||!r)&&(g.transition="none"),g}),l=()=>{if(!A.value)return;const{width:g,height:$}=Fe(i.value),{offset:C}=e;n.value={x:C?C.x:ie.value-g-d.value,y:C?C.y:re.value-$-v.value,width:g,height:$}},s=Ce();let k=0,S=0;const I=g=>{s.start(g),p.value=!0,k=n.value.x,S=n.value.y};Se("touchmove",g=>{if(g.preventDefault(),s.move(g),e.axis!=="lock"&&!s.isTap.value){if(e.axis==="x"||e.axis==="xy"){let C=k+s.deltaX.value;C<c.value.left&&(C=c.value.left),C>c.value.right&&(C=c.value.right),n.value.x=C}if(e.axis==="y"||e.axis==="xy"){let C=S+s.deltaY.value;C<c.value.top&&(C=c.value.top),C>c.value.bottom&&(C=c.value.bottom),n.value.y=C}const $=he(n.value,["x","y"]);a("update:offset",$)}},{target:i});const V=()=>{p.value=!1,J(()=>{if(e.magnetic==="x"){const g=Ae([c.value.left,c.value.right],n.value.x);n.value.x=g}if(e.magnetic==="y"){const g=Ae([c.value.top,c.value.bottom],n.value.y);n.value.y=g}if(!s.isTap.value){const g=he(n.value,["x","y"]);a("update:offset",g),(k!==g.x||S!==g.y)&&a("offsetChange",g)}})},H=g=>{s.isTap.value?a("click",g):g.stopPropagation()};ee(()=>{l(),J(()=>{r=!0})}),N([ie,re,d,v,()=>e.offset],l,{deep:!0});const A=_(!0);return je(()=>{A.value=!0}),Ve(()=>{e.teleport&&(A.value=!1)}),()=>{const g=lt(b("div",He({class:Re(),ref:i,onTouchstartPassive:I,onTouchend:V,onTouchcancel:V,onClickCapture:H,style:x.value},o),[t.default?t.default():b(dt,{name:e.icon,class:Re("icon")},null)]),[[ut,A.value]]);return e.teleport?b(ft,{to:e.teleport},{default:()=>[g]}):g}}});const Kt=q(Lt),Wt=e=>e?.includes("/"),Yt=[...Tt,"round","closeOnPopstate","safeAreaInsetBottom"],jt={qq:"qq",link:"link-o",weibo:"weibo",qrcode:"qr",poster:"photo-o",wechat:"wechat","weapp-qrcode":"miniprogram-o","wechat-moments":"wechat-moments"},[Vt,R,Nt]=Z("share-sheet"),Ht=vt({},Pt,{title:String,round:F,options:ht(),cancelText:String,description:String,closeOnPopstate:F,safeAreaInsetBottom:F});var Ft=Q({name:Vt,props:Ht,emits:["cancel","select","update:show"],setup(e,{emit:t,slots:a}){const o=l=>t("update:show",l),i=()=>{o(!1),t("cancel")},n=(l,s)=>t("select",l,s),d=()=>{const l=a.title?a.title():e.title,s=a.description?a.description():e.description;if(l||s)return b("div",{class:R("header")},[l&&b("h2",{class:R("title")},[l]),s&&b("span",{class:R("description")},[s])])},v=l=>Wt(l)?b("img",{src:l,class:R("image-icon")},null):b("div",{class:R("icon",[l])},[b(mt,{name:jt[l]||l},null)]),c=(l,s)=>{const{name:k,icon:S,className:I,description:z}=l;return b("div",{role:"button",tabindex:0,class:[R("option"),I,gt],onClick:()=>n(l,s)},[v(S),k&&b("span",{class:R("name")},[k]),z&&b("span",{class:R("option-description")},[z])])},p=(l,s)=>b("div",{class:R("options",{border:s})},[l.map(c)]),r=()=>{const{options:l}=e;return Array.isArray(l[0])?l.map((s,k)=>p(s,k!==0)):p(l)},x=()=>{var l;const s=(l=e.cancelText)!=null?l:Nt("cancel");if(a.cancel||s)return b("button",{type:"button",class:R("cancel"),onClick:i},[a.cancel?a.cancel():s])};return()=>b(Dt,He({class:R(),position:"bottom","onUpdate:show":o},he(e,Yt)),{default:()=>[d(),r(),x()]})}});const Xt=q(Ft),[qt,de]=Z("swipe-cell"),Ut={name:oe(""),disabled:Boolean,leftWidth:ce,rightWidth:ce,beforeClose:Function,stopPropagation:Boolean};var Gt=Q({name:qt,props:Ut,emits:["open","close","click"],setup(e,{emit:t,slots:a}){let o,i,n,d;const v=_(),c=_(),p=_(),r=ke({offset:0,dragging:!1}),x=Ce(),l=m=>m.value?Fe(m).width:0,s=B(()=>$e(e.leftWidth)?+e.leftWidth:l(c)),k=B(()=>$e(e.rightWidth)?+e.rightWidth:l(p)),S=m=>{r.offset=m==="left"?s.value:-k.value,o||(o=!0,t("open",{name:e.name,position:m}))},I=m=>{r.offset=0,o&&(o=!1,t("close",{name:e.name,position:m}))},z=m=>{const u=Math.abs(r.offset),f=.15,w=o?1-f:f,T=m==="left"?s.value:k.value;T&&u>T*w?S(m):I(m)},V=m=>{e.disabled||(n=r.offset,x.start(m))},H=m=>{if(e.disabled)return;const{deltaX:u}=x;x.move(m),x.isHorizontal()&&(i=!0,r.dragging=!0,(!o||u.value*n<0)&&Ne(m,e.stopPropagation),r.offset=se(u.value+n,-k.value,s.value))},A=()=>{r.dragging&&(r.dragging=!1,z(r.offset>0?"left":"right"),setTimeout(()=>{i=!1},0))},g=(m="outside",u)=>{d||(t("click",m),o&&!i&&(d=!0,yt(e.beforeClose,{args:[{event:u,name:e.name,position:m}],done:()=>{d=!1,I(m)},canceled:()=>d=!1,error:()=>d=!1})))},$=m=>u=>{(i||o)&&u.stopPropagation(),!i&&g(m,u)},C=(m,u)=>{const f=a[m];if(f)return b("div",{ref:u,class:de(m),onClick:$(m)},[f()])};return _e({open:S,close:I}),pt(v,m=>g("outside",m),{eventName:"touchstart"}),Se("touchmove",H,{target:v}),()=>{var m;const u={transform:`translate3d(${r.offset}px, 0, 0)`,transitionDuration:r.dragging?"0s":".6s"};return b("div",{ref:v,class:de(),onClick:$("cell"),onTouchstartPassive:V,onTouchend:A,onTouchcancel:A},[b("div",{class:de("wrapper"),style:u},[C("left",c),(m=a.default)==null?void 0:m.call(a),C("right",p)])])}}});const Jt=q(Gt),pe=(e,t)=>t.some(a=>e instanceof a);let ze,Le;function Qt(){return ze||(ze=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zt(){return Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ye=new WeakMap,fe=new WeakMap,le=new WeakMap;function en(e){const t=new Promise((a,o)=>{const i=()=>{e.removeEventListener("success",n),e.removeEventListener("error",d)},n=()=>{a(X(e.result)),i()},d=()=>{o(e.error),i()};e.addEventListener("success",n),e.addEventListener("error",d)});return le.set(t,e),t}function tn(e){if(ye.has(e))return;const t=new Promise((a,o)=>{const i=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",d),e.removeEventListener("abort",d)},n=()=>{a(),i()},d=()=>{o(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",n),e.addEventListener("error",d),e.addEventListener("abort",d)});ye.set(e,t)}let we={get(e,t,a){if(e instanceof IDBTransaction){if(t==="done")return ye.get(e);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return X(e[t])},set(e,t,a){return e[t]=a,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ge(e){we=e(we)}function nn(e){return Zt().includes(e)?function(...t){return e.apply(be(this),t),X(this.request)}:function(...t){return X(e.apply(be(this),t))}}function an(e){return typeof e=="function"?nn(e):(e instanceof IDBTransaction&&tn(e),pe(e,Qt())?new Proxy(e,we):e)}function X(e){if(e instanceof IDBRequest)return en(e);if(fe.has(e))return fe.get(e);const t=an(e);return t!==e&&(fe.set(e,t),le.set(t,e)),t}const be=e=>le.get(e);function on(e,t,{blocked:a,upgrade:o,blocking:i,terminated:n}={}){const d=indexedDB.open(e,t),v=X(d);return o&&d.addEventListener("upgradeneeded",c=>{o(X(d.result),c.oldVersion,c.newVersion,X(d.transaction),c)}),a&&d.addEventListener("blocked",c=>a(c.oldVersion,c.newVersion,c)),v.then(c=>{n&&c.addEventListener("close",()=>n()),i&&c.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),v}const sn=["get","getKey","getAll","getAllKeys","count"],rn=["put","add","delete","clear"],ve=new Map;function Ke(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ve.get(t))return ve.get(t);const a=t.replace(/FromIndex$/,""),o=t!==a,i=rn.includes(a);if(!(a in(o?IDBIndex:IDBObjectStore).prototype)||!(i||sn.includes(a)))return;const n=async function(d,...v){const c=this.transaction(d,i?"readwrite":"readonly");let p=c.store;return o&&(p=p.index(v.shift())),(await Promise.all([p[a](...v),i&&c.done]))[0]};return ve.set(t,n),n}Ge(e=>({...e,get:(t,a,o)=>Ke(t,a)||e.get(t,a,o),has:(t,a)=>!!Ke(t,a)||e.has(t,a)}));const cn=["continue","continuePrimaryKey","advance"],We={},xe=new WeakMap,Je=new WeakMap,ln={get(e,t){if(!cn.includes(t))return e[t];let a=We[t];return a||(a=We[t]=function(...o){xe.set(this,Je.get(this)[t](...o))}),a}};async function*un(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const a=new Proxy(t,ln);for(Je.set(a,t),le.set(a,be(t));t;)yield a,t=await(xe.get(a)||t.continue()),xe.delete(a)}function Ye(e,t){return t===Symbol.asyncIterator&&pe(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&pe(e,[IDBIndex,IDBObjectStore])}Ge(e=>({...e,get(t,a,o){return Ye(t,a)?un:e.get(t,a,o)},has(t,a){return Ye(t,a)||e.has(t,a)}}));const dn=on("stock-db",1,{upgrade(e){e.objectStoreNames.contains("stocks")||e.createObjectStore("stocks",{keyPath:"id"})}});async function fn(){const e=await dn;if(await e.count("stocks")>0)return await e.getAll("stocks");{const i=await(await fetch("/iKDx/"+"stocks/stocks.json")).json(),n=e.transaction("stocks","readwrite"),d=n.objectStore("stocks");for(const v of i)await d.put(v);return await n.done,i}}const vn={style:{display:"flex","flex-direction":"column",height:"100%","min-height":"60vh"}},hn={style:{flex:"1 1 auto"}},gn={style:{display:"flex",gap:"8px","flex-wrap":"wrap","justify-content":"center","margin-bottom":"24px"}},mn=["onClick"],pn={key:0,style:{"margin-top":"12px"}},yn={key:0},wn={style:{"font-size":"17px","font-weight":"bold",color:"#222","margin-right":"16px","min-width":"60px"}},bn={style:{"font-size":"16px",color:"#333",flex:"1"}},xn={key:1,style:{color:"#999","text-align":"center","margin-top":"16px"}},kn={__name:"StockSearch",setup(e){const t=Xe("stock-search"),a=_(!1);ee(()=>{t.on(s=>{a.value=s})}),wt(()=>{t.reset()});const o=_(),i=_(""),n=_([]),d=["台積電","鴻海","聯發科","長榮","中鋼"],v={background:"#fff",color:"#878787",borderRadius:"16px",padding:"4px 16px",fontSize:"15px",cursor:"pointer",userSelect:"none",fontWeight:"500",transition:"background 0.2s, color 0.2s"},c={background:"#ffe066",color:"#222",fontWeight:"bold",boxShadow:"0 0 0 2px #ffe06688"};function p(s){return i.value===s?{...v,...c}:v}function r(){J(()=>{const s=o.value?.$el?.querySelector("input");s&&s.focus()})}N(()=>a.value,s=>{s&&setTimeout(()=>{r()},300)}),N(()=>i.value,async s=>{if(!s||s.length<1){n.value=[];return}const k=await fn();n.value=k.filter(S=>S.name.includes(s)||S.id.includes(s))});function x(s){}function l(s){i.value=s,r()}return(s,k)=>(W(),bt(Y(Xt),{show:a.value,"onUpdate:show":k[1]||(k[1]=S=>Y(t).emit(!1)),"cancel-text":"離開",options:[],style:{"--van-share-sheet-header-padding":"24px 24px 0 24px"}},{title:K(()=>k[2]||(k[2]=[y("div",{style:{"font-size":"18px","font-weight":"bold","letter-spacing":"1px","text-align":"center","margin-top":"0","margin-bottom":"0",color:"#222","line-height":"1.2"}}," 股票搜尋 ",-1)])),description:K(()=>[y("div",vn,[y("div",hn,[y("div",null,[b(Y(It),{ref_key:"searchInputRef",ref:o,modelValue:i.value,"onUpdate:modelValue":k[0]||(k[0]=S=>i.value=S),placeholder:"請輸入股票名稱或代碼","action-text":"",style:{"--van-search-input-height":"48px","font-size":"18px"},onSearch:x},null,8,["modelValue"])]),y("div",null,[k[3]||(k[3]=y("div",{style:{display:"flex","align-items":"center",margin:"0 0 10px 0"}},[y("div",{style:{"margin-left":"16px","font-size":"16px",color:"#222","font-weight":"bold","letter-spacing":"1px"}}," | 熱門股票 ")],-1)),y("div",gn,[(W(),j(ge,null,me(d,S=>y("span",{key:S,onClick:I=>l(S),style:kt(p(S))},E(S),13,mn)),64))]),i.value&&i.value.length>=1?(W(),j("div",pn,[n.value.length?(W(),j("div",yn,[(W(!0),j(ge,null,me(n.value,S=>(W(),j("div",{key:S.id,style:{background:"#fff","border-radius":"12px","box-shadow":"0 2px 8px #0001",padding:"16px 20px","margin-bottom":"12px",display:"flex","align-items":"center","min-height":"56px"}},[y("div",wn,E(S.id),1),y("div",bn,E(S.name),1)]))),128))])):(W(),j("div",xn," 查無資料 "))])):xt("",!0)])])])]),_:1},8,["show"]))}},Sn={class:"stock-page"},Cn=["onTouchstart"],_n={class:"action-buttons"},Tn={class:"stock-content"},Dn={class:"stock-name"},Pn={class:"name"},In={class:"code"},Bn={class:"stock-indicator"},$n={class:"kd-indicator"},Mn={class:"kd-value"},En={class:"rsi-indicator"},An={class:"rsi-value"},On={__name:"Stock",setup(e){const t=Xe("stock-search"),a=_(null);_(null),_(0);const o=_(-1),i=_(0),n=_(0),d=_(!1),v=_(null),c=_([{id:"2330",name:"台積電",code:"2330",price:1140,change:-1.72,changePercent:-.15,weeklyKD:22.6,rsi:45.2},{id:"2317",name:"鴻海",code:"2317",price:135,change:1.45,changePercent:1.08,weeklyKD:68.5,rsi:62.1},{id:"2454",name:"聯發科",code:"2454",price:1350,change:-18.5,changePercent:-1.35,weeklyKD:20.8,rsi:38.9},{id:"2881",name:"富邦金",code:"2881",price:31.55,change:.35,changePercent:1.12,weeklyKD:72.3,rsi:58.7},{id:"0056",name:"元大高股息",code:"0056",price:34.81,change:.02,changePercent:.06,weeklyKD:55.4,rsi:52.1},{id:"1215",name:"卜蜂",code:"1215",price:115.5,change:-.5,changePercent:-.43,weeklyKD:56.87,rsi:71.63},{id:"2885",name:"元大金",code:"2885",price:34.81,change:.06,changePercent:.17,weeklyKD:73.16,rsi:80.46},{id:"2646",name:"星宇航空",code:"2646",price:47.7,change:.5,changePercent:1.06,weeklyKD:54.87,rsi:58.55}]);function p(){t.emit(!0)}function r(u,f){console.log(`Stock ${f} indicator changed to ${u}`)}function x(u){return u>0?"price-up":u<0?"price-down":"price-flat"}function l(u){return u>80?"kd-overbought":u<20?"kd-oversold":"kd-normal"}function s(u){return u>80?"超買":u<20?"超賣":"正常"}function k(u){return u>70?"rsi-overbought":u<30?"rsi-oversold":"rsi-normal"}function S(u){return u>70?"超買":u<30?"超賣":"正常"}function I(){}function z(u){ne(`買賣 ${u.name}`)}function V(u){ne(`${u.name} 策略設定`)}function H(u,f){const w=u.touches[0];i.value=w.clientY,n.value=w.clientY,v.value=setTimeout(()=>{d.value||$(f)},500)}function A(u){if(v.value){const f=u.touches[0];Math.abs(f.clientY-i.value)>10&&(clearTimeout(v.value),v.value=null)}if(d.value){u.preventDefault();const f=u.touches[0];n.value=f.clientY;const w=n.value-i.value,T=m(o.value,w);if(T!==o.value&&T>=0&&T<c.value.length){const L=c.value.splice(o.value,1)[0];c.value.splice(T,0,L),o.value=T,i.value=n.value}}}function g(){v.value&&(clearTimeout(v.value),v.value=null),d.value&&C()}function $(u){d.value=!0,o.value=u,ne("長按拖拽模式")}function C(){d.value=!1,o.value=-1,ne("拖拽結束")}function m(u,f){const T=Math.round(f/80);return Math.max(0,Math.min(c.value.length-1,u+T))}return ee(()=>{}),(u,f)=>(W(),j("div",Sn,[y("div",{class:"stock-list",ref_key:"stockListRef",ref:a},[(W(!0),j(ge,null,me(c.value,(w,T)=>(W(),j("div",{key:w.id,class:G(["stock-row",{"is-dragging":o.value===T}]),onTouchstart:L=>H(L,T),onTouchmove:A,onTouchend:g,onContextmenu:f[0]||(f[0]=Ct(()=>{},["prevent"]))},[b(Y(Jt),{"left-width":120,onClickLeft:I},{left:K(()=>[y("div",_n,[b(Y(Ee),{type:"primary",size:"small",class:"action-btn buy-btn",onClick:L=>z(w)},{default:K(()=>f[1]||(f[1]=[Me(" 交 易 ",-1)])),_:2,__:[1]},1032,["onClick"]),b(Y(Ee),{type:"warning",size:"small",class:"action-btn strategy-btn",onClick:L=>V(w)},{default:K(()=>f[2]||(f[2]=[Me(" 策 略 ",-1)])),_:2,__:[2]},1032,["onClick"])])]),default:K(()=>[y("div",Tn,[y("div",Dn,[y("div",Pn,E(w.name),1),y("div",In,E(w.code),1),y("div",{class:G(["price",x(w.change)])},E(w.price),3),y("div",{class:G(["change",x(w.change)])},E(w.change>0?"+":"")+E(w.change)+" ("+E(w.changePercent)+"%) ",3)]),y("div",Bn,[b(Y(Mt),{"show-indicators":!1,loop:!1,autoplay:0,onChange:L=>r(L,T)},{default:K(()=>[b(Y(Oe),{class:"indicator-content"},{default:K(()=>[y("div",$n,[y("div",Mn,E(w.weeklyKD),1),y("div",{class:G(["kd-trend",l(w.weeklyKD)])},E(s(w.weeklyKD)),3)])]),_:2},1024),b(Y(Oe),{class:"indicator-content"},{default:K(()=>[y("div",En,[y("div",An,E(w.rsi),1),y("div",{class:G(["rsi-trend",k(w.rsi)])},E(S(w.rsi)),3)])]),_:2},1024)]),_:2},1032,["onChange"])])])]),_:2},1024)],42,Cn))),128)),f[3]||(f[3]=y("br",null,null,-1)),f[4]||(f[4]=y("br",null,null,-1)),f[5]||(f[5]=y("br",null,null,-1)),f[6]||(f[6]=y("br",null,null,-1)),f[7]||(f[7]=y("br",null,null,-1)),f[8]||(f[8]=y("br",null,null,-1))],512),b(Y(Kt),{axis:"xy",magnetic:"x",gap:{x:20,y:80},icon:"plus",style:{"--van-floating-bubble-size":"56px","--van-floating-bubble-background":"#ffe066","--van-floating-bubble-icon-size":"22px","--van-floating-bubble-color":"#322b0d"},onClick:p},{default:K(()=>f[9]||(f[9]=[y("div",{class:"bubble-content"},[y("span",{class:"bubble-label",style:{color:"#322b0d"}},"新增")],-1)])),_:1,__:[9]}),b(kn)]))}},Ln=St(On,[["__scopeId","data-v-fb819dc6"]]);export{Ln as default};
