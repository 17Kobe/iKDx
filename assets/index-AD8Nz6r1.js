import{E as le,r as k,b as Oe,H as Qe,w as ie,d as p,f as r,G as Te,T as Ee,e as Pe,v as Le,m as X,c as K,o as Re,a as pe,F as et,n as Q,K as Ae,D as tt,B as nt}from"./index-B_U1_LjV.js";import{v as at,x as ot,y as Be,z as lt,e as $,t as M,f as H,n as A,A as it,B as rt,c as ee,u as se,C as ct,q as L,w as te,m as B,I as Y,i as st,D as ut,E as dt,k as ft,a as he,F as vt,G as gt,H as me,J as ht,p as be}from"./index-ALnLekCr.js";function ye(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function _e(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}function Ve(e){ye(window,e),ye(document.body,e)}const mt=at();function bt(){mt&&Ve(_e())}const yt=e=>e.stopPropagation();function U(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&yt(e)}const{width:rn,height:cn}=ot(),It="van-hairline",sn=`${It}--surround`,Ct="van-haptics-feedback",St=Symbol("van-form"),Ie=5;function kt(e,{args:t=[],done:a,canceled:i,error:o}){if(e){const l=e.apply(null,t);Be(l)?l.then(h=>{h?a():i&&i()}).catch(o||lt):l?a():i&&i()}else a()}const wt=Symbol();function ue(e){const t=le();t&&$(t.proxy,e)}const xt={to:[String,Object],url:String,replace:Boolean};function Ot({to:e,url:t,replace:a,$router:i}){e&&i?i[a?"replace":"push"](e):t&&(a?location.replace(t):location.href=t)}function Tt(){const e=le().proxy;return()=>Ot(e)}let Et=2e3;const Pt=()=>++Et,De={show:Boolean,zIndex:A,overlay:M,duration:A,teleport:[String,Object],lockScroll:M,lazyRender:M,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:H,transitionAppear:Boolean,closeOnClickOverlay:M},un=Object.keys(De);function Lt(e,t){return e>t?"horizontal":t>e?"vertical":""}function Rt(){const e=k(0),t=k(0),a=k(0),i=k(0),o=k(0),l=k(0),h=k(""),v=k(!0),c=()=>h.value==="vertical",m=()=>h.value==="horizontal",d=()=>{a.value=0,i.value=0,o.value=0,l.value=0,h.value="",v.value=!0};return{move:I=>{const w=I.touches[0];a.value=(w.clientX<0?0:w.clientX)-e.value,i.value=w.clientY-t.value,o.value=Math.abs(a.value),l.value=Math.abs(i.value);const y=10;(!h.value||o.value<y&&l.value<y)&&(h.value=Lt(o.value,l.value)),v.value&&(o.value>Ie||l.value>Ie)&&(v.value=!1)},start:I=>{d(),e.value=I.touches[0].clientX,t.value=I.touches[0].clientY},reset:d,startX:e,startY:t,deltaX:a,deltaY:i,offsetX:o,offsetY:l,direction:h,isVertical:c,isHorizontal:m,isTap:v}}let Z=0;const Ce="van-overflow-hidden";function At(e,t){const a=Rt(),i="01",o="10",l=d=>{a.move(d);const x=a.deltaY.value>0?o:i,E=rt(d.target,e.value),{scrollHeight:I,offsetHeight:w,scrollTop:y}=E;let C="11";y===0?C=w>=I?"00":"01":y+w>=I&&(C="10"),C!=="11"&&a.isVertical()&&!(parseInt(C,2)&parseInt(x,2))&&U(d,!0)},h=()=>{document.addEventListener("touchstart",a.start),document.addEventListener("touchmove",l,{passive:!1}),Z||document.body.classList.add(Ce),Z++},v=()=>{Z&&(document.removeEventListener("touchstart",a.start),document.removeEventListener("touchmove",l),Z--,Z||document.body.classList.remove(Ce))},c=()=>t()&&h(),m=()=>t()&&v();it(c),Oe(m),Qe(m),ie(t,d=>{d?h():v()})}function ze(e){const t=k(!1);return ie(e,a=>{a&&(t.value=a)},{immediate:!0}),a=>()=>t.value?a():null}const Se=()=>{var e;const{scopeId:t}=((e=le())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[Bt,_t]=ee("overlay"),Vt={show:Boolean,zIndex:A,duration:A,className:H,lockScroll:M,lazyRender:M,customStyle:Object,teleport:[String,Object]};var Dt=p({name:Bt,inheritAttrs:!1,props:Vt,setup(e,{attrs:t,slots:a}){const i=k(),o=ze(()=>e.show||!e.lazyRender),l=v=>{e.lockScroll&&U(v,!0)},h=o(()=>{var v;const c=$(ct(e.zIndex),e.customStyle);return L(e.duration)&&(c.animationDuration=`${e.duration}s`),Pe(r("div",X({ref:i,style:c,class:[_t(),e.className]},t),[(v=a.default)==null?void 0:v.call(a)]),[[Le,e.show]])});return se("touchmove",l,{target:i}),()=>{const v=r(Te,{name:"van-fade",appear:!0},{default:h});return e.teleport?r(Ee,{to:e.teleport},{default:()=>[v]}):v}}});const zt=te(Dt),Mt=$({},De,{round:Boolean,position:B("center"),closeIcon:B("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:B("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[$t,ke]=ee("popup");var Nt=p({name:$t,inheritAttrs:!1,props:Mt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:a,slots:i}){let o,l;const h=k(),v=k(),c=ze(()=>e.show||!e.lazyRender),m=K(()=>{const g={zIndex:h.value};if(L(e.duration)){const O=e.position==="center"?"animationDuration":"transitionDuration";g[O]=`${e.duration}s`}return g}),d=()=>{o||(o=!0,h.value=e.zIndex!==void 0?+e.zIndex:Pt(),t("open"))},x=()=>{o&&kt(e.beforeClose,{done(){o=!1,t("close"),t("update:show",!1)}})},E=g=>{t("clickOverlay",g),e.closeOnClickOverlay&&x()},I=()=>{if(e.overlay){const g=$({show:e.show,class:e.overlayClass,zIndex:h.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},e.overlayProps);return r(zt,X(g,Se(),{onClick:E}),{default:i["overlay-content"]})}},w=g=>{t("clickCloseIcon",g),x()},y=()=>{if(e.closeable)return r(Y,{role:"button",tabindex:0,name:e.closeIcon,class:[ke("close-icon",e.closeIconPosition),Ct],classPrefix:e.iconPrefix,onClick:w},null)};let C;const _=()=>{C&&clearTimeout(C),C=setTimeout(()=>{t("opened")})},N=()=>t("closed"),G=g=>t("keydown",g),D=c(()=>{var g;const{destroyOnClose:O,round:z,position:W,safeAreaInsetTop:re,safeAreaInsetBottom:ne,show:ae}=e;if(!(!ae&&O))return Pe(r("div",X({ref:v,style:m.value,role:"dialog",tabindex:0,class:[ke({round:z,[W]:W}),{"van-safe-area-top":re,"van-safe-area-bottom":ne}],onKeydown:G},a,Se()),[(g=i.default)==null?void 0:g.call(i),y()]),[[Le,ae]])}),f=()=>{const{position:g,transition:O,transitionAppear:z}=e,W=g==="center"?"van-fade":`van-popup-slide-${g}`;return r(Te,{name:O||W,appear:z,onAfterEnter:_,onAfterLeave:N},{default:D})};return ie(()=>e.show,g=>{g&&!o&&(d(),a.tabindex===0&&Q(()=>{var O;(O=v.value)==null||O.focus()})),!g&&o&&(o=!1,t("close"))}),ue({popupRef:v}),At(v,()=>e.show&&e.lockScroll),se("popstate",()=>{e.closeOnPopstate&&(x(),l=!1)}),Re(()=>{e.show&&d()}),pe(()=>{l&&(t("update:show",!0),l=!1)}),Oe(()=>{e.show&&e.teleport&&(x(),l=!0)}),Ae(wt,()=>e.show),()=>e.teleport?r(Ee,{to:e.teleport},{default:()=>[I(),f()]}):r(et,null,[I(),f()])}});const dn=te(Nt);let Ft=0;function Me(){const e=le(),{name:t="unknown"}=e?.type||{};return`${t}-${++Ft}`}const[jt,q]=ee("cell"),$e={tag:B("div"),icon:String,size:String,title:A,value:A,label:A,center:Boolean,isLink:Boolean,border:M,iconPrefix:String,valueClass:H,labelClass:H,titleClass:H,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},Kt=$({},$e,xt);var Wt=p({name:jt,props:Kt,setup(e,{slots:t}){const a=Tt(),i=()=>{if(t.label||L(e.label))return r("div",{class:[q("label"),e.labelClass]},[t.label?t.label():e.label])},o=()=>{var c;if(t.title||L(e.title)){const m=(c=t.title)==null?void 0:c.call(t);return Array.isArray(m)&&m.length===0?void 0:r("div",{class:[q("title"),e.titleClass],style:e.titleStyle},[m||r("span",null,[e.title]),i()])}},l=()=>{const c=t.value||t.default;if(c||L(e.value))return r("div",{class:[q("value"),e.valueClass]},[c?c():r("span",null,[e.value])])},h=()=>{if(t.icon)return t.icon();if(e.icon)return r(Y,{name:e.icon,class:q("left-icon"),classPrefix:e.iconPrefix},null)},v=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const c=e.arrowDirection&&e.arrowDirection!=="right"?`arrow-${e.arrowDirection}`:"arrow";return r(Y,{name:c,class:q("right-icon")},null)}};return()=>{var c;const{tag:m,size:d,center:x,border:E,isLink:I,required:w}=e,y=(c=e.clickable)!=null?c:I,C={center:x,required:!!w,clickable:y,borderless:!E};return d&&(C[d]=!!d),r(m,{class:q(C),role:y?"button":void 0,tabindex:y?0:void 0,onClick:a},{default:()=>{var _;return[h(),o(),l(),v(),(_=t.extra)==null?void 0:_.call(t)]}})}}});const qt=te(Wt);function Ne(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function Ht(e,t){if(Ne(e)){if(t.required)return!1;if(t.validateEmpty===!1)return!0}return!(t.pattern&&!t.pattern.test(String(e)))}function Yt(e,t){return new Promise(a=>{const i=t.validator(e,t);if(Be(i)){i.then(a);return}a(i)})}function we(e,t){const{message:a}=t;return ut(a)?a(e,t):a||""}function Ut({target:e}){e.composing=!0}function xe({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function Xt(e,t){const a=_e();e.style.height="auto";let i=e.scrollHeight;if(st(t)){const{maxHeight:o,minHeight:l}=t;o!==void 0&&(i=Math.min(i,o)),l!==void 0&&(i=Math.max(i,l))}i&&(e.style.height=`${i}px`,Ve(a))}function Gt(e,t){return e==="number"&&(e="text",t??(t="decimal")),e==="digit"&&(e="tel",t??(t="numeric")),{type:e,inputmode:t}}function V(e){return[...e].length}function ce(e,t){return[...e].slice(0,t).join("")}const[Zt,T]=ee("field"),de={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:A,max:Number,min:Number,formatter:Function,clearIcon:B("clear"),modelValue:dt(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:B("focus"),formatTrigger:B("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},Jt=$({},$e,de,{rows:A,type:B("text"),rules:Array,autosize:[Boolean,Object],labelWidth:A,labelClass:H,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Qt=p({name:Zt,props:Jt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:a}){const i=Me(),o=tt({status:"unvalidated",focused:!1,validateMessage:""}),l=k(),h=k(),v=k(),{parent:c}=ft(St),m=()=>{var n;return String((n=e.modelValue)!=null?n:"")},d=n=>{if(L(e[n]))return e[n];if(c&&L(c.props[n]))return c.props[n]},x=K(()=>{const n=d("readonly");if(e.clearable&&!n){const s=m()!=="",u=e.clearTrigger==="always"||e.clearTrigger==="focus"&&o.focused;return s&&u}return!1}),E=K(()=>v.value&&a.input?v.value():e.modelValue),I=K(()=>{var n;const s=d("required");return s==="auto"?(n=e.rules)==null?void 0:n.some(u=>u.required):s}),w=n=>n.reduce((s,u)=>s.then(()=>{if(o.status==="failed")return;let{value:b}=E;if(u.formatter&&(b=u.formatter(b,u)),!Ht(b,u)){o.status="failed",o.validateMessage=we(b,u);return}if(u.validator)return Ne(b)&&u.validateEmpty===!1?void 0:Yt(b,u).then(S=>{S&&typeof S=="string"?(o.status="failed",o.validateMessage=S):S===!1&&(o.status="failed",o.validateMessage=we(b,u))})}),Promise.resolve()),y=()=>{o.status="unvalidated",o.validateMessage=""},C=()=>t("endValidate",{status:o.status,message:o.validateMessage}),_=(n=e.rules)=>new Promise(s=>{y(),n?(t("startValidate"),w(n).then(()=>{o.status==="failed"?(s({name:e.name,message:o.validateMessage}),C()):(o.status="passed",s(),C())})):s()}),N=n=>{if(c&&e.rules){const{validateTrigger:s}=c.props,u=me(s).includes(n),b=e.rules.filter(S=>S.trigger?me(S.trigger).includes(n):u);b.length&&_(b)}},G=n=>{var s;const{maxlength:u}=e;if(L(u)&&V(n)>+u){const b=m();if(b&&V(b)===+u)return b;const S=(s=l.value)==null?void 0:s.selectionEnd;if(o.focused&&S){const F=[...n],j=F.length-+u;return F.splice(S-j,j),F.join("")}return ce(n,+u)}return n},D=(n,s="onChange")=>{var u,b;const S=n;n=G(n);const F=V(S)-V(n);if(e.type==="number"||e.type==="digit"){const R=e.type==="number";if(n=vt(n,R,R),s==="onBlur"&&n!==""&&(e.min!==void 0||e.max!==void 0)){const P=gt(+n,(u=e.min)!=null?u:-1/0,(b=e.max)!=null?b:1/0);+n!==P&&(n=P.toString())}}let j=0;if(e.formatter&&s===e.formatTrigger){const{formatter:R,maxlength:P}=e;if(n=R(n),L(P)&&V(n)>+P&&(n=ce(n,+P)),l.value&&o.focused){const{selectionEnd:oe}=l.value,ge=ce(S,oe);j=V(R(ge))-V(ge)}}if(l.value&&l.value.value!==n)if(o.focused){let{selectionStart:R,selectionEnd:P}=l.value;if(l.value.value=n,L(R)&&L(P)){const oe=V(n);F?(R-=F,P-=F):j&&(R+=j,P+=j),l.value.setSelectionRange(Math.min(R,oe),Math.min(P,oe))}}else l.value.value=n;n!==e.modelValue&&t("update:modelValue",n)},f=n=>{n.target.composing||D(n.target.value)},g=()=>{var n;return(n=l.value)==null?void 0:n.blur()},O=()=>{var n;return(n=l.value)==null?void 0:n.focus()},z=()=>{const n=l.value;e.type==="textarea"&&e.autosize&&n&&Xt(n,e.autosize)},W=n=>{o.focused=!0,t("focus",n),Q(z),d("readonly")&&g()},re=n=>{o.focused=!1,D(m(),"onBlur"),t("blur",n),!d("readonly")&&(N("onBlur"),Q(z),bt())},ne=n=>t("clickInput",n),ae=n=>t("clickLeftIcon",n),Fe=n=>t("clickRightIcon",n),je=n=>{U(n),t("update:modelValue",""),t("clear",n)},fe=K(()=>{if(typeof e.error=="boolean")return e.error;if(c&&c.props.showError&&o.status==="failed")return!0}),Ke=K(()=>{const n=d("labelWidth"),s=d("labelAlign");if(n&&s!=="top")return{width:he(n)}}),We=n=>{n.keyCode===13&&(!(c&&c.props.submitOnEnter)&&e.type!=="textarea"&&U(n),e.type==="search"&&g()),t("keypress",n)},ve=()=>e.id||`${i}-input`,qe=()=>o.status,He=()=>{const n=T("control",[d("inputAlign"),{error:fe.value,custom:!!a.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(a.input)return r("div",{class:n,onClick:ne},[a.input()]);const s={id:ve(),ref:l,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:n,disabled:d("disabled"),readonly:d("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${i}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:re,onFocus:W,onInput:f,onClick:ne,onChange:xe,onKeypress:We,onCompositionend:xe,onCompositionstart:Ut};return e.type==="textarea"?r("textarea",X(s,{inputmode:e.inputmode}),null):r("input",X(Gt(e.type,e.inputmode),s),null)},Ye=()=>{const n=a["left-icon"];if(e.leftIcon||n)return r("div",{class:T("left-icon"),onClick:ae},[n?n():r(Y,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Ue=()=>{const n=a["right-icon"];if(e.rightIcon||n)return r("div",{class:T("right-icon"),onClick:Fe},[n?n():r(Y,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Xe=()=>{if(e.showWordLimit&&e.maxlength){const n=V(m());return r("div",{class:T("word-limit")},[r("span",{class:T("word-num")},[n]),nt("/"),e.maxlength])}},Ge=()=>{if(c&&c.props.showErrorMessage===!1)return;const n=e.errorMessage||o.validateMessage;if(n){const s=a["error-message"],u=d("errorMessageAlign");return r("div",{class:T("error-message",u)},[s?s({message:n}):n])}},Ze=()=>{const n=d("labelWidth"),s=d("labelAlign"),u=d("colon")?":":"";if(a.label)return[a.label(),u];if(e.label)return r("label",{id:`${i}-label`,for:a.input?void 0:ve(),"data-allow-mismatch":"attribute",onClick:b=>{U(b),O()},style:s==="top"&&n?{width:he(n)}:void 0},[e.label+u])},Je=()=>[r("div",{class:T("body")},[He(),x.value&&r(Y,{ref:h,name:e.clearIcon,class:T("clear")},null),Ue(),a.button&&r("div",{class:T("button")},[a.button()])]),Xe(),Ge()];return ue({blur:g,focus:O,validate:_,formValue:E,resetValidation:y,getValidationStatus:qe}),Ae(ht,{customValue:v,resetValidation:y,validateWithTrigger:N}),ie(()=>e.modelValue,()=>{D(m()),y(),N("onChange"),Q(z)}),Re(()=>{D(m(),e.formatTrigger),Q(z)}),se("touchstart",je,{target:K(()=>{var n;return(n=h.value)==null?void 0:n.$el})}),()=>{const n=d("disabled"),s=d("labelAlign"),u=Ye(),b=()=>{const S=Ze();return s==="top"?[u,S].filter(Boolean):S||[]};return r(qt,{size:e.size,class:T({error:fe.value,disabled:n,[`label-${s}`]:s}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:Ke.value,valueClass:T("value"),titleClass:[T("label",[s,{required:I.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:u&&s!=="top"?()=>u:null,title:b,value:Je,extra:a.extra})}}});const pt=te(Qt),[en,J,tn]=ee("search"),nn=$({},de,{label:String,shape:B("square"),leftIcon:B("search"),clearable:M,actionText:String,background:String,showAction:Boolean});var an=p({name:en,props:nn,emits:["blur","focus","clear","search","cancel","clickInput","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:t,slots:a,attrs:i}){const o=Me(),l=k(),h=()=>{a.action||(t("update:modelValue",""),t("cancel"))},v=f=>{f.keyCode===13&&(U(f),t("search",e.modelValue))},c=()=>e.id||`${o}-input`,m=()=>{if(a.label||e.label)return r("label",{class:J("label"),for:c(),"data-allow-mismatch":"attribute"},[a.label?a.label():e.label])},d=()=>{if(e.showAction){const f=e.actionText||tn("cancel");return r("div",{class:J("action"),role:"button",tabindex:0,onClick:h},[a.action?a.action():f])}},x=()=>{var f;return(f=l.value)==null?void 0:f.blur()},E=()=>{var f;return(f=l.value)==null?void 0:f.focus()},I=f=>t("blur",f),w=f=>t("focus",f),y=f=>t("clear",f),C=f=>t("clickInput",f),_=f=>t("clickLeftIcon",f),N=f=>t("clickRightIcon",f),G=Object.keys(de),D=()=>{const f=$({},i,be(e,G),{id:c()}),g=O=>t("update:modelValue",O);return r(pt,X({ref:l,type:"search",class:J("field",{"with-message":f.errorMessage}),border:!1,onBlur:I,onFocus:w,onClear:y,onKeypress:v,onClickInput:C,onClickLeftIcon:_,onClickRightIcon:N,"onUpdate:modelValue":g},f),be(a,["left-icon","right-icon"]))};return ue({focus:E,blur:x}),()=>{var f;return r("div",{class:J({"show-action":e.showAction}),style:{background:e.background}},[(f=a.left)==null?void 0:f.call(a),r("div",{class:J("content",e.shape)},[m(),D()]),d()])}}});const fn=te(an);export{sn as B,Ct as H,dn as P,fn as S,rn as a,De as b,Tt as c,U as d,ue as e,un as p,xt as r,Rt as u,cn as w};
