import{d as W,V as O,f as A,v as t,a7 as P,E as U,at as Z,au as j,J as K,m as q,av as J,aj as B,aq as Y,I as Q,h as E,j as I,aw as V,al as D,a5 as _,a1 as p,a3 as y,a8 as R,a0 as z,a6 as G,a2 as v,C as X,a9 as T,aa as F,ak as C,ax as $,Y as tt,a4 as M}from"./index-DjD8zt9v.js";import{u as et}from"./index-C2vRLVN4.js";import{C as at}from"./index-QLN3dGJf.js";import{T as L,a as rt}from"./index-CQ8tfuwf.js";const[nt,N]=A("cell-group"),lt={title:String,inset:Boolean,border:O};var it=W({name:nt,inheritAttrs:!1,props:lt,setup(c,{slots:l,attrs:h}){const e=()=>{var s;return t("div",U({class:[N({inset:c.inset}),{[j]:c.border&&!c.inset}]},h,Z()),[(s=l.default)==null?void 0:s.call(l)])},u=()=>t("div",{class:N("title",{inset:c.inset})},[l.title?l.title():c.title]);return()=>c.title||l.title?t(P,null,[u(),e()]):e()}});const ot=K(it),[st,S]=A("empty"),ct={image:q("default"),imageSize:[Number,String,Array],description:String};var dt=W({name:st,props:ct,setup(c,{slots:l}){const h=()=>{const g=l.description?l.description():c.description;if(g)return t("p",{class:S("description")},[g])},e=()=>{if(l.default)return t("div",{class:S("bottom")},[l.default()])},u=et(),s=g=>`${u}-${g}`,i=g=>`url(#${s(g)})`,d=(g,k,H)=>t("stop",{"stop-color":g,offset:`${k}%`,"stop-opacity":H},null),f=(g,k)=>[d(g,0),d(k,100)],r=g=>[t("defs",null,[t("radialGradient",{id:s(g),cx:"50%",cy:"54%",fx:"50%",fy:"54%",r:"297%",gradientTransform:"matrix(-.16 0 0 -.33 .58 .72)","data-allow-mismatch":"attribute"},[d("#EBEDF0",0),d("#F2F3F5",100,.3)])]),t("ellipse",{fill:i(g),opacity:".8",cx:"80",cy:"140",rx:"46",ry:"8","data-allow-mismatch":"attribute"},null)],a=()=>[t("defs",null,[t("linearGradient",{id:s("a"),x1:"64%",y1:"100%",x2:"64%","data-allow-mismatch":"attribute"},[d("#FFF",0,.5),d("#F2F3F5",100)])]),t("g",{opacity:".8","data-allow-mismatch":"children"},[t("path",{d:"M36 131V53H16v20H2v58h34z",fill:i("a")},null),t("path",{d:"M123 15h22v14h9v77h-31V15z",fill:i("a")},null)])],o=()=>[t("defs",null,[t("linearGradient",{id:s("b"),x1:"64%",y1:"97%",x2:"64%",y2:"0%","data-allow-mismatch":"attribute"},[d("#F2F3F5",0,.3),d("#F2F3F5",100)])]),t("g",{opacity:".8","data-allow-mismatch":"children"},[t("path",{d:"M87 6c3 0 7 3 8 6a8 8 0 1 1-1 16H80a7 7 0 0 1-8-6c0-4 3-7 6-7 0-5 4-9 9-9Z",fill:i("b")},null),t("path",{d:"M19 23c2 0 3 1 4 3 2 0 4 2 4 4a4 4 0 0 1-4 3v1h-7v-1l-1 1c-2 0-3-2-3-4 0-1 1-3 3-3 0-2 2-4 4-4Z",fill:i("b")},null)])],b=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",{"data-allow-mismatch":"children"},[t("linearGradient",{id:s(1),x1:"64%",y1:"100%",x2:"64%"},[d("#FFF",0,.5),d("#F2F3F5",100)]),t("linearGradient",{id:s(2),x1:"50%",x2:"50%",y2:"84%"},[d("#EBEDF0",0),d("#DCDEE0",100,0)]),t("linearGradient",{id:s(3),x1:"100%",x2:"100%",y2:"100%"},[f("#EAEDF0","#DCDEE0")]),t("radialGradient",{id:s(4),cx:"50%",cy:"0%",fx:"50%",fy:"0%",r:"100%",gradientTransform:"matrix(0 1 -.54 0 .5 -.5)"},[d("#EBEDF0",0),d("#FFF",100,0)])]),t("g",{fill:"none"},[a(),t("path",{fill:i(4),d:"M0 139h160v21H0z","data-allow-mismatch":"attribute"},null),t("path",{d:"M80 54a7 7 0 0 1 3 13v27l-2 2h-2a2 2 0 0 1-2-2V67a7 7 0 0 1 3-13z",fill:i(2),"data-allow-mismatch":"attribute"},null),t("g",{opacity:".6","stroke-linecap":"round","stroke-width":"7","data-allow-mismatch":"children"},[t("path",{d:"M64 47a19 19 0 0 0-5 13c0 5 2 10 5 13",stroke:i(3)},null),t("path",{d:"M53 36a34 34 0 0 0 0 48",stroke:i(3)},null),t("path",{d:"M95 73a19 19 0 0 0 6-13c0-5-2-9-6-13",stroke:i(3)},null),t("path",{d:"M106 84a34 34 0 0 0 0-48",stroke:i(3)},null)]),t("g",{transform:"translate(31 105)"},[t("rect",{fill:"#EBEDF0",width:"98",height:"34",rx:"2"},null),t("rect",{fill:"#FFF",x:"9",y:"8",width:"80",height:"18",rx:"1.1"},null),t("rect",{fill:"#EBEDF0",x:"15",y:"12",width:"18",height:"6",rx:"1.1"},null)])])]),n=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",{"data-allow-mismatch":"children"},[t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(5)},[f("#F2F3F5","#DCDEE0")]),t("linearGradient",{x1:"95%",y1:"48%",x2:"5.5%",y2:"51%",id:s(6)},[f("#EAEDF1","#DCDEE0")]),t("linearGradient",{y1:"45%",x2:"100%",y2:"54%",id:s(7)},[f("#EAEDF1","#DCDEE0")])]),a(),o(),t("g",{transform:"translate(36 50)",fill:"none"},[t("g",{transform:"translate(8)"},[t("rect",{fill:"#EBEDF0",opacity:".6",x:"38",y:"13",width:"36",height:"53",rx:"2"},null),t("rect",{fill:i(5),width:"64",height:"66",rx:"2","data-allow-mismatch":"attribute"},null),t("rect",{fill:"#FFF",x:"6",y:"6",width:"52",height:"55",rx:"1"},null),t("g",{transform:"translate(15 17)",fill:i(6),"data-allow-mismatch":"attribute"},[t("rect",{width:"34",height:"6",rx:"1"},null),t("path",{d:"M0 14h34v6H0z"},null),t("rect",{y:"28",width:"34",height:"6",rx:"1"},null)])]),t("rect",{fill:i(7),y:"61",width:"88",height:"28",rx:"1","data-allow-mismatch":"attribute"},null),t("rect",{fill:"#F7F8FA",x:"29",y:"72",width:"30",height:"6",rx:"1"},null)])]),m=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",null,[t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(8),"data-allow-mismatch":"attribute"},[f("#EAEDF1","#DCDEE0")])]),a(),o(),r("c"),t("path",{d:"m59 60 21 21 21-21h3l9 9v3L92 93l21 21v3l-9 9h-3l-21-21-21 21h-3l-9-9v-3l21-21-21-21v-3l9-9h3Z",fill:i(8),"data-allow-mismatch":"attribute"},null)]),x=()=>t("svg",{viewBox:"0 0 160 160"},[t("defs",{"data-allow-mismatch":"children"},[t("linearGradient",{x1:"50%",y1:"100%",x2:"50%",id:s(9)},[f("#EEE","#D8D8D8")]),t("linearGradient",{x1:"100%",y1:"50%",y2:"50%",id:s(10)},[f("#F2F3F5","#DCDEE0")]),t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(11)},[f("#F2F3F5","#DCDEE0")]),t("linearGradient",{x1:"50%",x2:"50%",y2:"100%",id:s(12)},[f("#FFF","#F7F8FA")])]),a(),o(),r("d"),t("g",{transform:"rotate(-45 113 -4)",fill:"none","data-allow-mismatch":"children"},[t("rect",{fill:i(9),x:"24",y:"52.8",width:"5.8",height:"19",rx:"1"},null),t("rect",{fill:i(10),x:"22.1",y:"67.3",width:"9.9",height:"28",rx:"1"},null),t("circle",{stroke:i(11),"stroke-width":"8",cx:"27",cy:"27",r:"27"},null),t("circle",{fill:i(12),cx:"27",cy:"27",r:"16"},null),t("path",{d:"M37 7c-8 0-15 5-16 12",stroke:i(11),"stroke-width":"3",opacity:".5","stroke-linecap":"round",transform:"rotate(45 29 13)"},null)])]),w=()=>{var g;if(l.image)return l.image();const k={error:m,search:x,network:b,default:n};return((g=k[c.image])==null?void 0:g.call(k))||t("img",{src:c.image},null)};return()=>t("div",{class:S()},[t("div",{class:S("image"),style:J(c.imageSize)},[w()]),h(),e()])}});const ut=K(dt),ht={name:"VantTable",components:{VanIcon:Q,VanEmpty:ut,VanLoading:Y},props:{columns:{type:Array,required:!0},data:{type:Array,default:()=>[]},height:{type:String,default:"400px"},loading:{type:Boolean,default:!1},rowKey:{type:[String,Function],default:"id"}},emits:["row-click","sort-change"],setup(c,{emit:l}){const h=E(null),e=E(null),u=E(null),s=(n,m)=>typeof c.rowKey=="function"?c.rowKey(n,m):n[c.rowKey]||m,i=(n,m)=>V.get(n,m),d=(n,m)=>{if(n==null)return"-";switch(m.type){case"number":return typeof n=="number"?n.toLocaleString("zh-TW",{minimumFractionDigits:m.decimal||0}):n;case"percent":return typeof n=="number"?`${(n*100).toFixed(m.decimal||2)}%`:n;case"currency":return typeof n=="number"?`$${n.toLocaleString("zh-TW",{minimumFractionDigits:m.decimal||0})}`:n;default:return m.formatter?m.formatter(n):n}},f=n=>{n.sortable&&(e.value===n.key?u.value==="asc"?u.value="desc":u.value==="desc"?(u.value=null,e.value=null):u.value="asc":(e.value=n.key,u.value="asc"),l("sort-change",{key:e.value,order:u.value,column:n}))},r=n=>e.value!==n?"exchange":u.value==="asc"?"arrow-up":"arrow-down",a=I(()=>!e.value||!u.value?c.data:V.orderBy(c.data,[e.value],[u.value])),o=(n,m)=>{l("row-click",n,m)},b=V.throttle(()=>{},16);return{tableBodyRef:h,sortKey:e,sortOrder:u,sortedData:a,getRowKey:s,getValue:i,formatValue:d,handleSort:f,getSortIcon:r,handleRowClick:o,handleScroll:b}}},mt={class:"vant-table-wrapper"},ft={class:"table-header"},gt={class:"header-row"},yt=["onClick"],pt={class:"cell-content"},_t=["onClick"],vt={class:"cell-content"},xt={key:1,class:"table-loading"};function wt(c,l,h,e,u,s){const i=D("van-icon"),d=D("van-empty"),f=D("van-loading");return p(),_("div",mt,[y("div",ft,[y("div",gt,[(p(!0),_(P,null,R(h.columns,r=>(p(),_("div",{key:r.key,class:"header-cell",style:T({width:r.width,minWidth:r.minWidth,flexBasis:r.flex||"auto"}),onClick:a=>e.handleSort(r)},[y("span",pt,F(r.title),1),r.sortable?(p(),z(i,{key:0,name:e.getSortIcon(r.key),class:C(["sort-icon",{active:e.sortKey===r.key}])},null,8,["name","class"])):G("",!0)],12,yt))),128))])]),y("div",{ref:"tableBodyRef",class:"table-body",style:T({maxHeight:h.height}),onScroll:l[0]||(l[0]=(...r)=>e.handleScroll&&e.handleScroll(...r))},[(p(!0),_(P,null,R(e.sortedData,(r,a)=>(p(),_("div",{key:e.getRowKey(r,a),class:"table-row",onClick:o=>e.handleRowClick(r,a)},[(p(!0),_(P,null,R(h.columns,o=>(p(),_("div",{key:o.key,class:C(["body-cell",o.align?`text-${o.align}`:""]),style:T({width:o.width,minWidth:o.minWidth,flexBasis:o.flex||"auto"})},[$(c.$slots,o.key,{row:r,value:e.getValue(r,o.key),index:a,column:o},()=>[y("span",vt,F(e.formatValue(e.getValue(r,o.key),o)),1)])],6))),128))],8,_t))),128)),e.sortedData.length===0&&!h.loading?(p(),z(d,{key:0,description:"暫無資料",class:"table-empty"})):G("",!0),h.loading?(p(),_("div",xt,[t(f,{size:"24px"},{default:v(()=>l[1]||(l[1]=[X("載入中...",-1)])),_:1,__:[1]})])):G("",!0)],36)])}const Ft=B(ht,[["render",wt],["__scopeId","data-v-79091929"]]),Ct={name:"PriceDiff",components:{VantTable:Ft,VanCell:at,VanCellGroup:ot},setup(){const c=tt(),l=E(!1),h=[{key:"name",title:"名稱",sortable:!0,flex:"1.5",minWidth:"100px"},{key:"changePercent",title:"漲跌幅",sortable:!0,align:"right",flex:"1",minWidth:"80px"},{key:"principal",title:"本金",sortable:!0,align:"right",flex:"1.2",minWidth:"90px"},{key:"returnRate",title:"報酬率",sortable:!0,align:"right",flex:"1",minWidth:"80px"},{key:"priceDiff",title:"價差",sortable:!0,align:"right",flex:"1.2",minWidth:"90px"}],e=I(()=>c.userStockList?.length?c.userStockList.map(a=>{const o=(a.buyPrice||0)*(a.shares||0),n=(a.currentPrice||a.price||0)*(a.shares||0)-o,m=o>0?n/o:0,x=a.buyPrice>0?((a.currentPrice||a.price||0)-a.buyPrice)/a.buyPrice:0;return{stockCode:a.stockCode,name:a.stockName||a.name||a.stockCode||"未知股票",changePercent:x,principal:o,returnRate:m,priceDiff:n,...a}}):[]),u=I(()=>{const a=e.value,o=a.reduce((x,w)=>x+w.principal,0),b=a.reduce((x,w)=>x+w.principal+w.priceDiff,0),n=a.reduce((x,w)=>x+w.priceDiff,0),m=o>0?n/o:0;return{totalPrincipal:o,totalMarketValue:b,totalProfitLoss:n,totalReturnRate:m}});return{loading:l,tableColumns:h,stockProfitData:e,summary:u,formatPercent:a=>typeof a!="number"||isNaN(a)?"-":`${(a*100).toFixed(2)}%`,formatCurrency:a=>typeof a!="number"||isNaN(a)?"-":a.toLocaleString("zh-TW",{minimumFractionDigits:0,maximumFractionDigits:0}),getChangeClass:a=>typeof a!="number"||isNaN(a)?"":a>0?"positive":a<0?"negative":"",handleRowClick:a=>{console.log("點擊股票行：",a)},handleSortChange:a=>{console.log("排序變化：",a)}}}},bt={class:"price-diff-page"},kt={class:"profit-table-section"},Dt={class:"stock-name-cell"},Et={class:"stock-name"},St={class:"principal-amount"},Pt={class:"summary-section"};function Bt(c,l,h,e,u,s){const i=D("VantTable"),d=D("van-cell"),f=D("van-cell-group");return p(),_("div",bt,[y("div",kt,[t(i,{columns:e.tableColumns,data:e.stockProfitData,loading:e.loading,height:"calc(100vh - 160px)","row-key":"stockCode",onRowClick:e.handleRowClick,onSortChange:e.handleSortChange},{name:v(({row:r,value:a})=>[y("div",Dt,[y("div",Et,F(a||"未知股票"),1)])]),changePercent:v(({value:r})=>[y("span",{class:C(["change-percent",e.getChangeClass(r)])},F(e.formatPercent(r)),3)]),principal:v(({value:r})=>[y("span",St,F(e.formatCurrency(r)),1)]),returnRate:v(({value:r})=>[y("span",{class:C(["return-rate",e.getChangeClass(r)])},F(e.formatPercent(r)),3)]),priceDiff:v(({value:r})=>[y("span",{class:C(["price-diff",e.getChangeClass(r)])},F(e.formatCurrency(r)),3)]),_:1},8,["columns","data","loading","onRowClick","onSortChange"])]),y("div",Pt,[t(f,null,{default:v(()=>[t(d,{title:"總本金",value:e.formatCurrency(e.summary.totalPrincipal)},null,8,["value"]),t(d,{title:"總市值",value:e.formatCurrency(e.summary.totalMarketValue)},null,8,["value"]),t(d,{title:"總損益",value:e.formatCurrency(e.summary.totalProfitLoss),class:C(e.getChangeClass(e.summary.totalProfitLoss))},null,8,["value","class"]),t(d,{title:"總報酬率",value:e.formatPercent(e.summary.totalReturnRate),class:C(e.getChangeClass(e.summary.totalReturnRate))},null,8,["value","class"])]),_:1})])])}const Vt=B(Ct,[["render",Bt],["__scopeId","data-v-c5aa1acb"]]),Rt={class:"dividend-content"},Gt={__name:"Dividend",setup(c){return(l,h)=>(p(),_("div",Rt,h[0]||(h[0]=[y("h3",null,"股利內容",-1),y("p",null,"這裡是股利相關的內容",-1)])))}},Tt=B(Gt,[["__scopeId","data-v-d857dac8"]]),Mt={class:"profit-page"},It={__name:"Profit",setup(c){const l=E("price-diff"),h=e=>{console.log("切換到：",e)};return(e,u)=>(p(),_("div",Mt,[t(M(rt),{active:l.value,"onUpdate:active":u[0]||(u[0]=s=>l.value=s),swipeable:"",sticky:"",onChange:h,class:"custom-tabs"},{default:v(()=>[t(M(L),{title:"價差",name:"price-diff"},{default:v(()=>[t(Vt)]),_:1}),t(M(L),{title:"股利",name:"dividend"},{default:v(()=>[t(Tt)]),_:1})]),_:1},8,["active"])]))}},At=B(It,[["__scopeId","data-v-10f55ce1"]]);export{At as default};
