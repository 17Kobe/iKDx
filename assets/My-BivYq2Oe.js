import{d as $,K as w,n as U,c as I,j as R,o as T,aH as q,a as c,w as j,e as G,f as C,k as g,t as N,aI as A,I as L,T as P,J as E,a4 as J,Y as K,aG as Y,aJ as H,as as Q,s as X,ad as Z,aj as S,af as V,ah as t,ao as v,al as ee,am as te,at as ae,an as oe,ag as f,ai as k,X as p,au as se}from"./index-DWBRBwG1.js";import{w as D}from"./worker-pool-Cdl-1LoG.js";const[F,le]=I("radio-group"),ne={shape:String,disabled:Boolean,iconSize:U,direction:String,modelValue:w,checkedColor:String},M=Symbol(F);var ie=$({name:F,props:ne,emits:["change","update:modelValue"],setup(e,{emit:s,slots:i}){const{linkChildren:a}=R(M),d=l=>s("update:modelValue",l);return T(()=>e.modelValue,l=>s("change",l)),a({props:e,updateValue:d}),q(()=>e.modelValue),()=>{var l;return c("div",{class:le([e.direction]),role:"radiogroup"},[(l=i.default)==null?void 0:l.call(i)])}}});const de=j(ie),O={name:w,disabled:Boolean,iconSize:U,modelValue:w,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var re=$({props:G({},O,{bem:A(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:N,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:s,slots:i}){const a=C(),d=n=>{if(e.parent&&e.bindGroup)return e.parent.props[n]},l=g(()=>{if(e.parent&&e.bindGroup){const n=d("disabled")||e.disabled;if(e.role==="checkbox"){const _=d("modelValue").length,m=d("max"),h=m&&_>=+m;return n||h&&!e.checked}return n}return e.disabled}),y=g(()=>d("direction")),r=g(()=>{const n=e.checkedColor||d("checkedColor");if(n&&(e.checked||e.indeterminate)&&!l.value)return{borderColor:n,backgroundColor:n}}),o=g(()=>e.shape||d("shape")||"round"),u=n=>{const{target:_}=n,m=a.value,h=m===_||m?.contains(_);!l.value&&(h||!e.labelDisabled)&&s("toggle"),s("click",n)},b=()=>{var n,_;const{bem:m,checked:h,indeterminate:B}=e,x=e.iconSize||d("iconSize");return c("div",{ref:a,class:m("icon",[o.value,{disabled:l.value,checked:h,indeterminate:B}]),style:o.value!=="dot"?{fontSize:P(x)}:{width:P(x),height:P(x),borderColor:(n=r.value)==null?void 0:n.borderColor}},[i.icon?i.icon({checked:h,disabled:l.value}):o.value!=="dot"?c(L,{name:B?"minus":"success",style:r.value},null):c("div",{class:m("icon--dot__icon"),style:{backgroundColor:(_=r.value)==null?void 0:_.backgroundColor}},null)])},W=()=>{const{checked:n}=e;if(i.default)return c("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[i.default({checked:n,disabled:l.value})])};return()=>{const n=e.labelPosition==="left"?[W(),b()]:[b(),W()];return c("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},y.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:u},[n])}}});const ue=G({},O,{shape:String}),[ce,ve]=I("radio");var me=$({name:ce,props:ue,emits:["update:modelValue"],setup(e,{emit:s,slots:i}){const{parent:a}=E(M),d=()=>(a?a.props.modelValue:e.modelValue)===e.name,l=()=>{a?a.updateValue(e.name):s("update:modelValue",e.name)};return()=>c(re,K({bem:ve,role:"radio",parent:a,checked:d(),onToggle:l},e),J(i,["default","icon"]))}});const z=j(me),be=Y("theme",()=>{const e=C(0),s=C(!1),i=H();return T([e,i],()=>{e.value===0?s.value=i.value:e.value===1?s.value=!1:s.value=!0,document.body.classList.toggle("dark",s.value)},{immediate:!0}),{mode:e,isDark:s}}),_e={class:"worker-monitor"},ke={class:"monitor-header"},ge={class:"total-cpu"},he={class:"pool-stats"},fe={class:"pool-name"},pe={class:"pool-info"},Ce={class:"stat-item"},ye={class:"value"},Se={class:"stat-item"},Ve={class:"value busy"},xe={class:"stat-item"},Pe={class:"value queue"},ze={class:"stat-item"},we={class:"value utilization"},$e={class:"progress-bar"},We={class:"overall-stats"},Be={class:"stat-box"},De={class:"stat-value"},Ue={class:"stat-box"},Ie={class:"stat-value"},Te={class:"stat-box"},je={class:"stat-value"},Ge={__name:"WorkerMonitor",setup(e){const s=C({}),i=C(navigator.hardwareConcurrency||4),a=g(()=>Object.values(s.value).reduce((r,o)=>r+o.busyWorkers,0)),d=g(()=>Object.values(s.value).reduce((r,o)=>r+o.queuedTasks,0)),l=g(()=>{const r=Object.values(s.value);return r.length===0?0:(r.reduce((u,b)=>u+parseFloat(b.utilization),0)/r.length).toFixed(1)}),y=(r,o,u)=>{s.value={...u}};return X(()=>{D.onAllStatusChange(y),s.value=D.getAllStatus()}),Z(()=>{}),(r,o)=>(V(),S("div",_e,[t("div",ke,[o[0]||(o[0]=t("h3",null,"Worker Pool 監控",-1)),t("span",ge,"CPU 核心數: "+v(i.value),1)]),t("div",he,[(V(!0),S(ee,null,te(s.value,(u,b)=>(V(),S("div",{key:b,class:ae(["pool-card",{"pool-busy":u.busyWorkers>0}])},[t("div",fe,v(b),1),t("div",pe,[t("div",Ce,[o[1]||(o[1]=t("span",{class:"label"},"可用:",-1)),t("span",ye,v(u.availableWorkers)+"/"+v(u.totalWorkers),1)]),t("div",Se,[o[2]||(o[2]=t("span",{class:"label"},"使用中:",-1)),t("span",Ve,v(u.busyWorkers),1)]),t("div",xe,[o[3]||(o[3]=t("span",{class:"label"},"排隊:",-1)),t("span",Pe,v(u.queuedTasks),1)]),t("div",ze,[o[4]||(o[4]=t("span",{class:"label"},"使用率:",-1)),t("span",we,v(u.utilization)+"%",1)])]),t("div",$e,[t("div",{class:"progress-fill",style:oe({width:u.utilization+"%"})},null,4)])],2))),128))]),t("div",We,[t("div",Be,[t("div",De,v(a.value),1),o[5]||(o[5]=t("div",{class:"stat-label"},"總使用中",-1))]),t("div",Ue,[t("div",Ie,v(d.value),1),o[6]||(o[6]=t("div",{class:"stat-label"},"總排隊",-1))]),t("div",Te,[t("div",je,v(l.value)+"%",1),o[7]||(o[7]=t("div",{class:"stat-label"},"整體使用率",-1))])])]))}},Fe=Q(Ge,[["__scopeId","data-v-82d9b20f"]]),Me={style:{padding:"32px"}},Oe={style:{"margin-bottom":"16px"}},Re={style:{"margin-bottom":"24px"}},qe={style:{"margin-top":"24px"}},Le={__name:"My",setup(e){const s=be();return(i,a)=>{const d=se("van-button");return V(),S("div",Me,[a[7]||(a[7]=t("h2",null,"我的頁面",-1)),t("div",Oe,[c(k(de),{modelValue:k(s).mode,"onUpdate:modelValue":a[0]||(a[0]=l=>k(s).mode=l),direction:"horizontal"},{default:f(()=>[c(k(z),{name:0},{default:f(()=>a[2]||(a[2]=[p("跟隨系統",-1)])),_:1,__:[2]}),c(k(z),{name:1},{default:f(()=>a[3]||(a[3]=[p("亮",-1)])),_:1,__:[3]}),c(k(z),{name:2},{default:f(()=>a[4]||(a[4]=[p("暗",-1)])),_:1,__:[4]})]),_:1},8,["modelValue"])]),t("div",Re,[a[5]||(a[5]=p(" 目前主題：",-1)),t("b",null,v(k(s).isDark?"暗":"亮"),1)]),c(Fe),t("div",qe,[c(d,{type:"primary",size:"large",onClick:a[1]||(a[1]=l=>i.$router.push("/worker-diagnostics")),block:""},{default:f(()=>a[6]||(a[6]=[p(" 🔧 Worker 診斷工具 ",-1)])),_:1,__:[6]})])])}}};export{Le as default};
